__meteor_runtime_config__ = {
  "meteorEnv": {},
  "DDP_DEFAULT_CONNECTION_URL": "https://tuielearning.s2corp.vn/admin"
};

//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Package-scope variables */
var exports, _;

(function(){

///////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                       //
// packages/underscore/pre.js                                                                            //
//                                                                                                       //
///////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                         //
// Define an object named exports. This will cause underscore.js to put `_` as a                         // 1
// field on it, instead of in the global namespace.  See also post.js.                                   // 2
exports = {};                                                                                            // 3
                                                                                                         // 4
///////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

///////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                       //
// packages/underscore/underscore.js                                                                     //
//                                                                                                       //
///////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                         //
//     Underscore.js 1.5.2                                                                               // 1
//     http://underscorejs.org                                                                           // 2
//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors                // 3
//     Underscore may be freely distributed under the MIT license.                                       // 4
                                                                                                         // 5
(function() {                                                                                            // 6
                                                                                                         // 7
  // Baseline setup                                                                                      // 8
  // --------------                                                                                      // 9
                                                                                                         // 10
  // Establish the root object, `window` in the browser, or `exports` on the server.                     // 11
  var root = this;                                                                                       // 12
                                                                                                         // 13
  // Save the previous value of the `_` variable.                                                        // 14
  var previousUnderscore = root._;                                                                       // 15
                                                                                                         // 16
  // Establish the object that gets returned to break out of a loop iteration.                           // 17
  var breaker = {};                                                                                      // 18
                                                                                                         // 19
  // Save bytes in the minified (but not gzipped) version:                                               // 20
  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;         // 21
                                                                                                         // 22
  // Create quick reference variables for speed access to core prototypes.                               // 23
  var                                                                                                    // 24
    push             = ArrayProto.push,                                                                  // 25
    slice            = ArrayProto.slice,                                                                 // 26
    concat           = ArrayProto.concat,                                                                // 27
    toString         = ObjProto.toString,                                                                // 28
    hasOwnProperty   = ObjProto.hasOwnProperty;                                                          // 29
                                                                                                         // 30
  // All **ECMAScript 5** native function implementations that we hope to use                            // 31
  // are declared here.                                                                                  // 32
  var                                                                                                    // 33
    nativeForEach      = ArrayProto.forEach,                                                             // 34
    nativeMap          = ArrayProto.map,                                                                 // 35
    nativeReduce       = ArrayProto.reduce,                                                              // 36
    nativeReduceRight  = ArrayProto.reduceRight,                                                         // 37
    nativeFilter       = ArrayProto.filter,                                                              // 38
    nativeEvery        = ArrayProto.every,                                                               // 39
    nativeSome         = ArrayProto.some,                                                                // 40
    nativeIndexOf      = ArrayProto.indexOf,                                                             // 41
    nativeLastIndexOf  = ArrayProto.lastIndexOf,                                                         // 42
    nativeIsArray      = Array.isArray,                                                                  // 43
    nativeKeys         = Object.keys,                                                                    // 44
    nativeBind         = FuncProto.bind;                                                                 // 45
                                                                                                         // 46
  // Create a safe reference to the Underscore object for use below.                                     // 47
  var _ = function(obj) {                                                                                // 48
    if (obj instanceof _) return obj;                                                                    // 49
    if (!(this instanceof _)) return new _(obj);                                                         // 50
    this._wrapped = obj;                                                                                 // 51
  };                                                                                                     // 52
                                                                                                         // 53
  // Export the Underscore object for **Node.js**, with                                                  // 54
  // backwards-compatibility for the old `require()` API. If we're in                                    // 55
  // the browser, add `_` as a global object via a string identifier,                                    // 56
  // for Closure Compiler "advanced" mode.                                                               // 57
  if (typeof exports !== 'undefined') {                                                                  // 58
    if (typeof module !== 'undefined' && module.exports) {                                               // 59
      exports = module.exports = _;                                                                      // 60
    }                                                                                                    // 61
    exports._ = _;                                                                                       // 62
  } else {                                                                                               // 63
    root._ = _;                                                                                          // 64
  }                                                                                                      // 65
                                                                                                         // 66
  // Current version.                                                                                    // 67
  _.VERSION = '1.5.2';                                                                                   // 68
                                                                                                         // 69
  // Collection Functions                                                                                // 70
  // --------------------                                                                                // 71
                                                                                                         // 72
  // METEOR CHANGE: Define _isArguments instead of depending on                                          // 73
  // _.isArguments which is defined using each. In looksLikeArray                                        // 74
  // (which each depends on), we then use _isArguments instead of                                        // 75
  // _.isArguments.                                                                                      // 76
  var _isArguments = function (obj) {                                                                    // 77
    return toString.call(obj) === '[object Arguments]';                                                  // 78
  };                                                                                                     // 79
  // Define a fallback version of the method in browsers (ahem, IE), where                               // 80
  // there isn't any inspectable "Arguments" type.                                                       // 81
  if (!_isArguments(arguments)) {                                                                        // 82
    _isArguments = function (obj) {                                                                      // 83
      return !!(obj && hasOwnProperty.call(obj, 'callee') && typeof obj.callee === 'function');          // 84
    };                                                                                                   // 85
  }                                                                                                      // 86
                                                                                                         // 87
  // METEOR CHANGE: _.each({length: 5}) should be treated like an object, not an                         // 88
  // array. This looksLikeArray function is introduced by Meteor, and replaces                           // 89
  // all instances of `obj.length === +obj.length`.                                                      // 90
  // https://github.com/meteor/meteor/issues/594                                                         // 91
  // https://github.com/jashkenas/underscore/issues/770                                                  // 92
  var looksLikeArray = function (obj) {                                                                  // 93
    return (obj.length === +obj.length                                                                   // 94
            // _.isArguments not yet necessarily defined here                                            // 95
            && (_isArguments(obj) || obj.constructor !== Object));                                       // 96
  };                                                                                                     // 97
                                                                                                         // 98
  // The cornerstone, an `each` implementation, aka `forEach`.                                           // 99
  // Handles objects with the built-in `forEach`, arrays, and raw objects.                               // 100
  // Delegates to **ECMAScript 5**'s native `forEach` if available.                                      // 101
  var each = _.each = _.forEach = function(obj, iterator, context) {                                     // 102
    if (obj == null) return;                                                                             // 103
    if (nativeForEach && obj.forEach === nativeForEach) {                                                // 104
      obj.forEach(iterator, context);                                                                    // 105
    } else if (looksLikeArray(obj)) {                                                                    // 106
      for (var i = 0, length = obj.length; i < length; i++) {                                            // 107
        if (iterator.call(context, obj[i], i, obj) === breaker) return;                                  // 108
      }                                                                                                  // 109
    } else {                                                                                             // 110
      var keys = _.keys(obj);                                                                            // 111
      for (var i = 0, length = keys.length; i < length; i++) {                                           // 112
        if (iterator.call(context, obj[keys[i]], keys[i], obj) === breaker) return;                      // 113
      }                                                                                                  // 114
    }                                                                                                    // 115
  };                                                                                                     // 116
                                                                                                         // 117
  // Return the results of applying the iterator to each element.                                        // 118
  // Delegates to **ECMAScript 5**'s native `map` if available.                                          // 119
  _.map = _.collect = function(obj, iterator, context) {                                                 // 120
    var results = [];                                                                                    // 121
    if (obj == null) return results;                                                                     // 122
    if (nativeMap && obj.map === nativeMap) return obj.map(iterator, context);                           // 123
    each(obj, function(value, index, list) {                                                             // 124
      results.push(iterator.call(context, value, index, list));                                          // 125
    });                                                                                                  // 126
    return results;                                                                                      // 127
  };                                                                                                     // 128
                                                                                                         // 129
  var reduceError = 'Reduce of empty array with no initial value';                                       // 130
                                                                                                         // 131
  // **Reduce** builds up a single result from a list of values, aka `inject`,                           // 132
  // or `foldl`. Delegates to **ECMAScript 5**'s native `reduce` if available.                           // 133
  _.reduce = _.foldl = _.inject = function(obj, iterator, memo, context) {                               // 134
    var initial = arguments.length > 2;                                                                  // 135
    if (obj == null) obj = [];                                                                           // 136
    if (nativeReduce && obj.reduce === nativeReduce) {                                                   // 137
      if (context) iterator = _.bind(iterator, context);                                                 // 138
      return initial ? obj.reduce(iterator, memo) : obj.reduce(iterator);                                // 139
    }                                                                                                    // 140
    each(obj, function(value, index, list) {                                                             // 141
      if (!initial) {                                                                                    // 142
        memo = value;                                                                                    // 143
        initial = true;                                                                                  // 144
      } else {                                                                                           // 145
        memo = iterator.call(context, memo, value, index, list);                                         // 146
      }                                                                                                  // 147
    });                                                                                                  // 148
    if (!initial) throw new TypeError(reduceError);                                                      // 149
    return memo;                                                                                         // 150
  };                                                                                                     // 151
                                                                                                         // 152
  // The right-associative version of reduce, also known as `foldr`.                                     // 153
  // Delegates to **ECMAScript 5**'s native `reduceRight` if available.                                  // 154
  _.reduceRight = _.foldr = function(obj, iterator, memo, context) {                                     // 155
    var initial = arguments.length > 2;                                                                  // 156
    if (obj == null) obj = [];                                                                           // 157
    if (nativeReduceRight && obj.reduceRight === nativeReduceRight) {                                    // 158
      if (context) iterator = _.bind(iterator, context);                                                 // 159
      return initial ? obj.reduceRight(iterator, memo) : obj.reduceRight(iterator);                      // 160
    }                                                                                                    // 161
    var length = obj.length;                                                                             // 162
    if (!looksLikeArray(obj)) {                                                                          // 163
      var keys = _.keys(obj);                                                                            // 164
      length = keys.length;                                                                              // 165
    }                                                                                                    // 166
    each(obj, function(value, index, list) {                                                             // 167
      index = keys ? keys[--length] : --length;                                                          // 168
      if (!initial) {                                                                                    // 169
        memo = obj[index];                                                                               // 170
        initial = true;                                                                                  // 171
      } else {                                                                                           // 172
        memo = iterator.call(context, memo, obj[index], index, list);                                    // 173
      }                                                                                                  // 174
    });                                                                                                  // 175
    if (!initial) throw new TypeError(reduceError);                                                      // 176
    return memo;                                                                                         // 177
  };                                                                                                     // 178
                                                                                                         // 179
  // Return the first value which passes a truth test. Aliased as `detect`.                              // 180
  _.find = _.detect = function(obj, iterator, context) {                                                 // 181
    var result;                                                                                          // 182
    any(obj, function(value, index, list) {                                                              // 183
      if (iterator.call(context, value, index, list)) {                                                  // 184
        result = value;                                                                                  // 185
        return true;                                                                                     // 186
      }                                                                                                  // 187
    });                                                                                                  // 188
    return result;                                                                                       // 189
  };                                                                                                     // 190
                                                                                                         // 191
  // Return all the elements that pass a truth test.                                                     // 192
  // Delegates to **ECMAScript 5**'s native `filter` if available.                                       // 193
  // Aliased as `select`.                                                                                // 194
  _.filter = _.select = function(obj, iterator, context) {                                               // 195
    var results = [];                                                                                    // 196
    if (obj == null) return results;                                                                     // 197
    if (nativeFilter && obj.filter === nativeFilter) return obj.filter(iterator, context);               // 198
    each(obj, function(value, index, list) {                                                             // 199
      if (iterator.call(context, value, index, list)) results.push(value);                               // 200
    });                                                                                                  // 201
    return results;                                                                                      // 202
  };                                                                                                     // 203
                                                                                                         // 204
  // Return all the elements for which a truth test fails.                                               // 205
  _.reject = function(obj, iterator, context) {                                                          // 206
    return _.filter(obj, function(value, index, list) {                                                  // 207
      return !iterator.call(context, value, index, list);                                                // 208
    }, context);                                                                                         // 209
  };                                                                                                     // 210
                                                                                                         // 211
  // Determine whether all of the elements match a truth test.                                           // 212
  // Delegates to **ECMAScript 5**'s native `every` if available.                                        // 213
  // Aliased as `all`.                                                                                   // 214
  _.every = _.all = function(obj, iterator, context) {                                                   // 215
    iterator || (iterator = _.identity);                                                                 // 216
    var result = true;                                                                                   // 217
    if (obj == null) return result;                                                                      // 218
    if (nativeEvery && obj.every === nativeEvery) return obj.every(iterator, context);                   // 219
    each(obj, function(value, index, list) {                                                             // 220
      if (!(result = result && iterator.call(context, value, index, list))) return breaker;              // 221
    });                                                                                                  // 222
    return !!result;                                                                                     // 223
  };                                                                                                     // 224
                                                                                                         // 225
  // Determine if at least one element in the object matches a truth test.                               // 226
  // Delegates to **ECMAScript 5**'s native `some` if available.                                         // 227
  // Aliased as `any`.                                                                                   // 228
  var any = _.some = _.any = function(obj, iterator, context) {                                          // 229
    iterator || (iterator = _.identity);                                                                 // 230
    var result = false;                                                                                  // 231
    if (obj == null) return result;                                                                      // 232
    if (nativeSome && obj.some === nativeSome) return obj.some(iterator, context);                       // 233
    each(obj, function(value, index, list) {                                                             // 234
      if (result || (result = iterator.call(context, value, index, list))) return breaker;               // 235
    });                                                                                                  // 236
    return !!result;                                                                                     // 237
  };                                                                                                     // 238
                                                                                                         // 239
  // Determine if the array or object contains a given value (using `===`).                              // 240
  // Aliased as `include`.                                                                               // 241
  _.contains = _.include = function(obj, target) {                                                       // 242
    if (obj == null) return false;                                                                       // 243
    if (nativeIndexOf && obj.indexOf === nativeIndexOf) return obj.indexOf(target) != -1;                // 244
    return any(obj, function(value) {                                                                    // 245
      return value === target;                                                                           // 246
    });                                                                                                  // 247
  };                                                                                                     // 248
                                                                                                         // 249
  // Invoke a method (with arguments) on every item in a collection.                                     // 250
  _.invoke = function(obj, method) {                                                                     // 251
    var args = slice.call(arguments, 2);                                                                 // 252
    var isFunc = _.isFunction(method);                                                                   // 253
    return _.map(obj, function(value) {                                                                  // 254
      return (isFunc ? method : value[method]).apply(value, args);                                       // 255
    });                                                                                                  // 256
  };                                                                                                     // 257
                                                                                                         // 258
  // Convenience version of a common use case of `map`: fetching a property.                             // 259
  _.pluck = function(obj, key) {                                                                         // 260
    return _.map(obj, function(value){ return value[key]; });                                            // 261
  };                                                                                                     // 262
                                                                                                         // 263
  // Convenience version of a common use case of `filter`: selecting only objects                        // 264
  // containing specific `key:value` pairs.                                                              // 265
  _.where = function(obj, attrs, first) {                                                                // 266
    if (_.isEmpty(attrs)) return first ? void 0 : [];                                                    // 267
    return _[first ? 'find' : 'filter'](obj, function(value) {                                           // 268
      for (var key in attrs) {                                                                           // 269
        if (attrs[key] !== value[key]) return false;                                                     // 270
      }                                                                                                  // 271
      return true;                                                                                       // 272
    });                                                                                                  // 273
  };                                                                                                     // 274
                                                                                                         // 275
  // Convenience version of a common use case of `find`: getting the first object                        // 276
  // containing specific `key:value` pairs.                                                              // 277
  _.findWhere = function(obj, attrs) {                                                                   // 278
    return _.where(obj, attrs, true);                                                                    // 279
  };                                                                                                     // 280
                                                                                                         // 281
  // Return the maximum element or (element-based computation).                                          // 282
  // Can't optimize arrays of integers longer than 65,535 elements.                                      // 283
  // See [WebKit Bug 80797](https://bugs.webkit.org/show_bug.cgi?id=80797)                               // 284
  _.max = function(obj, iterator, context) {                                                             // 285
    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {                       // 286
      return Math.max.apply(Math, obj);                                                                  // 287
    }                                                                                                    // 288
    if (!iterator && _.isEmpty(obj)) return -Infinity;                                                   // 289
    var result = {computed : -Infinity, value: -Infinity};                                               // 290
    each(obj, function(value, index, list) {                                                             // 291
      var computed = iterator ? iterator.call(context, value, index, list) : value;                      // 292
      computed > result.computed && (result = {value : value, computed : computed});                     // 293
    });                                                                                                  // 294
    return result.value;                                                                                 // 295
  };                                                                                                     // 296
                                                                                                         // 297
  // Return the minimum element (or element-based computation).                                          // 298
  _.min = function(obj, iterator, context) {                                                             // 299
    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {                       // 300
      return Math.min.apply(Math, obj);                                                                  // 301
    }                                                                                                    // 302
    if (!iterator && _.isEmpty(obj)) return Infinity;                                                    // 303
    var result = {computed : Infinity, value: Infinity};                                                 // 304
    each(obj, function(value, index, list) {                                                             // 305
      var computed = iterator ? iterator.call(context, value, index, list) : value;                      // 306
      computed < result.computed && (result = {value : value, computed : computed});                     // 307
    });                                                                                                  // 308
    return result.value;                                                                                 // 309
  };                                                                                                     // 310
                                                                                                         // 311
  // Shuffle an array, using the modern version of the                                                   // 312
  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher–Yates_shuffle).                          // 313
  _.shuffle = function(obj) {                                                                            // 314
    var rand;                                                                                            // 315
    var index = 0;                                                                                       // 316
    var shuffled = [];                                                                                   // 317
    each(obj, function(value) {                                                                          // 318
      rand = _.random(index++);                                                                          // 319
      shuffled[index - 1] = shuffled[rand];                                                              // 320
      shuffled[rand] = value;                                                                            // 321
    });                                                                                                  // 322
    return shuffled;                                                                                     // 323
  };                                                                                                     // 324
                                                                                                         // 325
  // Sample **n** random values from an array.                                                           // 326
  // If **n** is not specified, returns a single random element from the array.                          // 327
  // The internal `guard` argument allows it to work with `map`.                                         // 328
  _.sample = function(obj, n, guard) {                                                                   // 329
    if (arguments.length < 2 || guard) {                                                                 // 330
      return obj[_.random(obj.length - 1)];                                                              // 331
    }                                                                                                    // 332
    return _.shuffle(obj).slice(0, Math.max(0, n));                                                      // 333
  };                                                                                                     // 334
                                                                                                         // 335
  // An internal function to generate lookup iterators.                                                  // 336
  var lookupIterator = function(value) {                                                                 // 337
    return _.isFunction(value) ? value : function(obj){ return obj[value]; };                            // 338
  };                                                                                                     // 339
                                                                                                         // 340
  // Sort the object's values by a criterion produced by an iterator.                                    // 341
  _.sortBy = function(obj, value, context) {                                                             // 342
    var iterator = lookupIterator(value);                                                                // 343
    return _.pluck(_.map(obj, function(value, index, list) {                                             // 344
      return {                                                                                           // 345
        value: value,                                                                                    // 346
        index: index,                                                                                    // 347
        criteria: iterator.call(context, value, index, list)                                             // 348
      };                                                                                                 // 349
    }).sort(function(left, right) {                                                                      // 350
      var a = left.criteria;                                                                             // 351
      var b = right.criteria;                                                                            // 352
      if (a !== b) {                                                                                     // 353
        if (a > b || a === void 0) return 1;                                                             // 354
        if (a < b || b === void 0) return -1;                                                            // 355
      }                                                                                                  // 356
      return left.index - right.index;                                                                   // 357
    }), 'value');                                                                                        // 358
  };                                                                                                     // 359
                                                                                                         // 360
  // An internal function used for aggregate "group by" operations.                                      // 361
  var group = function(behavior) {                                                                       // 362
    return function(obj, value, context) {                                                               // 363
      var result = {};                                                                                   // 364
      var iterator = value == null ? _.identity : lookupIterator(value);                                 // 365
      each(obj, function(value, index) {                                                                 // 366
        var key = iterator.call(context, value, index, obj);                                             // 367
        behavior(result, key, value);                                                                    // 368
      });                                                                                                // 369
      return result;                                                                                     // 370
    };                                                                                                   // 371
  };                                                                                                     // 372
                                                                                                         // 373
  // Groups the object's values by a criterion. Pass either a string attribute                           // 374
  // to group by, or a function that returns the criterion.                                              // 375
  _.groupBy = group(function(result, key, value) {                                                       // 376
    (_.has(result, key) ? result[key] : (result[key] = [])).push(value);                                 // 377
  });                                                                                                    // 378
                                                                                                         // 379
  // Indexes the object's values by a criterion, similar to `groupBy`, but for                           // 380
  // when you know that your index values will be unique.                                                // 381
  _.indexBy = group(function(result, key, value) {                                                       // 382
    result[key] = value;                                                                                 // 383
  });                                                                                                    // 384
                                                                                                         // 385
  // Counts instances of an object that group by a certain criterion. Pass                               // 386
  // either a string attribute to count by, or a function that returns the                               // 387
  // criterion.                                                                                          // 388
  _.countBy = group(function(result, key) {                                                              // 389
    _.has(result, key) ? result[key]++ : result[key] = 1;                                                // 390
  });                                                                                                    // 391
                                                                                                         // 392
  // Use a comparator function to figure out the smallest index at which                                 // 393
  // an object should be inserted so as to maintain order. Uses binary search.                           // 394
  _.sortedIndex = function(array, obj, iterator, context) {                                              // 395
    iterator = iterator == null ? _.identity : lookupIterator(iterator);                                 // 396
    var value = iterator.call(context, obj);                                                             // 397
    var low = 0, high = array.length;                                                                    // 398
    while (low < high) {                                                                                 // 399
      var mid = (low + high) >>> 1;                                                                      // 400
      iterator.call(context, array[mid]) < value ? low = mid + 1 : high = mid;                           // 401
    }                                                                                                    // 402
    return low;                                                                                          // 403
  };                                                                                                     // 404
                                                                                                         // 405
  // Safely create a real, live array from anything iterable.                                            // 406
  _.toArray = function(obj) {                                                                            // 407
    if (!obj) return [];                                                                                 // 408
    if (_.isArray(obj)) return slice.call(obj);                                                          // 409
    if (looksLikeArray(obj)) return _.map(obj, _.identity);                                              // 410
    return _.values(obj);                                                                                // 411
  };                                                                                                     // 412
                                                                                                         // 413
  // Return the number of elements in an object.                                                         // 414
  _.size = function(obj) {                                                                               // 415
    if (obj == null) return 0;                                                                           // 416
    return (looksLikeArray(obj)) ? obj.length : _.keys(obj).length;                                      // 417
  };                                                                                                     // 418
                                                                                                         // 419
  // Array Functions                                                                                     // 420
  // ---------------                                                                                     // 421
                                                                                                         // 422
  // Get the first element of an array. Passing **n** will return the first N                            // 423
  // values in the array. Aliased as `head` and `take`. The **guard** check                              // 424
  // allows it to work with `_.map`.                                                                     // 425
  _.first = _.head = _.take = function(array, n, guard) {                                                // 426
    if (array == null) return void 0;                                                                    // 427
    return (n == null) || guard ? array[0] : slice.call(array, 0, n);                                    // 428
  };                                                                                                     // 429
                                                                                                         // 430
  // Returns everything but the last entry of the array. Especially useful on                            // 431
  // the arguments object. Passing **n** will return all the values in                                   // 432
  // the array, excluding the last N. The **guard** check allows it to work with                         // 433
  // `_.map`.                                                                                            // 434
  _.initial = function(array, n, guard) {                                                                // 435
    return slice.call(array, 0, array.length - ((n == null) || guard ? 1 : n));                          // 436
  };                                                                                                     // 437
                                                                                                         // 438
  // Get the last element of an array. Passing **n** will return the last N                              // 439
  // values in the array. The **guard** check allows it to work with `_.map`.                            // 440
  _.last = function(array, n, guard) {                                                                   // 441
    if (array == null) return void 0;                                                                    // 442
    if ((n == null) || guard) {                                                                          // 443
      return array[array.length - 1];                                                                    // 444
    } else {                                                                                             // 445
      return slice.call(array, Math.max(array.length - n, 0));                                           // 446
    }                                                                                                    // 447
  };                                                                                                     // 448
                                                                                                         // 449
  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.                  // 450
  // Especially useful on the arguments object. Passing an **n** will return                             // 451
  // the rest N values in the array. The **guard**                                                       // 452
  // check allows it to work with `_.map`.                                                               // 453
  _.rest = _.tail = _.drop = function(array, n, guard) {                                                 // 454
    return slice.call(array, (n == null) || guard ? 1 : n);                                              // 455
  };                                                                                                     // 456
                                                                                                         // 457
  // Trim out all falsy values from an array.                                                            // 458
  _.compact = function(array) {                                                                          // 459
    return _.filter(array, _.identity);                                                                  // 460
  };                                                                                                     // 461
                                                                                                         // 462
  // Internal implementation of a recursive `flatten` function.                                          // 463
  var flatten = function(input, shallow, output) {                                                       // 464
    if (shallow && _.every(input, _.isArray)) {                                                          // 465
      return concat.apply(output, input);                                                                // 466
    }                                                                                                    // 467
    each(input, function(value) {                                                                        // 468
      if (_.isArray(value) || _.isArguments(value)) {                                                    // 469
        shallow ? push.apply(output, value) : flatten(value, shallow, output);                           // 470
      } else {                                                                                           // 471
        output.push(value);                                                                              // 472
      }                                                                                                  // 473
    });                                                                                                  // 474
    return output;                                                                                       // 475
  };                                                                                                     // 476
                                                                                                         // 477
  // Flatten out an array, either recursively (by default), or just one level.                           // 478
  _.flatten = function(array, shallow) {                                                                 // 479
    return flatten(array, shallow, []);                                                                  // 480
  };                                                                                                     // 481
                                                                                                         // 482
  // Return a version of the array that does not contain the specified value(s).                         // 483
  _.without = function(array) {                                                                          // 484
    return _.difference(array, slice.call(arguments, 1));                                                // 485
  };                                                                                                     // 486
                                                                                                         // 487
  // Produce a duplicate-free version of the array. If the array has already                             // 488
  // been sorted, you have the option of using a faster algorithm.                                       // 489
  // Aliased as `unique`.                                                                                // 490
  _.uniq = _.unique = function(array, isSorted, iterator, context) {                                     // 491
    if (_.isFunction(isSorted)) {                                                                        // 492
      context = iterator;                                                                                // 493
      iterator = isSorted;                                                                               // 494
      isSorted = false;                                                                                  // 495
    }                                                                                                    // 496
    var initial = iterator ? _.map(array, iterator, context) : array;                                    // 497
    var results = [];                                                                                    // 498
    var seen = [];                                                                                       // 499
    each(initial, function(value, index) {                                                               // 500
      if (isSorted ? (!index || seen[seen.length - 1] !== value) : !_.contains(seen, value)) {           // 501
        seen.push(value);                                                                                // 502
        results.push(array[index]);                                                                      // 503
      }                                                                                                  // 504
    });                                                                                                  // 505
    return results;                                                                                      // 506
  };                                                                                                     // 507
                                                                                                         // 508
  // Produce an array that contains the union: each distinct element from all of                         // 509
  // the passed-in arrays.                                                                               // 510
  _.union = function() {                                                                                 // 511
    return _.uniq(_.flatten(arguments, true));                                                           // 512
  };                                                                                                     // 513
                                                                                                         // 514
  // Produce an array that contains every item shared between all the                                    // 515
  // passed-in arrays.                                                                                   // 516
  _.intersection = function(array) {                                                                     // 517
    var rest = slice.call(arguments, 1);                                                                 // 518
    return _.filter(_.uniq(array), function(item) {                                                      // 519
      return _.every(rest, function(other) {                                                             // 520
        return _.indexOf(other, item) >= 0;                                                              // 521
      });                                                                                                // 522
    });                                                                                                  // 523
  };                                                                                                     // 524
                                                                                                         // 525
  // Take the difference between one array and a number of other arrays.                                 // 526
  // Only the elements present in just the first array will remain.                                      // 527
  _.difference = function(array) {                                                                       // 528
    var rest = concat.apply(ArrayProto, slice.call(arguments, 1));                                       // 529
    return _.filter(array, function(value){ return !_.contains(rest, value); });                         // 530
  };                                                                                                     // 531
                                                                                                         // 532
  // Zip together multiple lists into a single array -- elements that share                              // 533
  // an index go together.                                                                               // 534
  _.zip = function() {                                                                                   // 535
    var length = _.max(_.pluck(arguments, "length").concat(0));                                          // 536
    var results = new Array(length);                                                                     // 537
    for (var i = 0; i < length; i++) {                                                                   // 538
      results[i] = _.pluck(arguments, '' + i);                                                           // 539
    }                                                                                                    // 540
    return results;                                                                                      // 541
  };                                                                                                     // 542
                                                                                                         // 543
  // Converts lists into objects. Pass either a single array of `[key, value]`                           // 544
  // pairs, or two parallel arrays of the same length -- one of keys, and one of                         // 545
  // the corresponding values.                                                                           // 546
  _.object = function(list, values) {                                                                    // 547
    if (list == null) return {};                                                                         // 548
    var result = {};                                                                                     // 549
    for (var i = 0, length = list.length; i < length; i++) {                                             // 550
      if (values) {                                                                                      // 551
        result[list[i]] = values[i];                                                                     // 552
      } else {                                                                                           // 553
        result[list[i][0]] = list[i][1];                                                                 // 554
      }                                                                                                  // 555
    }                                                                                                    // 556
    return result;                                                                                       // 557
  };                                                                                                     // 558
                                                                                                         // 559
  // If the browser doesn't supply us with indexOf (I'm looking at you, **MSIE**),                       // 560
  // we need this function. Return the position of the first occurrence of an                            // 561
  // item in an array, or -1 if the item is not included in the array.                                   // 562
  // Delegates to **ECMAScript 5**'s native `indexOf` if available.                                      // 563
  // If the array is large and already in sort order, pass `true`                                        // 564
  // for **isSorted** to use binary search.                                                              // 565
  _.indexOf = function(array, item, isSorted) {                                                          // 566
    if (array == null) return -1;                                                                        // 567
    var i = 0, length = array.length;                                                                    // 568
    if (isSorted) {                                                                                      // 569
      if (typeof isSorted == 'number') {                                                                 // 570
        i = (isSorted < 0 ? Math.max(0, length + isSorted) : isSorted);                                  // 571
      } else {                                                                                           // 572
        i = _.sortedIndex(array, item);                                                                  // 573
        return array[i] === item ? i : -1;                                                               // 574
      }                                                                                                  // 575
    }                                                                                                    // 576
    if (nativeIndexOf && array.indexOf === nativeIndexOf) return array.indexOf(item, isSorted);          // 577
    for (; i < length; i++) if (array[i] === item) return i;                                             // 578
    return -1;                                                                                           // 579
  };                                                                                                     // 580
                                                                                                         // 581
  // Delegates to **ECMAScript 5**'s native `lastIndexOf` if available.                                  // 582
  _.lastIndexOf = function(array, item, from) {                                                          // 583
    if (array == null) return -1;                                                                        // 584
    var hasIndex = from != null;                                                                         // 585
    if (nativeLastIndexOf && array.lastIndexOf === nativeLastIndexOf) {                                  // 586
      return hasIndex ? array.lastIndexOf(item, from) : array.lastIndexOf(item);                         // 587
    }                                                                                                    // 588
    var i = (hasIndex ? from : array.length);                                                            // 589
    while (i--) if (array[i] === item) return i;                                                         // 590
    return -1;                                                                                           // 591
  };                                                                                                     // 592
                                                                                                         // 593
  // Generate an integer Array containing an arithmetic progression. A port of                           // 594
  // the native Python `range()` function. See                                                           // 595
  // [the Python documentation](http://docs.python.org/library/functions.html#range).                    // 596
  _.range = function(start, stop, step) {                                                                // 597
    if (arguments.length <= 1) {                                                                         // 598
      stop = start || 0;                                                                                 // 599
      start = 0;                                                                                         // 600
    }                                                                                                    // 601
    step = arguments[2] || 1;                                                                            // 602
                                                                                                         // 603
    var length = Math.max(Math.ceil((stop - start) / step), 0);                                          // 604
    var idx = 0;                                                                                         // 605
    var range = new Array(length);                                                                       // 606
                                                                                                         // 607
    while(idx < length) {                                                                                // 608
      range[idx++] = start;                                                                              // 609
      start += step;                                                                                     // 610
    }                                                                                                    // 611
                                                                                                         // 612
    return range;                                                                                        // 613
  };                                                                                                     // 614
                                                                                                         // 615
  // Function (ahem) Functions                                                                           // 616
  // ------------------                                                                                  // 617
                                                                                                         // 618
  // Reusable constructor function for prototype setting.                                                // 619
  var ctor = function(){};                                                                               // 620
                                                                                                         // 621
  // Create a function bound to a given object (assigning `this`, and arguments,                         // 622
  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if                              // 623
  // available.                                                                                          // 624
  _.bind = function(func, context) {                                                                     // 625
    var args, bound;                                                                                     // 626
    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));
    if (!_.isFunction(func)) throw new TypeError;                                                        // 628
    args = slice.call(arguments, 2);                                                                     // 629
    return bound = function() {                                                                          // 630
      if (!(this instanceof bound)) return func.apply(context, args.concat(slice.call(arguments)));      // 631
      ctor.prototype = func.prototype;                                                                   // 632
      var self = new ctor;                                                                               // 633
      ctor.prototype = null;                                                                             // 634
      var result = func.apply(self, args.concat(slice.call(arguments)));                                 // 635
      if (Object(result) === result) return result;                                                      // 636
      return self;                                                                                       // 637
    };                                                                                                   // 638
  };                                                                                                     // 639
                                                                                                         // 640
  // Partially apply a function by creating a version that has had some of its                           // 641
  // arguments pre-filled, without changing its dynamic `this` context.                                  // 642
  _.partial = function(func) {                                                                           // 643
    var args = slice.call(arguments, 1);                                                                 // 644
    return function() {                                                                                  // 645
      return func.apply(this, args.concat(slice.call(arguments)));                                       // 646
    };                                                                                                   // 647
  };                                                                                                     // 648
                                                                                                         // 649
  // Bind all of an object's methods to that object. Useful for ensuring that                            // 650
  // all callbacks defined on an object belong to it.                                                    // 651
  _.bindAll = function(obj) {                                                                            // 652
    var funcs = slice.call(arguments, 1);                                                                // 653
    if (funcs.length === 0) throw new Error("bindAll must be passed function names");                    // 654
    each(funcs, function(f) { obj[f] = _.bind(obj[f], obj); });                                          // 655
    return obj;                                                                                          // 656
  };                                                                                                     // 657
                                                                                                         // 658
  // Memoize an expensive function by storing its results.                                               // 659
  _.memoize = function(func, hasher) {                                                                   // 660
    var memo = {};                                                                                       // 661
    hasher || (hasher = _.identity);                                                                     // 662
    return function() {                                                                                  // 663
      var key = hasher.apply(this, arguments);                                                           // 664
      return _.has(memo, key) ? memo[key] : (memo[key] = func.apply(this, arguments));                   // 665
    };                                                                                                   // 666
  };                                                                                                     // 667
                                                                                                         // 668
  // Delays a function for the given number of milliseconds, and then calls                              // 669
  // it with the arguments supplied.                                                                     // 670
  _.delay = function(func, wait) {                                                                       // 671
    var args = slice.call(arguments, 2);                                                                 // 672
    return setTimeout(function(){ return func.apply(null, args); }, wait);                               // 673
  };                                                                                                     // 674
                                                                                                         // 675
  // Defers a function, scheduling it to run after the current call stack has                            // 676
  // cleared.                                                                                            // 677
  _.defer = function(func) {                                                                             // 678
    return _.delay.apply(_, [func, 1].concat(slice.call(arguments, 1)));                                 // 679
  };                                                                                                     // 680
                                                                                                         // 681
  // Returns a function, that, when invoked, will only be triggered at most once                         // 682
  // during a given window of time. Normally, the throttled function will run                            // 683
  // as much as it can, without ever going more than once per `wait` duration;                           // 684
  // but if you'd like to disable the execution on the leading edge, pass                                // 685
  // `{leading: false}`. To disable execution on the trailing edge, ditto.                               // 686
  _.throttle = function(func, wait, options) {                                                           // 687
    var context, args, result;                                                                           // 688
    var timeout = null;                                                                                  // 689
    var previous = 0;                                                                                    // 690
    options || (options = {});                                                                           // 691
    var later = function() {                                                                             // 692
      previous = options.leading === false ? 0 : new Date;                                               // 693
      timeout = null;                                                                                    // 694
      result = func.apply(context, args);                                                                // 695
    };                                                                                                   // 696
    return function() {                                                                                  // 697
      var now = new Date;                                                                                // 698
      if (!previous && options.leading === false) previous = now;                                        // 699
      var remaining = wait - (now - previous);                                                           // 700
      context = this;                                                                                    // 701
      args = arguments;                                                                                  // 702
      if (remaining <= 0) {                                                                              // 703
        clearTimeout(timeout);                                                                           // 704
        timeout = null;                                                                                  // 705
        previous = now;                                                                                  // 706
        result = func.apply(context, args);                                                              // 707
      } else if (!timeout && options.trailing !== false) {                                               // 708
        timeout = setTimeout(later, remaining);                                                          // 709
      }                                                                                                  // 710
      return result;                                                                                     // 711
    };                                                                                                   // 712
  };                                                                                                     // 713
                                                                                                         // 714
  // Returns a function, that, as long as it continues to be invoked, will not                           // 715
  // be triggered. The function will be called after it stops being called for                           // 716
  // N milliseconds. If `immediate` is passed, trigger the function on the                               // 717
  // leading edge, instead of the trailing.                                                              // 718
  _.debounce = function(func, wait, immediate) {                                                         // 719
    var timeout, args, context, timestamp, result;                                                       // 720
    return function() {                                                                                  // 721
      context = this;                                                                                    // 722
      args = arguments;                                                                                  // 723
      timestamp = new Date();                                                                            // 724
      var later = function() {                                                                           // 725
        var last = (new Date()) - timestamp;                                                             // 726
        if (last < wait) {                                                                               // 727
          timeout = setTimeout(later, wait - last);                                                      // 728
        } else {                                                                                         // 729
          timeout = null;                                                                                // 730
          if (!immediate) result = func.apply(context, args);                                            // 731
        }                                                                                                // 732
      };                                                                                                 // 733
      var callNow = immediate && !timeout;                                                               // 734
      if (!timeout) {                                                                                    // 735
        timeout = setTimeout(later, wait);                                                               // 736
      }                                                                                                  // 737
      if (callNow) result = func.apply(context, args);                                                   // 738
      return result;                                                                                     // 739
    };                                                                                                   // 740
  };                                                                                                     // 741
                                                                                                         // 742
  // Returns a function that will be executed at most one time, no matter how                            // 743
  // often you call it. Useful for lazy initialization.                                                  // 744
  _.once = function(func) {                                                                              // 745
    var ran = false, memo;                                                                               // 746
    return function() {                                                                                  // 747
      if (ran) return memo;                                                                              // 748
      ran = true;                                                                                        // 749
      memo = func.apply(this, arguments);                                                                // 750
      func = null;                                                                                       // 751
      return memo;                                                                                       // 752
    };                                                                                                   // 753
  };                                                                                                     // 754
                                                                                                         // 755
  // Returns the first function passed as an argument to the second,                                     // 756
  // allowing you to adjust arguments, run code before and after, and                                    // 757
  // conditionally execute the original function.                                                        // 758
  _.wrap = function(func, wrapper) {                                                                     // 759
    return function() {                                                                                  // 760
      var args = [func];                                                                                 // 761
      push.apply(args, arguments);                                                                       // 762
      return wrapper.apply(this, args);                                                                  // 763
    };                                                                                                   // 764
  };                                                                                                     // 765
                                                                                                         // 766
  // Returns a function that is the composition of a list of functions, each                             // 767
  // consuming the return value of the function that follows.                                            // 768
  _.compose = function() {                                                                               // 769
    var funcs = arguments;                                                                               // 770
    return function() {                                                                                  // 771
      var args = arguments;                                                                              // 772
      for (var i = funcs.length - 1; i >= 0; i--) {                                                      // 773
        args = [funcs[i].apply(this, args)];                                                             // 774
      }                                                                                                  // 775
      return args[0];                                                                                    // 776
    };                                                                                                   // 777
  };                                                                                                     // 778
                                                                                                         // 779
  // Returns a function that will only be executed after being called N times.                           // 780
  _.after = function(times, func) {                                                                      // 781
    return function() {                                                                                  // 782
      if (--times < 1) {                                                                                 // 783
        return func.apply(this, arguments);                                                              // 784
      }                                                                                                  // 785
    };                                                                                                   // 786
  };                                                                                                     // 787
                                                                                                         // 788
  // Object Functions                                                                                    // 789
  // ----------------                                                                                    // 790
                                                                                                         // 791
  // Retrieve the names of an object's properties.                                                       // 792
  // Delegates to **ECMAScript 5**'s native `Object.keys`                                                // 793
  _.keys = nativeKeys || function(obj) {                                                                 // 794
    if (obj !== Object(obj)) throw new TypeError('Invalid object');                                      // 795
    var keys = [];                                                                                       // 796
    for (var key in obj) if (_.has(obj, key)) keys.push(key);                                            // 797
    return keys;                                                                                         // 798
  };                                                                                                     // 799
                                                                                                         // 800
  // Retrieve the values of an object's properties.                                                      // 801
  _.values = function(obj) {                                                                             // 802
    var keys = _.keys(obj);                                                                              // 803
    var length = keys.length;                                                                            // 804
    var values = new Array(length);                                                                      // 805
    for (var i = 0; i < length; i++) {                                                                   // 806
      values[i] = obj[keys[i]];                                                                          // 807
    }                                                                                                    // 808
    return values;                                                                                       // 809
  };                                                                                                     // 810
                                                                                                         // 811
  // Convert an object into a list of `[key, value]` pairs.                                              // 812
  _.pairs = function(obj) {                                                                              // 813
    var keys = _.keys(obj);                                                                              // 814
    var length = keys.length;                                                                            // 815
    var pairs = new Array(length);                                                                       // 816
    for (var i = 0; i < length; i++) {                                                                   // 817
      pairs[i] = [keys[i], obj[keys[i]]];                                                                // 818
    }                                                                                                    // 819
    return pairs;                                                                                        // 820
  };                                                                                                     // 821
                                                                                                         // 822
  // Invert the keys and values of an object. The values must be serializable.                           // 823
  _.invert = function(obj) {                                                                             // 824
    var result = {};                                                                                     // 825
    var keys = _.keys(obj);                                                                              // 826
    for (var i = 0, length = keys.length; i < length; i++) {                                             // 827
      result[obj[keys[i]]] = keys[i];                                                                    // 828
    }                                                                                                    // 829
    return result;                                                                                       // 830
  };                                                                                                     // 831
                                                                                                         // 832
  // Return a sorted list of the function names available on the object.                                 // 833
  // Aliased as `methods`                                                                                // 834
  _.functions = _.methods = function(obj) {                                                              // 835
    var names = [];                                                                                      // 836
    for (var key in obj) {                                                                               // 837
      if (_.isFunction(obj[key])) names.push(key);                                                       // 838
    }                                                                                                    // 839
    return names.sort();                                                                                 // 840
  };                                                                                                     // 841
                                                                                                         // 842
  // Extend a given object with all the properties in passed-in object(s).                               // 843
  _.extend = function(obj) {                                                                             // 844
    each(slice.call(arguments, 1), function(source) {                                                    // 845
      if (source) {                                                                                      // 846
        for (var prop in source) {                                                                       // 847
          obj[prop] = source[prop];                                                                      // 848
        }                                                                                                // 849
      }                                                                                                  // 850
    });                                                                                                  // 851
    return obj;                                                                                          // 852
  };                                                                                                     // 853
                                                                                                         // 854
  // Return a copy of the object only containing the whitelisted properties.                             // 855
  _.pick = function(obj) {                                                                               // 856
    var copy = {};                                                                                       // 857
    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));                                       // 858
    each(keys, function(key) {                                                                           // 859
      if (key in obj) copy[key] = obj[key];                                                              // 860
    });                                                                                                  // 861
    return copy;                                                                                         // 862
  };                                                                                                     // 863
                                                                                                         // 864
   // Return a copy of the object without the blacklisted properties.                                    // 865
  _.omit = function(obj) {                                                                               // 866
    var copy = {};                                                                                       // 867
    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));                                       // 868
    for (var key in obj) {                                                                               // 869
      if (!_.contains(keys, key)) copy[key] = obj[key];                                                  // 870
    }                                                                                                    // 871
    return copy;                                                                                         // 872
  };                                                                                                     // 873
                                                                                                         // 874
  // Fill in a given object with default properties.                                                     // 875
  _.defaults = function(obj) {                                                                           // 876
    each(slice.call(arguments, 1), function(source) {                                                    // 877
      if (source) {                                                                                      // 878
        for (var prop in source) {                                                                       // 879
          if (obj[prop] === void 0) obj[prop] = source[prop];                                            // 880
        }                                                                                                // 881
      }                                                                                                  // 882
    });                                                                                                  // 883
    return obj;                                                                                          // 884
  };                                                                                                     // 885
                                                                                                         // 886
  // Create a (shallow-cloned) duplicate of an object.                                                   // 887
  _.clone = function(obj) {                                                                              // 888
    if (!_.isObject(obj)) return obj;                                                                    // 889
    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);                                             // 890
  };                                                                                                     // 891
                                                                                                         // 892
  // Invokes interceptor with the obj, and then returns obj.                                             // 893
  // The primary purpose of this method is to "tap into" a method chain, in                              // 894
  // order to perform operations on intermediate results within the chain.                               // 895
  _.tap = function(obj, interceptor) {                                                                   // 896
    interceptor(obj);                                                                                    // 897
    return obj;                                                                                          // 898
  };                                                                                                     // 899
                                                                                                         // 900
  // Internal recursive comparison function for `isEqual`.                                               // 901
  var eq = function(a, b, aStack, bStack) {                                                              // 902
    // Identical objects are equal. `0 === -0`, but they aren't identical.                               // 903
    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).           // 904
    if (a === b) return a !== 0 || 1 / a == 1 / b;                                                       // 905
    // A strict comparison is necessary because `null == undefined`.                                     // 906
    if (a == null || b == null) return a === b;                                                          // 907
    // Unwrap any wrapped objects.                                                                       // 908
    if (a instanceof _) a = a._wrapped;                                                                  // 909
    if (b instanceof _) b = b._wrapped;                                                                  // 910
    // Compare `[[Class]]` names.                                                                        // 911
    var className = toString.call(a);                                                                    // 912
    if (className != toString.call(b)) return false;                                                     // 913
    switch (className) {                                                                                 // 914
      // Strings, numbers, dates, and booleans are compared by value.                                    // 915
      case '[object String]':                                                                            // 916
        // Primitives and their corresponding object wrappers are equivalent; thus, `"5"` is             // 917
        // equivalent to `new String("5")`.                                                              // 918
        return a == String(b);                                                                           // 919
      case '[object Number]':                                                                            // 920
        // `NaN`s are equivalent, but non-reflexive. An `egal` comparison is performed for               // 921
        // other numeric values.                                                                         // 922
        return a != +a ? b != +b : (a == 0 ? 1 / a == 1 / b : a == +b);                                  // 923
      case '[object Date]':                                                                              // 924
      case '[object Boolean]':                                                                           // 925
        // Coerce dates and booleans to numeric primitive values. Dates are compared by their            // 926
        // millisecond representations. Note that invalid dates with millisecond representations         // 927
        // of `NaN` are not equivalent.                                                                  // 928
        return +a == +b;                                                                                 // 929
      // RegExps are compared by their source patterns and flags.                                        // 930
      case '[object RegExp]':                                                                            // 931
        return a.source == b.source &&                                                                   // 932
               a.global == b.global &&                                                                   // 933
               a.multiline == b.multiline &&                                                             // 934
               a.ignoreCase == b.ignoreCase;                                                             // 935
    }                                                                                                    // 936
    if (typeof a != 'object' || typeof b != 'object') return false;                                      // 937
    // Assume equality for cyclic structures. The algorithm for detecting cyclic                         // 938
    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.                       // 939
    var length = aStack.length;                                                                          // 940
    while (length--) {                                                                                   // 941
      // Linear search. Performance is inversely proportional to the number of                           // 942
      // unique nested structures.                                                                       // 943
      if (aStack[length] == a) return bStack[length] == b;                                               // 944
    }                                                                                                    // 945
    // Objects with different constructors are not equivalent, but `Object`s                             // 946
    // from different frames are.                                                                        // 947
    var aCtor = a.constructor, bCtor = b.constructor;                                                    // 948
    if (aCtor !== bCtor && !(_.isFunction(aCtor) && (aCtor instanceof aCtor) &&                          // 949
                             _.isFunction(bCtor) && (bCtor instanceof bCtor))) {                         // 950
      return false;                                                                                      // 951
    }                                                                                                    // 952
    // Add the first object to the stack of traversed objects.                                           // 953
    aStack.push(a);                                                                                      // 954
    bStack.push(b);                                                                                      // 955
    var size = 0, result = true;                                                                         // 956
    // Recursively compare objects and arrays.                                                           // 957
    if (className == '[object Array]') {                                                                 // 958
      // Compare array lengths to determine if a deep comparison is necessary.                           // 959
      size = a.length;                                                                                   // 960
      result = size == b.length;                                                                         // 961
      if (result) {                                                                                      // 962
        // Deep compare the contents, ignoring non-numeric properties.                                   // 963
        while (size--) {                                                                                 // 964
          if (!(result = eq(a[size], b[size], aStack, bStack))) break;                                   // 965
        }                                                                                                // 966
      }                                                                                                  // 967
    } else {                                                                                             // 968
      // Deep compare objects.                                                                           // 969
      for (var key in a) {                                                                               // 970
        if (_.has(a, key)) {                                                                             // 971
          // Count the expected number of properties.                                                    // 972
          size++;                                                                                        // 973
          // Deep compare each member.                                                                   // 974
          if (!(result = _.has(b, key) && eq(a[key], b[key], aStack, bStack))) break;                    // 975
        }                                                                                                // 976
      }                                                                                                  // 977
      // Ensure that both objects contain the same number of properties.                                 // 978
      if (result) {                                                                                      // 979
        for (key in b) {                                                                                 // 980
          if (_.has(b, key) && !(size--)) break;                                                         // 981
        }                                                                                                // 982
        result = !size;                                                                                  // 983
      }                                                                                                  // 984
    }                                                                                                    // 985
    // Remove the first object from the stack of traversed objects.                                      // 986
    aStack.pop();                                                                                        // 987
    bStack.pop();                                                                                        // 988
    return result;                                                                                       // 989
  };                                                                                                     // 990
                                                                                                         // 991
  // Perform a deep comparison to check if two objects are equal.                                        // 992
  _.isEqual = function(a, b) {                                                                           // 993
    return eq(a, b, [], []);                                                                             // 994
  };                                                                                                     // 995
                                                                                                         // 996
  // Is a given array, string, or object empty?                                                          // 997
  // An "empty" object has no enumerable own-properties.                                                 // 998
  _.isEmpty = function(obj) {                                                                            // 999
    if (obj == null) return true;                                                                        // 1000
    if (_.isArray(obj) || _.isString(obj)) return obj.length === 0;                                      // 1001
    for (var key in obj) if (_.has(obj, key)) return false;                                              // 1002
    return true;                                                                                         // 1003
  };                                                                                                     // 1004
                                                                                                         // 1005
  // Is a given value a DOM element?                                                                     // 1006
  _.isElement = function(obj) {                                                                          // 1007
    return !!(obj && obj.nodeType === 1);                                                                // 1008
  };                                                                                                     // 1009
                                                                                                         // 1010
  // Is a given value an array?                                                                          // 1011
  // Delegates to ECMA5's native Array.isArray                                                           // 1012
  _.isArray = nativeIsArray || function(obj) {                                                           // 1013
    return toString.call(obj) == '[object Array]';                                                       // 1014
  };                                                                                                     // 1015
                                                                                                         // 1016
  // Is a given variable an object?                                                                      // 1017
  _.isObject = function(obj) {                                                                           // 1018
    return obj === Object(obj);                                                                          // 1019
  };                                                                                                     // 1020
                                                                                                         // 1021
  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp.             // 1022
  each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp'], function(name) {                 // 1023
    _['is' + name] = function(obj) {                                                                     // 1024
      return toString.call(obj) == '[object ' + name + ']';                                              // 1025
    };                                                                                                   // 1026
  });                                                                                                    // 1027
                                                                                                         // 1028
  // Define a fallback version of the method in browsers (ahem, IE), where                               // 1029
  // there isn't any inspectable "Arguments" type.                                                       // 1030
  if (!_.isArguments(arguments)) {                                                                       // 1031
    _.isArguments = function(obj) {                                                                      // 1032
      return !!(obj && _.has(obj, 'callee'));                                                            // 1033
    };                                                                                                   // 1034
  }                                                                                                      // 1035
                                                                                                         // 1036
  // Optimize `isFunction` if appropriate.                                                               // 1037
  if (typeof (/./) !== 'function') {                                                                     // 1038
    _.isFunction = function(obj) {                                                                       // 1039
      return typeof obj === 'function';                                                                  // 1040
    };                                                                                                   // 1041
  }                                                                                                      // 1042
                                                                                                         // 1043
  // Is a given object a finite number?                                                                  // 1044
  _.isFinite = function(obj) {                                                                           // 1045
    return isFinite(obj) && !isNaN(parseFloat(obj));                                                     // 1046
  };                                                                                                     // 1047
                                                                                                         // 1048
  // Is the given value `NaN`? (NaN is the only number which does not equal itself).                     // 1049
  _.isNaN = function(obj) {                                                                              // 1050
    return _.isNumber(obj) && obj != +obj;                                                               // 1051
  };                                                                                                     // 1052
                                                                                                         // 1053
  // Is a given value a boolean?                                                                         // 1054
  _.isBoolean = function(obj) {                                                                          // 1055
    return obj === true || obj === false || toString.call(obj) == '[object Boolean]';                    // 1056
  };                                                                                                     // 1057
                                                                                                         // 1058
  // Is a given value equal to null?                                                                     // 1059
  _.isNull = function(obj) {                                                                             // 1060
    return obj === null;                                                                                 // 1061
  };                                                                                                     // 1062
                                                                                                         // 1063
  // Is a given variable undefined?                                                                      // 1064
  _.isUndefined = function(obj) {                                                                        // 1065
    return obj === void 0;                                                                               // 1066
  };                                                                                                     // 1067
                                                                                                         // 1068
  // Shortcut function for checking if an object has a given property directly                           // 1069
  // on itself (in other words, not on a prototype).                                                     // 1070
  _.has = function(obj, key) {                                                                           // 1071
    return hasOwnProperty.call(obj, key);                                                                // 1072
  };                                                                                                     // 1073
                                                                                                         // 1074
  // Utility Functions                                                                                   // 1075
  // -----------------                                                                                   // 1076
                                                                                                         // 1077
  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its                           // 1078
  // previous owner. Returns a reference to the Underscore object.                                       // 1079
  _.noConflict = function() {                                                                            // 1080
    root._ = previousUnderscore;                                                                         // 1081
    return this;                                                                                         // 1082
  };                                                                                                     // 1083
                                                                                                         // 1084
  // Keep the identity function around for default iterators.                                            // 1085
  _.identity = function(value) {                                                                         // 1086
    return value;                                                                                        // 1087
  };                                                                                                     // 1088
                                                                                                         // 1089
  // Run a function **n** times.                                                                         // 1090
  _.times = function(n, iterator, context) {                                                             // 1091
    var accum = Array(Math.max(0, n));                                                                   // 1092
    for (var i = 0; i < n; i++) accum[i] = iterator.call(context, i);                                    // 1093
    return accum;                                                                                        // 1094
  };                                                                                                     // 1095
                                                                                                         // 1096
  // Return a random integer between min and max (inclusive).                                            // 1097
  _.random = function(min, max) {                                                                        // 1098
    if (max == null) {                                                                                   // 1099
      max = min;                                                                                         // 1100
      min = 0;                                                                                           // 1101
    }                                                                                                    // 1102
    return min + Math.floor(Math.random() * (max - min + 1));                                            // 1103
  };                                                                                                     // 1104
                                                                                                         // 1105
  // List of HTML entities for escaping.                                                                 // 1106
  var entityMap = {                                                                                      // 1107
    escape: {                                                                                            // 1108
      '&': '&amp;',                                                                                      // 1109
      '<': '&lt;',                                                                                       // 1110
      '>': '&gt;',                                                                                       // 1111
      '"': '&quot;',                                                                                     // 1112
      "'": '&#x27;'                                                                                      // 1113
    }                                                                                                    // 1114
  };                                                                                                     // 1115
  entityMap.unescape = _.invert(entityMap.escape);                                                       // 1116
                                                                                                         // 1117
  // Regexes containing the keys and values listed immediately above.                                    // 1118
  var entityRegexes = {                                                                                  // 1119
    escape:   new RegExp('[' + _.keys(entityMap.escape).join('') + ']', 'g'),                            // 1120
    unescape: new RegExp('(' + _.keys(entityMap.unescape).join('|') + ')', 'g')                          // 1121
  };                                                                                                     // 1122
                                                                                                         // 1123
  // Functions for escaping and unescaping strings to/from HTML interpolation.                           // 1124
  _.each(['escape', 'unescape'], function(method) {                                                      // 1125
    _[method] = function(string) {                                                                       // 1126
      if (string == null) return '';                                                                     // 1127
      return ('' + string).replace(entityRegexes[method], function(match) {                              // 1128
        return entityMap[method][match];                                                                 // 1129
      });                                                                                                // 1130
    };                                                                                                   // 1131
  });                                                                                                    // 1132
                                                                                                         // 1133
  // If the value of the named `property` is a function then invoke it with the                          // 1134
  // `object` as context; otherwise, return it.                                                          // 1135
  _.result = function(object, property) {                                                                // 1136
    if (object == null) return void 0;                                                                   // 1137
    var value = object[property];                                                                        // 1138
    return _.isFunction(value) ? value.call(object) : value;                                             // 1139
  };                                                                                                     // 1140
                                                                                                         // 1141
  // Add your own custom functions to the Underscore object.                                             // 1142
  _.mixin = function(obj) {                                                                              // 1143
    each(_.functions(obj), function(name) {                                                              // 1144
      var func = _[name] = obj[name];                                                                    // 1145
      _.prototype[name] = function() {                                                                   // 1146
        var args = [this._wrapped];                                                                      // 1147
        push.apply(args, arguments);                                                                     // 1148
        return result.call(this, func.apply(_, args));                                                   // 1149
      };                                                                                                 // 1150
    });                                                                                                  // 1151
  };                                                                                                     // 1152
                                                                                                         // 1153
  // Generate a unique integer id (unique within the entire client session).                             // 1154
  // Useful for temporary DOM ids.                                                                       // 1155
  var idCounter = 0;                                                                                     // 1156
  _.uniqueId = function(prefix) {                                                                        // 1157
    var id = ++idCounter + '';                                                                           // 1158
    return prefix ? prefix + id : id;                                                                    // 1159
  };                                                                                                     // 1160
                                                                                                         // 1161
  // By default, Underscore uses ERB-style template delimiters, change the                               // 1162
  // following template settings to use alternative delimiters.                                          // 1163
  _.templateSettings = {                                                                                 // 1164
    evaluate    : /<%([\s\S]+?)%>/g,                                                                     // 1165
    interpolate : /<%=([\s\S]+?)%>/g,                                                                    // 1166
    escape      : /<%-([\s\S]+?)%>/g                                                                     // 1167
  };                                                                                                     // 1168
                                                                                                         // 1169
  // When customizing `templateSettings`, if you don't want to define an                                 // 1170
  // interpolation, evaluation or escaping regex, we need one that is                                    // 1171
  // guaranteed not to match.                                                                            // 1172
  var noMatch = /(.)^/;                                                                                  // 1173
                                                                                                         // 1174
  // Certain characters need to be escaped so that they can be put into a                                // 1175
  // string literal.                                                                                     // 1176
  var escapes = {                                                                                        // 1177
    "'":      "'",                                                                                       // 1178
    '\\':     '\\',                                                                                      // 1179
    '\r':     'r',                                                                                       // 1180
    '\n':     'n',                                                                                       // 1181
    '\t':     't',                                                                                       // 1182
    '\u2028': 'u2028',                                                                                   // 1183
    '\u2029': 'u2029'                                                                                    // 1184
  };                                                                                                     // 1185
                                                                                                         // 1186
  var escaper = /\\|'|\r|\n|\t|\u2028|\u2029/g;                                                          // 1187
                                                                                                         // 1188
  // JavaScript micro-templating, similar to John Resig's implementation.                                // 1189
  // Underscore templating handles arbitrary delimiters, preserves whitespace,                           // 1190
  // and correctly escapes quotes within interpolated code.                                              // 1191
  _.template = function(text, data, settings) {                                                          // 1192
    var render;                                                                                          // 1193
    settings = _.defaults({}, settings, _.templateSettings);                                             // 1194
                                                                                                         // 1195
    // Combine delimiters into one regular expression via alternation.                                   // 1196
    var matcher = new RegExp([                                                                           // 1197
      (settings.escape || noMatch).source,                                                               // 1198
      (settings.interpolate || noMatch).source,                                                          // 1199
      (settings.evaluate || noMatch).source                                                              // 1200
    ].join('|') + '|$', 'g');                                                                            // 1201
                                                                                                         // 1202
    // Compile the template source, escaping string literals appropriately.                              // 1203
    var index = 0;                                                                                       // 1204
    var source = "__p+='";                                                                               // 1205
    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {                       // 1206
      source += text.slice(index, offset)                                                                // 1207
        .replace(escaper, function(match) { return '\\' + escapes[match]; });                            // 1208
                                                                                                         // 1209
      if (escape) {                                                                                      // 1210
        source += "'+\n((__t=(" + escape + "))==null?'':_.escape(__t))+\n'";                             // 1211
      }                                                                                                  // 1212
      if (interpolate) {                                                                                 // 1213
        source += "'+\n((__t=(" + interpolate + "))==null?'':__t)+\n'";                                  // 1214
      }                                                                                                  // 1215
      if (evaluate) {                                                                                    // 1216
        source += "';\n" + evaluate + "\n__p+='";                                                        // 1217
      }                                                                                                  // 1218
      index = offset + match.length;                                                                     // 1219
      return match;                                                                                      // 1220
    });                                                                                                  // 1221
    source += "';\n";                                                                                    // 1222
                                                                                                         // 1223
    // If a variable is not specified, place data values in local scope.                                 // 1224
    if (!settings.variable) source = 'with(obj||{}){\n' + source + '}\n';                                // 1225
                                                                                                         // 1226
    source = "var __t,__p='',__j=Array.prototype.join," +                                                // 1227
      "print=function(){__p+=__j.call(arguments,'');};\n" +                                              // 1228
      source + "return __p;\n";                                                                          // 1229
                                                                                                         // 1230
    try {                                                                                                // 1231
      render = new Function(settings.variable || 'obj', '_', source);                                    // 1232
    } catch (e) {                                                                                        // 1233
      e.source = source;                                                                                 // 1234
      throw e;                                                                                           // 1235
    }                                                                                                    // 1236
                                                                                                         // 1237
    if (data) return render(data, _);                                                                    // 1238
    var template = function(data) {                                                                      // 1239
      return render.call(this, data, _);                                                                 // 1240
    };                                                                                                   // 1241
                                                                                                         // 1242
    // Provide the compiled function source as a convenience for precompilation.                         // 1243
    template.source = 'function(' + (settings.variable || 'obj') + '){\n' + source + '}';                // 1244
                                                                                                         // 1245
    return template;                                                                                     // 1246
  };                                                                                                     // 1247
                                                                                                         // 1248
  // Add a "chain" function, which will delegate to the wrapper.                                         // 1249
  _.chain = function(obj) {                                                                              // 1250
    return _(obj).chain();                                                                               // 1251
  };                                                                                                     // 1252
                                                                                                         // 1253
  // OOP                                                                                                 // 1254
  // ---------------                                                                                     // 1255
  // If Underscore is called as a function, it returns a wrapped object that                             // 1256
  // can be used OO-style. This wrapper holds altered versions of all the                                // 1257
  // underscore functions. Wrapped objects may be chained.                                               // 1258
                                                                                                         // 1259
  // Helper function to continue chaining intermediate results.                                          // 1260
  var result = function(obj) {                                                                           // 1261
    return this._chain ? _(obj).chain() : obj;                                                           // 1262
  };                                                                                                     // 1263
                                                                                                         // 1264
  // Add all of the Underscore functions to the wrapper object.                                          // 1265
  _.mixin(_);                                                                                            // 1266
                                                                                                         // 1267
  // Add all mutator Array functions to the wrapper.                                                     // 1268
  each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {                // 1269
    var method = ArrayProto[name];                                                                       // 1270
    _.prototype[name] = function() {                                                                     // 1271
      var obj = this._wrapped;                                                                           // 1272
      method.apply(obj, arguments);                                                                      // 1273
      if ((name == 'shift' || name == 'splice') && obj.length === 0) delete obj[0];                      // 1274
      return result.call(this, obj);                                                                     // 1275
    };                                                                                                   // 1276
  });                                                                                                    // 1277
                                                                                                         // 1278
  // Add all accessor Array functions to the wrapper.                                                    // 1279
  each(['concat', 'join', 'slice'], function(name) {                                                     // 1280
    var method = ArrayProto[name];                                                                       // 1281
    _.prototype[name] = function() {                                                                     // 1282
      return result.call(this, method.apply(this._wrapped, arguments));                                  // 1283
    };                                                                                                   // 1284
  });                                                                                                    // 1285
                                                                                                         // 1286
  _.extend(_.prototype, {                                                                                // 1287
                                                                                                         // 1288
    // Start chaining a wrapped Underscore object.                                                       // 1289
    chain: function() {                                                                                  // 1290
      this._chain = true;                                                                                // 1291
      return this;                                                                                       // 1292
    },                                                                                                   // 1293
                                                                                                         // 1294
    // Extracts the result from a wrapped and chained object.                                            // 1295
    value: function() {                                                                                  // 1296
      return this._wrapped;                                                                              // 1297
    }                                                                                                    // 1298
                                                                                                         // 1299
  });                                                                                                    // 1300
                                                                                                         // 1301
}).call(this);                                                                                           // 1302
                                                                                                         // 1303
///////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

///////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                       //
// packages/underscore/post.js                                                                           //
//                                                                                                       //
///////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                         //
// This exports object was created in pre.js.  Now copy the `_` object from it                           // 1
// into the package-scope variable `_`, which will get exported.                                         // 2
_ = exports._;                                                                                           // 3
                                                                                                         // 4
///////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package.underscore = {}, {
  _: _
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var _ = Package.underscore._;

/* Package-scope variables */
var global, meteorEnv, Meteor;

(function(){

////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                        //
// packages/meteor/global.js                                                                              //
//                                                                                                        //
////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                          //
global = this;                                                                                            // 1
                                                                                                          // 2
////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                        //
// packages/meteor/client_environment.js                                                                  //
//                                                                                                        //
////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                          //
meteorEnv = __meteor_runtime_config__.meteorEnv;                                                          // 1
                                                                                                          // 2
/**                                                                                                       // 3
 * @summary The Meteor namespace                                                                          // 4
 * @namespace Meteor                                                                                      // 5
 */                                                                                                       // 6
Meteor = {                                                                                                // 7
  /**                                                                                                     // 8
   * @summary Boolean variable.  True if running in production environment.                               // 9
   * @locus Anywhere                                                                                      // 10
   * @static                                                                                              // 11
   * @type {Boolean}                                                                                      // 12
   */                                                                                                     // 13
  isProduction: meteorEnv.NODE_ENV === "production",                                                      // 14
                                                                                                          // 15
  /**                                                                                                     // 16
   * @summary Boolean variable.  True if running in development environment.                              // 17
   * @locus Anywhere                                                                                      // 18
   * @static                                                                                              // 19
   * @type {Boolean}                                                                                      // 20
   */                                                                                                     // 21
  isDevelopment: meteorEnv.NODE_ENV !== "production",                                                     // 22
                                                                                                          // 23
  /**                                                                                                     // 24
   * @summary Boolean variable.  True if running in client environment.                                   // 25
   * @locus Anywhere                                                                                      // 26
   * @static                                                                                              // 27
   * @type {Boolean}                                                                                      // 28
   */                                                                                                     // 29
  isClient: true,                                                                                         // 30
                                                                                                          // 31
  /**                                                                                                     // 32
   * @summary Boolean variable.  True if running in server environment.                                   // 33
   * @locus Anywhere                                                                                      // 34
   * @static                                                                                              // 35
   * @type {Boolean}                                                                                      // 36
   */                                                                                                     // 37
  isServer: false,                                                                                        // 38
  isCordova: false                                                                                        // 39
};                                                                                                        // 40
                                                                                                          // 41
if (typeof __meteor_runtime_config__ === 'object' &&                                                      // 42
    __meteor_runtime_config__.PUBLIC_SETTINGS) {                                                          // 43
  /**                                                                                                     // 44
   * @summary `Meteor.settings` contains deployment-specific configuration options. You can initialize settings by passing the `--settings` option (which takes the name of a file containing JSON data) to `meteor run` or `meteor deploy`. When running your server directly (e.g. from a bundle), you instead specify settings by putting the JSON directly into the `METEOR_SETTINGS` environment variable. If the settings object contains a key named `public`, then `Meteor.settings.public` will be available on the client as well as the server.  All other properties of `Meteor.settings` are only defined on the server.  You can rely on `Meteor.settings` and `Meteor.settings.public` being defined objects (not undefined) on both client and server even if there are no settings specified.  Changes to `Meteor.settings.public` at runtime will be picked up by new client connections.
   * @locus Anywhere                                                                                      // 46
   * @type {Object}                                                                                       // 47
   */                                                                                                     // 48
  Meteor.settings = { 'public': __meteor_runtime_config__.PUBLIC_SETTINGS };                              // 49
}                                                                                                         // 50
                                                                                                          // 51
////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                        //
// packages/meteor/helpers.js                                                                             //
//                                                                                                        //
////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                          //
if (Meteor.isServer)                                                                                      // 1
  var Future = Npm.require('fibers/future');                                                              // 2
                                                                                                          // 3
if (typeof __meteor_runtime_config__ === 'object' &&                                                      // 4
    __meteor_runtime_config__.meteorRelease) {                                                            // 5
  /**                                                                                                     // 6
   * @summary `Meteor.release` is a string containing the name of the [release](#meteorupdate) with which the project was built (for example, `"1.2.3"`). It is `undefined` if the project was built using a git checkout of Meteor.
   * @locus Anywhere                                                                                      // 8
   * @type {String}                                                                                       // 9
   */                                                                                                     // 10
  Meteor.release = __meteor_runtime_config__.meteorRelease;                                               // 11
}                                                                                                         // 12
                                                                                                          // 13
// XXX find a better home for these? Ideally they would be _.get,                                         // 14
// _.ensure, _.delete..                                                                                   // 15
                                                                                                          // 16
_.extend(Meteor, {                                                                                        // 17
  // _get(a,b,c,d) returns a[b][c][d], or else undefined if a[b] or                                       // 18
  // a[b][c] doesn't exist.                                                                               // 19
  //                                                                                                      // 20
  _get: function (obj /*, arguments */) {                                                                 // 21
    for (var i = 1; i < arguments.length; i++) {                                                          // 22
      if (!(arguments[i] in obj))                                                                         // 23
        return undefined;                                                                                 // 24
      obj = obj[arguments[i]];                                                                            // 25
    }                                                                                                     // 26
    return obj;                                                                                           // 27
  },                                                                                                      // 28
                                                                                                          // 29
  // _ensure(a,b,c,d) ensures that a[b][c][d] exists. If it does not,                                     // 30
  // it is created and set to {}. Either way, it is returned.                                             // 31
  //                                                                                                      // 32
  _ensure: function (obj /*, arguments */) {                                                              // 33
    for (var i = 1; i < arguments.length; i++) {                                                          // 34
      var key = arguments[i];                                                                             // 35
      if (!(key in obj))                                                                                  // 36
        obj[key] = {};                                                                                    // 37
      obj = obj[key];                                                                                     // 38
    }                                                                                                     // 39
                                                                                                          // 40
    return obj;                                                                                           // 41
  },                                                                                                      // 42
                                                                                                          // 43
  // _delete(a, b, c, d) deletes a[b][c][d], then a[b][c] unless it                                       // 44
  // isn't empty, then a[b] unless it isn't empty.                                                        // 45
  //                                                                                                      // 46
  _delete: function (obj /*, arguments */) {                                                              // 47
    var stack = [obj];                                                                                    // 48
    var leaf = true;                                                                                      // 49
    for (var i = 1; i < arguments.length - 1; i++) {                                                      // 50
      var key = arguments[i];                                                                             // 51
      if (!(key in obj)) {                                                                                // 52
        leaf = false;                                                                                     // 53
        break;                                                                                            // 54
      }                                                                                                   // 55
      obj = obj[key];                                                                                     // 56
      if (typeof obj !== "object")                                                                        // 57
        break;                                                                                            // 58
      stack.push(obj);                                                                                    // 59
    }                                                                                                     // 60
                                                                                                          // 61
    for (var i = stack.length - 1; i >= 0; i--) {                                                         // 62
      var key = arguments[i+1];                                                                           // 63
                                                                                                          // 64
      if (leaf)                                                                                           // 65
        leaf = false;                                                                                     // 66
      else                                                                                                // 67
        for (var other in stack[i][key])                                                                  // 68
          return; // not empty -- we're done                                                              // 69
                                                                                                          // 70
      delete stack[i][key];                                                                               // 71
    }                                                                                                     // 72
  },                                                                                                      // 73
                                                                                                          // 74
  // wrapAsync can wrap any function that takes some number of arguments that                             // 75
  // can't be undefined, followed by some optional arguments, where the callback                          // 76
  // is the last optional argument.                                                                       // 77
  // e.g. fs.readFile(pathname, [callback]),                                                              // 78
  // fs.open(pathname, flags, [mode], [callback])                                                         // 79
  // For maximum effectiveness and least confusion, wrapAsync should be used on                           // 80
  // functions where the callback is the only argument of type Function.                                  // 81
                                                                                                          // 82
  /**                                                                                                     // 83
   * @memberOf Meteor                                                                                     // 84
   * @summary Wrap a function that takes a callback function as its final parameter. The signature of the callback of the wrapped function should be `function(error, result){}`. On the server, the wrapped function can be used either synchronously (without passing a callback) or asynchronously (when a callback is passed). On the client, a callback is always required; errors will be logged if there is no callback. If a callback is provided, the environment captured when the original function was called will be restored in the callback.
   * @locus Anywhere                                                                                      // 86
   * @param {Function} func A function that takes a callback as its final parameter                       // 87
   * @param {Object} [context] Optional `this` object against which the original function will be invoked
   */                                                                                                     // 89
  wrapAsync: function (fn, context) {                                                                     // 90
    return function (/* arguments */) {                                                                   // 91
      var self = context || this;                                                                         // 92
      var newArgs = _.toArray(arguments);                                                                 // 93
      var callback;                                                                                       // 94
                                                                                                          // 95
      for (var i = newArgs.length - 1; i >= 0; --i) {                                                     // 96
        var arg = newArgs[i];                                                                             // 97
        var type = typeof arg;                                                                            // 98
        if (type !== "undefined") {                                                                       // 99
          if (type === "function") {                                                                      // 100
            callback = arg;                                                                               // 101
          }                                                                                               // 102
          break;                                                                                          // 103
        }                                                                                                 // 104
      }                                                                                                   // 105
                                                                                                          // 106
      if (! callback) {                                                                                   // 107
        if (Meteor.isClient) {                                                                            // 108
          callback = logErr;                                                                              // 109
        } else {                                                                                          // 110
          var fut = new Future();                                                                         // 111
          callback = fut.resolver();                                                                      // 112
        }                                                                                                 // 113
        ++i; // Insert the callback just after arg.                                                       // 114
      }                                                                                                   // 115
                                                                                                          // 116
      newArgs[i] = Meteor.bindEnvironment(callback);                                                      // 117
      var result = fn.apply(self, newArgs);                                                               // 118
      return fut ? fut.wait() : result;                                                                   // 119
    };                                                                                                    // 120
  },                                                                                                      // 121
                                                                                                          // 122
  // Sets child's prototype to a new object whose prototype is parent's                                   // 123
  // prototype. Used as:                                                                                  // 124
  //   Meteor._inherits(ClassB, ClassA).                                                                  // 125
  //   _.extend(ClassB.prototype, { ... })                                                                // 126
  // Inspired by CoffeeScript's `extend` and Google Closure's `goog.inherits`.                            // 127
  _inherits: function (Child, Parent) {                                                                   // 128
    // copy Parent static properties                                                                      // 129
    for (var key in Parent) {                                                                             // 130
      // make sure we only copy hasOwnProperty properties vs. prototype                                   // 131
      // properties                                                                                       // 132
      if (_.has(Parent, key))                                                                             // 133
        Child[key] = Parent[key];                                                                         // 134
    }                                                                                                     // 135
                                                                                                          // 136
    // a middle member of prototype chain: takes the prototype from the Parent                            // 137
    var Middle = function () {                                                                            // 138
      this.constructor = Child;                                                                           // 139
    };                                                                                                    // 140
    Middle.prototype = Parent.prototype;                                                                  // 141
    Child.prototype = new Middle();                                                                       // 142
    Child.__super__ = Parent.prototype;                                                                   // 143
    return Child;                                                                                         // 144
  }                                                                                                       // 145
});                                                                                                       // 146
                                                                                                          // 147
var warnedAboutWrapAsync = false;                                                                         // 148
                                                                                                          // 149
/**                                                                                                       // 150
 * @deprecated in 0.9.3                                                                                   // 151
 */                                                                                                       // 152
Meteor._wrapAsync = function(fn, context) {                                                               // 153
  if (! warnedAboutWrapAsync) {                                                                           // 154
    Meteor._debug("Meteor._wrapAsync has been renamed to Meteor.wrapAsync");                              // 155
    warnedAboutWrapAsync = true;                                                                          // 156
  }                                                                                                       // 157
  return Meteor.wrapAsync.apply(Meteor, arguments);                                                       // 158
};                                                                                                        // 159
                                                                                                          // 160
function logErr(err) {                                                                                    // 161
  if (err) {                                                                                              // 162
    return Meteor._debug(                                                                                 // 163
      "Exception in callback of async function",                                                          // 164
      err.stack ? err.stack : err                                                                         // 165
    );                                                                                                    // 166
  }                                                                                                       // 167
}                                                                                                         // 168
                                                                                                          // 169
////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                        //
// packages/meteor/setimmediate.js                                                                        //
//                                                                                                        //
////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                          //
// Chooses one of three setImmediate implementations:                                                     // 1
//                                                                                                        // 2
// * Native setImmediate (IE 10, Node 0.9+)                                                               // 3
//                                                                                                        // 4
// * postMessage (many browsers)                                                                          // 5
//                                                                                                        // 6
// * setTimeout  (fallback)                                                                               // 7
//                                                                                                        // 8
// The postMessage implementation is based on                                                             // 9
// https://github.com/NobleJS/setImmediate/tree/1.0.1                                                     // 10
//                                                                                                        // 11
// Don't use `nextTick` for Node since it runs its callbacks before                                       // 12
// I/O, which is stricter than we're looking for.                                                         // 13
//                                                                                                        // 14
// Not installed as a polyfill, as our public API is `Meteor.defer`.                                      // 15
// Since we're not trying to be a polyfill, we have some                                                  // 16
// simplifications:                                                                                       // 17
//                                                                                                        // 18
// If one invocation of a setImmediate callback pauses itself by a                                        // 19
// call to alert/prompt/showModelDialog, the NobleJS polyfill                                             // 20
// implementation ensured that no setImmedate callback would run until                                    // 21
// the first invocation completed.  While correct per the spec, what it                                   // 22
// would mean for us in practice is that any reactive updates relying                                     // 23
// on Meteor.defer would be hung in the main window until the modal                                       // 24
// dialog was dismissed.  Thus we only ensure that a setImmediate                                         // 25
// function is called in a later event loop.                                                              // 26
//                                                                                                        // 27
// We don't need to support using a string to be eval'ed for the                                          // 28
// callback, arguments to the function, or clearImmediate.                                                // 29
                                                                                                          // 30
"use strict";                                                                                             // 31
                                                                                                          // 32
var global = this;                                                                                        // 33
                                                                                                          // 34
                                                                                                          // 35
// IE 10, Node >= 9.1                                                                                     // 36
                                                                                                          // 37
function useSetImmediate() {                                                                              // 38
  if (! global.setImmediate)                                                                              // 39
    return null;                                                                                          // 40
  else {                                                                                                  // 41
    var setImmediate = function (fn) {                                                                    // 42
      global.setImmediate(fn);                                                                            // 43
    };                                                                                                    // 44
    setImmediate.implementation = 'setImmediate';                                                         // 45
    return setImmediate;                                                                                  // 46
  }                                                                                                       // 47
}                                                                                                         // 48
                                                                                                          // 49
                                                                                                          // 50
// Android 2.3.6, Chrome 26, Firefox 20, IE 8-9, iOS 5.1.1 Safari                                         // 51
                                                                                                          // 52
function usePostMessage() {                                                                               // 53
  // The test against `importScripts` prevents this implementation                                        // 54
  // from being installed inside a web worker, where                                                      // 55
  // `global.postMessage` means something completely different and                                        // 56
  // can't be used for this purpose.                                                                      // 57
                                                                                                          // 58
  if (!global.postMessage || global.importScripts) {                                                      // 59
    return null;                                                                                          // 60
  }                                                                                                       // 61
                                                                                                          // 62
  // Avoid synchronous post message implementations.                                                      // 63
                                                                                                          // 64
  var postMessageIsAsynchronous = true;                                                                   // 65
  var oldOnMessage = global.onmessage;                                                                    // 66
  global.onmessage = function () {                                                                        // 67
      postMessageIsAsynchronous = false;                                                                  // 68
  };                                                                                                      // 69
  global.postMessage("", "*");                                                                            // 70
  global.onmessage = oldOnMessage;                                                                        // 71
                                                                                                          // 72
  if (! postMessageIsAsynchronous)                                                                        // 73
    return null;                                                                                          // 74
                                                                                                          // 75
  var funcIndex = 0;                                                                                      // 76
  var funcs = {};                                                                                         // 77
                                                                                                          // 78
  // Installs an event handler on `global` for the `message` event: see                                   // 79
  // * https://developer.mozilla.org/en/DOM/window.postMessage                                            // 80
  // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages       // 81
                                                                                                          // 82
  // XXX use Random.id() here?                                                                            // 83
  var MESSAGE_PREFIX = "Meteor._setImmediate." + Math.random() + '.';                                     // 84
                                                                                                          // 85
  function isStringAndStartsWith(string, putativeStart) {                                                 // 86
    return (typeof string === "string" &&                                                                 // 87
            string.substring(0, putativeStart.length) === putativeStart);                                 // 88
  }                                                                                                       // 89
                                                                                                          // 90
  function onGlobalMessage(event) {                                                                       // 91
    // This will catch all incoming messages (even from other                                             // 92
    // windows!), so we need to try reasonably hard to avoid letting                                      // 93
    // anyone else trick us into firing off. We test the origin is                                        // 94
    // still this window, and that a (randomly generated)                                                 // 95
    // unpredictable identifying prefix is present.                                                       // 96
    if (event.source === global &&                                                                        // 97
        isStringAndStartsWith(event.data, MESSAGE_PREFIX)) {                                              // 98
      var index = event.data.substring(MESSAGE_PREFIX.length);                                            // 99
      try {                                                                                               // 100
        if (funcs[index])                                                                                 // 101
          funcs[index]();                                                                                 // 102
      }                                                                                                   // 103
      finally {                                                                                           // 104
        delete funcs[index];                                                                              // 105
      }                                                                                                   // 106
    }                                                                                                     // 107
  }                                                                                                       // 108
                                                                                                          // 109
  if (global.addEventListener) {                                                                          // 110
    global.addEventListener("message", onGlobalMessage, false);                                           // 111
  } else {                                                                                                // 112
    global.attachEvent("onmessage", onGlobalMessage);                                                     // 113
  }                                                                                                       // 114
                                                                                                          // 115
  var setImmediate = function (fn) {                                                                      // 116
    // Make `global` post a message to itself with the handle and                                         // 117
    // identifying prefix, thus asynchronously invoking our                                               // 118
    // onGlobalMessage listener above.                                                                    // 119
    ++funcIndex;                                                                                          // 120
    funcs[funcIndex] = fn;                                                                                // 121
    global.postMessage(MESSAGE_PREFIX + funcIndex, "*");                                                  // 122
  };                                                                                                      // 123
  setImmediate.implementation = 'postMessage';                                                            // 124
  return setImmediate;                                                                                    // 125
}                                                                                                         // 126
                                                                                                          // 127
                                                                                                          // 128
function useTimeout() {                                                                                   // 129
  var setImmediate = function (fn) {                                                                      // 130
    global.setTimeout(fn, 0);                                                                             // 131
  };                                                                                                      // 132
  setImmediate.implementation = 'setTimeout';                                                             // 133
  return setImmediate;                                                                                    // 134
}                                                                                                         // 135
                                                                                                          // 136
                                                                                                          // 137
Meteor._setImmediate =                                                                                    // 138
  useSetImmediate() ||                                                                                    // 139
  usePostMessage() ||                                                                                     // 140
  useTimeout();                                                                                           // 141
                                                                                                          // 142
////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                        //
// packages/meteor/timers.js                                                                              //
//                                                                                                        //
////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                          //
var withoutInvocation = function (f) {                                                                    // 1
  if (Package.ddp) {                                                                                      // 2
    var _CurrentInvocation = Package.ddp.DDP._CurrentInvocation;                                          // 3
    if (_CurrentInvocation.get() && _CurrentInvocation.get().isSimulation)                                // 4
      throw new Error("Can't set timers inside simulations");                                             // 5
    return function () { _CurrentInvocation.withValue(null, f); };                                        // 6
  }                                                                                                       // 7
  else                                                                                                    // 8
    return f;                                                                                             // 9
};                                                                                                        // 10
                                                                                                          // 11
var bindAndCatch = function (context, f) {                                                                // 12
  return Meteor.bindEnvironment(withoutInvocation(f), context);                                           // 13
};                                                                                                        // 14
                                                                                                          // 15
_.extend(Meteor, {                                                                                        // 16
  // Meteor.setTimeout and Meteor.setInterval callbacks scheduled                                         // 17
  // inside a server method are not part of the method invocation and                                     // 18
  // should clear out the CurrentInvocation environment variable.                                         // 19
                                                                                                          // 20
  /**                                                                                                     // 21
   * @memberOf Meteor                                                                                     // 22
   * @summary Call a function in the future after waiting for a specified delay.                          // 23
   * @locus Anywhere                                                                                      // 24
   * @param {Function} func The function to run                                                           // 25
   * @param {Number} delay Number of milliseconds to wait before calling function                         // 26
   */                                                                                                     // 27
  setTimeout: function (f, duration) {                                                                    // 28
    return setTimeout(bindAndCatch("setTimeout callback", f), duration);                                  // 29
  },                                                                                                      // 30
                                                                                                          // 31
  /**                                                                                                     // 32
   * @memberOf Meteor                                                                                     // 33
   * @summary Call a function repeatedly, with a time delay between calls.                                // 34
   * @locus Anywhere                                                                                      // 35
   * @param {Function} func The function to run                                                           // 36
   * @param {Number} delay Number of milliseconds to wait between each function call.                     // 37
   */                                                                                                     // 38
  setInterval: function (f, duration) {                                                                   // 39
    return setInterval(bindAndCatch("setInterval callback", f), duration);                                // 40
  },                                                                                                      // 41
                                                                                                          // 42
  /**                                                                                                     // 43
   * @memberOf Meteor                                                                                     // 44
   * @summary Cancel a repeating function call scheduled by `Meteor.setInterval`.                         // 45
   * @locus Anywhere                                                                                      // 46
   * @param {Object} id The handle returned by `Meteor.setInterval`                                       // 47
   */                                                                                                     // 48
  clearInterval: function(x) {                                                                            // 49
    return clearInterval(x);                                                                              // 50
  },                                                                                                      // 51
                                                                                                          // 52
  /**                                                                                                     // 53
   * @memberOf Meteor                                                                                     // 54
   * @summary Cancel a function call scheduled by `Meteor.setTimeout`.                                    // 55
   * @locus Anywhere                                                                                      // 56
   * @param {Object} id The handle returned by `Meteor.setTimeout`                                        // 57
   */                                                                                                     // 58
  clearTimeout: function(x) {                                                                             // 59
    return clearTimeout(x);                                                                               // 60
  },                                                                                                      // 61
                                                                                                          // 62
  // XXX consider making this guarantee ordering of defer'd callbacks, like                               // 63
  // Tracker.afterFlush or Node's nextTick (in practice). Then tests can do:                              // 64
  //    callSomethingThatDefersSomeWork();                                                                // 65
  //    Meteor.defer(expect(somethingThatValidatesThatTheWorkHappened));                                  // 66
                                                                                                          // 67
  /**                                                                                                     // 68
   * @memberOf Meteor                                                                                     // 69
   * @summary Defer execution of a function to run asynchronously in the background (similar to `Meteor.setTimeout(func, 0)`.
   * @locus Anywhere                                                                                      // 71
   * @param {Function} func The function to run                                                           // 72
   */                                                                                                     // 73
  defer: function (f) {                                                                                   // 74
    Meteor._setImmediate(bindAndCatch("defer callback", f));                                              // 75
  }                                                                                                       // 76
});                                                                                                       // 77
                                                                                                          // 78
////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                        //
// packages/meteor/errors.js                                                                              //
//                                                                                                        //
////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                          //
// Makes an error subclass which properly contains a stack trace in most                                  // 1
// environments. constructor can set fields on `this` (and should probably set                            // 2
// `message`, which is what gets displayed at the top of a stack trace).                                  // 3
//                                                                                                        // 4
Meteor.makeErrorType = function (name, constructor) {                                                     // 5
  var errorClass = function (/*arguments*/) {                                                             // 6
    // Ensure we get a proper stack trace in most Javascript environments                                 // 7
    if (Error.captureStackTrace) {                                                                        // 8
      // V8 environments (Chrome and Node.js)                                                             // 9
      Error.captureStackTrace(this, errorClass);                                                          // 10
    } else {                                                                                              // 11
      // Borrow the .stack property of a native Error object.                                             // 12
      this.stack = new Error().stack;                                                                     // 13
    }                                                                                                     // 14
    // Safari magically works.                                                                            // 15
                                                                                                          // 16
    constructor.apply(this, arguments);                                                                   // 17
                                                                                                          // 18
    this.errorType = name;                                                                                // 19
  };                                                                                                      // 20
                                                                                                          // 21
  Meteor._inherits(errorClass, Error);                                                                    // 22
                                                                                                          // 23
  return errorClass;                                                                                      // 24
};                                                                                                        // 25
                                                                                                          // 26
// This should probably be in the livedata package, but we don't want                                     // 27
// to require you to use the livedata package to get it. Eventually we                                    // 28
// should probably rename it to DDP.Error and put it back in the                                          // 29
// 'livedata' package (which we should rename to 'ddp' also.)                                             // 30
//                                                                                                        // 31
// Note: The DDP server assumes that Meteor.Error EJSON-serializes as an object                           // 32
// containing 'error' and optionally 'reason' and 'details'.                                              // 33
// The DDP client manually puts these into Meteor.Error objects. (We don't use                            // 34
// EJSON.addType here because the type is determined by location in the                                   // 35
// protocol, not text on the wire.)                                                                       // 36
                                                                                                          // 37
/**                                                                                                       // 38
 * @summary This class represents a symbolic error thrown by a method.                                    // 39
 * @locus Anywhere                                                                                        // 40
 * @class                                                                                                 // 41
 * @param {String} error A string code uniquely identifying this kind of error.                           // 42
 * This string should be used by callers of the method to determine the                                   // 43
 * appropriate action to take, instead of attempting to parse the reason                                  // 44
 * or details fields. For example:                                                                        // 45
 *                                                                                                        // 46
 * ```                                                                                                    // 47
 * // on the server, pick a code unique to this error                                                     // 48
 * // the reason field should be a useful debug message                                                   // 49
 * throw new Meteor.Error("logged-out",                                                                   // 50
 *   "The user must be logged in to post a comment.");                                                    // 51
 *                                                                                                        // 52
 * // on the client                                                                                       // 53
 * Meteor.call("methodName", function (error) {                                                           // 54
 *   // identify the error                                                                                // 55
 *   if (error && error.error === "logged-out") {                                                         // 56
 *     // show a nice error message                                                                       // 57
 *     Session.set("errorMessage", "Please log in to post a comment.");                                   // 58
 *   }                                                                                                    // 59
 * });                                                                                                    // 60
 * ```                                                                                                    // 61
 *                                                                                                        // 62
 * For legacy reasons, some built-in Meteor functions such as `check` throw                               // 63
 * errors with a number in this field.                                                                    // 64
 *                                                                                                        // 65
 * @param {String} [reason] Optional.  A short human-readable summary of the                              // 66
 * error, like 'Not Found'.                                                                               // 67
 * @param {String} [details] Optional.  Additional information about the error,                           // 68
 * like a textual stack trace.                                                                            // 69
 */                                                                                                       // 70
Meteor.Error = Meteor.makeErrorType(                                                                      // 71
  "Meteor.Error",                                                                                         // 72
  function (error, reason, details) {                                                                     // 73
    var self = this;                                                                                      // 74
                                                                                                          // 75
    // String code uniquely identifying this kind of error.                                               // 76
    self.error = error;                                                                                   // 77
                                                                                                          // 78
    // Optional: A short human-readable summary of the error. Not                                         // 79
    // intended to be shown to end users, just developers. ("Not Found",                                  // 80
    // "Internal Server Error")                                                                           // 81
    self.reason = reason;                                                                                 // 82
                                                                                                          // 83
    // Optional: Additional information about the error, say for                                          // 84
    // debugging. It might be a (textual) stack trace if the server is                                    // 85
    // willing to provide one. The corresponding thing in HTTP would be                                   // 86
    // the body of a 404 or 500 response. (The difference is that we                                      // 87
    // never expect this to be shown to end users, only developers, so                                    // 88
    // it doesn't need to be pretty.)                                                                     // 89
    self.details = details;                                                                               // 90
                                                                                                          // 91
    // This is what gets displayed at the top of a stack trace. Current                                   // 92
    // format is "[404]" (if no reason is set) or "File not found [404]"                                  // 93
    if (self.reason)                                                                                      // 94
      self.message = self.reason + ' [' + self.error + ']';                                               // 95
    else                                                                                                  // 96
      self.message = '[' + self.error + ']';                                                              // 97
  });                                                                                                     // 98
                                                                                                          // 99
// Meteor.Error is basically data and is sent over DDP, so you should be able to                          // 100
// properly EJSON-clone it. This is especially important because if a                                     // 101
// Meteor.Error is thrown through a Future, the error, reason, and details                                // 102
// properties become non-enumerable so a standard Object clone won't preserve                             // 103
// them and they will be lost from DDP.                                                                   // 104
Meteor.Error.prototype.clone = function () {                                                              // 105
  var self = this;                                                                                        // 106
  return new Meteor.Error(self.error, self.reason, self.details);                                         // 107
};                                                                                                        // 108
                                                                                                          // 109
////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                        //
// packages/meteor/fiber_stubs_client.js                                                                  //
//                                                                                                        //
////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                          //
// This file is a partial analogue to fiber_helpers.js, which allows the client                           // 1
// to use a queue too, and also to call noYieldsAllowed.                                                  // 2
                                                                                                          // 3
// The client has no ability to yield, so noYieldsAllowed is a noop.                                      // 4
//                                                                                                        // 5
Meteor._noYieldsAllowed = function (f) {                                                                  // 6
  return f();                                                                                             // 7
};                                                                                                        // 8
                                                                                                          // 9
// An even simpler queue of tasks than the fiber-enabled one.  This one just                              // 10
// runs all the tasks when you call runTask or flush, synchronously.                                      // 11
//                                                                                                        // 12
Meteor._SynchronousQueue = function () {                                                                  // 13
  var self = this;                                                                                        // 14
  self._tasks = [];                                                                                       // 15
  self._running = false;                                                                                  // 16
  self._runTimeout = null;                                                                                // 17
};                                                                                                        // 18
                                                                                                          // 19
_.extend(Meteor._SynchronousQueue.prototype, {                                                            // 20
  runTask: function (task) {                                                                              // 21
    var self = this;                                                                                      // 22
    if (!self.safeToRunTask())                                                                            // 23
      throw new Error("Could not synchronously run a task from a running task");                          // 24
    self._tasks.push(task);                                                                               // 25
    var tasks = self._tasks;                                                                              // 26
    self._tasks = [];                                                                                     // 27
    self._running = true;                                                                                 // 28
                                                                                                          // 29
    if (self._runTimeout) {                                                                               // 30
      // Since we're going to drain the queue, we can forget about the timeout                            // 31
      // which tries to run it.  (But if one of our tasks queues something else,                          // 32
      // the timeout will be correctly re-created.)                                                       // 33
      clearTimeout(self._runTimeout);                                                                     // 34
      self._runTimeout = null;                                                                            // 35
    }                                                                                                     // 36
                                                                                                          // 37
    try {                                                                                                 // 38
      while (!_.isEmpty(tasks)) {                                                                         // 39
        var t = tasks.shift();                                                                            // 40
        try {                                                                                             // 41
          t();                                                                                            // 42
        } catch (e) {                                                                                     // 43
          if (_.isEmpty(tasks)) {                                                                         // 44
            // this was the last task, that is, the one we're calling runTask                             // 45
            // for.                                                                                       // 46
            throw e;                                                                                      // 47
          } else {                                                                                        // 48
            Meteor._debug("Exception in queued task: " + (e.stack || e));                                 // 49
          }                                                                                               // 50
        }                                                                                                 // 51
      }                                                                                                   // 52
    } finally {                                                                                           // 53
      self._running = false;                                                                              // 54
    }                                                                                                     // 55
  },                                                                                                      // 56
                                                                                                          // 57
  queueTask: function (task) {                                                                            // 58
    var self = this;                                                                                      // 59
    self._tasks.push(task);                                                                               // 60
    // Intentionally not using Meteor.setTimeout, because it doesn't like runing                          // 61
    // in stubs for now.                                                                                  // 62
    if (!self._runTimeout) {                                                                              // 63
      self._runTimeout = setTimeout(_.bind(self.flush, self), 0);                                         // 64
    }                                                                                                     // 65
  },                                                                                                      // 66
                                                                                                          // 67
  flush: function () {                                                                                    // 68
    var self = this;                                                                                      // 69
    self.runTask(function () {});                                                                         // 70
  },                                                                                                      // 71
                                                                                                          // 72
  drain: function () {                                                                                    // 73
    var self = this;                                                                                      // 74
    if (!self.safeToRunTask())                                                                            // 75
      return;                                                                                             // 76
    while (!_.isEmpty(self._tasks)) {                                                                     // 77
      self.flush();                                                                                       // 78
    }                                                                                                     // 79
  },                                                                                                      // 80
                                                                                                          // 81
  safeToRunTask: function () {                                                                            // 82
    var self = this;                                                                                      // 83
    return !self._running;                                                                                // 84
  }                                                                                                       // 85
});                                                                                                       // 86
                                                                                                          // 87
////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                        //
// packages/meteor/startup_client.js                                                                      //
//                                                                                                        //
////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                          //
var callbackQueue = [];                                                                                   // 1
var isLoadingCompleted = false;                                                                           // 2
var isReady = false;                                                                                      // 3
                                                                                                          // 4
// Keeps track of how many events to wait for in addition to loading completing,                          // 5
// before we're considered ready.                                                                         // 6
var readyHoldsCount = 0;                                                                                  // 7
                                                                                                          // 8
var holdReady =  function () {                                                                            // 9
  readyHoldsCount++;                                                                                      // 10
}                                                                                                         // 11
                                                                                                          // 12
var releaseReadyHold = function () {                                                                      // 13
  readyHoldsCount--;                                                                                      // 14
  maybeReady();                                                                                           // 15
}                                                                                                         // 16
                                                                                                          // 17
var maybeReady = function () {                                                                            // 18
  if (isReady || !isLoadingCompleted || readyHoldsCount > 0)                                              // 19
    return;                                                                                               // 20
                                                                                                          // 21
  isReady = true;                                                                                         // 22
                                                                                                          // 23
  // Run startup callbacks                                                                                // 24
  while (callbackQueue.length)                                                                            // 25
    (callbackQueue.shift())();                                                                            // 26
                                                                                                          // 27
  if (Meteor.isCordova) {                                                                                 // 28
    // Notify the WebAppLocalServer plugin that startup was completed successfully,                       // 29
    // so we can roll back faulty versions if this doesn't happen                                         // 30
    WebAppLocalServer.startupDidComplete();                                                               // 31
  }                                                                                                       // 32
};                                                                                                        // 33
                                                                                                          // 34
var loadingCompleted = function () {                                                                      // 35
  if (!isLoadingCompleted) {                                                                              // 36
    isLoadingCompleted = true;                                                                            // 37
    maybeReady();                                                                                         // 38
  }                                                                                                       // 39
}                                                                                                         // 40
                                                                                                          // 41
if (Meteor.isCordova) {                                                                                   // 42
  holdReady();                                                                                            // 43
  document.addEventListener('deviceready', releaseReadyHold, false);                                      // 44
}                                                                                                         // 45
                                                                                                          // 46
if (document.readyState === 'complete' || document.readyState === 'loaded') {                             // 47
  // Loading has completed,                                                                               // 48
  // but allow other scripts the opportunity to hold ready                                                // 49
  window.setTimeout(loadingCompleted);                                                                    // 50
} else { // Attach event listeners to wait for loading to complete                                        // 51
  if (document.addEventListener) {                                                                        // 52
    document.addEventListener('DOMContentLoaded', loadingCompleted, false);                               // 53
    window.addEventListener('load', loadingCompleted, false);                                             // 54
  } else { // Use IE event model for < IE9                                                                // 55
    document.attachEvent('onreadystatechange', function () {                                              // 56
      if (document.readyState === "complete") {                                                           // 57
        loadingCompleted();                                                                               // 58
      }                                                                                                   // 59
    });                                                                                                   // 60
    window.attachEvent('load', loadingCompleted);                                                         // 61
  }                                                                                                       // 62
}                                                                                                         // 63
                                                                                                          // 64
/**                                                                                                       // 65
 * @summary Run code when a client or a server starts.                                                    // 66
 * @locus Anywhere                                                                                        // 67
 * @param {Function} func A function to run on startup.                                                   // 68
 */                                                                                                       // 69
Meteor.startup = function (callback) {                                                                    // 70
  // Fix for < IE9, see http://javascript.nwbox.com/IEContentLoaded/                                      // 71
  var doScroll = !document.addEventListener &&                                                            // 72
    document.documentElement.doScroll;                                                                    // 73
                                                                                                          // 74
  if (!doScroll || window !== top) {                                                                      // 75
    if (isReady)                                                                                          // 76
      callback();                                                                                         // 77
    else                                                                                                  // 78
      callbackQueue.push(callback);                                                                       // 79
  } else {                                                                                                // 80
    try { doScroll('left'); }                                                                             // 81
    catch (error) {                                                                                       // 82
      setTimeout(function () { Meteor.startup(callback); }, 50);                                          // 83
      return;                                                                                             // 84
    };                                                                                                    // 85
    callback();                                                                                           // 86
  }                                                                                                       // 87
};                                                                                                        // 88
                                                                                                          // 89
////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                        //
// packages/meteor/debug.js                                                                               //
//                                                                                                        //
////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                          //
var suppress = 0;                                                                                         // 1
                                                                                                          // 2
// replacement for console.log. This is a temporary API. We should                                        // 3
// provide a real logging API soon (possibly just a polyfill for                                          // 4
// console?)                                                                                              // 5
//                                                                                                        // 6
// NOTE: this is used on the server to print the warning about                                            // 7
// having autopublish enabled when you probably meant to turn it                                          // 8
// off. it's not really the proper use of something called                                                // 9
// _debug. the intent is for this message to go to the terminal and                                       // 10
// be very visible. if you change _debug to go someplace else, etc,                                       // 11
// please fix the autopublish code to do something reasonable.                                            // 12
//                                                                                                        // 13
Meteor._debug = function (/* arguments */) {                                                              // 14
  if (suppress) {                                                                                         // 15
    suppress--;                                                                                           // 16
    return;                                                                                               // 17
  }                                                                                                       // 18
  if (typeof console !== 'undefined' &&                                                                   // 19
      typeof console.log !== 'undefined') {                                                               // 20
    if (arguments.length == 0) { // IE Companion breaks otherwise                                         // 21
      // IE10 PP4 requires at least one argument                                                          // 22
      console.log('');                                                                                    // 23
    } else {                                                                                              // 24
      // IE doesn't have console.log.apply, it's not a real Object.                                       // 25
      // http://stackoverflow.com/questions/5538972/console-log-apply-not-working-in-ie9                  // 26
      // http://patik.com/blog/complete-cross-browser-console-log/                                        // 27
      if (typeof console.log.apply === "function") {                                                      // 28
        // Most browsers                                                                                  // 29
                                                                                                          // 30
        // Chrome and Safari only hyperlink URLs to source files in first argument of                     // 31
        // console.log, so try to call it with one argument if possible.                                  // 32
        // Approach taken here: If all arguments are strings, join them on space.                         // 33
        // See https://github.com/meteor/meteor/pull/732#issuecomment-13975991                            // 34
        var allArgumentsOfTypeString = true;                                                              // 35
        for (var i = 0; i < arguments.length; i++)                                                        // 36
          if (typeof arguments[i] !== "string")                                                           // 37
            allArgumentsOfTypeString = false;                                                             // 38
                                                                                                          // 39
        if (allArgumentsOfTypeString)                                                                     // 40
          console.log.apply(console, [Array.prototype.join.call(arguments, " ")]);                        // 41
        else                                                                                              // 42
          console.log.apply(console, arguments);                                                          // 43
                                                                                                          // 44
      } else if (typeof Function.prototype.bind === "function") {                                         // 45
        // IE9                                                                                            // 46
        var log = Function.prototype.bind.call(console.log, console);                                     // 47
        log.apply(console, arguments);                                                                    // 48
      } else {                                                                                            // 49
        // IE8                                                                                            // 50
        Function.prototype.call.call(console.log, console, Array.prototype.slice.call(arguments));        // 51
      }                                                                                                   // 52
    }                                                                                                     // 53
  }                                                                                                       // 54
};                                                                                                        // 55
                                                                                                          // 56
// Suppress the next 'count' Meteor._debug messsages. Use this to                                         // 57
// stop tests from spamming the console.                                                                  // 58
//                                                                                                        // 59
Meteor._suppress_log = function (count) {                                                                 // 60
  suppress += count;                                                                                      // 61
};                                                                                                        // 62
                                                                                                          // 63
Meteor._suppressed_log_expected = function () {                                                           // 64
  return suppress !== 0;                                                                                  // 65
};                                                                                                        // 66
                                                                                                          // 67
                                                                                                          // 68
////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                        //
// packages/meteor/string_utils.js                                                                        //
//                                                                                                        //
////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                          //
// Like Perl's quotemeta: quotes all regexp metacharacters.                                               // 1
// Code taken from                                                                                        // 2
// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions                      // 3
Meteor._escapeRegExp = function (string) {                                                                // 4
    return String(string).replace(/[.*+?^${}()|[\]\\]/g, "\\$&");                                         // 5
};                                                                                                        // 6
                                                                                                          // 7
////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                        //
// packages/meteor/test_environment.js                                                                    //
//                                                                                                        //
////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                          //
var TEST_METADATA_STR;                                                                                    // 1
if (Meteor.isClient) {                                                                                    // 2
  TEST_METADATA_STR = meteorEnv.TEST_METADATA;                                                            // 3
} else {                                                                                                  // 4
  TEST_METADATA_STR = process.env.TEST_METADATA;                                                          // 5
}                                                                                                         // 6
                                                                                                          // 7
var TEST_METADATA = JSON.parse(TEST_METADATA_STR || "{}");                                                // 8
var testDriverPackageName = TEST_METADATA.driverPackage;                                                  // 9
                                                                                                          // 10
// Note that if we are in test-packages mode neither of these will be set,                                // 11
// but we will have a test driver package                                                                 // 12
Meteor.isTest = !!TEST_METADATA.isTest;                                                                   // 13
Meteor.isAppTest = !!TEST_METADATA.isAppTest;                                                             // 14
Meteor.isPackageTest = !!testDriverPackageName && !Meteor.isTest && !Meteor.isAppTest;                    // 15
                                                                                                          // 16
if (typeof testDriverPackageName === "string") {                                                          // 17
  Meteor.startup(function() {                                                                             // 18
    var testDriverPackage = Package[testDriverPackageName];                                               // 19
    if (! testDriverPackage) {                                                                            // 20
      throw new Error("Can't find test driver package: " + testDriverPackageName);                        // 21
    }                                                                                                     // 22
                                                                                                          // 23
    // On the client, the test driver *must* define `runTests`                                            // 24
    if (Meteor.isClient) {                                                                                // 25
      if (typeof testDriverPackage.runTests !== "function") {                                             // 26
        throw new Error("Test driver package " + testDriverPackageName                                    // 27
          + " missing `runTests` export");                                                                // 28
      }                                                                                                   // 29
      testDriverPackage.runTests();                                                                       // 30
    } else {                                                                                              // 31
      // The server can optionally define `start`                                                         // 32
      if (typeof testDriverPackage.start === "function") {                                                // 33
        testDriverPackage.start();                                                                        // 34
      }                                                                                                   // 35
    }                                                                                                     // 36
  });                                                                                                     // 37
}                                                                                                         // 38
                                                                                                          // 39
////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                        //
// packages/meteor/dynamics_browser.js                                                                    //
//                                                                                                        //
////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                          //
// Simple implementation of dynamic scoping, for use in browsers                                          // 1
                                                                                                          // 2
var nextSlot = 0;                                                                                         // 3
var currentValues = [];                                                                                   // 4
                                                                                                          // 5
Meteor.EnvironmentVariable = function () {                                                                // 6
  this.slot = nextSlot++;                                                                                 // 7
};                                                                                                        // 8
                                                                                                          // 9
_.extend(Meteor.EnvironmentVariable.prototype, {                                                          // 10
  get: function () {                                                                                      // 11
    return currentValues[this.slot];                                                                      // 12
  },                                                                                                      // 13
                                                                                                          // 14
  getOrNullIfOutsideFiber: function () {                                                                  // 15
    return this.get();                                                                                    // 16
  },                                                                                                      // 17
                                                                                                          // 18
  withValue: function (value, func) {                                                                     // 19
    var saved = currentValues[this.slot];                                                                 // 20
    try {                                                                                                 // 21
      currentValues[this.slot] = value;                                                                   // 22
      var ret = func();                                                                                   // 23
    } finally {                                                                                           // 24
      currentValues[this.slot] = saved;                                                                   // 25
    }                                                                                                     // 26
    return ret;                                                                                           // 27
  }                                                                                                       // 28
});                                                                                                       // 29
                                                                                                          // 30
Meteor.bindEnvironment = function (func, onException, _this) {                                            // 31
  // needed in order to be able to create closures inside func and                                        // 32
  // have the closed variables not change back to their original                                          // 33
  // values                                                                                               // 34
  var boundValues = _.clone(currentValues);                                                               // 35
                                                                                                          // 36
  if (!onException || typeof(onException) === 'string') {                                                 // 37
    var description = onException || "callback of async function";                                        // 38
    onException = function (error) {                                                                      // 39
      Meteor._debug(                                                                                      // 40
        "Exception in " + description + ":",                                                              // 41
        error && error.stack || error                                                                     // 42
      );                                                                                                  // 43
    };                                                                                                    // 44
  }                                                                                                       // 45
                                                                                                          // 46
  return function (/* arguments */) {                                                                     // 47
    var savedValues = currentValues;                                                                      // 48
    try {                                                                                                 // 49
      currentValues = boundValues;                                                                        // 50
      var ret = func.apply(_this, _.toArray(arguments));                                                  // 51
    } catch (e) {                                                                                         // 52
      // note: callback-hook currently relies on the fact that if onException                             // 53
      // throws in the browser, the wrapped call throws.                                                  // 54
      onException(e);                                                                                     // 55
    } finally {                                                                                           // 56
      currentValues = savedValues;                                                                        // 57
    }                                                                                                     // 58
    return ret;                                                                                           // 59
  };                                                                                                      // 60
};                                                                                                        // 61
                                                                                                          // 62
Meteor._nodeCodeMustBeInFiber = function () {                                                             // 63
  // no-op on browser                                                                                     // 64
};                                                                                                        // 65
                                                                                                          // 66
////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                        //
// packages/meteor/url_common.js                                                                          //
//                                                                                                        //
////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                          //
/**                                                                                                       // 1
 * @summary Generate an absolute URL pointing to the application. The server reads from the `ROOT_URL` environment variable to determine where it is running. This is taken care of automatically for apps deployed to Galaxy, but must be provided when using `meteor build`.
 * @locus Anywhere                                                                                        // 3
 * @param {String} [path] A path to append to the root URL. Do not include a leading "`/`".               // 4
 * @param {Object} [options]                                                                              // 5
 * @param {Boolean} options.secure Create an HTTPS URL.                                                   // 6
 * @param {Boolean} options.replaceLocalhost Replace localhost with 127.0.0.1. Useful for services that don't recognize localhost as a domain name.
 * @param {String} options.rootUrl Override the default ROOT_URL from the server environment. For example: "`http://foo.example.com`"
 */                                                                                                       // 9
Meteor.absoluteUrl = function (path, options) {                                                           // 10
  // path is optional                                                                                     // 11
  if (!options && typeof path === 'object') {                                                             // 12
    options = path;                                                                                       // 13
    path = undefined;                                                                                     // 14
  }                                                                                                       // 15
  // merge options with defaults                                                                          // 16
  options = _.extend({}, Meteor.absoluteUrl.defaultOptions, options || {});                               // 17
                                                                                                          // 18
  var url = options.rootUrl;                                                                              // 19
  if (!url)                                                                                               // 20
    throw new Error("Must pass options.rootUrl or set ROOT_URL in the server environment");               // 21
                                                                                                          // 22
  if (!/^http[s]?:\/\//i.test(url)) // url starts with 'http://' or 'https://'                            // 23
    url = 'http://' + url; // we will later fix to https if options.secure is set                         // 24
                                                                                                          // 25
  if (!/\/$/.test(url)) // url ends with '/'                                                              // 26
    url += '/';                                                                                           // 27
                                                                                                          // 28
  if (path)                                                                                               // 29
    url += path;                                                                                          // 30
                                                                                                          // 31
  // turn http to https if secure option is set, and we're not talking                                    // 32
  // to localhost.                                                                                        // 33
  if (options.secure &&                                                                                   // 34
      /^http:/.test(url) && // url starts with 'http:'                                                    // 35
      !/http:\/\/localhost[:\/]/.test(url) && // doesn't match localhost                                  // 36
      !/http:\/\/127\.0\.0\.1[:\/]/.test(url)) // or 127.0.0.1                                            // 37
    url = url.replace(/^http:/, 'https:');                                                                // 38
                                                                                                          // 39
  if (options.replaceLocalhost)                                                                           // 40
    url = url.replace(/^http:\/\/localhost([:\/].*)/, 'http://127.0.0.1$1');                              // 41
                                                                                                          // 42
  return url;                                                                                             // 43
};                                                                                                        // 44
                                                                                                          // 45
// allow later packages to override default options                                                       // 46
Meteor.absoluteUrl.defaultOptions = { };                                                                  // 47
if (typeof __meteor_runtime_config__ === "object" &&                                                      // 48
    __meteor_runtime_config__.ROOT_URL)                                                                   // 49
  Meteor.absoluteUrl.defaultOptions.rootUrl = __meteor_runtime_config__.ROOT_URL;                         // 50
                                                                                                          // 51
                                                                                                          // 52
Meteor._relativeToSiteRootUrl = function (link) {                                                         // 53
  if (typeof __meteor_runtime_config__ === "object" &&                                                    // 54
      link.substr(0, 1) === "/")                                                                          // 55
    link = (__meteor_runtime_config__.ROOT_URL_PATH_PREFIX || "") + link;                                 // 56
  return link;                                                                                            // 57
};                                                                                                        // 58
                                                                                                          // 59
////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package.meteor = {}, {
  Meteor: Meteor,
  global: global,
  meteorEnv: meteorEnv
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {



/* Exports */
if (typeof Package === 'undefined') Package = {};
Package['meteor-base'] = {};

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;

/* Package-scope variables */
var makeInstaller, meteorInstall;

/////////////////////////////////////////////////////////////////////////////
//                                                                         //
// packages/modules-runtime/.npm/package/node_modules/install/install.js   //
// This file is in bare mode and is not in its own closure.                //
//                                                                         //
/////////////////////////////////////////////////////////////////////////////
                                                                           //
makeInstaller = function (options) {                                       // 1
  "use strict";                                                            // 2
                                                                           // 3
  options = options || {};                                                 // 4
                                                                           // 5
  // These file extensions will be appended to required module identifiers
  // if they do not exactly match an installed module.                     // 7
  var defaultExtensions = options.extensions || [".js", ".json"];          // 8
                                                                           // 9
  // If defined, the options.onInstall function will be called any time    // 10
  // new modules are installed.                                            // 11
  var onInstall = options.onInstall;                                       // 12
                                                                           // 13
  // If defined, each module-specific require function will be passed to   // 14
  // this function, along with the module.id of the parent module, and     // 15
  // the result will be used in place of the original require function.    // 16
  var wrapRequire = options.wrapRequire;                                   // 17
                                                                           // 18
  // If defined, the options.override function will be called before       // 19
  // looking up any top-level package identifiers in node_modules          // 20
  // directories. It can either return a string to provide an alternate    // 21
  // package identifier, or a non-string value to prevent the lookup from  // 22
  // proceeding.                                                           // 23
  var override = options.override;                                         // 24
                                                                           // 25
  // If defined, the options.fallback function will be called when no      // 26
  // installed module is found for a required module identifier. Often     // 27
  // options.fallback will be implemented in terms of the native Node      // 28
  // require function, which has the ability to load binary modules.       // 29
  var fallback = options.fallback;                                         // 30
                                                                           // 31
  // If truthy, package resolution will prefer the "browser" field of      // 32
  // package.json files to the "main" field. Note that this only supports  // 33
  // string-valued "browser" fields for now, though in the future it might
  // make sense to support the object version, a la browserify.            // 35
  var browser = options.browser;                                           // 36
                                                                           // 37
  // Called below as hasOwn.call(obj, key).                                // 38
  var hasOwn = {}.hasOwnProperty;                                          // 39
                                                                           // 40
  // The file object representing the root directory of the installed      // 41
  // module tree.                                                          // 42
  var root = new File("/", new File("/.."));                               // 43
  var rootRequire = makeRequire(root);                                     // 44
                                                                           // 45
  // Merges the given tree of directories and module factory functions     // 46
  // into the tree of installed modules and returns a require function     // 47
  // that behaves as if called from a module in the root directory.        // 48
  function install(tree, options) {                                        // 49
    if (isObject(tree)) {                                                  // 50
      fileMergeContents(root, tree, options);                              // 51
      if (isFunction(onInstall)) {                                         // 52
        onInstall(rootRequire);                                            // 53
      }                                                                    // 54
    }                                                                      // 55
    return rootRequire;                                                    // 56
  }                                                                        // 57
                                                                           // 58
  // This constructor will be used to instantiate the module objects       // 59
  // passed to module factory functions (i.e. the third argument after     // 60
  // require and exports), and is exposed as install.Module in case the    // 61
  // caller of makeInstaller wishes to modify Module.prototype.            // 62
  function Module(id) {                                                    // 63
    this.id = id;                                                          // 64
                                                                           // 65
    // The Node implementation of module.children unfortunately includes   // 66
    // only those child modules that were imported for the first time by   // 67
    // this parent module (i.e., child.parent === this).                   // 68
    this.children = [];                                                    // 69
                                                                           // 70
    // This object is an install.js extension that includes all child      // 71
    // modules imported by this module, even if this module is not the     // 72
    // first to import them.                                               // 73
    this.childrenById = {};                                                // 74
  }                                                                        // 75
                                                                           // 76
  Module.prototype.resolve = function (id) {                               // 77
    return this.require.resolve(id);                                       // 78
  };                                                                       // 79
                                                                           // 80
  install.Module = Module;                                                 // 81
                                                                           // 82
  function getOwn(obj, key) {                                              // 83
    return hasOwn.call(obj, key) && obj[key];                              // 84
  }                                                                        // 85
                                                                           // 86
  function isObject(value) {                                               // 87
    return value && typeof value === "object";                             // 88
  }                                                                        // 89
                                                                           // 90
  function isFunction(value) {                                             // 91
    return typeof value === "function";                                    // 92
  }                                                                        // 93
                                                                           // 94
  function isString(value) {                                               // 95
    return typeof value === "string";                                      // 96
  }                                                                        // 97
                                                                           // 98
  function makeRequire(file) {                                             // 99
    function require(id) {                                                 // 100
      var result = fileResolve(file, id);                                  // 101
      if (result) {                                                        // 102
        return fileEvaluate(result, file.m);                               // 103
      }                                                                    // 104
                                                                           // 105
      var error = new Error("Cannot find module '" + id + "'");            // 106
                                                                           // 107
      if (isFunction(fallback)) {                                          // 108
        return fallback(                                                   // 109
          id, // The missing module identifier.                            // 110
          file.m.id, // The path of the requiring file.                    // 111
          error // The error we would have thrown.                         // 112
        );                                                                 // 113
      }                                                                    // 114
                                                                           // 115
      throw error;                                                         // 116
    }                                                                      // 117
                                                                           // 118
    if (isFunction(wrapRequire)) {                                         // 119
      require = wrapRequire(require, file.m.id);                           // 120
    }                                                                      // 121
                                                                           // 122
    require.extensions = fileGetExtensions(file).slice(0);                 // 123
                                                                           // 124
    require.resolve = function (id) {                                      // 125
      var f = fileResolve(file, id);                                       // 126
      if (f) return f.m.id;                                                // 127
      var error = new Error("Cannot find module '" + id + "'");            // 128
      if (fallback && isFunction(fallback.resolve)) {                      // 129
        return fallback.resolve(id, file.m.id, error);                     // 130
      }                                                                    // 131
      throw error;                                                         // 132
    };                                                                     // 133
                                                                           // 134
    return require;                                                        // 135
  }                                                                        // 136
                                                                           // 137
  // File objects represent either directories or modules that have been   // 138
  // installed. When a `File` respresents a directory, its `.c` (contents)
  // property is an object containing the names of the files (or           // 140
  // directories) that it contains. When a `File` represents a module, its
  // `.c` property is a function that can be invoked with the appropriate  // 142
  // `(require, exports, module)` arguments to evaluate the module. If the
  // `.c` property is a string, that string will be resolved as a module   // 144
  // identifier, and the exports of the resulting module will provide the  // 145
  // exports of the original file. The `.p` (parent) property of a File is
  // either a directory `File` or `null`. Note that a child may claim      // 147
  // another `File` as its parent even if the parent does not have an      // 148
  // entry for that child in its `.c` object.  This is important for       // 149
  // implementing anonymous files, and preventing child modules from using
  // `../relative/identifier` syntax to examine unrelated modules.         // 151
  function File(name, parent) {                                            // 152
    var file = this;                                                       // 153
                                                                           // 154
    // Link to the parent file.                                            // 155
    file.p = parent = parent || null;                                      // 156
                                                                           // 157
    // The module object for this File, which will eventually boast an     // 158
    // .exports property when/if the file is evaluated.                    // 159
    file.m = new Module(name);                                             // 160
  }                                                                        // 161
                                                                           // 162
  function fileEvaluate(file, parentModule) {                              // 163
    var contents = file && file.c;                                         // 164
    var module = file.m;                                                   // 165
                                                                           // 166
    if (! hasOwn.call(module, "exports")) {                                // 167
      if (parentModule) {                                                  // 168
        module.parent = parentModule;                                      // 169
        var children = parentModule.children;                              // 170
        if (Array.isArray(children)) {                                     // 171
          children.push(module);                                           // 172
        }                                                                  // 173
      }                                                                    // 174
                                                                           // 175
      // If a Module.prototype.useNode method is defined, give it a chance
      // to define module.exports based on module.id using Node.           // 177
      if (! isFunction(module.useNode) ||                                  // 178
          ! module.useNode()) {                                            // 179
        contents(                                                          // 180
          module.require = module.require || makeRequire(file),            // 181
          module.exports = {},                                             // 182
          module,                                                          // 183
          file.m.id,                                                       // 184
          file.p.m.id                                                      // 185
        );                                                                 // 186
      }                                                                    // 187
                                                                           // 188
      module.loaded = true;                                                // 189
    }                                                                      // 190
                                                                           // 191
    if (isFunction(module.runModuleSetters)) {                             // 192
      module.runModuleSetters();                                           // 193
    }                                                                      // 194
                                                                           // 195
    return module.exports;                                                 // 196
  }                                                                        // 197
                                                                           // 198
  function fileIsDirectory(file) {                                         // 199
    return file && isObject(file.c);                                       // 200
  }                                                                        // 201
                                                                           // 202
  function fileMergeContents(file, contents, options) {                    // 203
    // If contents is an array of strings and functions, return the last   // 204
    // function with a `.d` property containing all the strings.           // 205
    if (Array.isArray(contents)) {                                         // 206
      var deps = [];                                                       // 207
                                                                           // 208
      contents.forEach(function (item) {                                   // 209
        if (isString(item)) {                                              // 210
          deps.push(item);                                                 // 211
        } else if (isFunction(item)) {                                     // 212
          contents = item;                                                 // 213
        }                                                                  // 214
      });                                                                  // 215
                                                                           // 216
      if (isFunction(contents)) {                                          // 217
        contents.d = deps;                                                 // 218
      } else {                                                             // 219
        // If the array did not contain a function, merge nothing.         // 220
        contents = null;                                                   // 221
      }                                                                    // 222
                                                                           // 223
    } else if (isFunction(contents)) {                                     // 224
      // If contents is already a function, make sure it has `.d`.         // 225
      contents.d = contents.d || [];                                       // 226
                                                                           // 227
    } else if (! isString(contents) &&                                     // 228
               ! isObject(contents)) {                                     // 229
      // If contents is neither an array nor a function nor a string nor   // 230
      // an object, just give up and merge nothing.                        // 231
      contents = null;                                                     // 232
    }                                                                      // 233
                                                                           // 234
    if (contents) {                                                        // 235
      file.c = file.c || (isObject(contents) ? {} : contents);             // 236
      if (isObject(contents) && fileIsDirectory(file)) {                   // 237
        Object.keys(contents).forEach(function (key) {                     // 238
          if (key === "..") {                                              // 239
            child = file.p;                                                // 240
                                                                           // 241
          } else {                                                         // 242
            var child = getOwn(file.c, key);                               // 243
            if (! child) {                                                 // 244
              child = file.c[key] = new File(                              // 245
                file.m.id.replace(/\/*$/, "/") + key,                      // 246
                file                                                       // 247
              );                                                           // 248
                                                                           // 249
              child.o = options;                                           // 250
            }                                                              // 251
          }                                                                // 252
                                                                           // 253
          fileMergeContents(child, contents[key], options);                // 254
        });                                                                // 255
      }                                                                    // 256
    }                                                                      // 257
  }                                                                        // 258
                                                                           // 259
  function fileGetExtensions(file) {                                       // 260
    return file.o && file.o.extensions || defaultExtensions;               // 261
  }                                                                        // 262
                                                                           // 263
  function fileAppendIdPart(file, part, extensions) {                      // 264
    // Always append relative to a directory.                              // 265
    while (file && ! fileIsDirectory(file)) {                              // 266
      file = file.p;                                                       // 267
    }                                                                      // 268
                                                                           // 269
    if (! file || ! part || part === ".") {                                // 270
      return file;                                                         // 271
    }                                                                      // 272
                                                                           // 273
    if (part === "..") {                                                   // 274
      return file.p;                                                       // 275
    }                                                                      // 276
                                                                           // 277
    var exactChild = getOwn(file.c, part);                                 // 278
                                                                           // 279
    // Only consider multiple file extensions if this part is the last     // 280
    // part of a module identifier and not equal to `.` or `..`, and there
    // was no exact match or the exact match was a directory.              // 282
    if (extensions && (! exactChild || fileIsDirectory(exactChild))) {     // 283
      for (var e = 0; e < extensions.length; ++e) {                        // 284
        var child = getOwn(file.c, part + extensions[e]);                  // 285
        if (child && ! fileIsDirectory(child)) {                           // 286
          return child;                                                    // 287
        }                                                                  // 288
      }                                                                    // 289
    }                                                                      // 290
                                                                           // 291
    return exactChild;                                                     // 292
  }                                                                        // 293
                                                                           // 294
  function fileAppendId(file, id, extensions) {                            // 295
    var parts = id.split("/");                                             // 296
                                                                           // 297
    // Use `Array.prototype.every` to terminate iteration early if         // 298
    // `fileAppendIdPart` returns a falsy value.                           // 299
    parts.every(function (part, i) {                                       // 300
      return file = i < parts.length - 1                                   // 301
        ? fileAppendIdPart(file, part)                                     // 302
        : fileAppendIdPart(file, part, extensions);                        // 303
    });                                                                    // 304
                                                                           // 305
    return file;                                                           // 306
  }                                                                        // 307
                                                                           // 308
  function recordChild(parentModule, childFile) {                          // 309
    var childModule = childFile && childFile.m;                            // 310
    if (parentModule && childModule) {                                     // 311
      parentModule.childrenById[childModule.id] = childModule;             // 312
    }                                                                      // 313
  }                                                                        // 314
                                                                           // 315
  function fileResolve(file, id, parentModule, seenDirFiles) {             // 316
    var parentModule = parentModule || file.m;                             // 317
    var extensions = fileGetExtensions(file);                              // 318
                                                                           // 319
    file =                                                                 // 320
      // Absolute module identifiers (i.e. those that begin with a `/`     // 321
      // character) are interpreted relative to the root directory, which  // 322
      // is a slight deviation from Node, which has access to the entire   // 323
      // file system.                                                      // 324
      id.charAt(0) === "/" ? fileAppendId(root, id, extensions) :          // 325
      // Relative module identifiers are interpreted relative to the       // 326
      // current file, naturally.                                          // 327
      id.charAt(0) === "." ? fileAppendId(file, id, extensions) :          // 328
      // Top-level module identifiers are interpreted as referring to      // 329
      // packages in `node_modules` directories.                           // 330
      nodeModulesLookup(file, id, extensions);                             // 331
                                                                           // 332
    // If the identifier resolves to a directory, we use the same logic as
    // Node to find an `index.js` or `package.json` file to evaluate.      // 334
    while (fileIsDirectory(file)) {                                        // 335
      seenDirFiles = seenDirFiles || [];                                   // 336
                                                                           // 337
      // If the "main" field of a `package.json` file resolves to a        // 338
      // directory we've already considered, then we should not attempt to
      // read the same `package.json` file again. Using an array as a set  // 340
      // is acceptable here because the number of directories to consider  // 341
      // is rarely greater than 1 or 2. Also, using indexOf allows us to   // 342
      // store File objects instead of strings.                            // 343
      if (seenDirFiles.indexOf(file) < 0) {                                // 344
        seenDirFiles.push(file);                                           // 345
                                                                           // 346
        var pkgJsonFile = fileAppendIdPart(file, "package.json"), main;    // 347
        var pkg = pkgJsonFile && fileEvaluate(pkgJsonFile, parentModule);  // 348
        if (pkg && (browser &&                                             // 349
                    isString(main = pkg.browser) ||                        // 350
                    isString(main = pkg.main))) {                          // 351
          recordChild(parentModule, pkgJsonFile);                          // 352
                                                                           // 353
          // The "main" field of package.json does not have to begin with  // 354
          // ./ to be considered relative, so first we try simply          // 355
          // appending it to the directory path before falling back to a   // 356
          // full fileResolve, which might return a package from a         // 357
          // node_modules directory.                                       // 358
          file = fileAppendId(file, main, extensions) ||                   // 359
            fileResolve(file, main, parentModule, seenDirFiles);           // 360
                                                                           // 361
          if (file) {                                                      // 362
            // The fileAppendId call above may have returned a directory,  // 363
            // so continue the loop to make sure we resolve it to a        // 364
            // non-directory file.                                         // 365
            continue;                                                      // 366
          }                                                                // 367
        }                                                                  // 368
      }                                                                    // 369
                                                                           // 370
      // If we didn't find a `package.json` file, or it didn't have a      // 371
      // resolvable `.main` property, the only possibility left to         // 372
      // consider is that this directory contains an `index.js` module.    // 373
      // This assignment almost always terminates the while loop, because  // 374
      // there's very little chance `fileIsDirectory(file)` will be true   // 375
      // for the result of `fileAppendIdPart(file, "index.js")`. However,  // 376
      // in principle it is remotely possible that a file called           // 377
      // `index.js` could be a directory instead of a file.                // 378
      file = fileAppendIdPart(file, "index.js");                           // 379
    }                                                                      // 380
                                                                           // 381
    if (file && isString(file.c)) {                                        // 382
      file = fileResolve(file, file.c, parentModule, seenDirFiles);        // 383
    }                                                                      // 384
                                                                           // 385
    recordChild(parentModule, file);                                       // 386
                                                                           // 387
    return file;                                                           // 388
  };                                                                       // 389
                                                                           // 390
  function nodeModulesLookup(file, id, extensions) {                       // 391
    if (isFunction(override)) {                                            // 392
      id = override(id, file.m.id);                                        // 393
    }                                                                      // 394
                                                                           // 395
    if (isString(id)) {                                                    // 396
      for (var resolved; file && ! resolved; file = file.p) {              // 397
        resolved = fileIsDirectory(file) &&                                // 398
          fileAppendId(file, "node_modules/" + id, extensions);            // 399
      }                                                                    // 400
                                                                           // 401
      return resolved;                                                     // 402
    }                                                                      // 403
  }                                                                        // 404
                                                                           // 405
  return install;                                                          // 406
};                                                                         // 407
                                                                           // 408
if (typeof exports === "object") {                                         // 409
  exports.makeInstaller = makeInstaller;                                   // 410
}                                                                          // 411
                                                                           // 412
/////////////////////////////////////////////////////////////////////////////







(function(){

/////////////////////////////////////////////////////////////////////////////
//                                                                         //
// packages/modules-runtime/modules-runtime.js                             //
//                                                                         //
/////////////////////////////////////////////////////////////////////////////
                                                                           //
var options = {};                                                          // 1
var hasOwn = options.hasOwnProperty;                                       // 2
                                                                           // 3
// RegExp matching strings that don't start with a `.` or a `/`.           // 4
var topLevelIdPattern = /^[^./]/;                                          // 5
                                                                           // 6
if (typeof Profile === "function" &&                                       // 7
    process.env.METEOR_PROFILE) {                                          // 8
  options.wrapRequire = function (require) {                               // 9
    return Profile(function (id) {                                         // 10
      return "require(" + JSON.stringify(id) + ")";                        // 11
    }, require);                                                           // 12
  };                                                                       // 13
}                                                                          // 14
                                                                           // 15
// On the client, make package resolution prefer the "browser" field of    // 16
// package.json files to the "main" field.                                 // 17
options.browser = Meteor.isClient;                                         // 18
                                                                           // 19
// This function will be called whenever a module identifier that hasn't   // 20
// been installed is required. For backwards compatibility, and so that we
// can require binary dependencies on the server, we implement the         // 22
// fallback in terms of Npm.require.                                       // 23
options.fallback = function (id, parentId, error) {                        // 24
  // For simplicity, we honor only top-level module identifiers here.      // 25
  // We could try to honor relative and absolute module identifiers by     // 26
  // somehow combining `id` with `dir`, but we'd have to be really careful
  // that the resulting modules were located in a known directory (not     // 28
  // some arbitrary location on the file system), and we only really need  // 29
  // the fallback for dependencies installed in node_modules directories.  // 30
  if (topLevelIdPattern.test(id)) {                                        // 31
    if (typeof Npm === "object" &&                                         // 32
        typeof Npm.require === "function") {                               // 33
      return Npm.require(id);                                              // 34
    }                                                                      // 35
  }                                                                        // 36
                                                                           // 37
  throw error;                                                             // 38
};                                                                         // 39
                                                                           // 40
options.fallback.resolve = function (id, parentId, error) {                // 41
  if (Meteor.isServer &&                                                   // 42
      topLevelIdPattern.test(id)) {                                        // 43
    // Allow any top-level identifier to resolve to itself on the server,  // 44
    // so that options.fallback can have a chance to handle it.            // 45
    return id;                                                             // 46
  }                                                                        // 47
                                                                           // 48
  throw error;                                                             // 49
};                                                                         // 50
                                                                           // 51
meteorInstall = makeInstaller(options);                                    // 52
var Mp = meteorInstall.Module.prototype;                                   // 53
                                                                           // 54
if (Meteor.isServer) {                                                     // 55
  Mp.useNode = function () {                                               // 56
    if (typeof npmRequire !== "function") {                                // 57
      // Can't use Node if npmRequire is not defined.                      // 58
      return false;                                                        // 59
    }                                                                      // 60
                                                                           // 61
    var parts = this.id.split("/");                                        // 62
    var start = 0;                                                         // 63
    if (parts[start] === "") ++start;                                      // 64
    if (parts[start] === "node_modules" &&                                 // 65
        parts[start + 1] === "meteor") {                                   // 66
      start += 2;                                                          // 67
    }                                                                      // 68
                                                                           // 69
    if (parts.indexOf("node_modules", start) < 0) {                        // 70
      // Don't try to use Node for modules that aren't in node_modules     // 71
      // directories.                                                      // 72
      return false;                                                        // 73
    }                                                                      // 74
                                                                           // 75
    try {                                                                  // 76
      npmRequire.resolve(this.id);                                         // 77
    } catch (e) {                                                          // 78
      return false;                                                        // 79
    }                                                                      // 80
                                                                           // 81
    this.exports = npmRequire(this.id);                                    // 82
                                                                           // 83
    return true;                                                           // 84
  };                                                                       // 85
}                                                                          // 86
                                                                           // 87
/////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package['modules-runtime'] = {}, {
  meteorInstall: meteorInstall
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var _ = Package.underscore._;
var meteorInstall = Package['modules-runtime'].meteorInstall;

/* Package-scope variables */
var Buffer, process;

var require = meteorInstall({"node_modules":{"meteor":{"modules":{"client.js":["./install-packages.js","./stubs.js","./buffer.js","./process.js","./reify.js","./css",function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/modules/client.js                                                                                          //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require("./install-packages.js");                                                                                      // 1
require("./stubs.js");                                                                                                 // 2
require("./buffer.js");                                                                                                // 3
require("./process.js");                                                                                               // 4
require("./reify.js");                                                                                                 // 5
                                                                                                                       // 6
exports.addStyles = require("./css").addStyles;                                                                        // 7
                                                                                                                       // 8
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"buffer.js":["buffer",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/modules/buffer.js                                                                                          //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
try {                                                                                                                  // 1
  Buffer = global.Buffer || require("buffer").Buffer;                                                                  // 2
} catch (noBuffer) {}                                                                                                  // 3
                                                                                                                       // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"css.js":function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/modules/css.js                                                                                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var doc = document;                                                                                                    // 1
var head = doc.getElementsByTagName("head").item(0);                                                                   // 2
                                                                                                                       // 3
exports.addStyles = function (css) {                                                                                   // 4
  var style = doc.createElement("style");                                                                              // 5
                                                                                                                       // 6
  style.setAttribute("type", "text/css");                                                                              // 7
                                                                                                                       // 8
  // https://msdn.microsoft.com/en-us/library/ms535871(v=vs.85).aspx                                                   // 9
  var internetExplorerSheetObject =                                                                                    // 10
    style.sheet || // Edge/IE11.                                                                                       // 11
    style.styleSheet; // Older IEs.                                                                                    // 12
                                                                                                                       // 13
  if (internetExplorerSheetObject) {                                                                                   // 14
    internetExplorerSheetObject.cssText = css;                                                                         // 15
  } else {                                                                                                             // 16
    style.appendChild(doc.createTextNode(css));                                                                        // 17
  }                                                                                                                    // 18
                                                                                                                       // 19
  return head.appendChild(style);                                                                                      // 20
};                                                                                                                     // 21
                                                                                                                       // 22
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"install-packages.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/modules/install-packages.js                                                                                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
function install(name, mainModule) {                                                                                   // 1
  var meteorDir = {};                                                                                                  // 2
                                                                                                                       // 3
  // Given a package name <name>, install a stub module in the                                                         // 4
  // /node_modules/meteor directory called <name>.js, so that                                                          // 5
  // require.resolve("meteor/<name>") will always return                                                               // 6
  // /node_modules/meteor/<name>.js instead of something like                                                          // 7
  // /node_modules/meteor/<name>/index.js, in the rare but possible event                                              // 8
  // that the package contains a file called index.js (#6590).                                                         // 9
                                                                                                                       // 10
  if (mainModule) {                                                                                                    // 11
    meteorDir[name + ".js"] = [mainModule, function (require, e, module) {                                             // 12
      module.exports = require(mainModule);                                                                            // 13
    }];                                                                                                                // 14
  } else {                                                                                                             // 15
    // back compat with old Meteor packages                                                                            // 16
    meteorDir[name + ".js"] = function (r, e, module) {                                                                // 17
      module.exports = Package[name];                                                                                  // 18
    };                                                                                                                 // 19
  }                                                                                                                    // 20
                                                                                                                       // 21
  meteorInstall({                                                                                                      // 22
    node_modules: {                                                                                                    // 23
      meteor: meteorDir                                                                                                // 24
    }                                                                                                                  // 25
  });                                                                                                                  // 26
}                                                                                                                      // 27
                                                                                                                       // 28
// This file will be modified during computeJsOutputFilesMap to include                                                // 29
// install(<name>) calls for every Meteor package.                                                                     // 30
                                                                                                                       // 31
install("underscore");                                                                                                 // 32
install("meteor");                                                                                                     // 33
install("meteor-base");                                                                                                // 34
install("modules-runtime");                                                                                            // 35
install("modules", "meteor/modules/client.js");                                                                        // 36
install("promise", "meteor/promise/client.js");                                                                        // 37
install("ecmascript-runtime", "meteor/ecmascript-runtime/runtime.js");                                                 // 38
install("babel-compiler");                                                                                             // 39
install("ecmascript");                                                                                                 // 40
install("babel-runtime", "meteor/babel-runtime/babel-runtime.js");                                                     // 41
install("webapp");                                                                                                     // 42
install("base64");                                                                                                     // 43
install("ejson");                                                                                                      // 44
install("check", "meteor/check/match.js");                                                                             // 45
install("random");                                                                                                     // 46
install("tracker");                                                                                                    // 47
install("retry");                                                                                                      // 48
install("id-map");                                                                                                     // 49
install("ddp-common");                                                                                                 // 50
install("reload");                                                                                                     // 51
install("diff-sequence");                                                                                              // 52
install("mongo-id");                                                                                                   // 53
install("ddp-client", "meteor/ddp-client/namespace.js");                                                               // 54
install("ddp");                                                                                                        // 55
install("ddp-server");                                                                                                 // 56
install("livedata");                                                                                                   // 57
install("hot-code-push");                                                                                              // 58
install("ordered-dict");                                                                                               // 59
install("geojson-utils", "meteor/geojson-utils/main.js");                                                              // 60
install("minimongo");                                                                                                  // 61
install("allow-deny");                                                                                                 // 62
install("mongo");                                                                                                      // 63
install("autoupdate");                                                                                                 // 64
                                                                                                                       // 65
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"process.js":["process",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/modules/process.js                                                                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
try {                                                                                                                  // 1
  // The application can run `npm install process` to provide its own                                                  // 2
  // process stub; otherwise this module will provide a partial stub.                                                  // 3
  process = global.process || require("process");                                                                      // 4
} catch (noProcess) {                                                                                                  // 5
  process = {};                                                                                                        // 6
}                                                                                                                      // 7
                                                                                                                       // 8
if (Meteor.isServer) {                                                                                                 // 9
  // Make require("process") work on the server in all versions of Node.                                               // 10
  meteorInstall({                                                                                                      // 11
    node_modules: {                                                                                                    // 12
      "process.js": function (r, e, module) {                                                                          // 13
        module.exports = process;                                                                                      // 14
      }                                                                                                                // 15
    }                                                                                                                  // 16
  });                                                                                                                  // 17
} else {                                                                                                               // 18
  process.platform = "browser";                                                                                        // 19
  process.nextTick = process.nextTick || Meteor._setImmediate;                                                         // 20
}                                                                                                                      // 21
                                                                                                                       // 22
if (typeof process.env !== "object") {                                                                                 // 23
  process.env = {};                                                                                                    // 24
}                                                                                                                      // 25
                                                                                                                       // 26
_.extend(process.env, meteorEnv);                                                                                      // 27
                                                                                                                       // 28
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"reify.js":["reify/lib/runtime",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/modules/reify.js                                                                                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var Module = module.constructor;                                                                                       // 1
require("reify/lib/runtime").enable(Module);                                                                           // 2
var Mp = Module.prototype;                                                                                             // 3
Mp.importSync = Mp.importSync || Mp.import;                                                                            // 4
Mp.import = Mp.import || Mp.importSync;                                                                                // 5
                                                                                                                       // 6
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"stubs.js":["meteor-node-stubs",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/modules/stubs.js                                                                                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var haveStubs = false;                                                                                                 // 1
try {                                                                                                                  // 2
  require.resolve("meteor-node-stubs");                                                                                // 3
  haveStubs = true;                                                                                                    // 4
} catch (noStubs) {}                                                                                                   // 5
                                                                                                                       // 6
if (haveStubs) {                                                                                                       // 7
  // When meteor-node-stubs is installed in the application's root                                                     // 8
  // node_modules directory, requiring it here installs aliases for stubs                                              // 9
  // for all Node built-in modules, such as fs, util, and http.                                                        // 10
  require("meteor-node-stubs");                                                                                        // 11
}                                                                                                                      // 12
                                                                                                                       // 13
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"node_modules":{"reify":{"lib":{"runtime.js":["./entry.js",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/modules/node_modules/reify/lib/runtime.js                                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
"use strict";                                                                                                          // 1
                                                                                                                       // 2
var hasOwn = Object.prototype.hasOwnProperty;                                                                          // 3
var Entry = require("./entry.js").Entry;                                                                               // 4
                                                                                                                       // 5
exports.enable = function (Module) {                                                                                   // 6
  var Mp = Module.prototype;                                                                                           // 7
                                                                                                                       // 8
  if (typeof Mp.importSync === "function" &&                                                                           // 9
      typeof Mp.export === "function") {                                                                               // 10
    // If the Mp.{importSync,export} methods have already been defined,                                                // 11
    // abandon reification immediately.                                                                                // 12
    return Module;                                                                                                     // 13
  }                                                                                                                    // 14
                                                                                                                       // 15
  // Platform-specific code should implement this method however                                                       // 16
  // appropriate. Module.prototype.resolve(id) should return an absolute                                               // 17
  // version of the given module identifier, like require.resolve.                                                     // 18
  Mp.resolve = Mp.resolve || function resolve(id) {                                                                    // 19
    throw new Error("Module.prototype.resolve not implemented");                                                       // 20
  };                                                                                                                   // 21
                                                                                                                       // 22
  // Platform-specific code should find a way to call this method whenever                                             // 23
  // the module system is about to return module.exports from require. This                                            // 24
  // might happen more than once per module, in case of dependency cycles,                                             // 25
  // so we want Module.prototype.runModuleSetters to run each time.                                                    // 26
  Mp.runModuleSetters = function runModuleSetters(valueToPassThrough) {                                                // 27
    var entry = Entry.get(this.id);                                                                                    // 28
    if (entry) {                                                                                                       // 29
      entry.runModuleSetters(this);                                                                                    // 30
    }                                                                                                                  // 31
                                                                                                                       // 32
    // Assignments to exported local variables get wrapped with calls to                                               // 33
    // module.runModuleSetters, so module.runModuleSetters returns the                                                 // 34
    // valueToPassThrough parameter to allow the value of the original                                                 // 35
    // expression to pass through. For example,                                                                        // 36
    //                                                                                                                 // 37
    //   export var a = 1;                                                                                             // 38
    //   console.log(a += 3);                                                                                          // 39
    //                                                                                                                 // 40
    // becomes                                                                                                         // 41
    //                                                                                                                 // 42
    //   module.export("a", () => a);                                                                                  // 43
    //   var a = 1;                                                                                                    // 44
    //   console.log(module.runModuleSetters(a += 3));                                                                 // 45
    //                                                                                                                 // 46
    // This ensures module.runModuleSetters runs immediately after the                                                 // 47
    // assignment, and does not interfere with the larger computation.                                                 // 48
    return valueToPassThrough;                                                                                         // 49
  };                                                                                                                   // 50
                                                                                                                       // 51
  function setESModule(module) {                                                                                       // 52
    var exports = module.exports;                                                                                      // 53
    if (exports &&                                                                                                     // 54
        typeof exports === "object" &&                                                                                 // 55
        ! hasOwn.call(exports, "__esModule")) {                                                                        // 56
      Object.defineProperty(exports, "__esModule", {                                                                   // 57
        value: true,                                                                                                   // 58
        enumerable: false,                                                                                             // 59
        writable: false,                                                                                               // 60
        configurable: true                                                                                             // 61
      });                                                                                                              // 62
    }                                                                                                                  // 63
  }                                                                                                                    // 64
                                                                                                                       // 65
  // If key is provided, it will be used to identify the given setters so                                              // 66
  // that they can be replaced if module.importSync is called again with the                                           // 67
  // same key. This avoids potential memory leaks from import declarations                                             // 68
  // inside loops. The compiler generates these keys automatically (and                                                // 69
  // deterministically) when compiling nested import declarations.                                                     // 70
  Mp.importSync = function (id, setters, key) {                                                                        // 71
    setESModule(this);                                                                                                 // 72
                                                                                                                       // 73
    var absoluteId = this.resolve(id);                                                                                 // 74
                                                                                                                       // 75
    if (setters && typeof setters === "object") {                                                                      // 76
      var entry = Entry.getOrCreate(absoluteId);                                                                       // 77
      entry.addSetters(this, setters, key);                                                                            // 78
    }                                                                                                                  // 79
                                                                                                                       // 80
    var countBefore = entry ? entry.runCount : 0;                                                                      // 81
    var exports = this.require(absoluteId);                                                                            // 82
                                                                                                                       // 83
    if (entry && entry.runCount === countBefore) {                                                                     // 84
      // If require(absoluteId) didn't run any setters for this entry,                                                 // 85
      // perhaps because it's not the first time this module has been                                                  // 86
      // required, run the setters now using an object that passes as the                                              // 87
      // real module object.                                                                                           // 88
      entry.runModuleSetters({                                                                                         // 89
        id: absoluteId,                                                                                                // 90
        exports: exports,                                                                                              // 91
        getExportByName: Mp.getExportByName                                                                            // 92
      });                                                                                                              // 93
    }                                                                                                                  // 94
  };                                                                                                                   // 95
                                                                                                                       // 96
  // Register getter functions for local variables in the scope of an                                                  // 97
  // export statement. The keys of the getters object are exported names,                                              // 98
  // and the values are functions that return local values.                                                            // 99
  Mp.export = function (getters) {                                                                                     // 100
    setESModule(this);                                                                                                 // 101
                                                                                                                       // 102
    if (getters && typeof getters === "object") {                                                                      // 103
      Entry.getOrCreate(this.id).addGetters(getters);                                                                  // 104
    }                                                                                                                  // 105
                                                                                                                       // 106
    if (this.loaded) {                                                                                                 // 107
      // If the module has already been evaluated, then we need to trigger                                             // 108
      // another round of entry.runModuleSetters calls, which begins by                                                // 109
      // calling entry.runModuleGetters(module).                                                                       // 110
      this.runModuleSetters();                                                                                         // 111
    }                                                                                                                  // 112
  };                                                                                                                   // 113
                                                                                                                       // 114
  // This method can be overridden by client code to implement custom export                                           // 115
  // naming logic. The current implementation works well with Babel's                                                  // 116
  // __esModule convention.                                                                                            // 117
  Mp.getExportByName = function (name) {                                                                               // 118
    var exports = this.exports;                                                                                        // 119
                                                                                                                       // 120
    if (name === "*") {                                                                                                // 121
      return exports;                                                                                                  // 122
    }                                                                                                                  // 123
                                                                                                                       // 124
    if (name === "default" &&                                                                                          // 125
        ! (exports &&                                                                                                  // 126
           typeof exports === "object" &&                                                                              // 127
           exports.__esModule &&                                                                                       // 128
           "default" in exports)) {                                                                                    // 129
      return exports;                                                                                                  // 130
    }                                                                                                                  // 131
                                                                                                                       // 132
    return exports && exports[name];                                                                                   // 133
  };                                                                                                                   // 134
                                                                                                                       // 135
  return Module;                                                                                                       // 136
};                                                                                                                     // 137
                                                                                                                       // 138
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"entry.js":["./utils.js",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/modules/node_modules/reify/lib/entry.js                                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
"use strict";                                                                                                          // 1
                                                                                                                       // 2
var utils = require("./utils.js");                                                                                     // 3
                                                                                                                       // 4
var entryMap = Object.create(null);                                                                                    // 5
var hasOwn = Object.prototype.hasOwnProperty;                                                                          // 6
                                                                                                                       // 7
function Entry(id) {                                                                                                   // 8
  // Same as module.id for this module.                                                                                // 9
  this.id = id;                                                                                                        // 10
  // The number of times this.runModuleSetters has been called.                                                        // 11
  this.runCount = 0;                                                                                                   // 12
  // Setters for assigning to local variables in parent modules.                                                       // 13
  this.setters = Object.create(null);                                                                                  // 14
  // Getters for local variables exported from this module.                                                            // 15
  this.getters = Object.create(null);                                                                                  // 16
}                                                                                                                      // 17
                                                                                                                       // 18
var Ep = Entry.prototype;                                                                                              // 19
                                                                                                                       // 20
Entry.get = function (id) {                                                                                            // 21
  return entryMap[id] || null;                                                                                         // 22
};                                                                                                                     // 23
                                                                                                                       // 24
Entry.getOrCreate = function (id) {                                                                                    // 25
  return entryMap[id] = entryMap[id] || new Entry(id);                                                                 // 26
};                                                                                                                     // 27
                                                                                                                       // 28
var keySalt = 0;                                                                                                       // 29
function makeUniqueKey() {                                                                                             // 30
  return Math.random()                                                                                                 // 31
    .toString(36)                                                                                                      // 32
    // Add an incrementing salt to help track key ordering and also                                                    // 33
    // absolutely guarantee we never return the same key twice.                                                        // 34
    .replace("0.", ++keySalt + ":");                                                                                   // 35
}                                                                                                                      // 36
                                                                                                                       // 37
Ep.addSetters = function (parent, setters, key) {                                                                      // 38
  if (typeof key === "undefined") {                                                                                    // 39
    // If no key was provided, make a new unique key that won't collide                                                // 40
    // with any other keys.                                                                                            // 41
    key = makeUniqueKey();                                                                                             // 42
  } else {                                                                                                             // 43
    // If a key was provided, make sure it is distinct from keys provided                                              // 44
    // by other parent modules.                                                                                        // 45
    key = parent.id + ":" + key;                                                                                       // 46
  }                                                                                                                    // 47
                                                                                                                       // 48
  var names = Object.keys(setters);                                                                                    // 49
  var nameCount = names.length;                                                                                        // 50
                                                                                                                       // 51
  for (var i = 0; i < nameCount; ++i) {                                                                                // 52
    var name = names[i];                                                                                               // 53
    var setter = setters[name];                                                                                        // 54
    if (typeof setter === "function" &&                                                                                // 55
        // Ignore any requests for the exports.__esModule property."                                                   // 56
        name !== "__esModule") {                                                                                       // 57
      setter.parent = parent;                                                                                          // 58
      (this.setters[name] =                                                                                            // 59
       this.setters[name] || Object.create(null)                                                                       // 60
      )[key] = setter;                                                                                                 // 61
    }                                                                                                                  // 62
  }                                                                                                                    // 63
};                                                                                                                     // 64
                                                                                                                       // 65
Ep.addGetters = function (getters) {                                                                                   // 66
  var names = Object.keys(getters);                                                                                    // 67
  var nameCount = names.length;                                                                                        // 68
                                                                                                                       // 69
  for (var i = 0; i < nameCount; ++i) {                                                                                // 70
    var name = names[i];                                                                                               // 71
    var getter = getters[name];                                                                                        // 72
    if (typeof getter === "function" &&                                                                                // 73
        // Ignore any requests for the exports.__esModule property."                                                   // 74
        name !== "__esModule" &&                                                                                       // 75
        // Should this throw if hasOwn.call(this.getters, name)?                                                       // 76
        ! hasOwn.call(this.getters, name)) {                                                                           // 77
      this.getters[name] = getter;                                                                                     // 78
    }                                                                                                                  // 79
  }                                                                                                                    // 80
};                                                                                                                     // 81
                                                                                                                       // 82
function runModuleSetters(module) {                                                                                    // 83
  var entry = entryMap[module.id];                                                                                     // 84
  if (entry) {                                                                                                         // 85
    entry.runModuleSetters(module);                                                                                    // 86
  }                                                                                                                    // 87
}                                                                                                                      // 88
                                                                                                                       // 89
Ep.runModuleGetters = function (module) {                                                                              // 90
  var names = Object.keys(this.getters);                                                                               // 91
  var nameCount = names.length;                                                                                        // 92
                                                                                                                       // 93
  for (var i = 0; i < nameCount; ++i) {                                                                                // 94
    this.runGetter(module, names[i]);                                                                                  // 95
  }                                                                                                                    // 96
};                                                                                                                     // 97
                                                                                                                       // 98
// Returns true iff the getter updated module.exports with a new value.                                                // 99
Ep.runGetter = function (module, name) {                                                                               // 100
  if (hasOwn.call(this.getters, name)) {                                                                               // 101
    try {                                                                                                              // 102
      // Update module.exports[name] with the current value so that CommonJS                                           // 103
      // require calls remain consistent with module.importSync.                                                       // 104
      return module.exports[name] =                                                                                    // 105
        this.getters[name].call(module);                                                                               // 106
                                                                                                                       // 107
    } catch (e) {                                                                                                      // 108
      // If the getter threw an exception, avoid updating module.exports                                               // 109
      // and return undefined.                                                                                         // 110
    }                                                                                                                  // 111
  }                                                                                                                    // 112
};                                                                                                                     // 113
                                                                                                                       // 114
// Called whenever module.exports might have changed, to trigger any                                                   // 115
// setters associated with the newly exported values.                                                                  // 116
Ep.runModuleSetters = function (module) {                                                                              // 117
  var entry = this;                                                                                                    // 118
  var names = Object.keys(this.setters);                                                                               // 119
                                                                                                                       // 120
  // Make sure module.exports is up to date before we call                                                             // 121
  // module.getExportByName(name).                                                                                     // 122
  this.runModuleGetters(module);                                                                                       // 123
                                                                                                                       // 124
  if (! names.length) {                                                                                                // 125
    ++this.runCount;                                                                                                   // 126
    return;                                                                                                            // 127
  }                                                                                                                    // 128
                                                                                                                       // 129
  // Invoke the given callback once for every (setter, value, name) triple                                             // 130
  // that needs to be called. Note that forEachSetter does not call any                                                // 131
  // setters itself, only the given callback.                                                                          // 132
  function forEachSetter(callback, context) {                                                                          // 133
    var nameCount = names.length;                                                                                      // 134
                                                                                                                       // 135
    for (var i = 0; i < nameCount; ++i) {                                                                              // 136
      var name = names[i];                                                                                             // 137
      var setters = entry.setters[name];                                                                               // 138
      var keys = Object.keys(setters);                                                                                 // 139
      var keyCount = keys.length;                                                                                      // 140
                                                                                                                       // 141
      for (var j = 0; j < keyCount; ++j) {                                                                             // 142
        var key = keys[j];                                                                                             // 143
        var value = module.getExportByName(name);                                                                      // 144
                                                                                                                       // 145
        if (name === "*") {                                                                                            // 146
          var valueNames = Object.keys(value);                                                                         // 147
          var valueNameCount = valueNames.length;                                                                      // 148
                                                                                                                       // 149
          for (var k = 0; k < valueNameCount; ++k) {                                                                   // 150
            var valueName = valueNames[k];                                                                             // 151
            call(setters[key], value[valueName], valueName);                                                           // 152
          }                                                                                                            // 153
                                                                                                                       // 154
        } else {                                                                                                       // 155
          call(setters[key], value, name);                                                                             // 156
        }                                                                                                              // 157
      }                                                                                                                // 158
    }                                                                                                                  // 159
                                                                                                                       // 160
    function call(setter, value, name) {                                                                               // 161
      if (name === "__esModule") {                                                                                     // 162
        // Ignore setters asking for module.exports.__esModule.                                                        // 163
        return;                                                                                                        // 164
      }                                                                                                                // 165
                                                                                                                       // 166
      setter.last = setter.last || Object.create(null);                                                                // 167
                                                                                                                       // 168
      if (! hasOwn.call(setter.last, name) ||                                                                          // 169
          setter.last[name] !== value) {                                                                               // 170
        // Only invoke the callback if we have not called this setter                                                  // 171
        // (with a value of this name) before, or the current value is                                                 // 172
        // different from the last value we passed to this setter.                                                     // 173
        return callback.apply(context, arguments);                                                                     // 174
      }                                                                                                                // 175
    }                                                                                                                  // 176
  }                                                                                                                    // 177
                                                                                                                       // 178
  // Lazily-initialized object mapping parent module identifiers to parent                                             // 179
  // module objects whose setters we might need to run.                                                                // 180
  var relevantParents;                                                                                                 // 181
                                                                                                                       // 182
  // Take snapshots of setter.parent.exports for any setters that we are                                               // 183
  // planning to call, so that we can later determine if calling the                                                   // 184
  // setters modified any of those exports objects.                                                                    // 185
  forEachSetter(function (setter, value, name) {                                                                       // 186
    relevantParents = relevantParents || Object.create(null);                                                          // 187
    relevantParents[setter.parent.id] = setter.parent;                                                                 // 188
    setter.call(module, setter.last[name] = value, name);                                                              // 189
  });                                                                                                                  // 190
                                                                                                                       // 191
  ++entry.runCount;                                                                                                    // 192
                                                                                                                       // 193
  if (! relevantParents) {                                                                                             // 194
    return;                                                                                                            // 195
  }                                                                                                                    // 196
                                                                                                                       // 197
  // If any of the setters updated the module.exports of a parent module,                                              // 198
  // or updated local variables that are exported by that parent module,                                               // 199
  // then we must re-run any setters registered by that parent module.                                                 // 200
                                                                                                                       // 201
  var parentIDs = Object.keys(relevantParents);                                                                        // 202
  var parentIDCount = parentIDs.length;                                                                                // 203
                                                                                                                       // 204
  for (var i = 0; i < parentIDCount; ++i) {                                                                            // 205
    // What happens if relevantParents[parentIDs[id]] === module, or if                                                // 206
    // longer cycles exist in the parent chain? Thanks to our setter.last                                              // 207
    // bookkeeping above, the runModuleSetters broadcast will only proceed                                             // 208
    // as far as there are any actual changes to report.                                                               // 209
    runModuleSetters(relevantParents[parentIDs[i]]);                                                                   // 210
  }                                                                                                                    // 211
};                                                                                                                     // 212
                                                                                                                       // 213
exports.Entry = Entry;                                                                                                 // 214
                                                                                                                       // 215
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"utils.js":function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/modules/node_modules/reify/lib/utils.js                                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
"use strict";                                                                                                          // 1
                                                                                                                       // 2
exports.getNamesFromPattern = function (pattern) {                                                                     // 3
  var queue = [pattern];                                                                                               // 4
  var names = [];                                                                                                      // 5
                                                                                                                       // 6
  for (var i = 0; i < queue.length; ++i) {                                                                             // 7
    var pattern = queue[i];                                                                                            // 8
    if (! pattern) {                                                                                                   // 9
      continue;                                                                                                        // 10
    }                                                                                                                  // 11
                                                                                                                       // 12
    switch (pattern.type) {                                                                                            // 13
    case "Identifier":                                                                                                 // 14
      names.push(pattern.name);                                                                                        // 15
      break;                                                                                                           // 16
    case "Property":                                                                                                   // 17
    case "ObjectProperty":                                                                                             // 18
      queue.push(pattern.value);                                                                                       // 19
      break;                                                                                                           // 20
    case "AssignmentPattern":                                                                                          // 21
      queue.push(pattern.left);                                                                                        // 22
      break;                                                                                                           // 23
    case "ObjectPattern":                                                                                              // 24
      queue.push.apply(queue, pattern.properties);                                                                     // 25
      break;                                                                                                           // 26
    case "ArrayPattern":                                                                                               // 27
      queue.push.apply(queue, pattern.elements);                                                                       // 28
      break;                                                                                                           // 29
    case "RestElement":                                                                                                // 30
      queue.push(pattern.argument);                                                                                    // 31
      break;                                                                                                           // 32
    }                                                                                                                  // 33
  }                                                                                                                    // 34
                                                                                                                       // 35
  return names;                                                                                                        // 36
};                                                                                                                     // 37
                                                                                                                       // 38
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}}}}}},"meteor-node-stubs":{"package.json":function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor-node-stubs/package.json                                                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.name = "meteor-node-stubs";                                                                                    // 1
exports.version = "0.2.6";                                                                                             // 2
exports.main = "index.js";                                                                                             // 3
                                                                                                                       // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"index.js":["./map.json",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor-node-stubs/index.js                                                                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var map = require("./map.json");                                                                                       // 1
var meteorAliases = {};                                                                                                // 2
                                                                                                                       // 3
Object.keys(map).forEach(function (id) {                                                                               // 4
  if (typeof map[id] === "string") {                                                                                   // 5
    var aliasParts = module.id.split("/");                                                                             // 6
    aliasParts.pop();                                                                                                  // 7
    aliasParts.push("node_modules", map[id]);                                                                          // 8
    exports[id] = meteorAliases[id + ".js"] =                                                                          // 9
      aliasParts.join("/");                                                                                            // 10
  } else {                                                                                                             // 11
    exports[id] = map[id];                                                                                             // 12
    meteorAliases[id + ".js"] = function(){};                                                                          // 13
  }                                                                                                                    // 14
});                                                                                                                    // 15
                                                                                                                       // 16
if (typeof meteorInstall === "function") {                                                                             // 17
  meteorInstall({                                                                                                      // 18
    // Install the aliases into a node_modules directory one level up from                                             // 19
    // the root directory, so that they do not clutter the namespace                                                   // 20
    // available to apps and packages.                                                                                 // 21
    "..": {                                                                                                            // 22
      node_modules: meteorAliases                                                                                      // 23
    }                                                                                                                  // 24
  });                                                                                                                  // 25
}                                                                                                                      // 26
                                                                                                                       // 27
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"map.json":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor-node-stubs/map.json                                                                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = {                                                                                                     // 1
  "assert": "assert/",                                                                                                 // 2
  "buffer": "buffer/",                                                                                                 // 3
  "child_process": null,                                                                                               // 4
  "cluster": null,                                                                                                     // 5
  "console": "console-browserify",                                                                                     // 6
  "constants": "constants-browserify",                                                                                 // 7
  "crypto": "crypto-browserify",                                                                                       // 8
  "dgram": null,                                                                                                       // 9
  "dns": null,                                                                                                         // 10
  "domain": "domain-browser",                                                                                          // 11
  "events": "events/",                                                                                                 // 12
  "fs": null,                                                                                                          // 13
  "http": "http-browserify",                                                                                           // 14
  "https": "https-browserify",                                                                                         // 15
  "module": null,                                                                                                      // 16
  "net": null,                                                                                                         // 17
  "os": "os-browserify/browser.js",                                                                                    // 18
  "path": "path-browserify",                                                                                           // 19
  "process": "process/browser.js",                                                                                     // 20
  "punycode": "punycode/",                                                                                             // 21
  "querystring": "querystring-es3/",                                                                                   // 22
  "readline": null,                                                                                                    // 23
  "repl": null,                                                                                                        // 24
  "stream": "stream-browserify",                                                                                       // 25
  "_stream_duplex": "readable-stream/duplex.js",                                                                       // 26
  "_stream_passthrough": "readable-stream/passthrough.js",                                                             // 27
  "_stream_readable": "readable-stream/readable.js",                                                                   // 28
  "_stream_transform": "readable-stream/transform.js",                                                                 // 29
  "_stream_writable": "readable-stream/writable.js",                                                                   // 30
  "string_decoder": "string_decoder/",                                                                                 // 31
  "sys": "util/util.js",                                                                                               // 32
  "timers": "timers-browserify",                                                                                       // 33
  "tls": null,                                                                                                         // 34
  "tty": "tty-browserify",                                                                                             // 35
  "url": "url/",                                                                                                       // 36
  "util": "util/util.js",                                                                                              // 37
  "vm": "vm-browserify",                                                                                               // 38
  "zlib": "browserify-zlib"                                                                                            // 39
};                                                                                                                     // 40
                                                                                                                       // 41
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"deps":{"buffer.js":["buffer/",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor-node-stubs/deps/buffer.js                                                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require("buffer/");                                                                                                    // 1
                                                                                                                       // 2
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"process.js":["process/browser.js",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor-node-stubs/deps/process.js                                                                      //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require("process/browser.js");                                                                                         // 1
                                                                                                                       // 2
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"domain.js":["domain-browser",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor-node-stubs/deps/domain.js                                                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require("domain-browser");                                                                                             // 1
                                                                                                                       // 2
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]},"node_modules":{"buffer":{"package.json":function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor-node-stubs/node_modules/buffer/package.json                                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.name = "buffer";                                                                                               // 1
exports.version = "4.9.1";                                                                                             // 2
exports.main = "index.js";                                                                                             // 3
                                                                                                                       // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"index.js":["base64-js","ieee754","isarray",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor-node-stubs/node_modules/buffer/index.js                                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
/*!                                                                                                                    // 1
 * The buffer module from node.js, for the browser.                                                                    // 2
 *                                                                                                                     // 3
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>                                               // 4
 * @license  MIT                                                                                                       // 5
 */                                                                                                                    // 6
/* eslint-disable no-proto */                                                                                          // 7
                                                                                                                       // 8
'use strict'                                                                                                           // 9
                                                                                                                       // 10
var base64 = require('base64-js')                                                                                      // 11
var ieee754 = require('ieee754')                                                                                       // 12
var isArray = require('isarray')                                                                                       // 13
                                                                                                                       // 14
exports.Buffer = Buffer                                                                                                // 15
exports.SlowBuffer = SlowBuffer                                                                                        // 16
exports.INSPECT_MAX_BYTES = 50                                                                                         // 17
                                                                                                                       // 18
/**                                                                                                                    // 19
 * If `Buffer.TYPED_ARRAY_SUPPORT`:                                                                                    // 20
 *   === true    Use Uint8Array implementation (fastest)                                                               // 21
 *   === false   Use Object implementation (most compatible, even IE6)                                                 // 22
 *                                                                                                                     // 23
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,                                  // 24
 * Opera 11.6+, iOS 4.2+.                                                                                              // 25
 *                                                                                                                     // 26
 * Due to various browser bugs, sometimes the Object implementation will be used even                                  // 27
 * when the browser supports typed arrays.                                                                             // 28
 *                                                                                                                     // 29
 * Note:                                                                                                               // 30
 *                                                                                                                     // 31
 *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,                                 // 32
 *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.                                                       // 33
 *                                                                                                                     // 34
 *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.                                            // 35
 *                                                                                                                     // 36
 *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of                              // 37
 *     incorrect length in some situations.                                                                            // 38
                                                                                                                       // 39
 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they                              // 40
 * get the Object implementation, which is slower but behaves correctly.                                               // 41
 */                                                                                                                    // 42
Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined                                                  // 43
  ? global.TYPED_ARRAY_SUPPORT                                                                                         // 44
  : typedArraySupport()                                                                                                // 45
                                                                                                                       // 46
/*                                                                                                                     // 47
 * Export kMaxLength after typed array support is determined.                                                          // 48
 */                                                                                                                    // 49
exports.kMaxLength = kMaxLength()                                                                                      // 50
                                                                                                                       // 51
function typedArraySupport () {                                                                                        // 52
  try {                                                                                                                // 53
    var arr = new Uint8Array(1)                                                                                        // 54
    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}                                  // 55
    return arr.foo() === 42 && // typed array instances can be augmented                                               // 56
        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`                                           // 57
        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`                                              // 58
  } catch (e) {                                                                                                        // 59
    return false                                                                                                       // 60
  }                                                                                                                    // 61
}                                                                                                                      // 62
                                                                                                                       // 63
function kMaxLength () {                                                                                               // 64
  return Buffer.TYPED_ARRAY_SUPPORT                                                                                    // 65
    ? 0x7fffffff                                                                                                       // 66
    : 0x3fffffff                                                                                                       // 67
}                                                                                                                      // 68
                                                                                                                       // 69
function createBuffer (that, length) {                                                                                 // 70
  if (kMaxLength() < length) {                                                                                         // 71
    throw new RangeError('Invalid typed array length')                                                                 // 72
  }                                                                                                                    // 73
  if (Buffer.TYPED_ARRAY_SUPPORT) {                                                                                    // 74
    // Return an augmented `Uint8Array` instance, for best performance                                                 // 75
    that = new Uint8Array(length)                                                                                      // 76
    that.__proto__ = Buffer.prototype                                                                                  // 77
  } else {                                                                                                             // 78
    // Fallback: Return an object instance of the Buffer class                                                         // 79
    if (that === null) {                                                                                               // 80
      that = new Buffer(length)                                                                                        // 81
    }                                                                                                                  // 82
    that.length = length                                                                                               // 83
  }                                                                                                                    // 84
                                                                                                                       // 85
  return that                                                                                                          // 86
}                                                                                                                      // 87
                                                                                                                       // 88
/**                                                                                                                    // 89
 * The Buffer constructor returns instances of `Uint8Array` that have their                                            // 90
 * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of                                     // 91
 * `Uint8Array`, so the returned instances will have all the node `Buffer` methods                                     // 92
 * and the `Uint8Array` methods. Square bracket notation works as expected -- it                                       // 93
 * returns a single octet.                                                                                             // 94
 *                                                                                                                     // 95
 * The `Uint8Array` prototype remains unmodified.                                                                      // 96
 */                                                                                                                    // 97
                                                                                                                       // 98
function Buffer (arg, encodingOrOffset, length) {                                                                      // 99
  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {                                                      // 100
    return new Buffer(arg, encodingOrOffset, length)                                                                   // 101
  }                                                                                                                    // 102
                                                                                                                       // 103
  // Common case.                                                                                                      // 104
  if (typeof arg === 'number') {                                                                                       // 105
    if (typeof encodingOrOffset === 'string') {                                                                        // 106
      throw new Error(                                                                                                 // 107
        'If encoding is specified then the first argument must be a string'                                            // 108
      )                                                                                                                // 109
    }                                                                                                                  // 110
    return allocUnsafe(this, arg)                                                                                      // 111
  }                                                                                                                    // 112
  return from(this, arg, encodingOrOffset, length)                                                                     // 113
}                                                                                                                      // 114
                                                                                                                       // 115
Buffer.poolSize = 8192 // not used by this implementation                                                              // 116
                                                                                                                       // 117
// TODO: Legacy, not needed anymore. Remove in next major version.                                                     // 118
Buffer._augment = function (arr) {                                                                                     // 119
  arr.__proto__ = Buffer.prototype                                                                                     // 120
  return arr                                                                                                           // 121
}                                                                                                                      // 122
                                                                                                                       // 123
function from (that, value, encodingOrOffset, length) {                                                                // 124
  if (typeof value === 'number') {                                                                                     // 125
    throw new TypeError('"value" argument must not be a number')                                                       // 126
  }                                                                                                                    // 127
                                                                                                                       // 128
  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {                                            // 129
    return fromArrayBuffer(that, value, encodingOrOffset, length)                                                      // 130
  }                                                                                                                    // 131
                                                                                                                       // 132
  if (typeof value === 'string') {                                                                                     // 133
    return fromString(that, value, encodingOrOffset)                                                                   // 134
  }                                                                                                                    // 135
                                                                                                                       // 136
  return fromObject(that, value)                                                                                       // 137
}                                                                                                                      // 138
                                                                                                                       // 139
/**                                                                                                                    // 140
 * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError                                             // 141
 * if value is a number.                                                                                               // 142
 * Buffer.from(str[, encoding])                                                                                        // 143
 * Buffer.from(array)                                                                                                  // 144
 * Buffer.from(buffer)                                                                                                 // 145
 * Buffer.from(arrayBuffer[, byteOffset[, length]])                                                                    // 146
 **/                                                                                                                   // 147
Buffer.from = function (value, encodingOrOffset, length) {                                                             // 148
  return from(null, value, encodingOrOffset, length)                                                                   // 149
}                                                                                                                      // 150
                                                                                                                       // 151
if (Buffer.TYPED_ARRAY_SUPPORT) {                                                                                      // 152
  Buffer.prototype.__proto__ = Uint8Array.prototype                                                                    // 153
  Buffer.__proto__ = Uint8Array                                                                                        // 154
  if (typeof Symbol !== 'undefined' && Symbol.species &&                                                               // 155
      Buffer[Symbol.species] === Buffer) {                                                                             // 156
    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97                                         // 157
    Object.defineProperty(Buffer, Symbol.species, {                                                                    // 158
      value: null,                                                                                                     // 159
      configurable: true                                                                                               // 160
    })                                                                                                                 // 161
  }                                                                                                                    // 162
}                                                                                                                      // 163
                                                                                                                       // 164
function assertSize (size) {                                                                                           // 165
  if (typeof size !== 'number') {                                                                                      // 166
    throw new TypeError('"size" argument must be a number')                                                            // 167
  } else if (size < 0) {                                                                                               // 168
    throw new RangeError('"size" argument must not be negative')                                                       // 169
  }                                                                                                                    // 170
}                                                                                                                      // 171
                                                                                                                       // 172
function alloc (that, size, fill, encoding) {                                                                          // 173
  assertSize(size)                                                                                                     // 174
  if (size <= 0) {                                                                                                     // 175
    return createBuffer(that, size)                                                                                    // 176
  }                                                                                                                    // 177
  if (fill !== undefined) {                                                                                            // 178
    // Only pay attention to encoding if it's a string. This                                                           // 179
    // prevents accidentally sending in a number that would                                                            // 180
    // be interpretted as a start offset.                                                                              // 181
    return typeof encoding === 'string'                                                                                // 182
      ? createBuffer(that, size).fill(fill, encoding)                                                                  // 183
      : createBuffer(that, size).fill(fill)                                                                            // 184
  }                                                                                                                    // 185
  return createBuffer(that, size)                                                                                      // 186
}                                                                                                                      // 187
                                                                                                                       // 188
/**                                                                                                                    // 189
 * Creates a new filled Buffer instance.                                                                               // 190
 * alloc(size[, fill[, encoding]])                                                                                     // 191
 **/                                                                                                                   // 192
Buffer.alloc = function (size, fill, encoding) {                                                                       // 193
  return alloc(null, size, fill, encoding)                                                                             // 194
}                                                                                                                      // 195
                                                                                                                       // 196
function allocUnsafe (that, size) {                                                                                    // 197
  assertSize(size)                                                                                                     // 198
  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)                                                          // 199
  if (!Buffer.TYPED_ARRAY_SUPPORT) {                                                                                   // 200
    for (var i = 0; i < size; ++i) {                                                                                   // 201
      that[i] = 0                                                                                                      // 202
    }                                                                                                                  // 203
  }                                                                                                                    // 204
  return that                                                                                                          // 205
}                                                                                                                      // 206
                                                                                                                       // 207
/**                                                                                                                    // 208
 * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.                                    // 209
 * */                                                                                                                  // 210
Buffer.allocUnsafe = function (size) {                                                                                 // 211
  return allocUnsafe(null, size)                                                                                       // 212
}                                                                                                                      // 213
/**                                                                                                                    // 214
 * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.                                // 215
 */                                                                                                                    // 216
Buffer.allocUnsafeSlow = function (size) {                                                                             // 217
  return allocUnsafe(null, size)                                                                                       // 218
}                                                                                                                      // 219
                                                                                                                       // 220
function fromString (that, string, encoding) {                                                                         // 221
  if (typeof encoding !== 'string' || encoding === '') {                                                               // 222
    encoding = 'utf8'                                                                                                  // 223
  }                                                                                                                    // 224
                                                                                                                       // 225
  if (!Buffer.isEncoding(encoding)) {                                                                                  // 226
    throw new TypeError('"encoding" must be a valid string encoding')                                                  // 227
  }                                                                                                                    // 228
                                                                                                                       // 229
  var length = byteLength(string, encoding) | 0                                                                        // 230
  that = createBuffer(that, length)                                                                                    // 231
                                                                                                                       // 232
  var actual = that.write(string, encoding)                                                                            // 233
                                                                                                                       // 234
  if (actual !== length) {                                                                                             // 235
    // Writing a hex string, for example, that contains invalid characters will                                        // 236
    // cause everything after the first invalid character to be ignored. (e.g.                                         // 237
    // 'abxxcd' will be treated as 'ab')                                                                               // 238
    that = that.slice(0, actual)                                                                                       // 239
  }                                                                                                                    // 240
                                                                                                                       // 241
  return that                                                                                                          // 242
}                                                                                                                      // 243
                                                                                                                       // 244
function fromArrayLike (that, array) {                                                                                 // 245
  var length = array.length < 0 ? 0 : checked(array.length) | 0                                                        // 246
  that = createBuffer(that, length)                                                                                    // 247
  for (var i = 0; i < length; i += 1) {                                                                                // 248
    that[i] = array[i] & 255                                                                                           // 249
  }                                                                                                                    // 250
  return that                                                                                                          // 251
}                                                                                                                      // 252
                                                                                                                       // 253
function fromArrayBuffer (that, array, byteOffset, length) {                                                           // 254
  array.byteLength // this throws if `array` is not a valid ArrayBuffer                                                // 255
                                                                                                                       // 256
  if (byteOffset < 0 || array.byteLength < byteOffset) {                                                               // 257
    throw new RangeError('\'offset\' is out of bounds')                                                                // 258
  }                                                                                                                    // 259
                                                                                                                       // 260
  if (array.byteLength < byteOffset + (length || 0)) {                                                                 // 261
    throw new RangeError('\'length\' is out of bounds')                                                                // 262
  }                                                                                                                    // 263
                                                                                                                       // 264
  if (byteOffset === undefined && length === undefined) {                                                              // 265
    array = new Uint8Array(array)                                                                                      // 266
  } else if (length === undefined) {                                                                                   // 267
    array = new Uint8Array(array, byteOffset)                                                                          // 268
  } else {                                                                                                             // 269
    array = new Uint8Array(array, byteOffset, length)                                                                  // 270
  }                                                                                                                    // 271
                                                                                                                       // 272
  if (Buffer.TYPED_ARRAY_SUPPORT) {                                                                                    // 273
    // Return an augmented `Uint8Array` instance, for best performance                                                 // 274
    that = array                                                                                                       // 275
    that.__proto__ = Buffer.prototype                                                                                  // 276
  } else {                                                                                                             // 277
    // Fallback: Return an object instance of the Buffer class                                                         // 278
    that = fromArrayLike(that, array)                                                                                  // 279
  }                                                                                                                    // 280
  return that                                                                                                          // 281
}                                                                                                                      // 282
                                                                                                                       // 283
function fromObject (that, obj) {                                                                                      // 284
  if (Buffer.isBuffer(obj)) {                                                                                          // 285
    var len = checked(obj.length) | 0                                                                                  // 286
    that = createBuffer(that, len)                                                                                     // 287
                                                                                                                       // 288
    if (that.length === 0) {                                                                                           // 289
      return that                                                                                                      // 290
    }                                                                                                                  // 291
                                                                                                                       // 292
    obj.copy(that, 0, 0, len)                                                                                          // 293
    return that                                                                                                        // 294
  }                                                                                                                    // 295
                                                                                                                       // 296
  if (obj) {                                                                                                           // 297
    if ((typeof ArrayBuffer !== 'undefined' &&                                                                         // 298
        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {                                                       // 299
      if (typeof obj.length !== 'number' || isnan(obj.length)) {                                                       // 300
        return createBuffer(that, 0)                                                                                   // 301
      }                                                                                                                // 302
      return fromArrayLike(that, obj)                                                                                  // 303
    }                                                                                                                  // 304
                                                                                                                       // 305
    if (obj.type === 'Buffer' && isArray(obj.data)) {                                                                  // 306
      return fromArrayLike(that, obj.data)                                                                             // 307
    }                                                                                                                  // 308
  }                                                                                                                    // 309
                                                                                                                       // 310
  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')            // 311
}                                                                                                                      // 312
                                                                                                                       // 313
function checked (length) {                                                                                            // 314
  // Note: cannot use `length < kMaxLength()` here because that fails when                                             // 315
  // length is NaN (which is otherwise coerced to zero.)                                                               // 316
  if (length >= kMaxLength()) {                                                                                        // 317
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +                                           // 318
                         'size: 0x' + kMaxLength().toString(16) + ' bytes')                                            // 319
  }                                                                                                                    // 320
  return length | 0                                                                                                    // 321
}                                                                                                                      // 322
                                                                                                                       // 323
function SlowBuffer (length) {                                                                                         // 324
  if (+length != length) { // eslint-disable-line eqeqeq                                                               // 325
    length = 0                                                                                                         // 326
  }                                                                                                                    // 327
  return Buffer.alloc(+length)                                                                                         // 328
}                                                                                                                      // 329
                                                                                                                       // 330
Buffer.isBuffer = function isBuffer (b) {                                                                              // 331
  return !!(b != null && b._isBuffer)                                                                                  // 332
}                                                                                                                      // 333
                                                                                                                       // 334
Buffer.compare = function compare (a, b) {                                                                             // 335
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {                                                                    // 336
    throw new TypeError('Arguments must be Buffers')                                                                   // 337
  }                                                                                                                    // 338
                                                                                                                       // 339
  if (a === b) return 0                                                                                                // 340
                                                                                                                       // 341
  var x = a.length                                                                                                     // 342
  var y = b.length                                                                                                     // 343
                                                                                                                       // 344
  for (var i = 0, len = Math.min(x, y); i < len; ++i) {                                                                // 345
    if (a[i] !== b[i]) {                                                                                               // 346
      x = a[i]                                                                                                         // 347
      y = b[i]                                                                                                         // 348
      break                                                                                                            // 349
    }                                                                                                                  // 350
  }                                                                                                                    // 351
                                                                                                                       // 352
  if (x < y) return -1                                                                                                 // 353
  if (y < x) return 1                                                                                                  // 354
  return 0                                                                                                             // 355
}                                                                                                                      // 356
                                                                                                                       // 357
Buffer.isEncoding = function isEncoding (encoding) {                                                                   // 358
  switch (String(encoding).toLowerCase()) {                                                                            // 359
    case 'hex':                                                                                                        // 360
    case 'utf8':                                                                                                       // 361
    case 'utf-8':                                                                                                      // 362
    case 'ascii':                                                                                                      // 363
    case 'latin1':                                                                                                     // 364
    case 'binary':                                                                                                     // 365
    case 'base64':                                                                                                     // 366
    case 'ucs2':                                                                                                       // 367
    case 'ucs-2':                                                                                                      // 368
    case 'utf16le':                                                                                                    // 369
    case 'utf-16le':                                                                                                   // 370
      return true                                                                                                      // 371
    default:                                                                                                           // 372
      return false                                                                                                     // 373
  }                                                                                                                    // 374
}                                                                                                                      // 375
                                                                                                                       // 376
Buffer.concat = function concat (list, length) {                                                                       // 377
  if (!isArray(list)) {                                                                                                // 378
    throw new TypeError('"list" argument must be an Array of Buffers')                                                 // 379
  }                                                                                                                    // 380
                                                                                                                       // 381
  if (list.length === 0) {                                                                                             // 382
    return Buffer.alloc(0)                                                                                             // 383
  }                                                                                                                    // 384
                                                                                                                       // 385
  var i                                                                                                                // 386
  if (length === undefined) {                                                                                          // 387
    length = 0                                                                                                         // 388
    for (i = 0; i < list.length; ++i) {                                                                                // 389
      length += list[i].length                                                                                         // 390
    }                                                                                                                  // 391
  }                                                                                                                    // 392
                                                                                                                       // 393
  var buffer = Buffer.allocUnsafe(length)                                                                              // 394
  var pos = 0                                                                                                          // 395
  for (i = 0; i < list.length; ++i) {                                                                                  // 396
    var buf = list[i]                                                                                                  // 397
    if (!Buffer.isBuffer(buf)) {                                                                                       // 398
      throw new TypeError('"list" argument must be an Array of Buffers')                                               // 399
    }                                                                                                                  // 400
    buf.copy(buffer, pos)                                                                                              // 401
    pos += buf.length                                                                                                  // 402
  }                                                                                                                    // 403
  return buffer                                                                                                        // 404
}                                                                                                                      // 405
                                                                                                                       // 406
function byteLength (string, encoding) {                                                                               // 407
  if (Buffer.isBuffer(string)) {                                                                                       // 408
    return string.length                                                                                               // 409
  }                                                                                                                    // 410
  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&                                // 411
      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {                                                 // 412
    return string.byteLength                                                                                           // 413
  }                                                                                                                    // 414
  if (typeof string !== 'string') {                                                                                    // 415
    string = '' + string                                                                                               // 416
  }                                                                                                                    // 417
                                                                                                                       // 418
  var len = string.length                                                                                              // 419
  if (len === 0) return 0                                                                                              // 420
                                                                                                                       // 421
  // Use a for loop to avoid recursion                                                                                 // 422
  var loweredCase = false                                                                                              // 423
  for (;;) {                                                                                                           // 424
    switch (encoding) {                                                                                                // 425
      case 'ascii':                                                                                                    // 426
      case 'latin1':                                                                                                   // 427
      case 'binary':                                                                                                   // 428
        return len                                                                                                     // 429
      case 'utf8':                                                                                                     // 430
      case 'utf-8':                                                                                                    // 431
      case undefined:                                                                                                  // 432
        return utf8ToBytes(string).length                                                                              // 433
      case 'ucs2':                                                                                                     // 434
      case 'ucs-2':                                                                                                    // 435
      case 'utf16le':                                                                                                  // 436
      case 'utf-16le':                                                                                                 // 437
        return len * 2                                                                                                 // 438
      case 'hex':                                                                                                      // 439
        return len >>> 1                                                                                               // 440
      case 'base64':                                                                                                   // 441
        return base64ToBytes(string).length                                                                            // 442
      default:                                                                                                         // 443
        if (loweredCase) return utf8ToBytes(string).length // assume utf8                                              // 444
        encoding = ('' + encoding).toLowerCase()                                                                       // 445
        loweredCase = true                                                                                             // 446
    }                                                                                                                  // 447
  }                                                                                                                    // 448
}                                                                                                                      // 449
Buffer.byteLength = byteLength                                                                                         // 450
                                                                                                                       // 451
function slowToString (encoding, start, end) {                                                                         // 452
  var loweredCase = false                                                                                              // 453
                                                                                                                       // 454
  // No need to verify that "this.length <= MAX_UINT32" since it's a read-only                                         // 455
  // property of a typed array.                                                                                        // 456
                                                                                                                       // 457
  // This behaves neither like String nor Uint8Array in that we set start/end                                          // 458
  // to their upper/lower bounds if the value passed is out of range.                                                  // 459
  // undefined is handled specially as per ECMA-262 6th Edition,                                                       // 460
  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.                                                   // 461
  if (start === undefined || start < 0) {                                                                              // 462
    start = 0                                                                                                          // 463
  }                                                                                                                    // 464
  // Return early if start > this.length. Done here to prevent potential uint32                                        // 465
  // coercion fail below.                                                                                              // 466
  if (start > this.length) {                                                                                           // 467
    return ''                                                                                                          // 468
  }                                                                                                                    // 469
                                                                                                                       // 470
  if (end === undefined || end > this.length) {                                                                        // 471
    end = this.length                                                                                                  // 472
  }                                                                                                                    // 473
                                                                                                                       // 474
  if (end <= 0) {                                                                                                      // 475
    return ''                                                                                                          // 476
  }                                                                                                                    // 477
                                                                                                                       // 478
  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.                                           // 479
  end >>>= 0                                                                                                           // 480
  start >>>= 0                                                                                                         // 481
                                                                                                                       // 482
  if (end <= start) {                                                                                                  // 483
    return ''                                                                                                          // 484
  }                                                                                                                    // 485
                                                                                                                       // 486
  if (!encoding) encoding = 'utf8'                                                                                     // 487
                                                                                                                       // 488
  while (true) {                                                                                                       // 489
    switch (encoding) {                                                                                                // 490
      case 'hex':                                                                                                      // 491
        return hexSlice(this, start, end)                                                                              // 492
                                                                                                                       // 493
      case 'utf8':                                                                                                     // 494
      case 'utf-8':                                                                                                    // 495
        return utf8Slice(this, start, end)                                                                             // 496
                                                                                                                       // 497
      case 'ascii':                                                                                                    // 498
        return asciiSlice(this, start, end)                                                                            // 499
                                                                                                                       // 500
      case 'latin1':                                                                                                   // 501
      case 'binary':                                                                                                   // 502
        return latin1Slice(this, start, end)                                                                           // 503
                                                                                                                       // 504
      case 'base64':                                                                                                   // 505
        return base64Slice(this, start, end)                                                                           // 506
                                                                                                                       // 507
      case 'ucs2':                                                                                                     // 508
      case 'ucs-2':                                                                                                    // 509
      case 'utf16le':                                                                                                  // 510
      case 'utf-16le':                                                                                                 // 511
        return utf16leSlice(this, start, end)                                                                          // 512
                                                                                                                       // 513
      default:                                                                                                         // 514
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)                                          // 515
        encoding = (encoding + '').toLowerCase()                                                                       // 516
        loweredCase = true                                                                                             // 517
    }                                                                                                                  // 518
  }                                                                                                                    // 519
}                                                                                                                      // 520
                                                                                                                       // 521
// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect                                 // 522
// Buffer instances.                                                                                                   // 523
Buffer.prototype._isBuffer = true                                                                                      // 524
                                                                                                                       // 525
function swap (b, n, m) {                                                                                              // 526
  var i = b[n]                                                                                                         // 527
  b[n] = b[m]                                                                                                          // 528
  b[m] = i                                                                                                             // 529
}                                                                                                                      // 530
                                                                                                                       // 531
Buffer.prototype.swap16 = function swap16 () {                                                                         // 532
  var len = this.length                                                                                                // 533
  if (len % 2 !== 0) {                                                                                                 // 534
    throw new RangeError('Buffer size must be a multiple of 16-bits')                                                  // 535
  }                                                                                                                    // 536
  for (var i = 0; i < len; i += 2) {                                                                                   // 537
    swap(this, i, i + 1)                                                                                               // 538
  }                                                                                                                    // 539
  return this                                                                                                          // 540
}                                                                                                                      // 541
                                                                                                                       // 542
Buffer.prototype.swap32 = function swap32 () {                                                                         // 543
  var len = this.length                                                                                                // 544
  if (len % 4 !== 0) {                                                                                                 // 545
    throw new RangeError('Buffer size must be a multiple of 32-bits')                                                  // 546
  }                                                                                                                    // 547
  for (var i = 0; i < len; i += 4) {                                                                                   // 548
    swap(this, i, i + 3)                                                                                               // 549
    swap(this, i + 1, i + 2)                                                                                           // 550
  }                                                                                                                    // 551
  return this                                                                                                          // 552
}                                                                                                                      // 553
                                                                                                                       // 554
Buffer.prototype.swap64 = function swap64 () {                                                                         // 555
  var len = this.length                                                                                                // 556
  if (len % 8 !== 0) {                                                                                                 // 557
    throw new RangeError('Buffer size must be a multiple of 64-bits')                                                  // 558
  }                                                                                                                    // 559
  for (var i = 0; i < len; i += 8) {                                                                                   // 560
    swap(this, i, i + 7)                                                                                               // 561
    swap(this, i + 1, i + 6)                                                                                           // 562
    swap(this, i + 2, i + 5)                                                                                           // 563
    swap(this, i + 3, i + 4)                                                                                           // 564
  }                                                                                                                    // 565
  return this                                                                                                          // 566
}                                                                                                                      // 567
                                                                                                                       // 568
Buffer.prototype.toString = function toString () {                                                                     // 569
  var length = this.length | 0                                                                                         // 570
  if (length === 0) return ''                                                                                          // 571
  if (arguments.length === 0) return utf8Slice(this, 0, length)                                                        // 572
  return slowToString.apply(this, arguments)                                                                           // 573
}                                                                                                                      // 574
                                                                                                                       // 575
Buffer.prototype.equals = function equals (b) {                                                                        // 576
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')                                            // 577
  if (this === b) return true                                                                                          // 578
  return Buffer.compare(this, b) === 0                                                                                 // 579
}                                                                                                                      // 580
                                                                                                                       // 581
Buffer.prototype.inspect = function inspect () {                                                                       // 582
  var str = ''                                                                                                         // 583
  var max = exports.INSPECT_MAX_BYTES                                                                                  // 584
  if (this.length > 0) {                                                                                               // 585
    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')                                                        // 586
    if (this.length > max) str += ' ... '                                                                              // 587
  }                                                                                                                    // 588
  return '<Buffer ' + str + '>'                                                                                        // 589
}                                                                                                                      // 590
                                                                                                                       // 591
Buffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {                                 // 592
  if (!Buffer.isBuffer(target)) {                                                                                      // 593
    throw new TypeError('Argument must be a Buffer')                                                                   // 594
  }                                                                                                                    // 595
                                                                                                                       // 596
  if (start === undefined) {                                                                                           // 597
    start = 0                                                                                                          // 598
  }                                                                                                                    // 599
  if (end === undefined) {                                                                                             // 600
    end = target ? target.length : 0                                                                                   // 601
  }                                                                                                                    // 602
  if (thisStart === undefined) {                                                                                       // 603
    thisStart = 0                                                                                                      // 604
  }                                                                                                                    // 605
  if (thisEnd === undefined) {                                                                                         // 606
    thisEnd = this.length                                                                                              // 607
  }                                                                                                                    // 608
                                                                                                                       // 609
  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {                                    // 610
    throw new RangeError('out of range index')                                                                         // 611
  }                                                                                                                    // 612
                                                                                                                       // 613
  if (thisStart >= thisEnd && start >= end) {                                                                          // 614
    return 0                                                                                                           // 615
  }                                                                                                                    // 616
  if (thisStart >= thisEnd) {                                                                                          // 617
    return -1                                                                                                          // 618
  }                                                                                                                    // 619
  if (start >= end) {                                                                                                  // 620
    return 1                                                                                                           // 621
  }                                                                                                                    // 622
                                                                                                                       // 623
  start >>>= 0                                                                                                         // 624
  end >>>= 0                                                                                                           // 625
  thisStart >>>= 0                                                                                                     // 626
  thisEnd >>>= 0                                                                                                       // 627
                                                                                                                       // 628
  if (this === target) return 0                                                                                        // 629
                                                                                                                       // 630
  var x = thisEnd - thisStart                                                                                          // 631
  var y = end - start                                                                                                  // 632
  var len = Math.min(x, y)                                                                                             // 633
                                                                                                                       // 634
  var thisCopy = this.slice(thisStart, thisEnd)                                                                        // 635
  var targetCopy = target.slice(start, end)                                                                            // 636
                                                                                                                       // 637
  for (var i = 0; i < len; ++i) {                                                                                      // 638
    if (thisCopy[i] !== targetCopy[i]) {                                                                               // 639
      x = thisCopy[i]                                                                                                  // 640
      y = targetCopy[i]                                                                                                // 641
      break                                                                                                            // 642
    }                                                                                                                  // 643
  }                                                                                                                    // 644
                                                                                                                       // 645
  if (x < y) return -1                                                                                                 // 646
  if (y < x) return 1                                                                                                  // 647
  return 0                                                                                                             // 648
}                                                                                                                      // 649
                                                                                                                       // 650
// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,                                        // 651
// OR the last index of `val` in `buffer` at offset <= `byteOffset`.                                                   // 652
//                                                                                                                     // 653
// Arguments:                                                                                                          // 654
// - buffer - a Buffer to search                                                                                       // 655
// - val - a string, Buffer, or number                                                                                 // 656
// - byteOffset - an index into `buffer`; will be clamped to an int32                                                  // 657
// - encoding - an optional encoding, relevant is val is a string                                                      // 658
// - dir - true for indexOf, false for lastIndexOf                                                                     // 659
function bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {                                               // 660
  // Empty buffer means no match                                                                                       // 661
  if (buffer.length === 0) return -1                                                                                   // 662
                                                                                                                       // 663
  // Normalize byteOffset                                                                                              // 664
  if (typeof byteOffset === 'string') {                                                                                // 665
    encoding = byteOffset                                                                                              // 666
    byteOffset = 0                                                                                                     // 667
  } else if (byteOffset > 0x7fffffff) {                                                                                // 668
    byteOffset = 0x7fffffff                                                                                            // 669
  } else if (byteOffset < -0x80000000) {                                                                               // 670
    byteOffset = -0x80000000                                                                                           // 671
  }                                                                                                                    // 672
  byteOffset = +byteOffset  // Coerce to Number.                                                                       // 673
  if (isNaN(byteOffset)) {                                                                                             // 674
    // byteOffset: it it's undefined, null, NaN, "foo", etc, search whole buffer                                       // 675
    byteOffset = dir ? 0 : (buffer.length - 1)                                                                         // 676
  }                                                                                                                    // 677
                                                                                                                       // 678
  // Normalize byteOffset: negative offsets start from the end of the buffer                                           // 679
  if (byteOffset < 0) byteOffset = buffer.length + byteOffset                                                          // 680
  if (byteOffset >= buffer.length) {                                                                                   // 681
    if (dir) return -1                                                                                                 // 682
    else byteOffset = buffer.length - 1                                                                                // 683
  } else if (byteOffset < 0) {                                                                                         // 684
    if (dir) byteOffset = 0                                                                                            // 685
    else return -1                                                                                                     // 686
  }                                                                                                                    // 687
                                                                                                                       // 688
  // Normalize val                                                                                                     // 689
  if (typeof val === 'string') {                                                                                       // 690
    val = Buffer.from(val, encoding)                                                                                   // 691
  }                                                                                                                    // 692
                                                                                                                       // 693
  // Finally, search either indexOf (if dir is true) or lastIndexOf                                                    // 694
  if (Buffer.isBuffer(val)) {                                                                                          // 695
    // Special case: looking for empty string/buffer always fails                                                      // 696
    if (val.length === 0) {                                                                                            // 697
      return -1                                                                                                        // 698
    }                                                                                                                  // 699
    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)                                                        // 700
  } else if (typeof val === 'number') {                                                                                // 701
    val = val & 0xFF // Search for a byte value [0-255]                                                                // 702
    if (Buffer.TYPED_ARRAY_SUPPORT &&                                                                                  // 703
        typeof Uint8Array.prototype.indexOf === 'function') {                                                          // 704
      if (dir) {                                                                                                       // 705
        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)                                              // 706
      } else {                                                                                                         // 707
        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)                                          // 708
      }                                                                                                                // 709
    }                                                                                                                  // 710
    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)                                                    // 711
  }                                                                                                                    // 712
                                                                                                                       // 713
  throw new TypeError('val must be string, number or Buffer')                                                          // 714
}                                                                                                                      // 715
                                                                                                                       // 716
function arrayIndexOf (arr, val, byteOffset, encoding, dir) {                                                          // 717
  var indexSize = 1                                                                                                    // 718
  var arrLength = arr.length                                                                                           // 719
  var valLength = val.length                                                                                           // 720
                                                                                                                       // 721
  if (encoding !== undefined) {                                                                                        // 722
    encoding = String(encoding).toLowerCase()                                                                          // 723
    if (encoding === 'ucs2' || encoding === 'ucs-2' ||                                                                 // 724
        encoding === 'utf16le' || encoding === 'utf-16le') {                                                           // 725
      if (arr.length < 2 || val.length < 2) {                                                                          // 726
        return -1                                                                                                      // 727
      }                                                                                                                // 728
      indexSize = 2                                                                                                    // 729
      arrLength /= 2                                                                                                   // 730
      valLength /= 2                                                                                                   // 731
      byteOffset /= 2                                                                                                  // 732
    }                                                                                                                  // 733
  }                                                                                                                    // 734
                                                                                                                       // 735
  function read (buf, i) {                                                                                             // 736
    if (indexSize === 1) {                                                                                             // 737
      return buf[i]                                                                                                    // 738
    } else {                                                                                                           // 739
      return buf.readUInt16BE(i * indexSize)                                                                           // 740
    }                                                                                                                  // 741
  }                                                                                                                    // 742
                                                                                                                       // 743
  var i                                                                                                                // 744
  if (dir) {                                                                                                           // 745
    var foundIndex = -1                                                                                                // 746
    for (i = byteOffset; i < arrLength; i++) {                                                                         // 747
      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {                                        // 748
        if (foundIndex === -1) foundIndex = i                                                                          // 749
        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize                                            // 750
      } else {                                                                                                         // 751
        if (foundIndex !== -1) i -= i - foundIndex                                                                     // 752
        foundIndex = -1                                                                                                // 753
      }                                                                                                                // 754
    }                                                                                                                  // 755
  } else {                                                                                                             // 756
    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength                                         // 757
    for (i = byteOffset; i >= 0; i--) {                                                                                // 758
      var found = true                                                                                                 // 759
      for (var j = 0; j < valLength; j++) {                                                                            // 760
        if (read(arr, i + j) !== read(val, j)) {                                                                       // 761
          found = false                                                                                                // 762
          break                                                                                                        // 763
        }                                                                                                              // 764
      }                                                                                                                // 765
      if (found) return i                                                                                              // 766
    }                                                                                                                  // 767
  }                                                                                                                    // 768
                                                                                                                       // 769
  return -1                                                                                                            // 770
}                                                                                                                      // 771
                                                                                                                       // 772
Buffer.prototype.includes = function includes (val, byteOffset, encoding) {                                            // 773
  return this.indexOf(val, byteOffset, encoding) !== -1                                                                // 774
}                                                                                                                      // 775
                                                                                                                       // 776
Buffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {                                              // 777
  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)                                                   // 778
}                                                                                                                      // 779
                                                                                                                       // 780
Buffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {                                      // 781
  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)                                                  // 782
}                                                                                                                      // 783
                                                                                                                       // 784
function hexWrite (buf, string, offset, length) {                                                                      // 785
  offset = Number(offset) || 0                                                                                         // 786
  var remaining = buf.length - offset                                                                                  // 787
  if (!length) {                                                                                                       // 788
    length = remaining                                                                                                 // 789
  } else {                                                                                                             // 790
    length = Number(length)                                                                                            // 791
    if (length > remaining) {                                                                                          // 792
      length = remaining                                                                                               // 793
    }                                                                                                                  // 794
  }                                                                                                                    // 795
                                                                                                                       // 796
  // must be an even number of digits                                                                                  // 797
  var strLen = string.length                                                                                           // 798
  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')                                                      // 799
                                                                                                                       // 800
  if (length > strLen / 2) {                                                                                           // 801
    length = strLen / 2                                                                                                // 802
  }                                                                                                                    // 803
  for (var i = 0; i < length; ++i) {                                                                                   // 804
    var parsed = parseInt(string.substr(i * 2, 2), 16)                                                                 // 805
    if (isNaN(parsed)) return i                                                                                        // 806
    buf[offset + i] = parsed                                                                                           // 807
  }                                                                                                                    // 808
  return i                                                                                                             // 809
}                                                                                                                      // 810
                                                                                                                       // 811
function utf8Write (buf, string, offset, length) {                                                                     // 812
  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)                                     // 813
}                                                                                                                      // 814
                                                                                                                       // 815
function asciiWrite (buf, string, offset, length) {                                                                    // 816
  return blitBuffer(asciiToBytes(string), buf, offset, length)                                                         // 817
}                                                                                                                      // 818
                                                                                                                       // 819
function latin1Write (buf, string, offset, length) {                                                                   // 820
  return asciiWrite(buf, string, offset, length)                                                                       // 821
}                                                                                                                      // 822
                                                                                                                       // 823
function base64Write (buf, string, offset, length) {                                                                   // 824
  return blitBuffer(base64ToBytes(string), buf, offset, length)                                                        // 825
}                                                                                                                      // 826
                                                                                                                       // 827
function ucs2Write (buf, string, offset, length) {                                                                     // 828
  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)                                  // 829
}                                                                                                                      // 830
                                                                                                                       // 831
Buffer.prototype.write = function write (string, offset, length, encoding) {                                           // 832
  // Buffer#write(string)                                                                                              // 833
  if (offset === undefined) {                                                                                          // 834
    encoding = 'utf8'                                                                                                  // 835
    length = this.length                                                                                               // 836
    offset = 0                                                                                                         // 837
  // Buffer#write(string, encoding)                                                                                    // 838
  } else if (length === undefined && typeof offset === 'string') {                                                     // 839
    encoding = offset                                                                                                  // 840
    length = this.length                                                                                               // 841
    offset = 0                                                                                                         // 842
  // Buffer#write(string, offset[, length][, encoding])                                                                // 843
  } else if (isFinite(offset)) {                                                                                       // 844
    offset = offset | 0                                                                                                // 845
    if (isFinite(length)) {                                                                                            // 846
      length = length | 0                                                                                              // 847
      if (encoding === undefined) encoding = 'utf8'                                                                    // 848
    } else {                                                                                                           // 849
      encoding = length                                                                                                // 850
      length = undefined                                                                                               // 851
    }                                                                                                                  // 852
  // legacy write(string, encoding, offset, length) - remove in v0.13                                                  // 853
  } else {                                                                                                             // 854
    throw new Error(                                                                                                   // 855
      'Buffer.write(string, encoding, offset[, length]) is no longer supported'                                        // 856
    )                                                                                                                  // 857
  }                                                                                                                    // 858
                                                                                                                       // 859
  var remaining = this.length - offset                                                                                 // 860
  if (length === undefined || length > remaining) length = remaining                                                   // 861
                                                                                                                       // 862
  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {                                     // 863
    throw new RangeError('Attempt to write outside buffer bounds')                                                     // 864
  }                                                                                                                    // 865
                                                                                                                       // 866
  if (!encoding) encoding = 'utf8'                                                                                     // 867
                                                                                                                       // 868
  var loweredCase = false                                                                                              // 869
  for (;;) {                                                                                                           // 870
    switch (encoding) {                                                                                                // 871
      case 'hex':                                                                                                      // 872
        return hexWrite(this, string, offset, length)                                                                  // 873
                                                                                                                       // 874
      case 'utf8':                                                                                                     // 875
      case 'utf-8':                                                                                                    // 876
        return utf8Write(this, string, offset, length)                                                                 // 877
                                                                                                                       // 878
      case 'ascii':                                                                                                    // 879
        return asciiWrite(this, string, offset, length)                                                                // 880
                                                                                                                       // 881
      case 'latin1':                                                                                                   // 882
      case 'binary':                                                                                                   // 883
        return latin1Write(this, string, offset, length)                                                               // 884
                                                                                                                       // 885
      case 'base64':                                                                                                   // 886
        // Warning: maxLength not taken into account in base64Write                                                    // 887
        return base64Write(this, string, offset, length)                                                               // 888
                                                                                                                       // 889
      case 'ucs2':                                                                                                     // 890
      case 'ucs-2':                                                                                                    // 891
      case 'utf16le':                                                                                                  // 892
      case 'utf-16le':                                                                                                 // 893
        return ucs2Write(this, string, offset, length)                                                                 // 894
                                                                                                                       // 895
      default:                                                                                                         // 896
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)                                          // 897
        encoding = ('' + encoding).toLowerCase()                                                                       // 898
        loweredCase = true                                                                                             // 899
    }                                                                                                                  // 900
  }                                                                                                                    // 901
}                                                                                                                      // 902
                                                                                                                       // 903
Buffer.prototype.toJSON = function toJSON () {                                                                         // 904
  return {                                                                                                             // 905
    type: 'Buffer',                                                                                                    // 906
    data: Array.prototype.slice.call(this._arr || this, 0)                                                             // 907
  }                                                                                                                    // 908
}                                                                                                                      // 909
                                                                                                                       // 910
function base64Slice (buf, start, end) {                                                                               // 911
  if (start === 0 && end === buf.length) {                                                                             // 912
    return base64.fromByteArray(buf)                                                                                   // 913
  } else {                                                                                                             // 914
    return base64.fromByteArray(buf.slice(start, end))                                                                 // 915
  }                                                                                                                    // 916
}                                                                                                                      // 917
                                                                                                                       // 918
function utf8Slice (buf, start, end) {                                                                                 // 919
  end = Math.min(buf.length, end)                                                                                      // 920
  var res = []                                                                                                         // 921
                                                                                                                       // 922
  var i = start                                                                                                        // 923
  while (i < end) {                                                                                                    // 924
    var firstByte = buf[i]                                                                                             // 925
    var codePoint = null                                                                                               // 926
    var bytesPerSequence = (firstByte > 0xEF) ? 4                                                                      // 927
      : (firstByte > 0xDF) ? 3                                                                                         // 928
      : (firstByte > 0xBF) ? 2                                                                                         // 929
      : 1                                                                                                              // 930
                                                                                                                       // 931
    if (i + bytesPerSequence <= end) {                                                                                 // 932
      var secondByte, thirdByte, fourthByte, tempCodePoint                                                             // 933
                                                                                                                       // 934
      switch (bytesPerSequence) {                                                                                      // 935
        case 1:                                                                                                        // 936
          if (firstByte < 0x80) {                                                                                      // 937
            codePoint = firstByte                                                                                      // 938
          }                                                                                                            // 939
          break                                                                                                        // 940
        case 2:                                                                                                        // 941
          secondByte = buf[i + 1]                                                                                      // 942
          if ((secondByte & 0xC0) === 0x80) {                                                                          // 943
            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)                                            // 944
            if (tempCodePoint > 0x7F) {                                                                                // 945
              codePoint = tempCodePoint                                                                                // 946
            }                                                                                                          // 947
          }                                                                                                            // 948
          break                                                                                                        // 949
        case 3:                                                                                                        // 950
          secondByte = buf[i + 1]                                                                                      // 951
          thirdByte = buf[i + 2]                                                                                       // 952
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {                                           // 953
            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)                 // 954
            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {                         // 955
              codePoint = tempCodePoint                                                                                // 956
            }                                                                                                          // 957
          }                                                                                                            // 958
          break                                                                                                        // 959
        case 4:                                                                                                        // 960
          secondByte = buf[i + 1]                                                                                      // 961
          thirdByte = buf[i + 2]                                                                                       // 962
          fourthByte = buf[i + 3]                                                                                      // 963
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {           // 964
            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)
            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {                                                  // 966
              codePoint = tempCodePoint                                                                                // 967
            }                                                                                                          // 968
          }                                                                                                            // 969
      }                                                                                                                // 970
    }                                                                                                                  // 971
                                                                                                                       // 972
    if (codePoint === null) {                                                                                          // 973
      // we did not generate a valid codePoint so insert a                                                             // 974
      // replacement char (U+FFFD) and advance only 1 byte                                                             // 975
      codePoint = 0xFFFD                                                                                               // 976
      bytesPerSequence = 1                                                                                             // 977
    } else if (codePoint > 0xFFFF) {                                                                                   // 978
      // encode to utf16 (surrogate pair dance)                                                                        // 979
      codePoint -= 0x10000                                                                                             // 980
      res.push(codePoint >>> 10 & 0x3FF | 0xD800)                                                                      // 981
      codePoint = 0xDC00 | codePoint & 0x3FF                                                                           // 982
    }                                                                                                                  // 983
                                                                                                                       // 984
    res.push(codePoint)                                                                                                // 985
    i += bytesPerSequence                                                                                              // 986
  }                                                                                                                    // 987
                                                                                                                       // 988
  return decodeCodePointsArray(res)                                                                                    // 989
}                                                                                                                      // 990
                                                                                                                       // 991
// Based on http://stackoverflow.com/a/22747272/680742, the browser with                                               // 992
// the lowest limit is Chrome, with 0x10000 args.                                                                      // 993
// We go 1 magnitude less, for safety                                                                                  // 994
var MAX_ARGUMENTS_LENGTH = 0x1000                                                                                      // 995
                                                                                                                       // 996
function decodeCodePointsArray (codePoints) {                                                                          // 997
  var len = codePoints.length                                                                                          // 998
  if (len <= MAX_ARGUMENTS_LENGTH) {                                                                                   // 999
    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()                                        // 1000
  }                                                                                                                    // 1001
                                                                                                                       // 1002
  // Decode in chunks to avoid "call stack size exceeded".                                                             // 1003
  var res = ''                                                                                                         // 1004
  var i = 0                                                                                                            // 1005
  while (i < len) {                                                                                                    // 1006
    res += String.fromCharCode.apply(                                                                                  // 1007
      String,                                                                                                          // 1008
      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)                                                                   // 1009
    )                                                                                                                  // 1010
  }                                                                                                                    // 1011
  return res                                                                                                           // 1012
}                                                                                                                      // 1013
                                                                                                                       // 1014
function asciiSlice (buf, start, end) {                                                                                // 1015
  var ret = ''                                                                                                         // 1016
  end = Math.min(buf.length, end)                                                                                      // 1017
                                                                                                                       // 1018
  for (var i = start; i < end; ++i) {                                                                                  // 1019
    ret += String.fromCharCode(buf[i] & 0x7F)                                                                          // 1020
  }                                                                                                                    // 1021
  return ret                                                                                                           // 1022
}                                                                                                                      // 1023
                                                                                                                       // 1024
function latin1Slice (buf, start, end) {                                                                               // 1025
  var ret = ''                                                                                                         // 1026
  end = Math.min(buf.length, end)                                                                                      // 1027
                                                                                                                       // 1028
  for (var i = start; i < end; ++i) {                                                                                  // 1029
    ret += String.fromCharCode(buf[i])                                                                                 // 1030
  }                                                                                                                    // 1031
  return ret                                                                                                           // 1032
}                                                                                                                      // 1033
                                                                                                                       // 1034
function hexSlice (buf, start, end) {                                                                                  // 1035
  var len = buf.length                                                                                                 // 1036
                                                                                                                       // 1037
  if (!start || start < 0) start = 0                                                                                   // 1038
  if (!end || end < 0 || end > len) end = len                                                                          // 1039
                                                                                                                       // 1040
  var out = ''                                                                                                         // 1041
  for (var i = start; i < end; ++i) {                                                                                  // 1042
    out += toHex(buf[i])                                                                                               // 1043
  }                                                                                                                    // 1044
  return out                                                                                                           // 1045
}                                                                                                                      // 1046
                                                                                                                       // 1047
function utf16leSlice (buf, start, end) {                                                                              // 1048
  var bytes = buf.slice(start, end)                                                                                    // 1049
  var res = ''                                                                                                         // 1050
  for (var i = 0; i < bytes.length; i += 2) {                                                                          // 1051
    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)                                                          // 1052
  }                                                                                                                    // 1053
  return res                                                                                                           // 1054
}                                                                                                                      // 1055
                                                                                                                       // 1056
Buffer.prototype.slice = function slice (start, end) {                                                                 // 1057
  var len = this.length                                                                                                // 1058
  start = ~~start                                                                                                      // 1059
  end = end === undefined ? len : ~~end                                                                                // 1060
                                                                                                                       // 1061
  if (start < 0) {                                                                                                     // 1062
    start += len                                                                                                       // 1063
    if (start < 0) start = 0                                                                                           // 1064
  } else if (start > len) {                                                                                            // 1065
    start = len                                                                                                        // 1066
  }                                                                                                                    // 1067
                                                                                                                       // 1068
  if (end < 0) {                                                                                                       // 1069
    end += len                                                                                                         // 1070
    if (end < 0) end = 0                                                                                               // 1071
  } else if (end > len) {                                                                                              // 1072
    end = len                                                                                                          // 1073
  }                                                                                                                    // 1074
                                                                                                                       // 1075
  if (end < start) end = start                                                                                         // 1076
                                                                                                                       // 1077
  var newBuf                                                                                                           // 1078
  if (Buffer.TYPED_ARRAY_SUPPORT) {                                                                                    // 1079
    newBuf = this.subarray(start, end)                                                                                 // 1080
    newBuf.__proto__ = Buffer.prototype                                                                                // 1081
  } else {                                                                                                             // 1082
    var sliceLen = end - start                                                                                         // 1083
    newBuf = new Buffer(sliceLen, undefined)                                                                           // 1084
    for (var i = 0; i < sliceLen; ++i) {                                                                               // 1085
      newBuf[i] = this[i + start]                                                                                      // 1086
    }                                                                                                                  // 1087
  }                                                                                                                    // 1088
                                                                                                                       // 1089
  return newBuf                                                                                                        // 1090
}                                                                                                                      // 1091
                                                                                                                       // 1092
/*                                                                                                                     // 1093
 * Need to make sure that buffer isn't trying to write out of bounds.                                                  // 1094
 */                                                                                                                    // 1095
function checkOffset (offset, ext, length) {                                                                           // 1096
  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')                                     // 1097
  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')                             // 1098
}                                                                                                                      // 1099
                                                                                                                       // 1100
Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {                                     // 1101
  offset = offset | 0                                                                                                  // 1102
  byteLength = byteLength | 0                                                                                          // 1103
  if (!noAssert) checkOffset(offset, byteLength, this.length)                                                          // 1104
                                                                                                                       // 1105
  var val = this[offset]                                                                                               // 1106
  var mul = 1                                                                                                          // 1107
  var i = 0                                                                                                            // 1108
  while (++i < byteLength && (mul *= 0x100)) {                                                                         // 1109
    val += this[offset + i] * mul                                                                                      // 1110
  }                                                                                                                    // 1111
                                                                                                                       // 1112
  return val                                                                                                           // 1113
}                                                                                                                      // 1114
                                                                                                                       // 1115
Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {                                     // 1116
  offset = offset | 0                                                                                                  // 1117
  byteLength = byteLength | 0                                                                                          // 1118
  if (!noAssert) {                                                                                                     // 1119
    checkOffset(offset, byteLength, this.length)                                                                       // 1120
  }                                                                                                                    // 1121
                                                                                                                       // 1122
  var val = this[offset + --byteLength]                                                                                // 1123
  var mul = 1                                                                                                          // 1124
  while (byteLength > 0 && (mul *= 0x100)) {                                                                           // 1125
    val += this[offset + --byteLength] * mul                                                                           // 1126
  }                                                                                                                    // 1127
                                                                                                                       // 1128
  return val                                                                                                           // 1129
}                                                                                                                      // 1130
                                                                                                                       // 1131
Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {                                                   // 1132
  if (!noAssert) checkOffset(offset, 1, this.length)                                                                   // 1133
  return this[offset]                                                                                                  // 1134
}                                                                                                                      // 1135
                                                                                                                       // 1136
Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {                                             // 1137
  if (!noAssert) checkOffset(offset, 2, this.length)                                                                   // 1138
  return this[offset] | (this[offset + 1] << 8)                                                                        // 1139
}                                                                                                                      // 1140
                                                                                                                       // 1141
Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {                                             // 1142
  if (!noAssert) checkOffset(offset, 2, this.length)                                                                   // 1143
  return (this[offset] << 8) | this[offset + 1]                                                                        // 1144
}                                                                                                                      // 1145
                                                                                                                       // 1146
Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {                                             // 1147
  if (!noAssert) checkOffset(offset, 4, this.length)                                                                   // 1148
                                                                                                                       // 1149
  return ((this[offset]) |                                                                                             // 1150
      (this[offset + 1] << 8) |                                                                                        // 1151
      (this[offset + 2] << 16)) +                                                                                      // 1152
      (this[offset + 3] * 0x1000000)                                                                                   // 1153
}                                                                                                                      // 1154
                                                                                                                       // 1155
Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {                                             // 1156
  if (!noAssert) checkOffset(offset, 4, this.length)                                                                   // 1157
                                                                                                                       // 1158
  return (this[offset] * 0x1000000) +                                                                                  // 1159
    ((this[offset + 1] << 16) |                                                                                        // 1160
    (this[offset + 2] << 8) |                                                                                          // 1161
    this[offset + 3])                                                                                                  // 1162
}                                                                                                                      // 1163
                                                                                                                       // 1164
Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {                                       // 1165
  offset = offset | 0                                                                                                  // 1166
  byteLength = byteLength | 0                                                                                          // 1167
  if (!noAssert) checkOffset(offset, byteLength, this.length)                                                          // 1168
                                                                                                                       // 1169
  var val = this[offset]                                                                                               // 1170
  var mul = 1                                                                                                          // 1171
  var i = 0                                                                                                            // 1172
  while (++i < byteLength && (mul *= 0x100)) {                                                                         // 1173
    val += this[offset + i] * mul                                                                                      // 1174
  }                                                                                                                    // 1175
  mul *= 0x80                                                                                                          // 1176
                                                                                                                       // 1177
  if (val >= mul) val -= Math.pow(2, 8 * byteLength)                                                                   // 1178
                                                                                                                       // 1179
  return val                                                                                                           // 1180
}                                                                                                                      // 1181
                                                                                                                       // 1182
Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {                                       // 1183
  offset = offset | 0                                                                                                  // 1184
  byteLength = byteLength | 0                                                                                          // 1185
  if (!noAssert) checkOffset(offset, byteLength, this.length)                                                          // 1186
                                                                                                                       // 1187
  var i = byteLength                                                                                                   // 1188
  var mul = 1                                                                                                          // 1189
  var val = this[offset + --i]                                                                                         // 1190
  while (i > 0 && (mul *= 0x100)) {                                                                                    // 1191
    val += this[offset + --i] * mul                                                                                    // 1192
  }                                                                                                                    // 1193
  mul *= 0x80                                                                                                          // 1194
                                                                                                                       // 1195
  if (val >= mul) val -= Math.pow(2, 8 * byteLength)                                                                   // 1196
                                                                                                                       // 1197
  return val                                                                                                           // 1198
}                                                                                                                      // 1199
                                                                                                                       // 1200
Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {                                                     // 1201
  if (!noAssert) checkOffset(offset, 1, this.length)                                                                   // 1202
  if (!(this[offset] & 0x80)) return (this[offset])                                                                    // 1203
  return ((0xff - this[offset] + 1) * -1)                                                                              // 1204
}                                                                                                                      // 1205
                                                                                                                       // 1206
Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {                                               // 1207
  if (!noAssert) checkOffset(offset, 2, this.length)                                                                   // 1208
  var val = this[offset] | (this[offset + 1] << 8)                                                                     // 1209
  return (val & 0x8000) ? val | 0xFFFF0000 : val                                                                       // 1210
}                                                                                                                      // 1211
                                                                                                                       // 1212
Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {                                               // 1213
  if (!noAssert) checkOffset(offset, 2, this.length)                                                                   // 1214
  var val = this[offset + 1] | (this[offset] << 8)                                                                     // 1215
  return (val & 0x8000) ? val | 0xFFFF0000 : val                                                                       // 1216
}                                                                                                                      // 1217
                                                                                                                       // 1218
Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {                                               // 1219
  if (!noAssert) checkOffset(offset, 4, this.length)                                                                   // 1220
                                                                                                                       // 1221
  return (this[offset]) |                                                                                              // 1222
    (this[offset + 1] << 8) |                                                                                          // 1223
    (this[offset + 2] << 16) |                                                                                         // 1224
    (this[offset + 3] << 24)                                                                                           // 1225
}                                                                                                                      // 1226
                                                                                                                       // 1227
Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {                                               // 1228
  if (!noAssert) checkOffset(offset, 4, this.length)                                                                   // 1229
                                                                                                                       // 1230
  return (this[offset] << 24) |                                                                                        // 1231
    (this[offset + 1] << 16) |                                                                                         // 1232
    (this[offset + 2] << 8) |                                                                                          // 1233
    (this[offset + 3])                                                                                                 // 1234
}                                                                                                                      // 1235
                                                                                                                       // 1236
Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {                                               // 1237
  if (!noAssert) checkOffset(offset, 4, this.length)                                                                   // 1238
  return ieee754.read(this, offset, true, 23, 4)                                                                       // 1239
}                                                                                                                      // 1240
                                                                                                                       // 1241
Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {                                               // 1242
  if (!noAssert) checkOffset(offset, 4, this.length)                                                                   // 1243
  return ieee754.read(this, offset, false, 23, 4)                                                                      // 1244
}                                                                                                                      // 1245
                                                                                                                       // 1246
Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {                                             // 1247
  if (!noAssert) checkOffset(offset, 8, this.length)                                                                   // 1248
  return ieee754.read(this, offset, true, 52, 8)                                                                       // 1249
}                                                                                                                      // 1250
                                                                                                                       // 1251
Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {                                             // 1252
  if (!noAssert) checkOffset(offset, 8, this.length)                                                                   // 1253
  return ieee754.read(this, offset, false, 52, 8)                                                                      // 1254
}                                                                                                                      // 1255
                                                                                                                       // 1256
function checkInt (buf, value, offset, ext, max, min) {                                                                // 1257
  if (!Buffer.isBuffer(buf)) throw new TypeError('"buffer" argument must be a Buffer instance')                        // 1258
  if (value > max || value < min) throw new RangeError('"value" argument is out of bounds')                            // 1259
  if (offset + ext > buf.length) throw new RangeError('Index out of range')                                            // 1260
}                                                                                                                      // 1261
                                                                                                                       // 1262
Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {                            // 1263
  value = +value                                                                                                       // 1264
  offset = offset | 0                                                                                                  // 1265
  byteLength = byteLength | 0                                                                                          // 1266
  if (!noAssert) {                                                                                                     // 1267
    var maxBytes = Math.pow(2, 8 * byteLength) - 1                                                                     // 1268
    checkInt(this, value, offset, byteLength, maxBytes, 0)                                                             // 1269
  }                                                                                                                    // 1270
                                                                                                                       // 1271
  var mul = 1                                                                                                          // 1272
  var i = 0                                                                                                            // 1273
  this[offset] = value & 0xFF                                                                                          // 1274
  while (++i < byteLength && (mul *= 0x100)) {                                                                         // 1275
    this[offset + i] = (value / mul) & 0xFF                                                                            // 1276
  }                                                                                                                    // 1277
                                                                                                                       // 1278
  return offset + byteLength                                                                                           // 1279
}                                                                                                                      // 1280
                                                                                                                       // 1281
Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {                            // 1282
  value = +value                                                                                                       // 1283
  offset = offset | 0                                                                                                  // 1284
  byteLength = byteLength | 0                                                                                          // 1285
  if (!noAssert) {                                                                                                     // 1286
    var maxBytes = Math.pow(2, 8 * byteLength) - 1                                                                     // 1287
    checkInt(this, value, offset, byteLength, maxBytes, 0)                                                             // 1288
  }                                                                                                                    // 1289
                                                                                                                       // 1290
  var i = byteLength - 1                                                                                               // 1291
  var mul = 1                                                                                                          // 1292
  this[offset + i] = value & 0xFF                                                                                      // 1293
  while (--i >= 0 && (mul *= 0x100)) {                                                                                 // 1294
    this[offset + i] = (value / mul) & 0xFF                                                                            // 1295
  }                                                                                                                    // 1296
                                                                                                                       // 1297
  return offset + byteLength                                                                                           // 1298
}                                                                                                                      // 1299
                                                                                                                       // 1300
Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {                                          // 1301
  value = +value                                                                                                       // 1302
  offset = offset | 0                                                                                                  // 1303
  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)                                                             // 1304
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)                                                           // 1305
  this[offset] = (value & 0xff)                                                                                        // 1306
  return offset + 1                                                                                                    // 1307
}                                                                                                                      // 1308
                                                                                                                       // 1309
function objectWriteUInt16 (buf, value, offset, littleEndian) {                                                        // 1310
  if (value < 0) value = 0xffff + value + 1                                                                            // 1311
  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {                                                  // 1312
    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>                                         // 1313
      (littleEndian ? i : 1 - i) * 8                                                                                   // 1314
  }                                                                                                                    // 1315
}                                                                                                                      // 1316
                                                                                                                       // 1317
Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {                                    // 1318
  value = +value                                                                                                       // 1319
  offset = offset | 0                                                                                                  // 1320
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)                                                           // 1321
  if (Buffer.TYPED_ARRAY_SUPPORT) {                                                                                    // 1322
    this[offset] = (value & 0xff)                                                                                      // 1323
    this[offset + 1] = (value >>> 8)                                                                                   // 1324
  } else {                                                                                                             // 1325
    objectWriteUInt16(this, value, offset, true)                                                                       // 1326
  }                                                                                                                    // 1327
  return offset + 2                                                                                                    // 1328
}                                                                                                                      // 1329
                                                                                                                       // 1330
Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {                                    // 1331
  value = +value                                                                                                       // 1332
  offset = offset | 0                                                                                                  // 1333
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)                                                           // 1334
  if (Buffer.TYPED_ARRAY_SUPPORT) {                                                                                    // 1335
    this[offset] = (value >>> 8)                                                                                       // 1336
    this[offset + 1] = (value & 0xff)                                                                                  // 1337
  } else {                                                                                                             // 1338
    objectWriteUInt16(this, value, offset, false)                                                                      // 1339
  }                                                                                                                    // 1340
  return offset + 2                                                                                                    // 1341
}                                                                                                                      // 1342
                                                                                                                       // 1343
function objectWriteUInt32 (buf, value, offset, littleEndian) {                                                        // 1344
  if (value < 0) value = 0xffffffff + value + 1                                                                        // 1345
  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {                                                  // 1346
    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff                                                // 1347
  }                                                                                                                    // 1348
}                                                                                                                      // 1349
                                                                                                                       // 1350
Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {                                    // 1351
  value = +value                                                                                                       // 1352
  offset = offset | 0                                                                                                  // 1353
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)                                                       // 1354
  if (Buffer.TYPED_ARRAY_SUPPORT) {                                                                                    // 1355
    this[offset + 3] = (value >>> 24)                                                                                  // 1356
    this[offset + 2] = (value >>> 16)                                                                                  // 1357
    this[offset + 1] = (value >>> 8)                                                                                   // 1358
    this[offset] = (value & 0xff)                                                                                      // 1359
  } else {                                                                                                             // 1360
    objectWriteUInt32(this, value, offset, true)                                                                       // 1361
  }                                                                                                                    // 1362
  return offset + 4                                                                                                    // 1363
}                                                                                                                      // 1364
                                                                                                                       // 1365
Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {                                    // 1366
  value = +value                                                                                                       // 1367
  offset = offset | 0                                                                                                  // 1368
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)                                                       // 1369
  if (Buffer.TYPED_ARRAY_SUPPORT) {                                                                                    // 1370
    this[offset] = (value >>> 24)                                                                                      // 1371
    this[offset + 1] = (value >>> 16)                                                                                  // 1372
    this[offset + 2] = (value >>> 8)                                                                                   // 1373
    this[offset + 3] = (value & 0xff)                                                                                  // 1374
  } else {                                                                                                             // 1375
    objectWriteUInt32(this, value, offset, false)                                                                      // 1376
  }                                                                                                                    // 1377
  return offset + 4                                                                                                    // 1378
}                                                                                                                      // 1379
                                                                                                                       // 1380
Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {                              // 1381
  value = +value                                                                                                       // 1382
  offset = offset | 0                                                                                                  // 1383
  if (!noAssert) {                                                                                                     // 1384
    var limit = Math.pow(2, 8 * byteLength - 1)                                                                        // 1385
                                                                                                                       // 1386
    checkInt(this, value, offset, byteLength, limit - 1, -limit)                                                       // 1387
  }                                                                                                                    // 1388
                                                                                                                       // 1389
  var i = 0                                                                                                            // 1390
  var mul = 1                                                                                                          // 1391
  var sub = 0                                                                                                          // 1392
  this[offset] = value & 0xFF                                                                                          // 1393
  while (++i < byteLength && (mul *= 0x100)) {                                                                         // 1394
    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {                                                        // 1395
      sub = 1                                                                                                          // 1396
    }                                                                                                                  // 1397
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF                                                               // 1398
  }                                                                                                                    // 1399
                                                                                                                       // 1400
  return offset + byteLength                                                                                           // 1401
}                                                                                                                      // 1402
                                                                                                                       // 1403
Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {                              // 1404
  value = +value                                                                                                       // 1405
  offset = offset | 0                                                                                                  // 1406
  if (!noAssert) {                                                                                                     // 1407
    var limit = Math.pow(2, 8 * byteLength - 1)                                                                        // 1408
                                                                                                                       // 1409
    checkInt(this, value, offset, byteLength, limit - 1, -limit)                                                       // 1410
  }                                                                                                                    // 1411
                                                                                                                       // 1412
  var i = byteLength - 1                                                                                               // 1413
  var mul = 1                                                                                                          // 1414
  var sub = 0                                                                                                          // 1415
  this[offset + i] = value & 0xFF                                                                                      // 1416
  while (--i >= 0 && (mul *= 0x100)) {                                                                                 // 1417
    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {                                                        // 1418
      sub = 1                                                                                                          // 1419
    }                                                                                                                  // 1420
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF                                                               // 1421
  }                                                                                                                    // 1422
                                                                                                                       // 1423
  return offset + byteLength                                                                                           // 1424
}                                                                                                                      // 1425
                                                                                                                       // 1426
Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {                                            // 1427
  value = +value                                                                                                       // 1428
  offset = offset | 0                                                                                                  // 1429
  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)                                                         // 1430
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)                                                           // 1431
  if (value < 0) value = 0xff + value + 1                                                                              // 1432
  this[offset] = (value & 0xff)                                                                                        // 1433
  return offset + 1                                                                                                    // 1434
}                                                                                                                      // 1435
                                                                                                                       // 1436
Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {                                      // 1437
  value = +value                                                                                                       // 1438
  offset = offset | 0                                                                                                  // 1439
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)                                                     // 1440
  if (Buffer.TYPED_ARRAY_SUPPORT) {                                                                                    // 1441
    this[offset] = (value & 0xff)                                                                                      // 1442
    this[offset + 1] = (value >>> 8)                                                                                   // 1443
  } else {                                                                                                             // 1444
    objectWriteUInt16(this, value, offset, true)                                                                       // 1445
  }                                                                                                                    // 1446
  return offset + 2                                                                                                    // 1447
}                                                                                                                      // 1448
                                                                                                                       // 1449
Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {                                      // 1450
  value = +value                                                                                                       // 1451
  offset = offset | 0                                                                                                  // 1452
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)                                                     // 1453
  if (Buffer.TYPED_ARRAY_SUPPORT) {                                                                                    // 1454
    this[offset] = (value >>> 8)                                                                                       // 1455
    this[offset + 1] = (value & 0xff)                                                                                  // 1456
  } else {                                                                                                             // 1457
    objectWriteUInt16(this, value, offset, false)                                                                      // 1458
  }                                                                                                                    // 1459
  return offset + 2                                                                                                    // 1460
}                                                                                                                      // 1461
                                                                                                                       // 1462
Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {                                      // 1463
  value = +value                                                                                                       // 1464
  offset = offset | 0                                                                                                  // 1465
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)                                             // 1466
  if (Buffer.TYPED_ARRAY_SUPPORT) {                                                                                    // 1467
    this[offset] = (value & 0xff)                                                                                      // 1468
    this[offset + 1] = (value >>> 8)                                                                                   // 1469
    this[offset + 2] = (value >>> 16)                                                                                  // 1470
    this[offset + 3] = (value >>> 24)                                                                                  // 1471
  } else {                                                                                                             // 1472
    objectWriteUInt32(this, value, offset, true)                                                                       // 1473
  }                                                                                                                    // 1474
  return offset + 4                                                                                                    // 1475
}                                                                                                                      // 1476
                                                                                                                       // 1477
Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {                                      // 1478
  value = +value                                                                                                       // 1479
  offset = offset | 0                                                                                                  // 1480
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)                                             // 1481
  if (value < 0) value = 0xffffffff + value + 1                                                                        // 1482
  if (Buffer.TYPED_ARRAY_SUPPORT) {                                                                                    // 1483
    this[offset] = (value >>> 24)                                                                                      // 1484
    this[offset + 1] = (value >>> 16)                                                                                  // 1485
    this[offset + 2] = (value >>> 8)                                                                                   // 1486
    this[offset + 3] = (value & 0xff)                                                                                  // 1487
  } else {                                                                                                             // 1488
    objectWriteUInt32(this, value, offset, false)                                                                      // 1489
  }                                                                                                                    // 1490
  return offset + 4                                                                                                    // 1491
}                                                                                                                      // 1492
                                                                                                                       // 1493
function checkIEEE754 (buf, value, offset, ext, max, min) {                                                            // 1494
  if (offset + ext > buf.length) throw new RangeError('Index out of range')                                            // 1495
  if (offset < 0) throw new RangeError('Index out of range')                                                           // 1496
}                                                                                                                      // 1497
                                                                                                                       // 1498
function writeFloat (buf, value, offset, littleEndian, noAssert) {                                                     // 1499
  if (!noAssert) {                                                                                                     // 1500
    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)                               // 1501
  }                                                                                                                    // 1502
  ieee754.write(buf, value, offset, littleEndian, 23, 4)                                                               // 1503
  return offset + 4                                                                                                    // 1504
}                                                                                                                      // 1505
                                                                                                                       // 1506
Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {                                      // 1507
  return writeFloat(this, value, offset, true, noAssert)                                                               // 1508
}                                                                                                                      // 1509
                                                                                                                       // 1510
Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {                                      // 1511
  return writeFloat(this, value, offset, false, noAssert)                                                              // 1512
}                                                                                                                      // 1513
                                                                                                                       // 1514
function writeDouble (buf, value, offset, littleEndian, noAssert) {                                                    // 1515
  if (!noAssert) {                                                                                                     // 1516
    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)                             // 1517
  }                                                                                                                    // 1518
  ieee754.write(buf, value, offset, littleEndian, 52, 8)                                                               // 1519
  return offset + 8                                                                                                    // 1520
}                                                                                                                      // 1521
                                                                                                                       // 1522
Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {                                    // 1523
  return writeDouble(this, value, offset, true, noAssert)                                                              // 1524
}                                                                                                                      // 1525
                                                                                                                       // 1526
Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {                                    // 1527
  return writeDouble(this, value, offset, false, noAssert)                                                             // 1528
}                                                                                                                      // 1529
                                                                                                                       // 1530
// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)                                           // 1531
Buffer.prototype.copy = function copy (target, targetStart, start, end) {                                              // 1532
  if (!start) start = 0                                                                                                // 1533
  if (!end && end !== 0) end = this.length                                                                             // 1534
  if (targetStart >= target.length) targetStart = target.length                                                        // 1535
  if (!targetStart) targetStart = 0                                                                                    // 1536
  if (end > 0 && end < start) end = start                                                                              // 1537
                                                                                                                       // 1538
  // Copy 0 bytes; we're done                                                                                          // 1539
  if (end === start) return 0                                                                                          // 1540
  if (target.length === 0 || this.length === 0) return 0                                                               // 1541
                                                                                                                       // 1542
  // Fatal error conditions                                                                                            // 1543
  if (targetStart < 0) {                                                                                               // 1544
    throw new RangeError('targetStart out of bounds')                                                                  // 1545
  }                                                                                                                    // 1546
  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')                             // 1547
  if (end < 0) throw new RangeError('sourceEnd out of bounds')                                                         // 1548
                                                                                                                       // 1549
  // Are we oob?                                                                                                       // 1550
  if (end > this.length) end = this.length                                                                             // 1551
  if (target.length - targetStart < end - start) {                                                                     // 1552
    end = target.length - targetStart + start                                                                          // 1553
  }                                                                                                                    // 1554
                                                                                                                       // 1555
  var len = end - start                                                                                                // 1556
  var i                                                                                                                // 1557
                                                                                                                       // 1558
  if (this === target && start < targetStart && targetStart < end) {                                                   // 1559
    // descending copy from end                                                                                        // 1560
    for (i = len - 1; i >= 0; --i) {                                                                                   // 1561
      target[i + targetStart] = this[i + start]                                                                        // 1562
    }                                                                                                                  // 1563
  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {                                                              // 1564
    // ascending copy from start                                                                                       // 1565
    for (i = 0; i < len; ++i) {                                                                                        // 1566
      target[i + targetStart] = this[i + start]                                                                        // 1567
    }                                                                                                                  // 1568
  } else {                                                                                                             // 1569
    Uint8Array.prototype.set.call(                                                                                     // 1570
      target,                                                                                                          // 1571
      this.subarray(start, start + len),                                                                               // 1572
      targetStart                                                                                                      // 1573
    )                                                                                                                  // 1574
  }                                                                                                                    // 1575
                                                                                                                       // 1576
  return len                                                                                                           // 1577
}                                                                                                                      // 1578
                                                                                                                       // 1579
// Usage:                                                                                                              // 1580
//    buffer.fill(number[, offset[, end]])                                                                             // 1581
//    buffer.fill(buffer[, offset[, end]])                                                                             // 1582
//    buffer.fill(string[, offset[, end]][, encoding])                                                                 // 1583
Buffer.prototype.fill = function fill (val, start, end, encoding) {                                                    // 1584
  // Handle string cases:                                                                                              // 1585
  if (typeof val === 'string') {                                                                                       // 1586
    if (typeof start === 'string') {                                                                                   // 1587
      encoding = start                                                                                                 // 1588
      start = 0                                                                                                        // 1589
      end = this.length                                                                                                // 1590
    } else if (typeof end === 'string') {                                                                              // 1591
      encoding = end                                                                                                   // 1592
      end = this.length                                                                                                // 1593
    }                                                                                                                  // 1594
    if (val.length === 1) {                                                                                            // 1595
      var code = val.charCodeAt(0)                                                                                     // 1596
      if (code < 256) {                                                                                                // 1597
        val = code                                                                                                     // 1598
      }                                                                                                                // 1599
    }                                                                                                                  // 1600
    if (encoding !== undefined && typeof encoding !== 'string') {                                                      // 1601
      throw new TypeError('encoding must be a string')                                                                 // 1602
    }                                                                                                                  // 1603
    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {                                                // 1604
      throw new TypeError('Unknown encoding: ' + encoding)                                                             // 1605
    }                                                                                                                  // 1606
  } else if (typeof val === 'number') {                                                                                // 1607
    val = val & 255                                                                                                    // 1608
  }                                                                                                                    // 1609
                                                                                                                       // 1610
  // Invalid ranges are not set to a default, so can range check early.                                                // 1611
  if (start < 0 || this.length < start || this.length < end) {                                                         // 1612
    throw new RangeError('Out of range index')                                                                         // 1613
  }                                                                                                                    // 1614
                                                                                                                       // 1615
  if (end <= start) {                                                                                                  // 1616
    return this                                                                                                        // 1617
  }                                                                                                                    // 1618
                                                                                                                       // 1619
  start = start >>> 0                                                                                                  // 1620
  end = end === undefined ? this.length : end >>> 0                                                                    // 1621
                                                                                                                       // 1622
  if (!val) val = 0                                                                                                    // 1623
                                                                                                                       // 1624
  var i                                                                                                                // 1625
  if (typeof val === 'number') {                                                                                       // 1626
    for (i = start; i < end; ++i) {                                                                                    // 1627
      this[i] = val                                                                                                    // 1628
    }                                                                                                                  // 1629
  } else {                                                                                                             // 1630
    var bytes = Buffer.isBuffer(val)                                                                                   // 1631
      ? val                                                                                                            // 1632
      : utf8ToBytes(new Buffer(val, encoding).toString())                                                              // 1633
    var len = bytes.length                                                                                             // 1634
    for (i = 0; i < end - start; ++i) {                                                                                // 1635
      this[i + start] = bytes[i % len]                                                                                 // 1636
    }                                                                                                                  // 1637
  }                                                                                                                    // 1638
                                                                                                                       // 1639
  return this                                                                                                          // 1640
}                                                                                                                      // 1641
                                                                                                                       // 1642
// HELPER FUNCTIONS                                                                                                    // 1643
// ================                                                                                                    // 1644
                                                                                                                       // 1645
var INVALID_BASE64_RE = /[^+\/0-9A-Za-z-_]/g                                                                           // 1646
                                                                                                                       // 1647
function base64clean (str) {                                                                                           // 1648
  // Node strips out invalid characters like \n and \t from the string, base64-js does not                             // 1649
  str = stringtrim(str).replace(INVALID_BASE64_RE, '')                                                                 // 1650
  // Node converts strings with length < 2 to ''                                                                       // 1651
  if (str.length < 2) return ''                                                                                        // 1652
  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not                              // 1653
  while (str.length % 4 !== 0) {                                                                                       // 1654
    str = str + '='                                                                                                    // 1655
  }                                                                                                                    // 1656
  return str                                                                                                           // 1657
}                                                                                                                      // 1658
                                                                                                                       // 1659
function stringtrim (str) {                                                                                            // 1660
  if (str.trim) return str.trim()                                                                                      // 1661
  return str.replace(/^\s+|\s+$/g, '')                                                                                 // 1662
}                                                                                                                      // 1663
                                                                                                                       // 1664
function toHex (n) {                                                                                                   // 1665
  if (n < 16) return '0' + n.toString(16)                                                                              // 1666
  return n.toString(16)                                                                                                // 1667
}                                                                                                                      // 1668
                                                                                                                       // 1669
function utf8ToBytes (string, units) {                                                                                 // 1670
  units = units || Infinity                                                                                            // 1671
  var codePoint                                                                                                        // 1672
  var length = string.length                                                                                           // 1673
  var leadSurrogate = null                                                                                             // 1674
  var bytes = []                                                                                                       // 1675
                                                                                                                       // 1676
  for (var i = 0; i < length; ++i) {                                                                                   // 1677
    codePoint = string.charCodeAt(i)                                                                                   // 1678
                                                                                                                       // 1679
    // is surrogate component                                                                                          // 1680
    if (codePoint > 0xD7FF && codePoint < 0xE000) {                                                                    // 1681
      // last char was a lead                                                                                          // 1682
      if (!leadSurrogate) {                                                                                            // 1683
        // no lead yet                                                                                                 // 1684
        if (codePoint > 0xDBFF) {                                                                                      // 1685
          // unexpected trail                                                                                          // 1686
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)                                                          // 1687
          continue                                                                                                     // 1688
        } else if (i + 1 === length) {                                                                                 // 1689
          // unpaired lead                                                                                             // 1690
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)                                                          // 1691
          continue                                                                                                     // 1692
        }                                                                                                              // 1693
                                                                                                                       // 1694
        // valid lead                                                                                                  // 1695
        leadSurrogate = codePoint                                                                                      // 1696
                                                                                                                       // 1697
        continue                                                                                                       // 1698
      }                                                                                                                // 1699
                                                                                                                       // 1700
      // 2 leads in a row                                                                                              // 1701
      if (codePoint < 0xDC00) {                                                                                        // 1702
        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)                                                            // 1703
        leadSurrogate = codePoint                                                                                      // 1704
        continue                                                                                                       // 1705
      }                                                                                                                // 1706
                                                                                                                       // 1707
      // valid surrogate pair                                                                                          // 1708
      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000                                        // 1709
    } else if (leadSurrogate) {                                                                                        // 1710
      // valid bmp char, but last char was a lead                                                                      // 1711
      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)                                                              // 1712
    }                                                                                                                  // 1713
                                                                                                                       // 1714
    leadSurrogate = null                                                                                               // 1715
                                                                                                                       // 1716
    // encode utf8                                                                                                     // 1717
    if (codePoint < 0x80) {                                                                                            // 1718
      if ((units -= 1) < 0) break                                                                                      // 1719
      bytes.push(codePoint)                                                                                            // 1720
    } else if (codePoint < 0x800) {                                                                                    // 1721
      if ((units -= 2) < 0) break                                                                                      // 1722
      bytes.push(                                                                                                      // 1723
        codePoint >> 0x6 | 0xC0,                                                                                       // 1724
        codePoint & 0x3F | 0x80                                                                                        // 1725
      )                                                                                                                // 1726
    } else if (codePoint < 0x10000) {                                                                                  // 1727
      if ((units -= 3) < 0) break                                                                                      // 1728
      bytes.push(                                                                                                      // 1729
        codePoint >> 0xC | 0xE0,                                                                                       // 1730
        codePoint >> 0x6 & 0x3F | 0x80,                                                                                // 1731
        codePoint & 0x3F | 0x80                                                                                        // 1732
      )                                                                                                                // 1733
    } else if (codePoint < 0x110000) {                                                                                 // 1734
      if ((units -= 4) < 0) break                                                                                      // 1735
      bytes.push(                                                                                                      // 1736
        codePoint >> 0x12 | 0xF0,                                                                                      // 1737
        codePoint >> 0xC & 0x3F | 0x80,                                                                                // 1738
        codePoint >> 0x6 & 0x3F | 0x80,                                                                                // 1739
        codePoint & 0x3F | 0x80                                                                                        // 1740
      )                                                                                                                // 1741
    } else {                                                                                                           // 1742
      throw new Error('Invalid code point')                                                                            // 1743
    }                                                                                                                  // 1744
  }                                                                                                                    // 1745
                                                                                                                       // 1746
  return bytes                                                                                                         // 1747
}                                                                                                                      // 1748
                                                                                                                       // 1749
function asciiToBytes (str) {                                                                                          // 1750
  var byteArray = []                                                                                                   // 1751
  for (var i = 0; i < str.length; ++i) {                                                                               // 1752
    // Node's code seems to be doing this and not & 0x7F..                                                             // 1753
    byteArray.push(str.charCodeAt(i) & 0xFF)                                                                           // 1754
  }                                                                                                                    // 1755
  return byteArray                                                                                                     // 1756
}                                                                                                                      // 1757
                                                                                                                       // 1758
function utf16leToBytes (str, units) {                                                                                 // 1759
  var c, hi, lo                                                                                                        // 1760
  var byteArray = []                                                                                                   // 1761
  for (var i = 0; i < str.length; ++i) {                                                                               // 1762
    if ((units -= 2) < 0) break                                                                                        // 1763
                                                                                                                       // 1764
    c = str.charCodeAt(i)                                                                                              // 1765
    hi = c >> 8                                                                                                        // 1766
    lo = c % 256                                                                                                       // 1767
    byteArray.push(lo)                                                                                                 // 1768
    byteArray.push(hi)                                                                                                 // 1769
  }                                                                                                                    // 1770
                                                                                                                       // 1771
  return byteArray                                                                                                     // 1772
}                                                                                                                      // 1773
                                                                                                                       // 1774
function base64ToBytes (str) {                                                                                         // 1775
  return base64.toByteArray(base64clean(str))                                                                          // 1776
}                                                                                                                      // 1777
                                                                                                                       // 1778
function blitBuffer (src, dst, offset, length) {                                                                       // 1779
  for (var i = 0; i < length; ++i) {                                                                                   // 1780
    if ((i + offset >= dst.length) || (i >= src.length)) break                                                         // 1781
    dst[i + offset] = src[i]                                                                                           // 1782
  }                                                                                                                    // 1783
  return i                                                                                                             // 1784
}                                                                                                                      // 1785
                                                                                                                       // 1786
function isnan (val) {                                                                                                 // 1787
  return val !== val // eslint-disable-line no-self-compare                                                            // 1788
}                                                                                                                      // 1789
                                                                                                                       // 1790
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]},"base64-js":{"package.json":function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor-node-stubs/node_modules/base64-js/package.json                                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.name = "base64-js";                                                                                            // 1
exports.version = "1.2.0";                                                                                             // 2
exports.main = "index.js";                                                                                             // 3
                                                                                                                       // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"index.js":function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor-node-stubs/node_modules/base64-js/index.js                                                      //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict'                                                                                                           // 1
                                                                                                                       // 2
exports.byteLength = byteLength                                                                                        // 3
exports.toByteArray = toByteArray                                                                                      // 4
exports.fromByteArray = fromByteArray                                                                                  // 5
                                                                                                                       // 6
var lookup = []                                                                                                        // 7
var revLookup = []                                                                                                     // 8
var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array                                                       // 9
                                                                                                                       // 10
var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'                                          // 11
for (var i = 0, len = code.length; i < len; ++i) {                                                                     // 12
  lookup[i] = code[i]                                                                                                  // 13
  revLookup[code.charCodeAt(i)] = i                                                                                    // 14
}                                                                                                                      // 15
                                                                                                                       // 16
revLookup['-'.charCodeAt(0)] = 62                                                                                      // 17
revLookup['_'.charCodeAt(0)] = 63                                                                                      // 18
                                                                                                                       // 19
function placeHoldersCount (b64) {                                                                                     // 20
  var len = b64.length                                                                                                 // 21
  if (len % 4 > 0) {                                                                                                   // 22
    throw new Error('Invalid string. Length must be a multiple of 4')                                                  // 23
  }                                                                                                                    // 24
                                                                                                                       // 25
  // the number of equal signs (place holders)                                                                         // 26
  // if there are two placeholders, than the two characters before it                                                  // 27
  // represent one byte                                                                                                // 28
  // if there is only one, then the three characters before it represent 2 bytes                                       // 29
  // this is just a cheap hack to not do indexOf twice                                                                 // 30
  return b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0                                                       // 31
}                                                                                                                      // 32
                                                                                                                       // 33
function byteLength (b64) {                                                                                            // 34
  // base64 is 4/3 + up to two characters of the original data                                                         // 35
  return b64.length * 3 / 4 - placeHoldersCount(b64)                                                                   // 36
}                                                                                                                      // 37
                                                                                                                       // 38
function toByteArray (b64) {                                                                                           // 39
  var i, j, l, tmp, placeHolders, arr                                                                                  // 40
  var len = b64.length                                                                                                 // 41
  placeHolders = placeHoldersCount(b64)                                                                                // 42
                                                                                                                       // 43
  arr = new Arr(len * 3 / 4 - placeHolders)                                                                            // 44
                                                                                                                       // 45
  // if there are placeholders, only get up to the last complete 4 chars                                               // 46
  l = placeHolders > 0 ? len - 4 : len                                                                                 // 47
                                                                                                                       // 48
  var L = 0                                                                                                            // 49
                                                                                                                       // 50
  for (i = 0, j = 0; i < l; i += 4, j += 3) {                                                                          // 51
    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]
    arr[L++] = (tmp >> 16) & 0xFF                                                                                      // 53
    arr[L++] = (tmp >> 8) & 0xFF                                                                                       // 54
    arr[L++] = tmp & 0xFF                                                                                              // 55
  }                                                                                                                    // 56
                                                                                                                       // 57
  if (placeHolders === 2) {                                                                                            // 58
    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)                                // 59
    arr[L++] = tmp & 0xFF                                                                                              // 60
  } else if (placeHolders === 1) {                                                                                     // 61
    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)
    arr[L++] = (tmp >> 8) & 0xFF                                                                                       // 63
    arr[L++] = tmp & 0xFF                                                                                              // 64
  }                                                                                                                    // 65
                                                                                                                       // 66
  return arr                                                                                                           // 67
}                                                                                                                      // 68
                                                                                                                       // 69
function tripletToBase64 (num) {                                                                                       // 70
  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]            // 71
}                                                                                                                      // 72
                                                                                                                       // 73
function encodeChunk (uint8, start, end) {                                                                             // 74
  var tmp                                                                                                              // 75
  var output = []                                                                                                      // 76
  for (var i = start; i < end; i += 3) {                                                                               // 77
    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])                                                      // 78
    output.push(tripletToBase64(tmp))                                                                                  // 79
  }                                                                                                                    // 80
  return output.join('')                                                                                               // 81
}                                                                                                                      // 82
                                                                                                                       // 83
function fromByteArray (uint8) {                                                                                       // 84
  var tmp                                                                                                              // 85
  var len = uint8.length                                                                                               // 86
  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes                                                      // 87
  var output = ''                                                                                                      // 88
  var parts = []                                                                                                       // 89
  var maxChunkLength = 16383 // must be multiple of 3                                                                  // 90
                                                                                                                       // 91
  // go through the array every three bytes, we'll deal with trailing stuff later                                      // 92
  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {                                            // 93
    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))                       // 94
  }                                                                                                                    // 95
                                                                                                                       // 96
  // pad the end with zeros, but make sure to not forget the extra bytes                                               // 97
  if (extraBytes === 1) {                                                                                              // 98
    tmp = uint8[len - 1]                                                                                               // 99
    output += lookup[tmp >> 2]                                                                                         // 100
    output += lookup[(tmp << 4) & 0x3F]                                                                                // 101
    output += '=='                                                                                                     // 102
  } else if (extraBytes === 2) {                                                                                       // 103
    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])                                                                     // 104
    output += lookup[tmp >> 10]                                                                                        // 105
    output += lookup[(tmp >> 4) & 0x3F]                                                                                // 106
    output += lookup[(tmp << 2) & 0x3F]                                                                                // 107
    output += '='                                                                                                      // 108
  }                                                                                                                    // 109
                                                                                                                       // 110
  parts.push(output)                                                                                                   // 111
                                                                                                                       // 112
  return parts.join('')                                                                                                // 113
}                                                                                                                      // 114
                                                                                                                       // 115
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"ieee754":{"package.json":function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor-node-stubs/node_modules/ieee754/package.json                                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.name = "ieee754";                                                                                              // 1
exports.version = "1.1.8";                                                                                             // 2
exports.main = "index.js";                                                                                             // 3
                                                                                                                       // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"index.js":function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor-node-stubs/node_modules/ieee754/index.js                                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.read = function (buffer, offset, isLE, mLen, nBytes) {                                                         // 1
  var e, m                                                                                                             // 2
  var eLen = nBytes * 8 - mLen - 1                                                                                     // 3
  var eMax = (1 << eLen) - 1                                                                                           // 4
  var eBias = eMax >> 1                                                                                                // 5
  var nBits = -7                                                                                                       // 6
  var i = isLE ? (nBytes - 1) : 0                                                                                      // 7
  var d = isLE ? -1 : 1                                                                                                // 8
  var s = buffer[offset + i]                                                                                           // 9
                                                                                                                       // 10
  i += d                                                                                                               // 11
                                                                                                                       // 12
  e = s & ((1 << (-nBits)) - 1)                                                                                        // 13
  s >>= (-nBits)                                                                                                       // 14
  nBits += eLen                                                                                                        // 15
  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}                                           // 16
                                                                                                                       // 17
  m = e & ((1 << (-nBits)) - 1)                                                                                        // 18
  e >>= (-nBits)                                                                                                       // 19
  nBits += mLen                                                                                                        // 20
  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}                                           // 21
                                                                                                                       // 22
  if (e === 0) {                                                                                                       // 23
    e = 1 - eBias                                                                                                      // 24
  } else if (e === eMax) {                                                                                             // 25
    return m ? NaN : ((s ? -1 : 1) * Infinity)                                                                         // 26
  } else {                                                                                                             // 27
    m = m + Math.pow(2, mLen)                                                                                          // 28
    e = e - eBias                                                                                                      // 29
  }                                                                                                                    // 30
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)                                                                      // 31
}                                                                                                                      // 32
                                                                                                                       // 33
exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {                                                 // 34
  var e, m, c                                                                                                          // 35
  var eLen = nBytes * 8 - mLen - 1                                                                                     // 36
  var eMax = (1 << eLen) - 1                                                                                           // 37
  var eBias = eMax >> 1                                                                                                // 38
  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)                                                     // 39
  var i = isLE ? 0 : (nBytes - 1)                                                                                      // 40
  var d = isLE ? 1 : -1                                                                                                // 41
  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0                                                          // 42
                                                                                                                       // 43
  value = Math.abs(value)                                                                                              // 44
                                                                                                                       // 45
  if (isNaN(value) || value === Infinity) {                                                                            // 46
    m = isNaN(value) ? 1 : 0                                                                                           // 47
    e = eMax                                                                                                           // 48
  } else {                                                                                                             // 49
    e = Math.floor(Math.log(value) / Math.LN2)                                                                         // 50
    if (value * (c = Math.pow(2, -e)) < 1) {                                                                           // 51
      e--                                                                                                              // 52
      c *= 2                                                                                                           // 53
    }                                                                                                                  // 54
    if (e + eBias >= 1) {                                                                                              // 55
      value += rt / c                                                                                                  // 56
    } else {                                                                                                           // 57
      value += rt * Math.pow(2, 1 - eBias)                                                                             // 58
    }                                                                                                                  // 59
    if (value * c >= 2) {                                                                                              // 60
      e++                                                                                                              // 61
      c /= 2                                                                                                           // 62
    }                                                                                                                  // 63
                                                                                                                       // 64
    if (e + eBias >= eMax) {                                                                                           // 65
      m = 0                                                                                                            // 66
      e = eMax                                                                                                         // 67
    } else if (e + eBias >= 1) {                                                                                       // 68
      m = (value * c - 1) * Math.pow(2, mLen)                                                                          // 69
      e = e + eBias                                                                                                    // 70
    } else {                                                                                                           // 71
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)                                                           // 72
      e = 0                                                                                                            // 73
    }                                                                                                                  // 74
  }                                                                                                                    // 75
                                                                                                                       // 76
  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}                                     // 77
                                                                                                                       // 78
  e = (e << mLen) | m                                                                                                  // 79
  eLen += mLen                                                                                                         // 80
  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}                                      // 81
                                                                                                                       // 82
  buffer[offset + i - d] |= s * 128                                                                                    // 83
}                                                                                                                      // 84
                                                                                                                       // 85
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"isarray":{"package.json":function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor-node-stubs/node_modules/isarray/package.json                                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.name = "isarray";                                                                                              // 1
exports.version = "1.0.0";                                                                                             // 2
exports.main = "index.js";                                                                                             // 3
                                                                                                                       // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"index.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor-node-stubs/node_modules/isarray/index.js                                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var toString = {}.toString;                                                                                            // 1
                                                                                                                       // 2
module.exports = Array.isArray || function (arr) {                                                                     // 3
  return toString.call(arr) == '[object Array]';                                                                       // 4
};                                                                                                                     // 5
                                                                                                                       // 6
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"process":{"browser.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor-node-stubs/node_modules/process/browser.js                                                      //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// shim for using process in browser                                                                                   // 1
var process = module.exports = {};                                                                                     // 2
                                                                                                                       // 3
// cached from whatever global is present so that test runners that stub it                                            // 4
// don't break things.  But we need to wrap it in a try catch in case it is                                            // 5
// wrapped in strict mode code which doesn't define any globals.  It's inside a                                        // 6
// function because try/catches deoptimize in certain engines.                                                         // 7
                                                                                                                       // 8
var cachedSetTimeout;                                                                                                  // 9
var cachedClearTimeout;                                                                                                // 10
                                                                                                                       // 11
function defaultSetTimout() {                                                                                          // 12
    throw new Error('setTimeout has not been defined');                                                                // 13
}                                                                                                                      // 14
function defaultClearTimeout () {                                                                                      // 15
    throw new Error('clearTimeout has not been defined');                                                              // 16
}                                                                                                                      // 17
(function () {                                                                                                         // 18
    try {                                                                                                              // 19
        if (typeof setTimeout === 'function') {                                                                        // 20
            cachedSetTimeout = setTimeout;                                                                             // 21
        } else {                                                                                                       // 22
            cachedSetTimeout = defaultSetTimout;                                                                       // 23
        }                                                                                                              // 24
    } catch (e) {                                                                                                      // 25
        cachedSetTimeout = defaultSetTimout;                                                                           // 26
    }                                                                                                                  // 27
    try {                                                                                                              // 28
        if (typeof clearTimeout === 'function') {                                                                      // 29
            cachedClearTimeout = clearTimeout;                                                                         // 30
        } else {                                                                                                       // 31
            cachedClearTimeout = defaultClearTimeout;                                                                  // 32
        }                                                                                                              // 33
    } catch (e) {                                                                                                      // 34
        cachedClearTimeout = defaultClearTimeout;                                                                      // 35
    }                                                                                                                  // 36
} ())                                                                                                                  // 37
function runTimeout(fun) {                                                                                             // 38
    if (cachedSetTimeout === setTimeout) {                                                                             // 39
        //normal enviroments in sane situations                                                                        // 40
        return setTimeout(fun, 0);                                                                                     // 41
    }                                                                                                                  // 42
    // if setTimeout wasn't available but was latter defined                                                           // 43
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {                                  // 44
        cachedSetTimeout = setTimeout;                                                                                 // 45
        return setTimeout(fun, 0);                                                                                     // 46
    }                                                                                                                  // 47
    try {                                                                                                              // 48
        // when when somebody has screwed with setTimeout but no I.E. maddness                                         // 49
        return cachedSetTimeout(fun, 0);                                                                               // 50
    } catch(e){                                                                                                        // 51
        try {                                                                                                          // 52
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);                                                                // 54
        } catch(e){                                                                                                    // 55
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);                                                                // 57
        }                                                                                                              // 58
    }                                                                                                                  // 59
                                                                                                                       // 60
                                                                                                                       // 61
}                                                                                                                      // 62
function runClearTimeout(marker) {                                                                                     // 63
    if (cachedClearTimeout === clearTimeout) {                                                                         // 64
        //normal enviroments in sane situations                                                                        // 65
        return clearTimeout(marker);                                                                                   // 66
    }                                                                                                                  // 67
    // if clearTimeout wasn't available but was latter defined                                                         // 68
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {                         // 69
        cachedClearTimeout = clearTimeout;                                                                             // 70
        return clearTimeout(marker);                                                                                   // 71
    }                                                                                                                  // 72
    try {                                                                                                              // 73
        // when when somebody has screwed with setTimeout but no I.E. maddness                                         // 74
        return cachedClearTimeout(marker);                                                                             // 75
    } catch (e){                                                                                                       // 76
        try {                                                                                                          // 77
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);                                                              // 79
        } catch (e){                                                                                                   // 80
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout                               // 82
            return cachedClearTimeout.call(this, marker);                                                              // 83
        }                                                                                                              // 84
    }                                                                                                                  // 85
                                                                                                                       // 86
                                                                                                                       // 87
                                                                                                                       // 88
}                                                                                                                      // 89
var queue = [];                                                                                                        // 90
var draining = false;                                                                                                  // 91
var currentQueue;                                                                                                      // 92
var queueIndex = -1;                                                                                                   // 93
                                                                                                                       // 94
function cleanUpNextTick() {                                                                                           // 95
    if (!draining || !currentQueue) {                                                                                  // 96
        return;                                                                                                        // 97
    }                                                                                                                  // 98
    draining = false;                                                                                                  // 99
    if (currentQueue.length) {                                                                                         // 100
        queue = currentQueue.concat(queue);                                                                            // 101
    } else {                                                                                                           // 102
        queueIndex = -1;                                                                                               // 103
    }                                                                                                                  // 104
    if (queue.length) {                                                                                                // 105
        drainQueue();                                                                                                  // 106
    }                                                                                                                  // 107
}                                                                                                                      // 108
                                                                                                                       // 109
function drainQueue() {                                                                                                // 110
    if (draining) {                                                                                                    // 111
        return;                                                                                                        // 112
    }                                                                                                                  // 113
    var timeout = runTimeout(cleanUpNextTick);                                                                         // 114
    draining = true;                                                                                                   // 115
                                                                                                                       // 116
    var len = queue.length;                                                                                            // 117
    while(len) {                                                                                                       // 118
        currentQueue = queue;                                                                                          // 119
        queue = [];                                                                                                    // 120
        while (++queueIndex < len) {                                                                                   // 121
            if (currentQueue) {                                                                                        // 122
                currentQueue[queueIndex].run();                                                                        // 123
            }                                                                                                          // 124
        }                                                                                                              // 125
        queueIndex = -1;                                                                                               // 126
        len = queue.length;                                                                                            // 127
    }                                                                                                                  // 128
    currentQueue = null;                                                                                               // 129
    draining = false;                                                                                                  // 130
    runClearTimeout(timeout);                                                                                          // 131
}                                                                                                                      // 132
                                                                                                                       // 133
process.nextTick = function (fun) {                                                                                    // 134
    var args = new Array(arguments.length - 1);                                                                        // 135
    if (arguments.length > 1) {                                                                                        // 136
        for (var i = 1; i < arguments.length; i++) {                                                                   // 137
            args[i - 1] = arguments[i];                                                                                // 138
        }                                                                                                              // 139
    }                                                                                                                  // 140
    queue.push(new Item(fun, args));                                                                                   // 141
    if (queue.length === 1 && !draining) {                                                                             // 142
        runTimeout(drainQueue);                                                                                        // 143
    }                                                                                                                  // 144
};                                                                                                                     // 145
                                                                                                                       // 146
// v8 likes predictible objects                                                                                        // 147
function Item(fun, array) {                                                                                            // 148
    this.fun = fun;                                                                                                    // 149
    this.array = array;                                                                                                // 150
}                                                                                                                      // 151
Item.prototype.run = function () {                                                                                     // 152
    this.fun.apply(null, this.array);                                                                                  // 153
};                                                                                                                     // 154
process.title = 'browser';                                                                                             // 155
process.browser = true;                                                                                                // 156
process.env = {};                                                                                                      // 157
process.argv = [];                                                                                                     // 158
process.version = ''; // empty string to avoid regexp issues                                                           // 159
process.versions = {};                                                                                                 // 160
                                                                                                                       // 161
function noop() {}                                                                                                     // 162
                                                                                                                       // 163
process.on = noop;                                                                                                     // 164
process.addListener = noop;                                                                                            // 165
process.once = noop;                                                                                                   // 166
process.off = noop;                                                                                                    // 167
process.removeListener = noop;                                                                                         // 168
process.removeAllListeners = noop;                                                                                     // 169
process.emit = noop;                                                                                                   // 170
                                                                                                                       // 171
process.binding = function (name) {                                                                                    // 172
    throw new Error('process.binding is not supported');                                                               // 173
};                                                                                                                     // 174
                                                                                                                       // 175
process.cwd = function () { return '/' };                                                                              // 176
process.chdir = function (dir) {                                                                                       // 177
    throw new Error('process.chdir is not supported');                                                                 // 178
};                                                                                                                     // 179
process.umask = function() { return 0; };                                                                              // 180
                                                                                                                       // 181
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"domain-browser":{"package.json":function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor-node-stubs/node_modules/domain-browser/package.json                                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.name = "domain-browser";                                                                                       // 1
exports.version = "1.1.7";                                                                                             // 2
exports.main = "./index.js";                                                                                           // 3
                                                                                                                       // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"index.js":["events",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor-node-stubs/node_modules/domain-browser/index.js                                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// This file should be ES5 compatible                                                                                  // 1
/* eslint prefer-spread:0, no-var:0, prefer-reflect:0, no-magic-numbers:0 */                                           // 2
'use strict'                                                                                                           // 3
module.exports = (function () {                                                                                        // 4
	// Import Events                                                                                                      // 5
	var events = require('events')                                                                                        // 6
                                                                                                                       // 7
	// Export Domain                                                                                                      // 8
	var domain = {}                                                                                                       // 9
	domain.createDomain = domain.create = function () {                                                                   // 10
		var d = new events.EventEmitter()                                                                                    // 11
                                                                                                                       // 12
		function emitError (e) {                                                                                             // 13
			d.emit('error', e)                                                                                                  // 14
		}                                                                                                                    // 15
                                                                                                                       // 16
		d.add = function (emitter) {                                                                                         // 17
			emitter.on('error', emitError)                                                                                      // 18
		}                                                                                                                    // 19
		d.remove = function (emitter) {                                                                                      // 20
			emitter.removeListener('error', emitError)                                                                          // 21
		}                                                                                                                    // 22
		d.bind = function (fn) {                                                                                             // 23
			return function () {                                                                                                // 24
				var args = Array.prototype.slice.call(arguments)                                                                   // 25
				try {                                                                                                              // 26
					fn.apply(null, args)                                                                                              // 27
				}                                                                                                                  // 28
				catch (err) {                                                                                                      // 29
					emitError(err)                                                                                                    // 30
				}                                                                                                                  // 31
			}                                                                                                                   // 32
		}                                                                                                                    // 33
		d.intercept = function (fn) {                                                                                        // 34
			return function (err) {                                                                                             // 35
				if ( err ) {                                                                                                       // 36
					emitError(err)                                                                                                    // 37
				}                                                                                                                  // 38
				else {                                                                                                             // 39
					var args = Array.prototype.slice.call(arguments, 1)                                                               // 40
					try {                                                                                                             // 41
						fn.apply(null, args)                                                                                             // 42
					}                                                                                                                 // 43
					catch (err) {                                                                                                     // 44
						emitError(err)                                                                                                   // 45
					}                                                                                                                 // 46
				}                                                                                                                  // 47
			}                                                                                                                   // 48
		}                                                                                                                    // 49
		d.run = function (fn) {                                                                                              // 50
			try {                                                                                                               // 51
				fn()                                                                                                               // 52
			}                                                                                                                   // 53
			catch (err) {                                                                                                       // 54
				emitError(err)                                                                                                     // 55
			}                                                                                                                   // 56
			return this                                                                                                         // 57
		}                                                                                                                    // 58
		d.dispose = function () {                                                                                            // 59
			this.removeAllListeners()                                                                                           // 60
			return this                                                                                                         // 61
		}                                                                                                                    // 62
		d.enter = d.exit = function () {                                                                                     // 63
			return this                                                                                                         // 64
		}                                                                                                                    // 65
		return d                                                                                                             // 66
	}                                                                                                                     // 67
	return domain                                                                                                         // 68
}).call(this)                                                                                                          // 69
                                                                                                                       // 70
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]},"events":{"package.json":function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor-node-stubs/node_modules/events/package.json                                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.name = "events";                                                                                               // 1
exports.version = "1.1.1";                                                                                             // 2
exports.main = "./events.js";                                                                                          // 3
                                                                                                                       // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"events.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor-node-stubs/node_modules/events/events.js                                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// Copyright Joyent, Inc. and other Node contributors.                                                                 // 1
//                                                                                                                     // 2
// Permission is hereby granted, free of charge, to any person obtaining a                                             // 3
// copy of this software and associated documentation files (the                                                       // 4
// "Software"), to deal in the Software without restriction, including                                                 // 5
// without limitation the rights to use, copy, modify, merge, publish,                                                 // 6
// distribute, sublicense, and/or sell copies of the Software, and to permit                                           // 7
// persons to whom the Software is furnished to do so, subject to the                                                  // 8
// following conditions:                                                                                               // 9
//                                                                                                                     // 10
// The above copyright notice and this permission notice shall be included                                             // 11
// in all copies or substantial portions of the Software.                                                              // 12
//                                                                                                                     // 13
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS                                             // 14
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF                                                          // 15
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN                                           // 16
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,                                            // 17
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR                                               // 18
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE                                           // 19
// USE OR OTHER DEALINGS IN THE SOFTWARE.                                                                              // 20
                                                                                                                       // 21
function EventEmitter() {                                                                                              // 22
  this._events = this._events || {};                                                                                   // 23
  this._maxListeners = this._maxListeners || undefined;                                                                // 24
}                                                                                                                      // 25
module.exports = EventEmitter;                                                                                         // 26
                                                                                                                       // 27
// Backwards-compat with node 0.10.x                                                                                   // 28
EventEmitter.EventEmitter = EventEmitter;                                                                              // 29
                                                                                                                       // 30
EventEmitter.prototype._events = undefined;                                                                            // 31
EventEmitter.prototype._maxListeners = undefined;                                                                      // 32
                                                                                                                       // 33
// By default EventEmitters will print a warning if more than 10 listeners are                                         // 34
// added to it. This is a useful default which helps finding memory leaks.                                             // 35
EventEmitter.defaultMaxListeners = 10;                                                                                 // 36
                                                                                                                       // 37
// Obviously not all Emitters should be limited to 10. This function allows                                            // 38
// that to be increased. Set to zero for unlimited.                                                                    // 39
EventEmitter.prototype.setMaxListeners = function(n) {                                                                 // 40
  if (!isNumber(n) || n < 0 || isNaN(n))                                                                               // 41
    throw TypeError('n must be a positive number');                                                                    // 42
  this._maxListeners = n;                                                                                              // 43
  return this;                                                                                                         // 44
};                                                                                                                     // 45
                                                                                                                       // 46
EventEmitter.prototype.emit = function(type) {                                                                         // 47
  var er, handler, len, args, i, listeners;                                                                            // 48
                                                                                                                       // 49
  if (!this._events)                                                                                                   // 50
    this._events = {};                                                                                                 // 51
                                                                                                                       // 52
  // If there is no 'error' event listener then throw.                                                                 // 53
  if (type === 'error') {                                                                                              // 54
    if (!this._events.error ||                                                                                         // 55
        (isObject(this._events.error) && !this._events.error.length)) {                                                // 56
      er = arguments[1];                                                                                               // 57
      if (er instanceof Error) {                                                                                       // 58
        throw er; // Unhandled 'error' event                                                                           // 59
      } else {                                                                                                         // 60
        // At least give some kind of context to the user                                                              // 61
        var err = new Error('Uncaught, unspecified "error" event. (' + er + ')');                                      // 62
        err.context = er;                                                                                              // 63
        throw err;                                                                                                     // 64
      }                                                                                                                // 65
    }                                                                                                                  // 66
  }                                                                                                                    // 67
                                                                                                                       // 68
  handler = this._events[type];                                                                                        // 69
                                                                                                                       // 70
  if (isUndefined(handler))                                                                                            // 71
    return false;                                                                                                      // 72
                                                                                                                       // 73
  if (isFunction(handler)) {                                                                                           // 74
    switch (arguments.length) {                                                                                        // 75
      // fast cases                                                                                                    // 76
      case 1:                                                                                                          // 77
        handler.call(this);                                                                                            // 78
        break;                                                                                                         // 79
      case 2:                                                                                                          // 80
        handler.call(this, arguments[1]);                                                                              // 81
        break;                                                                                                         // 82
      case 3:                                                                                                          // 83
        handler.call(this, arguments[1], arguments[2]);                                                                // 84
        break;                                                                                                         // 85
      // slower                                                                                                        // 86
      default:                                                                                                         // 87
        args = Array.prototype.slice.call(arguments, 1);                                                               // 88
        handler.apply(this, args);                                                                                     // 89
    }                                                                                                                  // 90
  } else if (isObject(handler)) {                                                                                      // 91
    args = Array.prototype.slice.call(arguments, 1);                                                                   // 92
    listeners = handler.slice();                                                                                       // 93
    len = listeners.length;                                                                                            // 94
    for (i = 0; i < len; i++)                                                                                          // 95
      listeners[i].apply(this, args);                                                                                  // 96
  }                                                                                                                    // 97
                                                                                                                       // 98
  return true;                                                                                                         // 99
};                                                                                                                     // 100
                                                                                                                       // 101
EventEmitter.prototype.addListener = function(type, listener) {                                                        // 102
  var m;                                                                                                               // 103
                                                                                                                       // 104
  if (!isFunction(listener))                                                                                           // 105
    throw TypeError('listener must be a function');                                                                    // 106
                                                                                                                       // 107
  if (!this._events)                                                                                                   // 108
    this._events = {};                                                                                                 // 109
                                                                                                                       // 110
  // To avoid recursion in the case that type === "newListener"! Before                                                // 111
  // adding it to the listeners, first emit "newListener".                                                             // 112
  if (this._events.newListener)                                                                                        // 113
    this.emit('newListener', type,                                                                                     // 114
              isFunction(listener.listener) ?                                                                          // 115
              listener.listener : listener);                                                                           // 116
                                                                                                                       // 117
  if (!this._events[type])                                                                                             // 118
    // Optimize the case of one listener. Don't need the extra array object.                                           // 119
    this._events[type] = listener;                                                                                     // 120
  else if (isObject(this._events[type]))                                                                               // 121
    // If we've already got an array, just append.                                                                     // 122
    this._events[type].push(listener);                                                                                 // 123
  else                                                                                                                 // 124
    // Adding the second element, need to change to array.                                                             // 125
    this._events[type] = [this._events[type], listener];                                                               // 126
                                                                                                                       // 127
  // Check for listener leak                                                                                           // 128
  if (isObject(this._events[type]) && !this._events[type].warned) {                                                    // 129
    if (!isUndefined(this._maxListeners)) {                                                                            // 130
      m = this._maxListeners;                                                                                          // 131
    } else {                                                                                                           // 132
      m = EventEmitter.defaultMaxListeners;                                                                            // 133
    }                                                                                                                  // 134
                                                                                                                       // 135
    if (m && m > 0 && this._events[type].length > m) {                                                                 // 136
      this._events[type].warned = true;                                                                                // 137
      console.error('(node) warning: possible EventEmitter memory ' +                                                  // 138
                    'leak detected. %d listeners added. ' +                                                            // 139
                    'Use emitter.setMaxListeners() to increase limit.',                                                // 140
                    this._events[type].length);                                                                        // 141
      if (typeof console.trace === 'function') {                                                                       // 142
        // not supported in IE 10                                                                                      // 143
        console.trace();                                                                                               // 144
      }                                                                                                                // 145
    }                                                                                                                  // 146
  }                                                                                                                    // 147
                                                                                                                       // 148
  return this;                                                                                                         // 149
};                                                                                                                     // 150
                                                                                                                       // 151
EventEmitter.prototype.on = EventEmitter.prototype.addListener;                                                        // 152
                                                                                                                       // 153
EventEmitter.prototype.once = function(type, listener) {                                                               // 154
  if (!isFunction(listener))                                                                                           // 155
    throw TypeError('listener must be a function');                                                                    // 156
                                                                                                                       // 157
  var fired = false;                                                                                                   // 158
                                                                                                                       // 159
  function g() {                                                                                                       // 160
    this.removeListener(type, g);                                                                                      // 161
                                                                                                                       // 162
    if (!fired) {                                                                                                      // 163
      fired = true;                                                                                                    // 164
      listener.apply(this, arguments);                                                                                 // 165
    }                                                                                                                  // 166
  }                                                                                                                    // 167
                                                                                                                       // 168
  g.listener = listener;                                                                                               // 169
  this.on(type, g);                                                                                                    // 170
                                                                                                                       // 171
  return this;                                                                                                         // 172
};                                                                                                                     // 173
                                                                                                                       // 174
// emits a 'removeListener' event iff the listener was removed                                                         // 175
EventEmitter.prototype.removeListener = function(type, listener) {                                                     // 176
  var list, position, length, i;                                                                                       // 177
                                                                                                                       // 178
  if (!isFunction(listener))                                                                                           // 179
    throw TypeError('listener must be a function');                                                                    // 180
                                                                                                                       // 181
  if (!this._events || !this._events[type])                                                                            // 182
    return this;                                                                                                       // 183
                                                                                                                       // 184
  list = this._events[type];                                                                                           // 185
  length = list.length;                                                                                                // 186
  position = -1;                                                                                                       // 187
                                                                                                                       // 188
  if (list === listener ||                                                                                             // 189
      (isFunction(list.listener) && list.listener === listener)) {                                                     // 190
    delete this._events[type];                                                                                         // 191
    if (this._events.removeListener)                                                                                   // 192
      this.emit('removeListener', type, listener);                                                                     // 193
                                                                                                                       // 194
  } else if (isObject(list)) {                                                                                         // 195
    for (i = length; i-- > 0;) {                                                                                       // 196
      if (list[i] === listener ||                                                                                      // 197
          (list[i].listener && list[i].listener === listener)) {                                                       // 198
        position = i;                                                                                                  // 199
        break;                                                                                                         // 200
      }                                                                                                                // 201
    }                                                                                                                  // 202
                                                                                                                       // 203
    if (position < 0)                                                                                                  // 204
      return this;                                                                                                     // 205
                                                                                                                       // 206
    if (list.length === 1) {                                                                                           // 207
      list.length = 0;                                                                                                 // 208
      delete this._events[type];                                                                                       // 209
    } else {                                                                                                           // 210
      list.splice(position, 1);                                                                                        // 211
    }                                                                                                                  // 212
                                                                                                                       // 213
    if (this._events.removeListener)                                                                                   // 214
      this.emit('removeListener', type, listener);                                                                     // 215
  }                                                                                                                    // 216
                                                                                                                       // 217
  return this;                                                                                                         // 218
};                                                                                                                     // 219
                                                                                                                       // 220
EventEmitter.prototype.removeAllListeners = function(type) {                                                           // 221
  var key, listeners;                                                                                                  // 222
                                                                                                                       // 223
  if (!this._events)                                                                                                   // 224
    return this;                                                                                                       // 225
                                                                                                                       // 226
  // not listening for removeListener, no need to emit                                                                 // 227
  if (!this._events.removeListener) {                                                                                  // 228
    if (arguments.length === 0)                                                                                        // 229
      this._events = {};                                                                                               // 230
    else if (this._events[type])                                                                                       // 231
      delete this._events[type];                                                                                       // 232
    return this;                                                                                                       // 233
  }                                                                                                                    // 234
                                                                                                                       // 235
  // emit removeListener for all listeners on all events                                                               // 236
  if (arguments.length === 0) {                                                                                        // 237
    for (key in this._events) {                                                                                        // 238
      if (key === 'removeListener') continue;                                                                          // 239
      this.removeAllListeners(key);                                                                                    // 240
    }                                                                                                                  // 241
    this.removeAllListeners('removeListener');                                                                         // 242
    this._events = {};                                                                                                 // 243
    return this;                                                                                                       // 244
  }                                                                                                                    // 245
                                                                                                                       // 246
  listeners = this._events[type];                                                                                      // 247
                                                                                                                       // 248
  if (isFunction(listeners)) {                                                                                         // 249
    this.removeListener(type, listeners);                                                                              // 250
  } else if (listeners) {                                                                                              // 251
    // LIFO order                                                                                                      // 252
    while (listeners.length)                                                                                           // 253
      this.removeListener(type, listeners[listeners.length - 1]);                                                      // 254
  }                                                                                                                    // 255
  delete this._events[type];                                                                                           // 256
                                                                                                                       // 257
  return this;                                                                                                         // 258
};                                                                                                                     // 259
                                                                                                                       // 260
EventEmitter.prototype.listeners = function(type) {                                                                    // 261
  var ret;                                                                                                             // 262
  if (!this._events || !this._events[type])                                                                            // 263
    ret = [];                                                                                                          // 264
  else if (isFunction(this._events[type]))                                                                             // 265
    ret = [this._events[type]];                                                                                        // 266
  else                                                                                                                 // 267
    ret = this._events[type].slice();                                                                                  // 268
  return ret;                                                                                                          // 269
};                                                                                                                     // 270
                                                                                                                       // 271
EventEmitter.prototype.listenerCount = function(type) {                                                                // 272
  if (this._events) {                                                                                                  // 273
    var evlistener = this._events[type];                                                                               // 274
                                                                                                                       // 275
    if (isFunction(evlistener))                                                                                        // 276
      return 1;                                                                                                        // 277
    else if (evlistener)                                                                                               // 278
      return evlistener.length;                                                                                        // 279
  }                                                                                                                    // 280
  return 0;                                                                                                            // 281
};                                                                                                                     // 282
                                                                                                                       // 283
EventEmitter.listenerCount = function(emitter, type) {                                                                 // 284
  return emitter.listenerCount(type);                                                                                  // 285
};                                                                                                                     // 286
                                                                                                                       // 287
function isFunction(arg) {                                                                                             // 288
  return typeof arg === 'function';                                                                                    // 289
}                                                                                                                      // 290
                                                                                                                       // 291
function isNumber(arg) {                                                                                               // 292
  return typeof arg === 'number';                                                                                      // 293
}                                                                                                                      // 294
                                                                                                                       // 295
function isObject(arg) {                                                                                               // 296
  return typeof arg === 'object' && arg !== null;                                                                      // 297
}                                                                                                                      // 298
                                                                                                                       // 299
function isUndefined(arg) {                                                                                            // 300
  return arg === void 0;                                                                                               // 301
}                                                                                                                      // 302
                                                                                                                       // 303
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}}}},"babel-runtime":{"regenerator":{"index.js":["regenerator-runtime",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/babel-runtime/regenerator/index.js                                                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = require("regenerator-runtime");                                                                       // 1
                                                                                                                       // 2
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]},"helpers":{"typeof.js":["../core-js/symbol/iterator","../core-js/symbol",function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/babel-runtime/helpers/typeof.js                                                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
"use strict";                                                                                                          // 1
                                                                                                                       // 2
exports.__esModule = true;                                                                                             // 3
                                                                                                                       // 4
var _iterator = require("../core-js/symbol/iterator");                                                                 // 5
                                                                                                                       // 6
var _iterator2 = _interopRequireDefault(_iterator);                                                                    // 7
                                                                                                                       // 8
var _symbol = require("../core-js/symbol");                                                                            // 9
                                                                                                                       // 10
var _symbol2 = _interopRequireDefault(_symbol);                                                                        // 11
                                                                                                                       // 12
var _typeof = typeof _symbol2.default === "function" && typeof _iterator2.default === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === "function" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? "symbol" : typeof obj; };
                                                                                                                       // 14
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }                        // 15
                                                                                                                       // 16
exports.default = typeof _symbol2.default === "function" && _typeof(_iterator2.default) === "symbol" ? function (obj) {
  return typeof obj === "undefined" ? "undefined" : _typeof(obj);                                                      // 18
} : function (obj) {                                                                                                   // 19
  return obj && typeof _symbol2.default === "function" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof(obj);
};                                                                                                                     // 21
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"classCallCheck.js":function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/babel-runtime/helpers/classCallCheck.js                                                                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
"use strict";                                                                                                          // 1
                                                                                                                       // 2
exports.__esModule = true;                                                                                             // 3
                                                                                                                       // 4
exports.default = function (instance, Constructor) {                                                                   // 5
  if (!(instance instanceof Constructor)) {                                                                            // 6
    throw new TypeError("Cannot call a class as a function");                                                          // 7
  }                                                                                                                    // 8
};                                                                                                                     // 9
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"possibleConstructorReturn.js":["../helpers/typeof",function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/babel-runtime/helpers/possibleConstructorReturn.js                                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
"use strict";                                                                                                          // 1
                                                                                                                       // 2
exports.__esModule = true;                                                                                             // 3
                                                                                                                       // 4
var _typeof2 = require("../helpers/typeof");                                                                           // 5
                                                                                                                       // 6
var _typeof3 = _interopRequireDefault(_typeof2);                                                                       // 7
                                                                                                                       // 8
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }                        // 9
                                                                                                                       // 10
exports.default = function (self, call) {                                                                              // 11
  if (!self) {                                                                                                         // 12
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");                             // 13
  }                                                                                                                    // 14
                                                                                                                       // 15
  return call && ((typeof call === "undefined" ? "undefined" : (0, _typeof3.default)(call)) === "object" || typeof call === "function") ? call : self;
};                                                                                                                     // 17
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"inherits.js":["../core-js/object/set-prototype-of","../core-js/object/create","../helpers/typeof",function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/babel-runtime/helpers/inherits.js                                                                      //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
"use strict";                                                                                                          // 1
                                                                                                                       // 2
exports.__esModule = true;                                                                                             // 3
                                                                                                                       // 4
var _setPrototypeOf = require("../core-js/object/set-prototype-of");                                                   // 5
                                                                                                                       // 6
var _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);                                                        // 7
                                                                                                                       // 8
var _create = require("../core-js/object/create");                                                                     // 9
                                                                                                                       // 10
var _create2 = _interopRequireDefault(_create);                                                                        // 11
                                                                                                                       // 12
var _typeof2 = require("../helpers/typeof");                                                                           // 13
                                                                                                                       // 14
var _typeof3 = _interopRequireDefault(_typeof2);                                                                       // 15
                                                                                                                       // 16
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }                        // 17
                                                                                                                       // 18
exports.default = function (subClass, superClass) {                                                                    // 19
  if (typeof superClass !== "function" && superClass !== null) {                                                       // 20
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : (0, _typeof3.default)(superClass)));
  }                                                                                                                    // 22
                                                                                                                       // 23
  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {                                     // 24
    constructor: {                                                                                                     // 25
      value: subClass,                                                                                                 // 26
      enumerable: false,                                                                                               // 27
      writable: true,                                                                                                  // 28
      configurable: true                                                                                               // 29
    }                                                                                                                  // 30
  });                                                                                                                  // 31
  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;
};                                                                                                                     // 33
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]},"core-js":{"symbol":{"iterator.js":["core-js/library/fn/symbol/iterator",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/babel-runtime/core-js/symbol/iterator.js                                                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = { "default": require("core-js/library/fn/symbol/iterator"), __esModule: true };                       // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]},"symbol.js":["core-js/library/fn/symbol",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/babel-runtime/core-js/symbol.js                                                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = { "default": require("core-js/library/fn/symbol"), __esModule: true };                                // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"object":{"set-prototype-of.js":["core-js/library/fn/object/set-prototype-of",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/babel-runtime/core-js/object/set-prototype-of.js                                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = { "default": require("core-js/library/fn/object/set-prototype-of"), __esModule: true };               // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"create.js":["core-js/library/fn/object/create",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/babel-runtime/core-js/object/create.js                                                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = { "default": require("core-js/library/fn/object/create"), __esModule: true };                         // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]}}},"regenerator-runtime":{"package.json":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/regenerator-runtime/package.json                                                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.name = "regenerator-runtime";                                                                                  // 1
exports.version = "0.10.5";                                                                                            // 2
exports.main = "runtime-module.js";                                                                                    // 3
                                                                                                                       // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"runtime-module.js":["./runtime",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/regenerator-runtime/runtime-module.js                                                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// This method of obtaining a reference to the global object needs to be                                               // 1
// kept identical to the way it is obtained in runtime.js                                                              // 2
var g =                                                                                                                // 3
  typeof global === "object" ? global :                                                                                // 4
  typeof window === "object" ? window :                                                                                // 5
  typeof self === "object" ? self : this;                                                                              // 6
                                                                                                                       // 7
// Use `getOwnPropertyNames` because not all browsers support calling                                                  // 8
// `hasOwnProperty` on the global `self` object in a worker. See #183.                                                 // 9
var hadRuntime = g.regeneratorRuntime &&                                                                               // 10
  Object.getOwnPropertyNames(g).indexOf("regeneratorRuntime") >= 0;                                                    // 11
                                                                                                                       // 12
// Save the old regeneratorRuntime in case it needs to be restored later.                                              // 13
var oldRuntime = hadRuntime && g.regeneratorRuntime;                                                                   // 14
                                                                                                                       // 15
// Force reevalutation of runtime.js.                                                                                  // 16
g.regeneratorRuntime = undefined;                                                                                      // 17
                                                                                                                       // 18
module.exports = require("./runtime");                                                                                 // 19
                                                                                                                       // 20
if (hadRuntime) {                                                                                                      // 21
  // Restore the original runtime.                                                                                     // 22
  g.regeneratorRuntime = oldRuntime;                                                                                   // 23
} else {                                                                                                               // 24
  // Remove the global property added by runtime.js.                                                                   // 25
  try {                                                                                                                // 26
    delete g.regeneratorRuntime;                                                                                       // 27
  } catch(e) {                                                                                                         // 28
    g.regeneratorRuntime = undefined;                                                                                  // 29
  }                                                                                                                    // 30
}                                                                                                                      // 31
                                                                                                                       // 32
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"runtime.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/regenerator-runtime/runtime.js                                                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
/**                                                                                                                    // 1
 * Copyright (c) 2014, Facebook, Inc.                                                                                  // 2
 * All rights reserved.                                                                                                // 3
 *                                                                                                                     // 4
 * This source code is licensed under the BSD-style license found in the                                               // 5
 * https://raw.github.com/facebook/regenerator/master/LICENSE file. An                                                 // 6
 * additional grant of patent rights can be found in the PATENTS file in                                               // 7
 * the same directory.                                                                                                 // 8
 */                                                                                                                    // 9
                                                                                                                       // 10
!(function(global) {                                                                                                   // 11
  "use strict";                                                                                                        // 12
                                                                                                                       // 13
  var Op = Object.prototype;                                                                                           // 14
  var hasOwn = Op.hasOwnProperty;                                                                                      // 15
  var undefined; // More compressible than void 0.                                                                     // 16
  var $Symbol = typeof Symbol === "function" ? Symbol : {};                                                            // 17
  var iteratorSymbol = $Symbol.iterator || "@@iterator";                                                               // 18
  var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";                                                // 19
  var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";                                                      // 20
                                                                                                                       // 21
  var inModule = typeof module === "object";                                                                           // 22
  var runtime = global.regeneratorRuntime;                                                                             // 23
  if (runtime) {                                                                                                       // 24
    if (inModule) {                                                                                                    // 25
      // If regeneratorRuntime is defined globally and we're in a module,                                              // 26
      // make the exports object identical to regeneratorRuntime.                                                      // 27
      module.exports = runtime;                                                                                        // 28
    }                                                                                                                  // 29
    // Don't bother evaluating the rest of this file if the runtime was                                                // 30
    // already defined globally.                                                                                       // 31
    return;                                                                                                            // 32
  }                                                                                                                    // 33
                                                                                                                       // 34
  // Define the runtime globally (as expected by generated code) as either                                             // 35
  // module.exports (if we're in a module) or a new, empty object.                                                     // 36
  runtime = global.regeneratorRuntime = inModule ? module.exports : {};                                                // 37
                                                                                                                       // 38
  function wrap(innerFn, outerFn, self, tryLocsList) {                                                                 // 39
    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.          // 40
    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;                      // 41
    var generator = Object.create(protoGenerator.prototype);                                                           // 42
    var context = new Context(tryLocsList || []);                                                                      // 43
                                                                                                                       // 44
    // The ._invoke method unifies the implementations of the .next,                                                   // 45
    // .throw, and .return methods.                                                                                    // 46
    generator._invoke = makeInvokeMethod(innerFn, self, context);                                                      // 47
                                                                                                                       // 48
    return generator;                                                                                                  // 49
  }                                                                                                                    // 50
  runtime.wrap = wrap;                                                                                                 // 51
                                                                                                                       // 52
  // Try/catch helper to minimize deoptimizations. Returns a completion                                                // 53
  // record like context.tryEntries[i].completion. This interface could                                                // 54
  // have been (and was previously) designed to take a closure to be                                                   // 55
  // invoked without arguments, but in all the cases we care about we                                                  // 56
  // already have an existing method we want to call, so there's no need                                               // 57
  // to create a new function object. We can even get away with assuming                                               // 58
  // the method takes exactly one argument, since that happens to be true                                              // 59
  // in every case, so we don't have to touch the arguments object. The                                                // 60
  // only additional allocation required is the completion record, which                                               // 61
  // has a stable shape and so hopefully should be cheap to allocate.                                                  // 62
  function tryCatch(fn, obj, arg) {                                                                                    // 63
    try {                                                                                                              // 64
      return { type: "normal", arg: fn.call(obj, arg) };                                                               // 65
    } catch (err) {                                                                                                    // 66
      return { type: "throw", arg: err };                                                                              // 67
    }                                                                                                                  // 68
  }                                                                                                                    // 69
                                                                                                                       // 70
  var GenStateSuspendedStart = "suspendedStart";                                                                       // 71
  var GenStateSuspendedYield = "suspendedYield";                                                                       // 72
  var GenStateExecuting = "executing";                                                                                 // 73
  var GenStateCompleted = "completed";                                                                                 // 74
                                                                                                                       // 75
  // Returning this object from the innerFn has the same effect as                                                     // 76
  // breaking out of the dispatch switch statement.                                                                    // 77
  var ContinueSentinel = {};                                                                                           // 78
                                                                                                                       // 79
  // Dummy constructor functions that we use as the .constructor and                                                   // 80
  // .constructor.prototype properties for functions that return Generator                                             // 81
  // objects. For full spec compliance, you may wish to configure your                                                 // 82
  // minifier not to mangle the names of these two functions.                                                          // 83
  function Generator() {}                                                                                              // 84
  function GeneratorFunction() {}                                                                                      // 85
  function GeneratorFunctionPrototype() {}                                                                             // 86
                                                                                                                       // 87
  // This is a polyfill for %IteratorPrototype% for environments that                                                  // 88
  // don't natively support it.                                                                                        // 89
  var IteratorPrototype = {};                                                                                          // 90
  IteratorPrototype[iteratorSymbol] = function () {                                                                    // 91
    return this;                                                                                                       // 92
  };                                                                                                                   // 93
                                                                                                                       // 94
  var getProto = Object.getPrototypeOf;                                                                                // 95
  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));                                            // 96
  if (NativeIteratorPrototype &&                                                                                       // 97
      NativeIteratorPrototype !== Op &&                                                                                // 98
      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {                                                          // 99
    // This environment has a native %IteratorPrototype%; use it instead                                               // 100
    // of the polyfill.                                                                                                // 101
    IteratorPrototype = NativeIteratorPrototype;                                                                       // 102
  }                                                                                                                    // 103
                                                                                                                       // 104
  var Gp = GeneratorFunctionPrototype.prototype =                                                                      // 105
    Generator.prototype = Object.create(IteratorPrototype);                                                            // 106
  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;                                           // 107
  GeneratorFunctionPrototype.constructor = GeneratorFunction;                                                          // 108
  GeneratorFunctionPrototype[toStringTagSymbol] =                                                                      // 109
    GeneratorFunction.displayName = "GeneratorFunction";                                                               // 110
                                                                                                                       // 111
  // Helper for defining the .next, .throw, and .return methods of the                                                 // 112
  // Iterator interface in terms of a single ._invoke method.                                                          // 113
  function defineIteratorMethods(prototype) {                                                                          // 114
    ["next", "throw", "return"].forEach(function(method) {                                                             // 115
      prototype[method] = function(arg) {                                                                              // 116
        return this._invoke(method, arg);                                                                              // 117
      };                                                                                                               // 118
    });                                                                                                                // 119
  }                                                                                                                    // 120
                                                                                                                       // 121
  runtime.isGeneratorFunction = function(genFun) {                                                                     // 122
    var ctor = typeof genFun === "function" && genFun.constructor;                                                     // 123
    return ctor                                                                                                        // 124
      ? ctor === GeneratorFunction ||                                                                                  // 125
        // For the native GeneratorFunction constructor, the best we can                                               // 126
        // do is to check its .name property.                                                                          // 127
        (ctor.displayName || ctor.name) === "GeneratorFunction"                                                        // 128
      : false;                                                                                                         // 129
  };                                                                                                                   // 130
                                                                                                                       // 131
  runtime.mark = function(genFun) {                                                                                    // 132
    if (Object.setPrototypeOf) {                                                                                       // 133
      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);                                                       // 134
    } else {                                                                                                           // 135
      genFun.__proto__ = GeneratorFunctionPrototype;                                                                   // 136
      if (!(toStringTagSymbol in genFun)) {                                                                            // 137
        genFun[toStringTagSymbol] = "GeneratorFunction";                                                               // 138
      }                                                                                                                // 139
    }                                                                                                                  // 140
    genFun.prototype = Object.create(Gp);                                                                              // 141
    return genFun;                                                                                                     // 142
  };                                                                                                                   // 143
                                                                                                                       // 144
  // Within the body of any async function, `await x` is transformed to                                                // 145
  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test                                                 // 146
  // `hasOwn.call(value, "__await")` to determine if the yielded value is                                              // 147
  // meant to be awaited.                                                                                              // 148
  runtime.awrap = function(arg) {                                                                                      // 149
    return { __await: arg };                                                                                           // 150
  };                                                                                                                   // 151
                                                                                                                       // 152
  function AsyncIterator(generator) {                                                                                  // 153
    function invoke(method, arg, resolve, reject) {                                                                    // 154
      var record = tryCatch(generator[method], generator, arg);                                                        // 155
      if (record.type === "throw") {                                                                                   // 156
        reject(record.arg);                                                                                            // 157
      } else {                                                                                                         // 158
        var result = record.arg;                                                                                       // 159
        var value = result.value;                                                                                      // 160
        if (value &&                                                                                                   // 161
            typeof value === "object" &&                                                                               // 162
            hasOwn.call(value, "__await")) {                                                                           // 163
          return Promise.resolve(value.__await).then(function(value) {                                                 // 164
            invoke("next", value, resolve, reject);                                                                    // 165
          }, function(err) {                                                                                           // 166
            invoke("throw", err, resolve, reject);                                                                     // 167
          });                                                                                                          // 168
        }                                                                                                              // 169
                                                                                                                       // 170
        return Promise.resolve(value).then(function(unwrapped) {                                                       // 171
          // When a yielded Promise is resolved, its final value becomes                                               // 172
          // the .value of the Promise<{value,done}> result for the                                                    // 173
          // current iteration. If the Promise is rejected, however, the                                               // 174
          // result for this iteration will be rejected with the same                                                  // 175
          // reason. Note that rejections of yielded Promises are not                                                  // 176
          // thrown back into the generator function, as is the case                                                   // 177
          // when an awaited Promise is rejected. This difference in                                                   // 178
          // behavior between yield and await is important, because it                                                 // 179
          // allows the consumer to decide what to do with the yielded                                                 // 180
          // rejection (swallow it and continue, manually .throw it back                                               // 181
          // into the generator, abandon iteration, whatever). With                                                    // 182
          // await, by contrast, there is no opportunity to examine the                                                // 183
          // rejection reason outside the generator function, so the                                                   // 184
          // only option is to throw it from the await expression, and                                                 // 185
          // let the generator function handle the exception.                                                          // 186
          result.value = unwrapped;                                                                                    // 187
          resolve(result);                                                                                             // 188
        }, reject);                                                                                                    // 189
      }                                                                                                                // 190
    }                                                                                                                  // 191
                                                                                                                       // 192
    if (typeof global.process === "object" && global.process.domain) {                                                 // 193
      invoke = global.process.domain.bind(invoke);                                                                     // 194
    }                                                                                                                  // 195
                                                                                                                       // 196
    var previousPromise;                                                                                               // 197
                                                                                                                       // 198
    function enqueue(method, arg) {                                                                                    // 199
      function callInvokeWithMethodAndArg() {                                                                          // 200
        return new Promise(function(resolve, reject) {                                                                 // 201
          invoke(method, arg, resolve, reject);                                                                        // 202
        });                                                                                                            // 203
      }                                                                                                                // 204
                                                                                                                       // 205
      return previousPromise =                                                                                         // 206
        // If enqueue has been called before, then we want to wait until                                               // 207
        // all previous Promises have been resolved before calling invoke,                                             // 208
        // so that results are always delivered in the correct order. If                                               // 209
        // enqueue has not been called before, then it is important to                                                 // 210
        // call invoke immediately, without waiting on a callback to fire,                                             // 211
        // so that the async generator function has the opportunity to do                                              // 212
        // any necessary setup in a predictable way. This predictability                                               // 213
        // is why the Promise constructor synchronously invokes its                                                    // 214
        // executor callback, and why async functions synchronously                                                    // 215
        // execute code before the first await. Since we implement simple                                              // 216
        // async functions in terms of async generators, it is especially                                              // 217
        // important to get this right, even though it requires care.                                                  // 218
        previousPromise ? previousPromise.then(                                                                        // 219
          callInvokeWithMethodAndArg,                                                                                  // 220
          // Avoid propagating failures to Promises returned by later                                                  // 221
          // invocations of the iterator.                                                                              // 222
          callInvokeWithMethodAndArg                                                                                   // 223
        ) : callInvokeWithMethodAndArg();                                                                              // 224
    }                                                                                                                  // 225
                                                                                                                       // 226
    // Define the unified helper method that is used to implement .next,                                               // 227
    // .throw, and .return (see defineIteratorMethods).                                                                // 228
    this._invoke = enqueue;                                                                                            // 229
  }                                                                                                                    // 230
                                                                                                                       // 231
  defineIteratorMethods(AsyncIterator.prototype);                                                                      // 232
  AsyncIterator.prototype[asyncIteratorSymbol] = function () {                                                         // 233
    return this;                                                                                                       // 234
  };                                                                                                                   // 235
  runtime.AsyncIterator = AsyncIterator;                                                                               // 236
                                                                                                                       // 237
  // Note that simple async functions are implemented on top of                                                        // 238
  // AsyncIterator objects; they just return a Promise for the value of                                                // 239
  // the final result produced by the iterator.                                                                        // 240
  runtime.async = function(innerFn, outerFn, self, tryLocsList) {                                                      // 241
    var iter = new AsyncIterator(                                                                                      // 242
      wrap(innerFn, outerFn, self, tryLocsList)                                                                        // 243
    );                                                                                                                 // 244
                                                                                                                       // 245
    return runtime.isGeneratorFunction(outerFn)                                                                        // 246
      ? iter // If outerFn is a generator, return the full iterator.                                                   // 247
      : iter.next().then(function(result) {                                                                            // 248
          return result.done ? result.value : iter.next();                                                             // 249
        });                                                                                                            // 250
  };                                                                                                                   // 251
                                                                                                                       // 252
  function makeInvokeMethod(innerFn, self, context) {                                                                  // 253
    var state = GenStateSuspendedStart;                                                                                // 254
                                                                                                                       // 255
    return function invoke(method, arg) {                                                                              // 256
      if (state === GenStateExecuting) {                                                                               // 257
        throw new Error("Generator is already running");                                                               // 258
      }                                                                                                                // 259
                                                                                                                       // 260
      if (state === GenStateCompleted) {                                                                               // 261
        if (method === "throw") {                                                                                      // 262
          throw arg;                                                                                                   // 263
        }                                                                                                              // 264
                                                                                                                       // 265
        // Be forgiving, per 25.3.3.3.3 of the spec:                                                                   // 266
        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume                                   // 267
        return doneResult();                                                                                           // 268
      }                                                                                                                // 269
                                                                                                                       // 270
      context.method = method;                                                                                         // 271
      context.arg = arg;                                                                                               // 272
                                                                                                                       // 273
      while (true) {                                                                                                   // 274
        var delegate = context.delegate;                                                                               // 275
        if (delegate) {                                                                                                // 276
          var delegateResult = maybeInvokeDelegate(delegate, context);                                                 // 277
          if (delegateResult) {                                                                                        // 278
            if (delegateResult === ContinueSentinel) continue;                                                         // 279
            return delegateResult;                                                                                     // 280
          }                                                                                                            // 281
        }                                                                                                              // 282
                                                                                                                       // 283
        if (context.method === "next") {                                                                               // 284
          // Setting context._sent for legacy support of Babel's                                                       // 285
          // function.sent implementation.                                                                             // 286
          context.sent = context._sent = context.arg;                                                                  // 287
                                                                                                                       // 288
        } else if (context.method === "throw") {                                                                       // 289
          if (state === GenStateSuspendedStart) {                                                                      // 290
            state = GenStateCompleted;                                                                                 // 291
            throw context.arg;                                                                                         // 292
          }                                                                                                            // 293
                                                                                                                       // 294
          context.dispatchException(context.arg);                                                                      // 295
                                                                                                                       // 296
        } else if (context.method === "return") {                                                                      // 297
          context.abrupt("return", context.arg);                                                                       // 298
        }                                                                                                              // 299
                                                                                                                       // 300
        state = GenStateExecuting;                                                                                     // 301
                                                                                                                       // 302
        var record = tryCatch(innerFn, self, context);                                                                 // 303
        if (record.type === "normal") {                                                                                // 304
          // If an exception is thrown from innerFn, we leave state ===                                                // 305
          // GenStateExecuting and loop back for another invocation.                                                   // 306
          state = context.done                                                                                         // 307
            ? GenStateCompleted                                                                                        // 308
            : GenStateSuspendedYield;                                                                                  // 309
                                                                                                                       // 310
          if (record.arg === ContinueSentinel) {                                                                       // 311
            continue;                                                                                                  // 312
          }                                                                                                            // 313
                                                                                                                       // 314
          return {                                                                                                     // 315
            value: record.arg,                                                                                         // 316
            done: context.done                                                                                         // 317
          };                                                                                                           // 318
                                                                                                                       // 319
        } else if (record.type === "throw") {                                                                          // 320
          state = GenStateCompleted;                                                                                   // 321
          // Dispatch the exception by looping back around to the                                                      // 322
          // context.dispatchException(context.arg) call above.                                                        // 323
          context.method = "throw";                                                                                    // 324
          context.arg = record.arg;                                                                                    // 325
        }                                                                                                              // 326
      }                                                                                                                // 327
    };                                                                                                                 // 328
  }                                                                                                                    // 329
                                                                                                                       // 330
  // Call delegate.iterator[context.method](context.arg) and handle the                                                // 331
  // result, either by returning a { value, done } result from the                                                     // 332
  // delegate iterator, or by modifying context.method and context.arg,                                                // 333
  // setting context.delegate to null, and returning the ContinueSentinel.                                             // 334
  function maybeInvokeDelegate(delegate, context) {                                                                    // 335
    var method = delegate.iterator[context.method];                                                                    // 336
    if (method === undefined) {                                                                                        // 337
      // A .throw or .return when the delegate iterator has no .throw                                                  // 338
      // method always terminates the yield* loop.                                                                     // 339
      context.delegate = null;                                                                                         // 340
                                                                                                                       // 341
      if (context.method === "throw") {                                                                                // 342
        if (delegate.iterator.return) {                                                                                // 343
          // If the delegate iterator has a return method, give it a                                                   // 344
          // chance to clean up.                                                                                       // 345
          context.method = "return";                                                                                   // 346
          context.arg = undefined;                                                                                     // 347
          maybeInvokeDelegate(delegate, context);                                                                      // 348
                                                                                                                       // 349
          if (context.method === "throw") {                                                                            // 350
            // If maybeInvokeDelegate(context) changed context.method from                                             // 351
            // "return" to "throw", let that override the TypeError below.                                             // 352
            return ContinueSentinel;                                                                                   // 353
          }                                                                                                            // 354
        }                                                                                                              // 355
                                                                                                                       // 356
        context.method = "throw";                                                                                      // 357
        context.arg = new TypeError(                                                                                   // 358
          "The iterator does not provide a 'throw' method");                                                           // 359
      }                                                                                                                // 360
                                                                                                                       // 361
      return ContinueSentinel;                                                                                         // 362
    }                                                                                                                  // 363
                                                                                                                       // 364
    var record = tryCatch(method, delegate.iterator, context.arg);                                                     // 365
                                                                                                                       // 366
    if (record.type === "throw") {                                                                                     // 367
      context.method = "throw";                                                                                        // 368
      context.arg = record.arg;                                                                                        // 369
      context.delegate = null;                                                                                         // 370
      return ContinueSentinel;                                                                                         // 371
    }                                                                                                                  // 372
                                                                                                                       // 373
    var info = record.arg;                                                                                             // 374
                                                                                                                       // 375
    if (! info) {                                                                                                      // 376
      context.method = "throw";                                                                                        // 377
      context.arg = new TypeError("iterator result is not an object");                                                 // 378
      context.delegate = null;                                                                                         // 379
      return ContinueSentinel;                                                                                         // 380
    }                                                                                                                  // 381
                                                                                                                       // 382
    if (info.done) {                                                                                                   // 383
      // Assign the result of the finished delegate to the temporary                                                   // 384
      // variable specified by delegate.resultName (see delegateYield).                                                // 385
      context[delegate.resultName] = info.value;                                                                       // 386
                                                                                                                       // 387
      // Resume execution at the desired location (see delegateYield).                                                 // 388
      context.next = delegate.nextLoc;                                                                                 // 389
                                                                                                                       // 390
      // If context.method was "throw" but the delegate handled the                                                    // 391
      // exception, let the outer generator proceed normally. If                                                       // 392
      // context.method was "next", forget context.arg since it has been                                               // 393
      // "consumed" by the delegate iterator. If context.method was                                                    // 394
      // "return", allow the original .return call to continue in the                                                  // 395
      // outer generator.                                                                                              // 396
      if (context.method !== "return") {                                                                               // 397
        context.method = "next";                                                                                       // 398
        context.arg = undefined;                                                                                       // 399
      }                                                                                                                // 400
                                                                                                                       // 401
    } else {                                                                                                           // 402
      // Re-yield the result returned by the delegate method.                                                          // 403
      return info;                                                                                                     // 404
    }                                                                                                                  // 405
                                                                                                                       // 406
    // The delegate iterator is finished, so forget it and continue with                                               // 407
    // the outer generator.                                                                                            // 408
    context.delegate = null;                                                                                           // 409
    return ContinueSentinel;                                                                                           // 410
  }                                                                                                                    // 411
                                                                                                                       // 412
  // Define Generator.prototype.{next,throw,return} in terms of the                                                    // 413
  // unified ._invoke helper method.                                                                                   // 414
  defineIteratorMethods(Gp);                                                                                           // 415
                                                                                                                       // 416
  Gp[toStringTagSymbol] = "Generator";                                                                                 // 417
                                                                                                                       // 418
  // A Generator should always return itself as the iterator object when the                                           // 419
  // @@iterator function is called on it. Some browsers' implementations of the                                        // 420
  // iterator prototype chain incorrectly implement this, causing the Generator                                        // 421
  // object to not be returned from this call. This ensures that doesn't happen.                                       // 422
  // See https://github.com/facebook/regenerator/issues/274 for more details.                                          // 423
  Gp[iteratorSymbol] = function() {                                                                                    // 424
    return this;                                                                                                       // 425
  };                                                                                                                   // 426
                                                                                                                       // 427
  Gp.toString = function() {                                                                                           // 428
    return "[object Generator]";                                                                                       // 429
  };                                                                                                                   // 430
                                                                                                                       // 431
  function pushTryEntry(locs) {                                                                                        // 432
    var entry = { tryLoc: locs[0] };                                                                                   // 433
                                                                                                                       // 434
    if (1 in locs) {                                                                                                   // 435
      entry.catchLoc = locs[1];                                                                                        // 436
    }                                                                                                                  // 437
                                                                                                                       // 438
    if (2 in locs) {                                                                                                   // 439
      entry.finallyLoc = locs[2];                                                                                      // 440
      entry.afterLoc = locs[3];                                                                                        // 441
    }                                                                                                                  // 442
                                                                                                                       // 443
    this.tryEntries.push(entry);                                                                                       // 444
  }                                                                                                                    // 445
                                                                                                                       // 446
  function resetTryEntry(entry) {                                                                                      // 447
    var record = entry.completion || {};                                                                               // 448
    record.type = "normal";                                                                                            // 449
    delete record.arg;                                                                                                 // 450
    entry.completion = record;                                                                                         // 451
  }                                                                                                                    // 452
                                                                                                                       // 453
  function Context(tryLocsList) {                                                                                      // 454
    // The root entry object (effectively a try statement without a catch                                              // 455
    // or a finally block) gives us a place to store values thrown from                                                // 456
    // locations where there is no enclosing try statement.                                                            // 457
    this.tryEntries = [{ tryLoc: "root" }];                                                                            // 458
    tryLocsList.forEach(pushTryEntry, this);                                                                           // 459
    this.reset(true);                                                                                                  // 460
  }                                                                                                                    // 461
                                                                                                                       // 462
  runtime.keys = function(object) {                                                                                    // 463
    var keys = [];                                                                                                     // 464
    for (var key in object) {                                                                                          // 465
      keys.push(key);                                                                                                  // 466
    }                                                                                                                  // 467
    keys.reverse();                                                                                                    // 468
                                                                                                                       // 469
    // Rather than returning an object with a next method, we keep                                                     // 470
    // things simple and return the next function itself.                                                              // 471
    return function next() {                                                                                           // 472
      while (keys.length) {                                                                                            // 473
        var key = keys.pop();                                                                                          // 474
        if (key in object) {                                                                                           // 475
          next.value = key;                                                                                            // 476
          next.done = false;                                                                                           // 477
          return next;                                                                                                 // 478
        }                                                                                                              // 479
      }                                                                                                                // 480
                                                                                                                       // 481
      // To avoid creating an additional object, we just hang the .value                                               // 482
      // and .done properties off the next function object itself. This                                                // 483
      // also ensures that the minifier will not anonymize the function.                                               // 484
      next.done = true;                                                                                                // 485
      return next;                                                                                                     // 486
    };                                                                                                                 // 487
  };                                                                                                                   // 488
                                                                                                                       // 489
  function values(iterable) {                                                                                          // 490
    if (iterable) {                                                                                                    // 491
      var iteratorMethod = iterable[iteratorSymbol];                                                                   // 492
      if (iteratorMethod) {                                                                                            // 493
        return iteratorMethod.call(iterable);                                                                          // 494
      }                                                                                                                // 495
                                                                                                                       // 496
      if (typeof iterable.next === "function") {                                                                       // 497
        return iterable;                                                                                               // 498
      }                                                                                                                // 499
                                                                                                                       // 500
      if (!isNaN(iterable.length)) {                                                                                   // 501
        var i = -1, next = function next() {                                                                           // 502
          while (++i < iterable.length) {                                                                              // 503
            if (hasOwn.call(iterable, i)) {                                                                            // 504
              next.value = iterable[i];                                                                                // 505
              next.done = false;                                                                                       // 506
              return next;                                                                                             // 507
            }                                                                                                          // 508
          }                                                                                                            // 509
                                                                                                                       // 510
          next.value = undefined;                                                                                      // 511
          next.done = true;                                                                                            // 512
                                                                                                                       // 513
          return next;                                                                                                 // 514
        };                                                                                                             // 515
                                                                                                                       // 516
        return next.next = next;                                                                                       // 517
      }                                                                                                                // 518
    }                                                                                                                  // 519
                                                                                                                       // 520
    // Return an iterator with no values.                                                                              // 521
    return { next: doneResult };                                                                                       // 522
  }                                                                                                                    // 523
  runtime.values = values;                                                                                             // 524
                                                                                                                       // 525
  function doneResult() {                                                                                              // 526
    return { value: undefined, done: true };                                                                           // 527
  }                                                                                                                    // 528
                                                                                                                       // 529
  Context.prototype = {                                                                                                // 530
    constructor: Context,                                                                                              // 531
                                                                                                                       // 532
    reset: function(skipTempReset) {                                                                                   // 533
      this.prev = 0;                                                                                                   // 534
      this.next = 0;                                                                                                   // 535
      // Resetting context._sent for legacy support of Babel's                                                         // 536
      // function.sent implementation.                                                                                 // 537
      this.sent = this._sent = undefined;                                                                              // 538
      this.done = false;                                                                                               // 539
      this.delegate = null;                                                                                            // 540
                                                                                                                       // 541
      this.method = "next";                                                                                            // 542
      this.arg = undefined;                                                                                            // 543
                                                                                                                       // 544
      this.tryEntries.forEach(resetTryEntry);                                                                          // 545
                                                                                                                       // 546
      if (!skipTempReset) {                                                                                            // 547
        for (var name in this) {                                                                                       // 548
          // Not sure about the optimal order of these conditions:                                                     // 549
          if (name.charAt(0) === "t" &&                                                                                // 550
              hasOwn.call(this, name) &&                                                                               // 551
              !isNaN(+name.slice(1))) {                                                                                // 552
            this[name] = undefined;                                                                                    // 553
          }                                                                                                            // 554
        }                                                                                                              // 555
      }                                                                                                                // 556
    },                                                                                                                 // 557
                                                                                                                       // 558
    stop: function() {                                                                                                 // 559
      this.done = true;                                                                                                // 560
                                                                                                                       // 561
      var rootEntry = this.tryEntries[0];                                                                              // 562
      var rootRecord = rootEntry.completion;                                                                           // 563
      if (rootRecord.type === "throw") {                                                                               // 564
        throw rootRecord.arg;                                                                                          // 565
      }                                                                                                                // 566
                                                                                                                       // 567
      return this.rval;                                                                                                // 568
    },                                                                                                                 // 569
                                                                                                                       // 570
    dispatchException: function(exception) {                                                                           // 571
      if (this.done) {                                                                                                 // 572
        throw exception;                                                                                               // 573
      }                                                                                                                // 574
                                                                                                                       // 575
      var context = this;                                                                                              // 576
      function handle(loc, caught) {                                                                                   // 577
        record.type = "throw";                                                                                         // 578
        record.arg = exception;                                                                                        // 579
        context.next = loc;                                                                                            // 580
                                                                                                                       // 581
        if (caught) {                                                                                                  // 582
          // If the dispatched exception was caught by a catch block,                                                  // 583
          // then let that catch block handle the exception normally.                                                  // 584
          context.method = "next";                                                                                     // 585
          context.arg = undefined;                                                                                     // 586
        }                                                                                                              // 587
                                                                                                                       // 588
        return !! caught;                                                                                              // 589
      }                                                                                                                // 590
                                                                                                                       // 591
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {                                                          // 592
        var entry = this.tryEntries[i];                                                                                // 593
        var record = entry.completion;                                                                                 // 594
                                                                                                                       // 595
        if (entry.tryLoc === "root") {                                                                                 // 596
          // Exception thrown outside of any try block that could handle                                               // 597
          // it, so set the completion value of the entire function to                                                 // 598
          // throw the exception.                                                                                      // 599
          return handle("end");                                                                                        // 600
        }                                                                                                              // 601
                                                                                                                       // 602
        if (entry.tryLoc <= this.prev) {                                                                               // 603
          var hasCatch = hasOwn.call(entry, "catchLoc");                                                               // 604
          var hasFinally = hasOwn.call(entry, "finallyLoc");                                                           // 605
                                                                                                                       // 606
          if (hasCatch && hasFinally) {                                                                                // 607
            if (this.prev < entry.catchLoc) {                                                                          // 608
              return handle(entry.catchLoc, true);                                                                     // 609
            } else if (this.prev < entry.finallyLoc) {                                                                 // 610
              return handle(entry.finallyLoc);                                                                         // 611
            }                                                                                                          // 612
                                                                                                                       // 613
          } else if (hasCatch) {                                                                                       // 614
            if (this.prev < entry.catchLoc) {                                                                          // 615
              return handle(entry.catchLoc, true);                                                                     // 616
            }                                                                                                          // 617
                                                                                                                       // 618
          } else if (hasFinally) {                                                                                     // 619
            if (this.prev < entry.finallyLoc) {                                                                        // 620
              return handle(entry.finallyLoc);                                                                         // 621
            }                                                                                                          // 622
                                                                                                                       // 623
          } else {                                                                                                     // 624
            throw new Error("try statement without catch or finally");                                                 // 625
          }                                                                                                            // 626
        }                                                                                                              // 627
      }                                                                                                                // 628
    },                                                                                                                 // 629
                                                                                                                       // 630
    abrupt: function(type, arg) {                                                                                      // 631
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {                                                          // 632
        var entry = this.tryEntries[i];                                                                                // 633
        if (entry.tryLoc <= this.prev &&                                                                               // 634
            hasOwn.call(entry, "finallyLoc") &&                                                                        // 635
            this.prev < entry.finallyLoc) {                                                                            // 636
          var finallyEntry = entry;                                                                                    // 637
          break;                                                                                                       // 638
        }                                                                                                              // 639
      }                                                                                                                // 640
                                                                                                                       // 641
      if (finallyEntry &&                                                                                              // 642
          (type === "break" ||                                                                                         // 643
           type === "continue") &&                                                                                     // 644
          finallyEntry.tryLoc <= arg &&                                                                                // 645
          arg <= finallyEntry.finallyLoc) {                                                                            // 646
        // Ignore the finally entry if control is not jumping to a                                                     // 647
        // location outside the try/catch block.                                                                       // 648
        finallyEntry = null;                                                                                           // 649
      }                                                                                                                // 650
                                                                                                                       // 651
      var record = finallyEntry ? finallyEntry.completion : {};                                                        // 652
      record.type = type;                                                                                              // 653
      record.arg = arg;                                                                                                // 654
                                                                                                                       // 655
      if (finallyEntry) {                                                                                              // 656
        this.method = "next";                                                                                          // 657
        this.next = finallyEntry.finallyLoc;                                                                           // 658
        return ContinueSentinel;                                                                                       // 659
      }                                                                                                                // 660
                                                                                                                       // 661
      return this.complete(record);                                                                                    // 662
    },                                                                                                                 // 663
                                                                                                                       // 664
    complete: function(record, afterLoc) {                                                                             // 665
      if (record.type === "throw") {                                                                                   // 666
        throw record.arg;                                                                                              // 667
      }                                                                                                                // 668
                                                                                                                       // 669
      if (record.type === "break" ||                                                                                   // 670
          record.type === "continue") {                                                                                // 671
        this.next = record.arg;                                                                                        // 672
      } else if (record.type === "return") {                                                                           // 673
        this.rval = this.arg = record.arg;                                                                             // 674
        this.method = "return";                                                                                        // 675
        this.next = "end";                                                                                             // 676
      } else if (record.type === "normal" && afterLoc) {                                                               // 677
        this.next = afterLoc;                                                                                          // 678
      }                                                                                                                // 679
                                                                                                                       // 680
      return ContinueSentinel;                                                                                         // 681
    },                                                                                                                 // 682
                                                                                                                       // 683
    finish: function(finallyLoc) {                                                                                     // 684
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {                                                          // 685
        var entry = this.tryEntries[i];                                                                                // 686
        if (entry.finallyLoc === finallyLoc) {                                                                         // 687
          this.complete(entry.completion, entry.afterLoc);                                                             // 688
          resetTryEntry(entry);                                                                                        // 689
          return ContinueSentinel;                                                                                     // 690
        }                                                                                                              // 691
      }                                                                                                                // 692
    },                                                                                                                 // 693
                                                                                                                       // 694
    "catch": function(tryLoc) {                                                                                        // 695
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {                                                          // 696
        var entry = this.tryEntries[i];                                                                                // 697
        if (entry.tryLoc === tryLoc) {                                                                                 // 698
          var record = entry.completion;                                                                               // 699
          if (record.type === "throw") {                                                                               // 700
            var thrown = record.arg;                                                                                   // 701
            resetTryEntry(entry);                                                                                      // 702
          }                                                                                                            // 703
          return thrown;                                                                                               // 704
        }                                                                                                              // 705
      }                                                                                                                // 706
                                                                                                                       // 707
      // The context.catch method must only be called with a location                                                  // 708
      // argument that corresponds to a known catch block.                                                             // 709
      throw new Error("illegal catch attempt");                                                                        // 710
    },                                                                                                                 // 711
                                                                                                                       // 712
    delegateYield: function(iterable, resultName, nextLoc) {                                                           // 713
      this.delegate = {                                                                                                // 714
        iterator: values(iterable),                                                                                    // 715
        resultName: resultName,                                                                                        // 716
        nextLoc: nextLoc                                                                                               // 717
      };                                                                                                               // 718
                                                                                                                       // 719
      if (this.method === "next") {                                                                                    // 720
        // Deliberately forget the last sent value so that we don't                                                    // 721
        // accidentally pass it on to the delegate.                                                                    // 722
        this.arg = undefined;                                                                                          // 723
      }                                                                                                                // 724
                                                                                                                       // 725
      return ContinueSentinel;                                                                                         // 726
    }                                                                                                                  // 727
  };                                                                                                                   // 728
})(                                                                                                                    // 729
  // Among the various tricks for obtaining a reference to the global                                                  // 730
  // object, this seems to be the most reliable technique that does not                                                // 731
  // use indirect eval (which violates Content Security Policy).                                                       // 732
  typeof global === "object" ? global :                                                                                // 733
  typeof window === "object" ? window :                                                                                // 734
  typeof self === "object" ? self : this                                                                               // 735
);                                                                                                                     // 736
                                                                                                                       // 737
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"core-js":{"library":{"fn":{"symbol":{"iterator.js":["../../modules/es6.string.iterator","../../modules/web.dom.iterable","../../modules/_wks-ext",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/fn/symbol/iterator.js                                                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('../../modules/es6.string.iterator');                                                                          // 1
require('../../modules/web.dom.iterable');                                                                             // 2
module.exports = require('../../modules/_wks-ext').f('iterator');                                                      // 3
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"index.js":["../../modules/es6.symbol","../../modules/es6.object.to-string","../../modules/es7.symbol.async-iterator","../../modules/es7.symbol.observable","../../modules/_core",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/fn/symbol/index.js                                                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('../../modules/es6.symbol');                                                                                   // 1
require('../../modules/es6.object.to-string');                                                                         // 2
require('../../modules/es7.symbol.async-iterator');                                                                    // 3
require('../../modules/es7.symbol.observable');                                                                        // 4
module.exports = require('../../modules/_core').Symbol;                                                                // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]},"object":{"set-prototype-of.js":["../../modules/es6.object.set-prototype-of","../../modules/_core",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/fn/object/set-prototype-of.js                                                          //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('../../modules/es6.object.set-prototype-of');                                                                  // 1
module.exports = require('../../modules/_core').Object.setPrototypeOf;                                                 // 2
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"create.js":["../../modules/es6.object.create","../../modules/_core",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/fn/object/create.js                                                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('../../modules/es6.object.create');                                                                            // 1
var $Object = require('../../modules/_core').Object;                                                                   // 2
module.exports = function create(P, D){                                                                                // 3
  return $Object.create(P, D);                                                                                         // 4
};                                                                                                                     // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]}},"modules":{"es6.string.iterator.js":["./_string-at","./_iter-define",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/es6.string.iterator.js                                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var $at  = require('./_string-at')(true);                                                                              // 2
                                                                                                                       // 3
// 21.1.3.27 String.prototype[@@iterator]()                                                                            // 4
require('./_iter-define')(String, 'String', function(iterated){                                                        // 5
  this._t = String(iterated); // target                                                                                // 6
  this._i = 0;                // next index                                                                            // 7
// 21.1.5.2.1 %StringIteratorPrototype%.next()                                                                         // 8
}, function(){                                                                                                         // 9
  var O     = this._t                                                                                                  // 10
    , index = this._i                                                                                                  // 11
    , point;                                                                                                           // 12
  if(index >= O.length)return {value: undefined, done: true};                                                          // 13
  point = $at(O, index);                                                                                               // 14
  this._i += point.length;                                                                                             // 15
  return {value: point, done: false};                                                                                  // 16
});                                                                                                                    // 17
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_string-at.js":["./_to-integer","./_defined",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_string-at.js                                                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var toInteger = require('./_to-integer')                                                                               // 1
  , defined   = require('./_defined');                                                                                 // 2
// true  -> String#at                                                                                                  // 3
// false -> String#codePointAt                                                                                         // 4
module.exports = function(TO_STRING){                                                                                  // 5
  return function(that, pos){                                                                                          // 6
    var s = String(defined(that))                                                                                      // 7
      , i = toInteger(pos)                                                                                             // 8
      , l = s.length                                                                                                   // 9
      , a, b;                                                                                                          // 10
    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;                                                              // 11
    a = s.charCodeAt(i);                                                                                               // 12
    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff                 // 13
      ? TO_STRING ? s.charAt(i) : a                                                                                    // 14
      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;                                   // 15
  };                                                                                                                   // 16
};                                                                                                                     // 17
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_to-integer.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_to-integer.js                                                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 7.1.4 ToInteger                                                                                                     // 1
var ceil  = Math.ceil                                                                                                  // 2
  , floor = Math.floor;                                                                                                // 3
module.exports = function(it){                                                                                         // 4
  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);                                                            // 5
};                                                                                                                     // 6
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_defined.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_defined.js                                                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 7.2.1 RequireObjectCoercible(argument)                                                                              // 1
module.exports = function(it){                                                                                         // 2
  if(it == undefined)throw TypeError("Can't call method on  " + it);                                                   // 3
  return it;                                                                                                           // 4
};                                                                                                                     // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_iter-define.js":["./_library","./_export","./_redefine","./_hide","./_has","./_iterators","./_iter-create","./_set-to-string-tag","./_object-gpo","./_wks",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_iter-define.js                                                                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var LIBRARY        = require('./_library')                                                                             // 2
  , $export        = require('./_export')                                                                              // 3
  , redefine       = require('./_redefine')                                                                            // 4
  , hide           = require('./_hide')                                                                                // 5
  , has            = require('./_has')                                                                                 // 6
  , Iterators      = require('./_iterators')                                                                           // 7
  , $iterCreate    = require('./_iter-create')                                                                         // 8
  , setToStringTag = require('./_set-to-string-tag')                                                                   // 9
  , getPrototypeOf = require('./_object-gpo')                                                                          // 10
  , ITERATOR       = require('./_wks')('iterator')                                                                     // 11
  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`                        // 12
  , FF_ITERATOR    = '@@iterator'                                                                                      // 13
  , KEYS           = 'keys'                                                                                            // 14
  , VALUES         = 'values';                                                                                         // 15
                                                                                                                       // 16
var returnThis = function(){ return this; };                                                                           // 17
                                                                                                                       // 18
module.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){                                     // 19
  $iterCreate(Constructor, NAME, next);                                                                                // 20
  var getMethod = function(kind){                                                                                      // 21
    if(!BUGGY && kind in proto)return proto[kind];                                                                     // 22
    switch(kind){                                                                                                      // 23
      case KEYS: return function keys(){ return new Constructor(this, kind); };                                        // 24
      case VALUES: return function values(){ return new Constructor(this, kind); };                                    // 25
    } return function entries(){ return new Constructor(this, kind); };                                                // 26
  };                                                                                                                   // 27
  var TAG        = NAME + ' Iterator'                                                                                  // 28
    , DEF_VALUES = DEFAULT == VALUES                                                                                   // 29
    , VALUES_BUG = false                                                                                               // 30
    , proto      = Base.prototype                                                                                      // 31
    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]                                  // 32
    , $default   = $native || getMethod(DEFAULT)                                                                       // 33
    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined                                 // 34
    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native                                                // 35
    , methods, key, IteratorPrototype;                                                                                 // 36
  // Fix native                                                                                                        // 37
  if($anyNative){                                                                                                      // 38
    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));                                                     // 39
    if(IteratorPrototype !== Object.prototype){                                                                        // 40
      // Set @@toStringTag to native iterators                                                                         // 41
      setToStringTag(IteratorPrototype, TAG, true);                                                                    // 42
      // fix for some old engines                                                                                      // 43
      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);                  // 44
    }                                                                                                                  // 45
  }                                                                                                                    // 46
  // fix Array#{values, @@iterator}.name in V8 / FF                                                                    // 47
  if(DEF_VALUES && $native && $native.name !== VALUES){                                                                // 48
    VALUES_BUG = true;                                                                                                 // 49
    $default = function values(){ return $native.call(this); };                                                        // 50
  }                                                                                                                    // 51
  // Define iterator                                                                                                   // 52
  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){                                               // 53
    hide(proto, ITERATOR, $default);                                                                                   // 54
  }                                                                                                                    // 55
  // Plug for library                                                                                                  // 56
  Iterators[NAME] = $default;                                                                                          // 57
  Iterators[TAG]  = returnThis;                                                                                        // 58
  if(DEFAULT){                                                                                                         // 59
    methods = {                                                                                                        // 60
      values:  DEF_VALUES ? $default : getMethod(VALUES),                                                              // 61
      keys:    IS_SET     ? $default : getMethod(KEYS),                                                                // 62
      entries: $entries                                                                                                // 63
    };                                                                                                                 // 64
    if(FORCED)for(key in methods){                                                                                     // 65
      if(!(key in proto))redefine(proto, key, methods[key]);                                                           // 66
    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);                                      // 67
  }                                                                                                                    // 68
  return methods;                                                                                                      // 69
};                                                                                                                     // 70
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_library.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_library.js                                                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = true;                                                                                                 // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_export.js":["./_global","./_core","./_ctx","./_hide",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_export.js                                                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var global    = require('./_global')                                                                                   // 1
  , core      = require('./_core')                                                                                     // 2
  , ctx       = require('./_ctx')                                                                                      // 3
  , hide      = require('./_hide')                                                                                     // 4
  , PROTOTYPE = 'prototype';                                                                                           // 5
                                                                                                                       // 6
var $export = function(type, name, source){                                                                            // 7
  var IS_FORCED = type & $export.F                                                                                     // 8
    , IS_GLOBAL = type & $export.G                                                                                     // 9
    , IS_STATIC = type & $export.S                                                                                     // 10
    , IS_PROTO  = type & $export.P                                                                                     // 11
    , IS_BIND   = type & $export.B                                                                                     // 12
    , IS_WRAP   = type & $export.W                                                                                     // 13
    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})                                                   // 14
    , expProto  = exports[PROTOTYPE]                                                                                   // 15
    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]                      // 16
    , key, own, out;                                                                                                   // 17
  if(IS_GLOBAL)source = name;                                                                                          // 18
  for(key in source){                                                                                                  // 19
    // contains in native                                                                                              // 20
    own = !IS_FORCED && target && target[key] !== undefined;                                                           // 21
    if(own && key in exports)continue;                                                                                 // 22
    // export native or passed                                                                                         // 23
    out = own ? target[key] : source[key];                                                                             // 24
    // prevent global pollution for namespaces                                                                         // 25
    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]                                         // 26
    // bind timers to global for call from export context                                                              // 27
    : IS_BIND && own ? ctx(out, global)                                                                                // 28
    // wrap global constructors for prevent change them in library                                                     // 29
    : IS_WRAP && target[key] == out ? (function(C){                                                                    // 30
      var F = function(a, b, c){                                                                                       // 31
        if(this instanceof C){                                                                                         // 32
          switch(arguments.length){                                                                                    // 33
            case 0: return new C;                                                                                      // 34
            case 1: return new C(a);                                                                                   // 35
            case 2: return new C(a, b);                                                                                // 36
          } return new C(a, b, c);                                                                                     // 37
        } return C.apply(this, arguments);                                                                             // 38
      };                                                                                                               // 39
      F[PROTOTYPE] = C[PROTOTYPE];                                                                                     // 40
      return F;                                                                                                        // 41
    // make static versions for prototype methods                                                                      // 42
    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;                                    // 43
    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%                                                       // 44
    if(IS_PROTO){                                                                                                      // 45
      (exports.virtual || (exports.virtual = {}))[key] = out;                                                          // 46
      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%                                                   // 47
      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);                                      // 48
    }                                                                                                                  // 49
  }                                                                                                                    // 50
};                                                                                                                     // 51
// type bitmap                                                                                                         // 52
$export.F = 1;   // forced                                                                                             // 53
$export.G = 2;   // global                                                                                             // 54
$export.S = 4;   // static                                                                                             // 55
$export.P = 8;   // proto                                                                                              // 56
$export.B = 16;  // bind                                                                                               // 57
$export.W = 32;  // wrap                                                                                               // 58
$export.U = 64;  // safe                                                                                               // 59
$export.R = 128; // real proto method for `library`                                                                    // 60
module.exports = $export;                                                                                              // 61
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_global.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_global.js                                                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028                                                // 1
var global = module.exports = typeof window != 'undefined' && window.Math == Math                                      // 2
  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();                       // 3
if(typeof __g == 'number')__g = global; // eslint-disable-line no-undef                                                // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_core.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_core.js                                                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var core = module.exports = {version: '2.4.0'};                                                                        // 1
if(typeof __e == 'number')__e = core; // eslint-disable-line no-undef                                                  // 2
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_ctx.js":["./_a-function",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_ctx.js                                                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// optional / simple context binding                                                                                   // 1
var aFunction = require('./_a-function');                                                                              // 2
module.exports = function(fn, that, length){                                                                           // 3
  aFunction(fn);                                                                                                       // 4
  if(that === undefined)return fn;                                                                                     // 5
  switch(length){                                                                                                      // 6
    case 1: return function(a){                                                                                        // 7
      return fn.call(that, a);                                                                                         // 8
    };                                                                                                                 // 9
    case 2: return function(a, b){                                                                                     // 10
      return fn.call(that, a, b);                                                                                      // 11
    };                                                                                                                 // 12
    case 3: return function(a, b, c){                                                                                  // 13
      return fn.call(that, a, b, c);                                                                                   // 14
    };                                                                                                                 // 15
  }                                                                                                                    // 16
  return function(/* ...args */){                                                                                      // 17
    return fn.apply(that, arguments);                                                                                  // 18
  };                                                                                                                   // 19
};                                                                                                                     // 20
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_a-function.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_a-function.js                                                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = function(it){                                                                                         // 1
  if(typeof it != 'function')throw TypeError(it + ' is not a function!');                                              // 2
  return it;                                                                                                           // 3
};                                                                                                                     // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_hide.js":["./_object-dp","./_property-desc","./_descriptors",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_hide.js                                                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var dP         = require('./_object-dp')                                                                               // 1
  , createDesc = require('./_property-desc');                                                                          // 2
module.exports = require('./_descriptors') ? function(object, key, value){                                             // 3
  return dP.f(object, key, createDesc(1, value));                                                                      // 4
} : function(object, key, value){                                                                                      // 5
  object[key] = value;                                                                                                 // 6
  return object;                                                                                                       // 7
};                                                                                                                     // 8
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-dp.js":["./_an-object","./_ie8-dom-define","./_to-primitive","./_descriptors",function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_object-dp.js                                                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var anObject       = require('./_an-object')                                                                           // 1
  , IE8_DOM_DEFINE = require('./_ie8-dom-define')                                                                      // 2
  , toPrimitive    = require('./_to-primitive')                                                                        // 3
  , dP             = Object.defineProperty;                                                                            // 4
                                                                                                                       // 5
exports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){             // 6
  anObject(O);                                                                                                         // 7
  P = toPrimitive(P, true);                                                                                            // 8
  anObject(Attributes);                                                                                                // 9
  if(IE8_DOM_DEFINE)try {                                                                                              // 10
    return dP(O, P, Attributes);                                                                                       // 11
  } catch(e){ /* empty */ }                                                                                            // 12
  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');                           // 13
  if('value' in Attributes)O[P] = Attributes.value;                                                                    // 14
  return O;                                                                                                            // 15
};                                                                                                                     // 16
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_an-object.js":["./_is-object",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_an-object.js                                                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var isObject = require('./_is-object');                                                                                // 1
module.exports = function(it){                                                                                         // 2
  if(!isObject(it))throw TypeError(it + ' is not an object!');                                                         // 3
  return it;                                                                                                           // 4
};                                                                                                                     // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_is-object.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_is-object.js                                                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = function(it){                                                                                         // 1
  return typeof it === 'object' ? it !== null : typeof it === 'function';                                              // 2
};                                                                                                                     // 3
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_ie8-dom-define.js":["./_descriptors","./_fails","./_dom-create",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_ie8-dom-define.js                                                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = !require('./_descriptors') && !require('./_fails')(function(){                                        // 1
  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;           // 2
});                                                                                                                    // 3
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_descriptors.js":["./_fails",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_descriptors.js                                                                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// Thank's IE8 for his funny defineProperty                                                                            // 1
module.exports = !require('./_fails')(function(){                                                                      // 2
  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;                                        // 3
});                                                                                                                    // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_fails.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_fails.js                                                                      //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = function(exec){                                                                                       // 1
  try {                                                                                                                // 2
    return !!exec();                                                                                                   // 3
  } catch(e){                                                                                                          // 4
    return true;                                                                                                       // 5
  }                                                                                                                    // 6
};                                                                                                                     // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_dom-create.js":["./_is-object","./_global",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_dom-create.js                                                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var isObject = require('./_is-object')                                                                                 // 1
  , document = require('./_global').document                                                                           // 2
  // in old IE typeof document.createElement is 'object'                                                               // 3
  , is = isObject(document) && isObject(document.createElement);                                                       // 4
module.exports = function(it){                                                                                         // 5
  return is ? document.createElement(it) : {};                                                                         // 6
};                                                                                                                     // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_to-primitive.js":["./_is-object",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_to-primitive.js                                                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 7.1.1 ToPrimitive(input [, PreferredType])                                                                          // 1
var isObject = require('./_is-object');                                                                                // 2
// instead of the ES6 spec version, we didn't implement @@toPrimitive case                                             // 3
// and the second argument - flag - preferred type is a string                                                         // 4
module.exports = function(it, S){                                                                                      // 5
  if(!isObject(it))return it;                                                                                          // 6
  var fn, val;                                                                                                         // 7
  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;                          // 8
  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;                                // 9
  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;                         // 10
  throw TypeError("Can't convert object to primitive value");                                                          // 11
};                                                                                                                     // 12
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_property-desc.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_property-desc.js                                                              //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = function(bitmap, value){                                                                              // 1
  return {                                                                                                             // 2
    enumerable  : !(bitmap & 1),                                                                                       // 3
    configurable: !(bitmap & 2),                                                                                       // 4
    writable    : !(bitmap & 4),                                                                                       // 5
    value       : value                                                                                                // 6
  };                                                                                                                   // 7
};                                                                                                                     // 8
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_redefine.js":["./_hide",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_redefine.js                                                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = require('./_hide');                                                                                   // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_has.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_has.js                                                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var hasOwnProperty = {}.hasOwnProperty;                                                                                // 1
module.exports = function(it, key){                                                                                    // 2
  return hasOwnProperty.call(it, key);                                                                                 // 3
};                                                                                                                     // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_iterators.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_iterators.js                                                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = {};                                                                                                   // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_iter-create.js":["./_object-create","./_property-desc","./_set-to-string-tag","./_hide","./_wks",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_iter-create.js                                                                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var create         = require('./_object-create')                                                                       // 2
  , descriptor     = require('./_property-desc')                                                                       // 3
  , setToStringTag = require('./_set-to-string-tag')                                                                   // 4
  , IteratorPrototype = {};                                                                                            // 5
                                                                                                                       // 6
// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()                                                                        // 7
require('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function(){ return this; });                      // 8
                                                                                                                       // 9
module.exports = function(Constructor, NAME, next){                                                                    // 10
  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});                                      // 11
  setToStringTag(Constructor, NAME + ' Iterator');                                                                     // 12
};                                                                                                                     // 13
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-create.js":["./_an-object","./_object-dps","./_enum-bug-keys","./_shared-key","./_dom-create","./_html",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_object-create.js                                                              //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])                                                                 // 1
var anObject    = require('./_an-object')                                                                              // 2
  , dPs         = require('./_object-dps')                                                                             // 3
  , enumBugKeys = require('./_enum-bug-keys')                                                                          // 4
  , IE_PROTO    = require('./_shared-key')('IE_PROTO')                                                                 // 5
  , Empty       = function(){ /* empty */ }                                                                            // 6
  , PROTOTYPE   = 'prototype';                                                                                         // 7
                                                                                                                       // 8
// Create object with fake `null` prototype: use iframe Object with cleared prototype                                  // 9
var createDict = function(){                                                                                           // 10
  // Thrash, waste and sodomy: IE GC bug                                                                               // 11
  var iframe = require('./_dom-create')('iframe')                                                                      // 12
    , i      = enumBugKeys.length                                                                                      // 13
    , lt     = '<'                                                                                                     // 14
    , gt     = '>'                                                                                                     // 15
    , iframeDocument;                                                                                                  // 16
  iframe.style.display = 'none';                                                                                       // 17
  require('./_html').appendChild(iframe);                                                                              // 18
  iframe.src = 'javascript:'; // eslint-disable-line no-script-url                                                     // 19
  // createDict = iframe.contentWindow.Object;                                                                         // 20
  // html.removeChild(iframe);                                                                                         // 21
  iframeDocument = iframe.contentWindow.document;                                                                      // 22
  iframeDocument.open();                                                                                               // 23
  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);                                // 24
  iframeDocument.close();                                                                                              // 25
  createDict = iframeDocument.F;                                                                                       // 26
  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];                                                              // 27
  return createDict();                                                                                                 // 28
};                                                                                                                     // 29
                                                                                                                       // 30
module.exports = Object.create || function create(O, Properties){                                                      // 31
  var result;                                                                                                          // 32
  if(O !== null){                                                                                                      // 33
    Empty[PROTOTYPE] = anObject(O);                                                                                    // 34
    result = new Empty;                                                                                                // 35
    Empty[PROTOTYPE] = null;                                                                                           // 36
    // add "__proto__" for Object.getPrototypeOf polyfill                                                              // 37
    result[IE_PROTO] = O;                                                                                              // 38
  } else result = createDict();                                                                                        // 39
  return Properties === undefined ? result : dPs(result, Properties);                                                  // 40
};                                                                                                                     // 41
                                                                                                                       // 42
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-dps.js":["./_object-dp","./_an-object","./_object-keys","./_descriptors",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_object-dps.js                                                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var dP       = require('./_object-dp')                                                                                 // 1
  , anObject = require('./_an-object')                                                                                 // 2
  , getKeys  = require('./_object-keys');                                                                              // 3
                                                                                                                       // 4
module.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties){       // 5
  anObject(O);                                                                                                         // 6
  var keys   = getKeys(Properties)                                                                                     // 7
    , length = keys.length                                                                                             // 8
    , i = 0                                                                                                            // 9
    , P;                                                                                                               // 10
  while(length > i)dP.f(O, P = keys[i++], Properties[P]);                                                              // 11
  return O;                                                                                                            // 12
};                                                                                                                     // 13
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-keys.js":["./_object-keys-internal","./_enum-bug-keys",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_object-keys.js                                                                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.2.14 / 15.2.3.14 Object.keys(O)                                                                                // 1
var $keys       = require('./_object-keys-internal')                                                                   // 2
  , enumBugKeys = require('./_enum-bug-keys');                                                                         // 3
                                                                                                                       // 4
module.exports = Object.keys || function keys(O){                                                                      // 5
  return $keys(O, enumBugKeys);                                                                                        // 6
};                                                                                                                     // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-keys-internal.js":["./_has","./_to-iobject","./_array-includes","./_shared-key",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_object-keys-internal.js                                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var has          = require('./_has')                                                                                   // 1
  , toIObject    = require('./_to-iobject')                                                                            // 2
  , arrayIndexOf = require('./_array-includes')(false)                                                                 // 3
  , IE_PROTO     = require('./_shared-key')('IE_PROTO');                                                               // 4
                                                                                                                       // 5
module.exports = function(object, names){                                                                              // 6
  var O      = toIObject(object)                                                                                       // 7
    , i      = 0                                                                                                       // 8
    , result = []                                                                                                      // 9
    , key;                                                                                                             // 10
  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);                                                     // 11
  // Don't enum bug & hidden keys                                                                                      // 12
  while(names.length > i)if(has(O, key = names[i++])){                                                                 // 13
    ~arrayIndexOf(result, key) || result.push(key);                                                                    // 14
  }                                                                                                                    // 15
  return result;                                                                                                       // 16
};                                                                                                                     // 17
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_to-iobject.js":["./_iobject","./_defined",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_to-iobject.js                                                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// to indexed object, toObject with fallback for non-array-like ES3 strings                                            // 1
var IObject = require('./_iobject')                                                                                    // 2
  , defined = require('./_defined');                                                                                   // 3
module.exports = function(it){                                                                                         // 4
  return IObject(defined(it));                                                                                         // 5
};                                                                                                                     // 6
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_iobject.js":["./_cof",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_iobject.js                                                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// fallback for non-array-like ES3 and non-enumerable old V8 strings                                                   // 1
var cof = require('./_cof');                                                                                           // 2
module.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){                                          // 3
  return cof(it) == 'String' ? it.split('') : Object(it);                                                              // 4
};                                                                                                                     // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_cof.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_cof.js                                                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var toString = {}.toString;                                                                                            // 1
                                                                                                                       // 2
module.exports = function(it){                                                                                         // 3
  return toString.call(it).slice(8, -1);                                                                               // 4
};                                                                                                                     // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_array-includes.js":["./_to-iobject","./_to-length","./_to-index",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_array-includes.js                                                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// false -> Array#indexOf                                                                                              // 1
// true  -> Array#includes                                                                                             // 2
var toIObject = require('./_to-iobject')                                                                               // 3
  , toLength  = require('./_to-length')                                                                                // 4
  , toIndex   = require('./_to-index');                                                                                // 5
module.exports = function(IS_INCLUDES){                                                                                // 6
  return function($this, el, fromIndex){                                                                               // 7
    var O      = toIObject($this)                                                                                      // 8
      , length = toLength(O.length)                                                                                    // 9
      , index  = toIndex(fromIndex, length)                                                                            // 10
      , value;                                                                                                         // 11
    // Array#includes uses SameValueZero equality algorithm                                                            // 12
    if(IS_INCLUDES && el != el)while(length > index){                                                                  // 13
      value = O[index++];                                                                                              // 14
      if(value != value)return true;                                                                                   // 15
    // Array#toIndex ignores holes, Array#includes - not                                                               // 16
    } else for(;length > index; index++)if(IS_INCLUDES || index in O){                                                 // 17
      if(O[index] === el)return IS_INCLUDES || index || 0;                                                             // 18
    } return !IS_INCLUDES && -1;                                                                                       // 19
  };                                                                                                                   // 20
};                                                                                                                     // 21
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_to-length.js":["./_to-integer",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_to-length.js                                                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 7.1.15 ToLength                                                                                                     // 1
var toInteger = require('./_to-integer')                                                                               // 2
  , min       = Math.min;                                                                                              // 3
module.exports = function(it){                                                                                         // 4
  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991                      // 5
};                                                                                                                     // 6
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_to-index.js":["./_to-integer",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_to-index.js                                                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var toInteger = require('./_to-integer')                                                                               // 1
  , max       = Math.max                                                                                               // 2
  , min       = Math.min;                                                                                              // 3
module.exports = function(index, length){                                                                              // 4
  index = toInteger(index);                                                                                            // 5
  return index < 0 ? max(index + length, 0) : min(index, length);                                                      // 6
};                                                                                                                     // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_shared-key.js":["./_shared","./_uid",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_shared-key.js                                                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var shared = require('./_shared')('keys')                                                                              // 1
  , uid    = require('./_uid');                                                                                        // 2
module.exports = function(key){                                                                                        // 3
  return shared[key] || (shared[key] = uid(key));                                                                      // 4
};                                                                                                                     // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_shared.js":["./_global",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_shared.js                                                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var global = require('./_global')                                                                                      // 1
  , SHARED = '__core-js_shared__'                                                                                      // 2
  , store  = global[SHARED] || (global[SHARED] = {});                                                                  // 3
module.exports = function(key){                                                                                        // 4
  return store[key] || (store[key] = {});                                                                              // 5
};                                                                                                                     // 6
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_uid.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_uid.js                                                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var id = 0                                                                                                             // 1
  , px = Math.random();                                                                                                // 2
module.exports = function(key){                                                                                        // 3
  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));                               // 4
};                                                                                                                     // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_enum-bug-keys.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_enum-bug-keys.js                                                              //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// IE 8- don't enum bug keys                                                                                           // 1
module.exports = (                                                                                                     // 2
  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'                      // 3
).split(',');                                                                                                          // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_html.js":["./_global",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_html.js                                                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = require('./_global').document && document.documentElement;                                            // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_set-to-string-tag.js":["./_object-dp","./_has","./_wks",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_set-to-string-tag.js                                                          //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var def = require('./_object-dp').f                                                                                    // 1
  , has = require('./_has')                                                                                            // 2
  , TAG = require('./_wks')('toStringTag');                                                                            // 3
                                                                                                                       // 4
module.exports = function(it, tag, stat){                                                                              // 5
  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});                    // 6
};                                                                                                                     // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_wks.js":["./_shared","./_uid","./_global",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_wks.js                                                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var store      = require('./_shared')('wks')                                                                           // 1
  , uid        = require('./_uid')                                                                                     // 2
  , Symbol     = require('./_global').Symbol                                                                           // 3
  , USE_SYMBOL = typeof Symbol == 'function';                                                                          // 4
                                                                                                                       // 5
var $exports = module.exports = function(name){                                                                        // 6
  return store[name] || (store[name] =                                                                                 // 7
    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));                                      // 8
};                                                                                                                     // 9
                                                                                                                       // 10
$exports.store = store;                                                                                                // 11
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-gpo.js":["./_has","./_to-object","./_shared-key",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_object-gpo.js                                                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)                                                                        // 1
var has         = require('./_has')                                                                                    // 2
  , toObject    = require('./_to-object')                                                                              // 3
  , IE_PROTO    = require('./_shared-key')('IE_PROTO')                                                                 // 4
  , ObjectProto = Object.prototype;                                                                                    // 5
                                                                                                                       // 6
module.exports = Object.getPrototypeOf || function(O){                                                                 // 7
  O = toObject(O);                                                                                                     // 8
  if(has(O, IE_PROTO))return O[IE_PROTO];                                                                              // 9
  if(typeof O.constructor == 'function' && O instanceof O.constructor){                                                // 10
    return O.constructor.prototype;                                                                                    // 11
  } return O instanceof Object ? ObjectProto : null;                                                                   // 12
};                                                                                                                     // 13
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_to-object.js":["./_defined",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_to-object.js                                                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 7.1.13 ToObject(argument)                                                                                           // 1
var defined = require('./_defined');                                                                                   // 2
module.exports = function(it){                                                                                         // 3
  return Object(defined(it));                                                                                          // 4
};                                                                                                                     // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"web.dom.iterable.js":["./es6.array.iterator","./_global","./_hide","./_iterators","./_wks",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/web.dom.iterable.js                                                            //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('./es6.array.iterator');                                                                                       // 1
var global        = require('./_global')                                                                               // 2
  , hide          = require('./_hide')                                                                                 // 3
  , Iterators     = require('./_iterators')                                                                            // 4
  , TO_STRING_TAG = require('./_wks')('toStringTag');                                                                  // 5
                                                                                                                       // 6
for(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){  // 7
  var NAME       = collections[i]                                                                                      // 8
    , Collection = global[NAME]                                                                                        // 9
    , proto      = Collection && Collection.prototype;                                                                 // 10
  if(proto && !proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);                                                  // 11
  Iterators[NAME] = Iterators.Array;                                                                                   // 12
}                                                                                                                      // 13
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.iterator.js":["./_add-to-unscopables","./_iter-step","./_iterators","./_to-iobject","./_iter-define",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/es6.array.iterator.js                                                          //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var addToUnscopables = require('./_add-to-unscopables')                                                                // 2
  , step             = require('./_iter-step')                                                                         // 3
  , Iterators        = require('./_iterators')                                                                         // 4
  , toIObject        = require('./_to-iobject');                                                                       // 5
                                                                                                                       // 6
// 22.1.3.4 Array.prototype.entries()                                                                                  // 7
// 22.1.3.13 Array.prototype.keys()                                                                                    // 8
// 22.1.3.29 Array.prototype.values()                                                                                  // 9
// 22.1.3.30 Array.prototype[@@iterator]()                                                                             // 10
module.exports = require('./_iter-define')(Array, 'Array', function(iterated, kind){                                   // 11
  this._t = toIObject(iterated); // target                                                                             // 12
  this._i = 0;                   // next index                                                                         // 13
  this._k = kind;                // kind                                                                               // 14
// 22.1.5.2.1 %ArrayIteratorPrototype%.next()                                                                          // 15
}, function(){                                                                                                         // 16
  var O     = this._t                                                                                                  // 17
    , kind  = this._k                                                                                                  // 18
    , index = this._i++;                                                                                               // 19
  if(!O || index >= O.length){                                                                                         // 20
    this._t = undefined;                                                                                               // 21
    return step(1);                                                                                                    // 22
  }                                                                                                                    // 23
  if(kind == 'keys'  )return step(0, index);                                                                           // 24
  if(kind == 'values')return step(0, O[index]);                                                                        // 25
  return step(0, [index, O[index]]);                                                                                   // 26
}, 'values');                                                                                                          // 27
                                                                                                                       // 28
// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)                                                 // 29
Iterators.Arguments = Iterators.Array;                                                                                 // 30
                                                                                                                       // 31
addToUnscopables('keys');                                                                                              // 32
addToUnscopables('values');                                                                                            // 33
addToUnscopables('entries');                                                                                           // 34
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_add-to-unscopables.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_add-to-unscopables.js                                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = function(){ /* empty */ };                                                                            // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_iter-step.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_iter-step.js                                                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = function(done, value){                                                                                // 1
  return {value: value, done: !!done};                                                                                 // 2
};                                                                                                                     // 3
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_wks-ext.js":["./_wks",function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_wks-ext.js                                                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.f = require('./_wks');                                                                                         // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.symbol.js":["./_global","./_has","./_descriptors","./_export","./_redefine","./_meta","./_fails","./_shared","./_set-to-string-tag","./_uid","./_wks","./_wks-ext","./_wks-define","./_keyof","./_enum-keys","./_is-array","./_an-object","./_to-iobject","./_to-primitive","./_property-desc","./_object-create","./_object-gopn-ext","./_object-gopd","./_object-dp","./_object-keys","./_object-gopn","./_object-pie","./_object-gops","./_library","./_hide",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/es6.symbol.js                                                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// ECMAScript 6 symbols shim                                                                                           // 2
var global         = require('./_global')                                                                              // 3
  , has            = require('./_has')                                                                                 // 4
  , DESCRIPTORS    = require('./_descriptors')                                                                         // 5
  , $export        = require('./_export')                                                                              // 6
  , redefine       = require('./_redefine')                                                                            // 7
  , META           = require('./_meta').KEY                                                                            // 8
  , $fails         = require('./_fails')                                                                               // 9
  , shared         = require('./_shared')                                                                              // 10
  , setToStringTag = require('./_set-to-string-tag')                                                                   // 11
  , uid            = require('./_uid')                                                                                 // 12
  , wks            = require('./_wks')                                                                                 // 13
  , wksExt         = require('./_wks-ext')                                                                             // 14
  , wksDefine      = require('./_wks-define')                                                                          // 15
  , keyOf          = require('./_keyof')                                                                               // 16
  , enumKeys       = require('./_enum-keys')                                                                           // 17
  , isArray        = require('./_is-array')                                                                            // 18
  , anObject       = require('./_an-object')                                                                           // 19
  , toIObject      = require('./_to-iobject')                                                                          // 20
  , toPrimitive    = require('./_to-primitive')                                                                        // 21
  , createDesc     = require('./_property-desc')                                                                       // 22
  , _create        = require('./_object-create')                                                                       // 23
  , gOPNExt        = require('./_object-gopn-ext')                                                                     // 24
  , $GOPD          = require('./_object-gopd')                                                                         // 25
  , $DP            = require('./_object-dp')                                                                           // 26
  , $keys          = require('./_object-keys')                                                                         // 27
  , gOPD           = $GOPD.f                                                                                           // 28
  , dP             = $DP.f                                                                                             // 29
  , gOPN           = gOPNExt.f                                                                                         // 30
  , $Symbol        = global.Symbol                                                                                     // 31
  , $JSON          = global.JSON                                                                                       // 32
  , _stringify     = $JSON && $JSON.stringify                                                                          // 33
  , PROTOTYPE      = 'prototype'                                                                                       // 34
  , HIDDEN         = wks('_hidden')                                                                                    // 35
  , TO_PRIMITIVE   = wks('toPrimitive')                                                                                // 36
  , isEnum         = {}.propertyIsEnumerable                                                                           // 37
  , SymbolRegistry = shared('symbol-registry')                                                                         // 38
  , AllSymbols     = shared('symbols')                                                                                 // 39
  , OPSymbols      = shared('op-symbols')                                                                              // 40
  , ObjectProto    = Object[PROTOTYPE]                                                                                 // 41
  , USE_NATIVE     = typeof $Symbol == 'function'                                                                      // 42
  , QObject        = global.QObject;                                                                                   // 43
// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173                                      // 44
var setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;                                         // 45
                                                                                                                       // 46
// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687                                         // 47
var setSymbolDesc = DESCRIPTORS && $fails(function(){                                                                  // 48
  return _create(dP({}, 'a', {                                                                                         // 49
    get: function(){ return dP(this, 'a', {value: 7}).a; }                                                             // 50
  })).a != 7;                                                                                                          // 51
}) ? function(it, key, D){                                                                                             // 52
  var protoDesc = gOPD(ObjectProto, key);                                                                              // 53
  if(protoDesc)delete ObjectProto[key];                                                                                // 54
  dP(it, key, D);                                                                                                      // 55
  if(protoDesc && it !== ObjectProto)dP(ObjectProto, key, protoDesc);                                                  // 56
} : dP;                                                                                                                // 57
                                                                                                                       // 58
var wrap = function(tag){                                                                                              // 59
  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);                                                             // 60
  sym._k = tag;                                                                                                        // 61
  return sym;                                                                                                          // 62
};                                                                                                                     // 63
                                                                                                                       // 64
var isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function(it){                                       // 65
  return typeof it == 'symbol';                                                                                        // 66
} : function(it){                                                                                                      // 67
  return it instanceof $Symbol;                                                                                        // 68
};                                                                                                                     // 69
                                                                                                                       // 70
var $defineProperty = function defineProperty(it, key, D){                                                             // 71
  if(it === ObjectProto)$defineProperty(OPSymbols, key, D);                                                            // 72
  anObject(it);                                                                                                        // 73
  key = toPrimitive(key, true);                                                                                        // 74
  anObject(D);                                                                                                         // 75
  if(has(AllSymbols, key)){                                                                                            // 76
    if(!D.enumerable){                                                                                                 // 77
      if(!has(it, HIDDEN))dP(it, HIDDEN, createDesc(1, {}));                                                           // 78
      it[HIDDEN][key] = true;                                                                                          // 79
    } else {                                                                                                           // 80
      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;                                                   // 81
      D = _create(D, {enumerable: createDesc(0, false)});                                                              // 82
    } return setSymbolDesc(it, key, D);                                                                                // 83
  } return dP(it, key, D);                                                                                             // 84
};                                                                                                                     // 85
var $defineProperties = function defineProperties(it, P){                                                              // 86
  anObject(it);                                                                                                        // 87
  var keys = enumKeys(P = toIObject(P))                                                                                // 88
    , i    = 0                                                                                                         // 89
    , l = keys.length                                                                                                  // 90
    , key;                                                                                                             // 91
  while(l > i)$defineProperty(it, key = keys[i++], P[key]);                                                            // 92
  return it;                                                                                                           // 93
};                                                                                                                     // 94
var $create = function create(it, P){                                                                                  // 95
  return P === undefined ? _create(it) : $defineProperties(_create(it), P);                                            // 96
};                                                                                                                     // 97
var $propertyIsEnumerable = function propertyIsEnumerable(key){                                                        // 98
  var E = isEnum.call(this, key = toPrimitive(key, true));                                                             // 99
  if(this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return false;                                // 100
  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;           // 101
};                                                                                                                     // 102
var $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){                                            // 103
  it  = toIObject(it);                                                                                                 // 104
  key = toPrimitive(key, true);                                                                                        // 105
  if(it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return;                                        // 106
  var D = gOPD(it, key);                                                                                               // 107
  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;                           // 108
  return D;                                                                                                            // 109
};                                                                                                                     // 110
var $getOwnPropertyNames = function getOwnPropertyNames(it){                                                           // 111
  var names  = gOPN(toIObject(it))                                                                                     // 112
    , result = []                                                                                                      // 113
    , i      = 0                                                                                                       // 114
    , key;                                                                                                             // 115
  while(names.length > i){                                                                                             // 116
    if(!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META)result.push(key);                            // 117
  } return result;                                                                                                     // 118
};                                                                                                                     // 119
var $getOwnPropertySymbols = function getOwnPropertySymbols(it){                                                       // 120
  var IS_OP  = it === ObjectProto                                                                                      // 121
    , names  = gOPN(IS_OP ? OPSymbols : toIObject(it))                                                                 // 122
    , result = []                                                                                                      // 123
    , i      = 0                                                                                                       // 124
    , key;                                                                                                             // 125
  while(names.length > i){                                                                                             // 126
    if(has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true))result.push(AllSymbols[key]);       // 127
  } return result;                                                                                                     // 128
};                                                                                                                     // 129
                                                                                                                       // 130
// 19.4.1.1 Symbol([description])                                                                                      // 131
if(!USE_NATIVE){                                                                                                       // 132
  $Symbol = function Symbol(){                                                                                         // 133
    if(this instanceof $Symbol)throw TypeError('Symbol is not a constructor!');                                        // 134
    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);                                                    // 135
    var $set = function(value){                                                                                        // 136
      if(this === ObjectProto)$set.call(OPSymbols, value);                                                             // 137
      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;                                        // 138
      setSymbolDesc(this, tag, createDesc(1, value));                                                                  // 139
    };                                                                                                                 // 140
    if(DESCRIPTORS && setter)setSymbolDesc(ObjectProto, tag, {configurable: true, set: $set});                         // 141
    return wrap(tag);                                                                                                  // 142
  };                                                                                                                   // 143
  redefine($Symbol[PROTOTYPE], 'toString', function toString(){                                                        // 144
    return this._k;                                                                                                    // 145
  });                                                                                                                  // 146
                                                                                                                       // 147
  $GOPD.f = $getOwnPropertyDescriptor;                                                                                 // 148
  $DP.f   = $defineProperty;                                                                                           // 149
  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;                                                      // 150
  require('./_object-pie').f  = $propertyIsEnumerable;                                                                 // 151
  require('./_object-gops').f = $getOwnPropertySymbols;                                                                // 152
                                                                                                                       // 153
  if(DESCRIPTORS && !require('./_library')){                                                                           // 154
    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);                                        // 155
  }                                                                                                                    // 156
                                                                                                                       // 157
  wksExt.f = function(name){                                                                                           // 158
    return wrap(wks(name));                                                                                            // 159
  }                                                                                                                    // 160
}                                                                                                                      // 161
                                                                                                                       // 162
$export($export.G + $export.W + $export.F * !USE_NATIVE, {Symbol: $Symbol});                                           // 163
                                                                                                                       // 164
for(var symbols = (                                                                                                    // 165
  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14
  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'     // 167
).split(','), i = 0; symbols.length > i; )wks(symbols[i++]);                                                           // 168
                                                                                                                       // 169
for(var symbols = $keys(wks.store), i = 0; symbols.length > i; )wksDefine(symbols[i++]);                               // 170
                                                                                                                       // 171
$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {                                                               // 172
  // 19.4.2.1 Symbol.for(key)                                                                                          // 173
  'for': function(key){                                                                                                // 174
    return has(SymbolRegistry, key += '')                                                                              // 175
      ? SymbolRegistry[key]                                                                                            // 176
      : SymbolRegistry[key] = $Symbol(key);                                                                            // 177
  },                                                                                                                   // 178
  // 19.4.2.5 Symbol.keyFor(sym)                                                                                       // 179
  keyFor: function keyFor(key){                                                                                        // 180
    if(isSymbol(key))return keyOf(SymbolRegistry, key);                                                                // 181
    throw TypeError(key + ' is not a symbol!');                                                                        // 182
  },                                                                                                                   // 183
  useSetter: function(){ setter = true; },                                                                             // 184
  useSimple: function(){ setter = false; }                                                                             // 185
});                                                                                                                    // 186
                                                                                                                       // 187
$export($export.S + $export.F * !USE_NATIVE, 'Object', {                                                               // 188
  // 19.1.2.2 Object.create(O [, Properties])                                                                          // 189
  create: $create,                                                                                                     // 190
  // 19.1.2.4 Object.defineProperty(O, P, Attributes)                                                                  // 191
  defineProperty: $defineProperty,                                                                                     // 192
  // 19.1.2.3 Object.defineProperties(O, Properties)                                                                   // 193
  defineProperties: $defineProperties,                                                                                 // 194
  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)                                                                    // 195
  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,                                                                 // 196
  // 19.1.2.7 Object.getOwnPropertyNames(O)                                                                            // 197
  getOwnPropertyNames: $getOwnPropertyNames,                                                                           // 198
  // 19.1.2.8 Object.getOwnPropertySymbols(O)                                                                          // 199
  getOwnPropertySymbols: $getOwnPropertySymbols                                                                        // 200
});                                                                                                                    // 201
                                                                                                                       // 202
// 24.3.2 JSON.stringify(value [, replacer [, space]])                                                                 // 203
$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function(){                                            // 204
  var S = $Symbol();                                                                                                   // 205
  // MS Edge converts symbol values to JSON as {}                                                                      // 206
  // WebKit converts symbol values to JSON as null                                                                     // 207
  // V8 throws on boxed symbols                                                                                        // 208
  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';                   // 209
})), 'JSON', {                                                                                                         // 210
  stringify: function stringify(it){                                                                                   // 211
    if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined                                     // 212
    var args = [it]                                                                                                    // 213
      , i    = 1                                                                                                       // 214
      , replacer, $replacer;                                                                                           // 215
    while(arguments.length > i)args.push(arguments[i++]);                                                              // 216
    replacer = args[1];                                                                                                // 217
    if(typeof replacer == 'function')$replacer = replacer;                                                             // 218
    if($replacer || !isArray(replacer))replacer = function(key, value){                                                // 219
      if($replacer)value = $replacer.call(this, key, value);                                                           // 220
      if(!isSymbol(value))return value;                                                                                // 221
    };                                                                                                                 // 222
    args[1] = replacer;                                                                                                // 223
    return _stringify.apply($JSON, args);                                                                              // 224
  }                                                                                                                    // 225
});                                                                                                                    // 226
                                                                                                                       // 227
// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)                                                                      // 228
$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);  // 229
// 19.4.3.5 Symbol.prototype[@@toStringTag]                                                                            // 230
setToStringTag($Symbol, 'Symbol');                                                                                     // 231
// 20.2.1.9 Math[@@toStringTag]                                                                                        // 232
setToStringTag(Math, 'Math', true);                                                                                    // 233
// 24.3.3 JSON[@@toStringTag]                                                                                          // 234
setToStringTag(global.JSON, 'JSON', true);                                                                             // 235
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_meta.js":["./_uid","./_is-object","./_has","./_object-dp","./_fails",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_meta.js                                                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var META     = require('./_uid')('meta')                                                                               // 1
  , isObject = require('./_is-object')                                                                                 // 2
  , has      = require('./_has')                                                                                       // 3
  , setDesc  = require('./_object-dp').f                                                                               // 4
  , id       = 0;                                                                                                      // 5
var isExtensible = Object.isExtensible || function(){                                                                  // 6
  return true;                                                                                                         // 7
};                                                                                                                     // 8
var FREEZE = !require('./_fails')(function(){                                                                          // 9
  return isExtensible(Object.preventExtensions({}));                                                                   // 10
});                                                                                                                    // 11
var setMeta = function(it){                                                                                            // 12
  setDesc(it, META, {value: {                                                                                          // 13
    i: 'O' + ++id, // object ID                                                                                        // 14
    w: {}          // weak collections IDs                                                                             // 15
  }});                                                                                                                 // 16
};                                                                                                                     // 17
var fastKey = function(it, create){                                                                                    // 18
  // return primitive with prefix                                                                                      // 19
  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;                       // 20
  if(!has(it, META)){                                                                                                  // 21
    // can't set metadata to uncaught frozen object                                                                    // 22
    if(!isExtensible(it))return 'F';                                                                                   // 23
    // not necessary to add metadata                                                                                   // 24
    if(!create)return 'E';                                                                                             // 25
    // add missing metadata                                                                                            // 26
    setMeta(it);                                                                                                       // 27
  // return object ID                                                                                                  // 28
  } return it[META].i;                                                                                                 // 29
};                                                                                                                     // 30
var getWeak = function(it, create){                                                                                    // 31
  if(!has(it, META)){                                                                                                  // 32
    // can't set metadata to uncaught frozen object                                                                    // 33
    if(!isExtensible(it))return true;                                                                                  // 34
    // not necessary to add metadata                                                                                   // 35
    if(!create)return false;                                                                                           // 36
    // add missing metadata                                                                                            // 37
    setMeta(it);                                                                                                       // 38
  // return hash weak collections IDs                                                                                  // 39
  } return it[META].w;                                                                                                 // 40
};                                                                                                                     // 41
// add metadata on freeze-family methods calling                                                                       // 42
var onFreeze = function(it){                                                                                           // 43
  if(FREEZE && meta.NEED && isExtensible(it) && !has(it, META))setMeta(it);                                            // 44
  return it;                                                                                                           // 45
};                                                                                                                     // 46
var meta = module.exports = {                                                                                          // 47
  KEY:      META,                                                                                                      // 48
  NEED:     false,                                                                                                     // 49
  fastKey:  fastKey,                                                                                                   // 50
  getWeak:  getWeak,                                                                                                   // 51
  onFreeze: onFreeze                                                                                                   // 52
};                                                                                                                     // 53
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_wks-define.js":["./_global","./_core","./_library","./_wks-ext","./_object-dp",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_wks-define.js                                                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var global         = require('./_global')                                                                              // 1
  , core           = require('./_core')                                                                                // 2
  , LIBRARY        = require('./_library')                                                                             // 3
  , wksExt         = require('./_wks-ext')                                                                             // 4
  , defineProperty = require('./_object-dp').f;                                                                        // 5
module.exports = function(name){                                                                                       // 6
  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});                                     // 7
  if(name.charAt(0) != '_' && !(name in $Symbol))defineProperty($Symbol, name, {value: wksExt.f(name)});               // 8
};                                                                                                                     // 9
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_keyof.js":["./_object-keys","./_to-iobject",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_keyof.js                                                                      //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var getKeys   = require('./_object-keys')                                                                              // 1
  , toIObject = require('./_to-iobject');                                                                              // 2
module.exports = function(object, el){                                                                                 // 3
  var O      = toIObject(object)                                                                                       // 4
    , keys   = getKeys(O)                                                                                              // 5
    , length = keys.length                                                                                             // 6
    , index  = 0                                                                                                       // 7
    , key;                                                                                                             // 8
  while(length > index)if(O[key = keys[index++]] === el)return key;                                                    // 9
};                                                                                                                     // 10
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_enum-keys.js":["./_object-keys","./_object-gops","./_object-pie",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_enum-keys.js                                                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// all enumerable object keys, includes symbols                                                                        // 1
var getKeys = require('./_object-keys')                                                                                // 2
  , gOPS    = require('./_object-gops')                                                                                // 3
  , pIE     = require('./_object-pie');                                                                                // 4
module.exports = function(it){                                                                                         // 5
  var result     = getKeys(it)                                                                                         // 6
    , getSymbols = gOPS.f;                                                                                             // 7
  if(getSymbols){                                                                                                      // 8
    var symbols = getSymbols(it)                                                                                       // 9
      , isEnum  = pIE.f                                                                                                // 10
      , i       = 0                                                                                                    // 11
      , key;                                                                                                           // 12
    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))result.push(key);                                  // 13
  } return result;                                                                                                     // 14
};                                                                                                                     // 15
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-gops.js":function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_object-gops.js                                                                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.f = Object.getOwnPropertySymbols;                                                                              // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_object-pie.js":function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_object-pie.js                                                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.f = {}.propertyIsEnumerable;                                                                                   // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_is-array.js":["./_cof",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_is-array.js                                                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 7.2.2 IsArray(argument)                                                                                             // 1
var cof = require('./_cof');                                                                                           // 2
module.exports = Array.isArray || function isArray(arg){                                                               // 3
  return cof(arg) == 'Array';                                                                                          // 4
};                                                                                                                     // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-gopn-ext.js":["./_to-iobject","./_object-gopn",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_object-gopn-ext.js                                                            //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window                                           // 1
var toIObject = require('./_to-iobject')                                                                               // 2
  , gOPN      = require('./_object-gopn').f                                                                            // 3
  , toString  = {}.toString;                                                                                           // 4
                                                                                                                       // 5
var windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames                                    // 6
  ? Object.getOwnPropertyNames(window) : [];                                                                           // 7
                                                                                                                       // 8
var getWindowNames = function(it){                                                                                     // 9
  try {                                                                                                                // 10
    return gOPN(it);                                                                                                   // 11
  } catch(e){                                                                                                          // 12
    return windowNames.slice();                                                                                        // 13
  }                                                                                                                    // 14
};                                                                                                                     // 15
                                                                                                                       // 16
module.exports.f = function getOwnPropertyNames(it){                                                                   // 17
  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));             // 18
};                                                                                                                     // 19
                                                                                                                       // 20
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-gopn.js":["./_object-keys-internal","./_enum-bug-keys",function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_object-gopn.js                                                                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)                                                                   // 1
var $keys      = require('./_object-keys-internal')                                                                    // 2
  , hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');                                            // 3
                                                                                                                       // 4
exports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O){                                             // 5
  return $keys(O, hiddenKeys);                                                                                         // 6
};                                                                                                                     // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-gopd.js":["./_object-pie","./_property-desc","./_to-iobject","./_to-primitive","./_has","./_ie8-dom-define","./_descriptors",function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_object-gopd.js                                                                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var pIE            = require('./_object-pie')                                                                          // 1
  , createDesc     = require('./_property-desc')                                                                       // 2
  , toIObject      = require('./_to-iobject')                                                                          // 3
  , toPrimitive    = require('./_to-primitive')                                                                        // 4
  , has            = require('./_has')                                                                                 // 5
  , IE8_DOM_DEFINE = require('./_ie8-dom-define')                                                                      // 6
  , gOPD           = Object.getOwnPropertyDescriptor;                                                                  // 7
                                                                                                                       // 8
exports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P){                                // 9
  O = toIObject(O);                                                                                                    // 10
  P = toPrimitive(P, true);                                                                                            // 11
  if(IE8_DOM_DEFINE)try {                                                                                              // 12
    return gOPD(O, P);                                                                                                 // 13
  } catch(e){ /* empty */ }                                                                                            // 14
  if(has(O, P))return createDesc(!pIE.f.call(O, P), O[P]);                                                             // 15
};                                                                                                                     // 16
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.object.to-string.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/es6.object.to-string.js                                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
                                                                                                                       // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"es7.symbol.async-iterator.js":["./_wks-define",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/es7.symbol.async-iterator.js                                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('./_wks-define')('asyncIterator');                                                                             // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es7.symbol.observable.js":["./_wks-define",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/es7.symbol.observable.js                                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('./_wks-define')('observable');                                                                                // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.object.set-prototype-of.js":["./_export","./_set-proto",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/es6.object.set-prototype-of.js                                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.3.19 Object.setPrototypeOf(O, proto)                                                                           // 1
var $export = require('./_export');                                                                                    // 2
$export($export.S, 'Object', {setPrototypeOf: require('./_set-proto').set});                                           // 3
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_set-proto.js":["./_is-object","./_an-object","./_ctx","./_object-gopd",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/_set-proto.js                                                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// Works with __proto__ only. Old v8 can't work with null proto objects.                                               // 1
/* eslint-disable no-proto */                                                                                          // 2
var isObject = require('./_is-object')                                                                                 // 3
  , anObject = require('./_an-object');                                                                                // 4
var check = function(O, proto){                                                                                        // 5
  anObject(O);                                                                                                         // 6
  if(!isObject(proto) && proto !== null)throw TypeError(proto + ": can't set as prototype!");                          // 7
};                                                                                                                     // 8
module.exports = {                                                                                                     // 9
  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line                                            // 10
    function(test, buggy, set){                                                                                        // 11
      try {                                                                                                            // 12
        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);     // 13
        set(test, []);                                                                                                 // 14
        buggy = !(test instanceof Array);                                                                              // 15
      } catch(e){ buggy = true; }                                                                                      // 16
      return function setPrototypeOf(O, proto){                                                                        // 17
        check(O, proto);                                                                                               // 18
        if(buggy)O.__proto__ = proto;                                                                                  // 19
        else set(O, proto);                                                                                            // 20
        return O;                                                                                                      // 21
      };                                                                                                               // 22
    }({}, false) : undefined),                                                                                         // 23
  check: check                                                                                                         // 24
};                                                                                                                     // 25
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.object.create.js":["./_export","./_object-create",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/core-js/library/modules/es6.object.create.js                                                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var $export = require('./_export')                                                                                     // 1
// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])                                                                 // 2
$export($export.S, 'Object', {create: require('./_object-create')});                                                   // 3
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]}}}}},{"extensions":[".js",".json"]});
var exports = require("./node_modules/meteor/modules/client.js");

/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package.modules = exports, {
  meteorInstall: meteorInstall,
  Buffer: Buffer,
  process: process
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var meteorInstall = Package.modules.meteorInstall;
var Buffer = Package.modules.Buffer;
var process = Package.modules.process;

/* Package-scope variables */
var Promise;

var require = meteorInstall({"node_modules":{"meteor":{"promise":{"client.js":["meteor-promise","./common.js",function(require,exports){

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                  //
// packages/promise/client.js                                                                                       //
//                                                                                                                  //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                    //
require("meteor-promise").makeCompatible(                                                                           // 1
  exports.Promise = require("./common.js").Promise                                                                  // 2
);                                                                                                                  // 3
                                                                                                                    // 4
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"common.js":["promise/lib/es6-extensions",function(require,exports){

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                  //
// packages/promise/common.js                                                                                       //
//                                                                                                                  //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                    //
var global = this;                                                                                                  // 1
                                                                                                                    // 2
if (typeof global.Promise === "function") {                                                                         // 3
  exports.Promise = global.Promise;                                                                                 // 4
} else {                                                                                                            // 5
  exports.Promise = require("promise/lib/es6-extensions");                                                          // 6
}                                                                                                                   // 7
                                                                                                                    // 8
exports.Promise.prototype.done = function (onFulfilled, onRejected) {                                               // 9
  var self = this;                                                                                                  // 10
                                                                                                                    // 11
  if (arguments.length > 0) {                                                                                       // 12
    self = this.then.apply(this, arguments);                                                                        // 13
  }                                                                                                                 // 14
                                                                                                                    // 15
  self.then(null, function (err) {                                                                                  // 16
    Meteor._setImmediate(function () {                                                                              // 17
      throw err;                                                                                                    // 18
    });                                                                                                             // 19
  });                                                                                                               // 20
};                                                                                                                  // 21
                                                                                                                    // 22
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"node_modules":{"meteor-promise":{"package.json":function(require,exports){

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                  //
// ../../.0.8.8.1jn8psc++os+web.browser+web.cordova/npm/node_modules/meteor-promise/package.json                    //
//                                                                                                                  //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                    //
exports.name = "meteor-promise";                                                                                    // 1
exports.version = "0.8.0";                                                                                          // 2
exports.main = "promise_server.js";                                                                                 // 3
exports.browser = "promise_client.js";                                                                              // 4
                                                                                                                    // 5
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"promise_client.js":function(require,exports){

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                  //
// node_modules/meteor/promise/node_modules/meteor-promise/promise_client.js                                        //
//                                                                                                                  //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                    //
exports.makeCompatible = function (Promise) {                                                                       // 1
  var es6PromiseThen = Promise.prototype.then;                                                                      // 2
                                                                                                                    // 3
  Promise.prototype.then = function (onResolved, onRejected) {                                                      // 4
    if (typeof Meteor === "object" &&                                                                               // 5
        typeof Meteor.bindEnvironment === "function") {                                                             // 6
      return es6PromiseThen.call(                                                                                   // 7
        this,                                                                                                       // 8
        onResolved && Meteor.bindEnvironment(onResolved, raise),                                                    // 9
        onRejected && Meteor.bindEnvironment(onRejected, raise)                                                     // 10
      );                                                                                                            // 11
    }                                                                                                               // 12
                                                                                                                    // 13
    return es6PromiseThen.call(this, onResolved, onRejected);                                                       // 14
  };                                                                                                                // 15
};                                                                                                                  // 16
                                                                                                                    // 17
function raise(exception) {                                                                                         // 18
  throw exception;                                                                                                  // 19
}                                                                                                                   // 20
                                                                                                                    // 21
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"promise":{"lib":{"es6-extensions.js":["./core.js",function(require,exports,module){

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                  //
// node_modules/meteor/promise/node_modules/promise/lib/es6-extensions.js                                           //
//                                                                                                                  //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                    //
'use strict';                                                                                                       // 1
                                                                                                                    // 2
//This file contains the ES6 extensions to the core Promises/A+ API                                                 // 3
                                                                                                                    // 4
var Promise = require('./core.js');                                                                                 // 5
                                                                                                                    // 6
module.exports = Promise;                                                                                           // 7
                                                                                                                    // 8
/* Static Functions */                                                                                              // 9
                                                                                                                    // 10
var TRUE = valuePromise(true);                                                                                      // 11
var FALSE = valuePromise(false);                                                                                    // 12
var NULL = valuePromise(null);                                                                                      // 13
var UNDEFINED = valuePromise(undefined);                                                                            // 14
var ZERO = valuePromise(0);                                                                                         // 15
var EMPTYSTRING = valuePromise('');                                                                                 // 16
                                                                                                                    // 17
function valuePromise(value) {                                                                                      // 18
  var p = new Promise(Promise._61);                                                                                 // 19
  p._81 = 1;                                                                                                        // 20
  p._65 = value;                                                                                                    // 21
  return p;                                                                                                         // 22
}                                                                                                                   // 23
Promise.resolve = function (value) {                                                                                // 24
  if (value instanceof Promise) return value;                                                                       // 25
                                                                                                                    // 26
  if (value === null) return NULL;                                                                                  // 27
  if (value === undefined) return UNDEFINED;                                                                        // 28
  if (value === true) return TRUE;                                                                                  // 29
  if (value === false) return FALSE;                                                                                // 30
  if (value === 0) return ZERO;                                                                                     // 31
  if (value === '') return EMPTYSTRING;                                                                             // 32
                                                                                                                    // 33
  if (typeof value === 'object' || typeof value === 'function') {                                                   // 34
    try {                                                                                                           // 35
      var then = value.then;                                                                                        // 36
      if (typeof then === 'function') {                                                                             // 37
        return new Promise(then.bind(value));                                                                       // 38
      }                                                                                                             // 39
    } catch (ex) {                                                                                                  // 40
      return new Promise(function (resolve, reject) {                                                               // 41
        reject(ex);                                                                                                 // 42
      });                                                                                                           // 43
    }                                                                                                               // 44
  }                                                                                                                 // 45
  return valuePromise(value);                                                                                       // 46
};                                                                                                                  // 47
                                                                                                                    // 48
Promise.all = function (arr) {                                                                                      // 49
  var args = Array.prototype.slice.call(arr);                                                                       // 50
                                                                                                                    // 51
  return new Promise(function (resolve, reject) {                                                                   // 52
    if (args.length === 0) return resolve([]);                                                                      // 53
    var remaining = args.length;                                                                                    // 54
    function res(i, val) {                                                                                          // 55
      if (val && (typeof val === 'object' || typeof val === 'function')) {                                          // 56
        if (val instanceof Promise && val.then === Promise.prototype.then) {                                        // 57
          while (val._81 === 3) {                                                                                   // 58
            val = val._65;                                                                                          // 59
          }                                                                                                         // 60
          if (val._81 === 1) return res(i, val._65);                                                                // 61
          if (val._81 === 2) reject(val._65);                                                                       // 62
          val.then(function (val) {                                                                                 // 63
            res(i, val);                                                                                            // 64
          }, reject);                                                                                               // 65
          return;                                                                                                   // 66
        } else {                                                                                                    // 67
          var then = val.then;                                                                                      // 68
          if (typeof then === 'function') {                                                                         // 69
            var p = new Promise(then.bind(val));                                                                    // 70
            p.then(function (val) {                                                                                 // 71
              res(i, val);                                                                                          // 72
            }, reject);                                                                                             // 73
            return;                                                                                                 // 74
          }                                                                                                         // 75
        }                                                                                                           // 76
      }                                                                                                             // 77
      args[i] = val;                                                                                                // 78
      if (--remaining === 0) {                                                                                      // 79
        resolve(args);                                                                                              // 80
      }                                                                                                             // 81
    }                                                                                                               // 82
    for (var i = 0; i < args.length; i++) {                                                                         // 83
      res(i, args[i]);                                                                                              // 84
    }                                                                                                               // 85
  });                                                                                                               // 86
};                                                                                                                  // 87
                                                                                                                    // 88
Promise.reject = function (value) {                                                                                 // 89
  return new Promise(function (resolve, reject) {                                                                   // 90
    reject(value);                                                                                                  // 91
  });                                                                                                               // 92
};                                                                                                                  // 93
                                                                                                                    // 94
Promise.race = function (values) {                                                                                  // 95
  return new Promise(function (resolve, reject) {                                                                   // 96
    values.forEach(function(value){                                                                                 // 97
      Promise.resolve(value).then(resolve, reject);                                                                 // 98
    });                                                                                                             // 99
  });                                                                                                               // 100
};                                                                                                                  // 101
                                                                                                                    // 102
/* Prototype Methods */                                                                                             // 103
                                                                                                                    // 104
Promise.prototype['catch'] = function (onRejected) {                                                                // 105
  return this.then(null, onRejected);                                                                               // 106
};                                                                                                                  // 107
                                                                                                                    // 108
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"core.js":["asap/raw",function(require,exports,module){

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                  //
// node_modules/meteor/promise/node_modules/promise/lib/core.js                                                     //
//                                                                                                                  //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                    //
'use strict';                                                                                                       // 1
                                                                                                                    // 2
var asap = require('asap/raw');                                                                                     // 3
                                                                                                                    // 4
function noop() {}                                                                                                  // 5
                                                                                                                    // 6
// States:                                                                                                          // 7
//                                                                                                                  // 8
// 0 - pending                                                                                                      // 9
// 1 - fulfilled with _value                                                                                        // 10
// 2 - rejected with _value                                                                                         // 11
// 3 - adopted the state of another promise, _value                                                                 // 12
//                                                                                                                  // 13
// once the state is no longer pending (0) it is immutable                                                          // 14
                                                                                                                    // 15
// All `_` prefixed properties will be reduced to `_{random number}`                                                // 16
// at build time to obfuscate them and discourage their use.                                                        // 17
// We don't use symbols or Object.defineProperty to fully hide them                                                 // 18
// because the performance isn't good enough.                                                                       // 19
                                                                                                                    // 20
                                                                                                                    // 21
// to avoid using try/catch inside critical functions, we                                                           // 22
// extract them to here.                                                                                            // 23
var LAST_ERROR = null;                                                                                              // 24
var IS_ERROR = {};                                                                                                  // 25
function getThen(obj) {                                                                                             // 26
  try {                                                                                                             // 27
    return obj.then;                                                                                                // 28
  } catch (ex) {                                                                                                    // 29
    LAST_ERROR = ex;                                                                                                // 30
    return IS_ERROR;                                                                                                // 31
  }                                                                                                                 // 32
}                                                                                                                   // 33
                                                                                                                    // 34
function tryCallOne(fn, a) {                                                                                        // 35
  try {                                                                                                             // 36
    return fn(a);                                                                                                   // 37
  } catch (ex) {                                                                                                    // 38
    LAST_ERROR = ex;                                                                                                // 39
    return IS_ERROR;                                                                                                // 40
  }                                                                                                                 // 41
}                                                                                                                   // 42
function tryCallTwo(fn, a, b) {                                                                                     // 43
  try {                                                                                                             // 44
    fn(a, b);                                                                                                       // 45
  } catch (ex) {                                                                                                    // 46
    LAST_ERROR = ex;                                                                                                // 47
    return IS_ERROR;                                                                                                // 48
  }                                                                                                                 // 49
}                                                                                                                   // 50
                                                                                                                    // 51
module.exports = Promise;                                                                                           // 52
                                                                                                                    // 53
function Promise(fn) {                                                                                              // 54
  if (typeof this !== 'object') {                                                                                   // 55
    throw new TypeError('Promises must be constructed via new');                                                    // 56
  }                                                                                                                 // 57
  if (typeof fn !== 'function') {                                                                                   // 58
    throw new TypeError('not a function');                                                                          // 59
  }                                                                                                                 // 60
  this._45 = 0;                                                                                                     // 61
  this._81 = 0;                                                                                                     // 62
  this._65 = null;                                                                                                  // 63
  this._54 = null;                                                                                                  // 64
  if (fn === noop) return;                                                                                          // 65
  doResolve(fn, this);                                                                                              // 66
}                                                                                                                   // 67
Promise._10 = null;                                                                                                 // 68
Promise._97 = null;                                                                                                 // 69
Promise._61 = noop;                                                                                                 // 70
                                                                                                                    // 71
Promise.prototype.then = function(onFulfilled, onRejected) {                                                        // 72
  if (this.constructor !== Promise) {                                                                               // 73
    return safeThen(this, onFulfilled, onRejected);                                                                 // 74
  }                                                                                                                 // 75
  var res = new Promise(noop);                                                                                      // 76
  handle(this, new Handler(onFulfilled, onRejected, res));                                                          // 77
  return res;                                                                                                       // 78
};                                                                                                                  // 79
                                                                                                                    // 80
function safeThen(self, onFulfilled, onRejected) {                                                                  // 81
  return new self.constructor(function (resolve, reject) {                                                          // 82
    var res = new Promise(noop);                                                                                    // 83
    res.then(resolve, reject);                                                                                      // 84
    handle(self, new Handler(onFulfilled, onRejected, res));                                                        // 85
  });                                                                                                               // 86
};                                                                                                                  // 87
function handle(self, deferred) {                                                                                   // 88
  while (self._81 === 3) {                                                                                          // 89
    self = self._65;                                                                                                // 90
  }                                                                                                                 // 91
  if (Promise._10) {                                                                                                // 92
    Promise._10(self);                                                                                              // 93
  }                                                                                                                 // 94
  if (self._81 === 0) {                                                                                             // 95
    if (self._45 === 0) {                                                                                           // 96
      self._45 = 1;                                                                                                 // 97
      self._54 = deferred;                                                                                          // 98
      return;                                                                                                       // 99
    }                                                                                                               // 100
    if (self._45 === 1) {                                                                                           // 101
      self._45 = 2;                                                                                                 // 102
      self._54 = [self._54, deferred];                                                                              // 103
      return;                                                                                                       // 104
    }                                                                                                               // 105
    self._54.push(deferred);                                                                                        // 106
    return;                                                                                                         // 107
  }                                                                                                                 // 108
  handleResolved(self, deferred);                                                                                   // 109
}                                                                                                                   // 110
                                                                                                                    // 111
function handleResolved(self, deferred) {                                                                           // 112
  asap(function() {                                                                                                 // 113
    var cb = self._81 === 1 ? deferred.onFulfilled : deferred.onRejected;                                           // 114
    if (cb === null) {                                                                                              // 115
      if (self._81 === 1) {                                                                                         // 116
        resolve(deferred.promise, self._65);                                                                        // 117
      } else {                                                                                                      // 118
        reject(deferred.promise, self._65);                                                                         // 119
      }                                                                                                             // 120
      return;                                                                                                       // 121
    }                                                                                                               // 122
    var ret = tryCallOne(cb, self._65);                                                                             // 123
    if (ret === IS_ERROR) {                                                                                         // 124
      reject(deferred.promise, LAST_ERROR);                                                                         // 125
    } else {                                                                                                        // 126
      resolve(deferred.promise, ret);                                                                               // 127
    }                                                                                                               // 128
  });                                                                                                               // 129
}                                                                                                                   // 130
function resolve(self, newValue) {                                                                                  // 131
  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure
  if (newValue === self) {                                                                                          // 133
    return reject(                                                                                                  // 134
      self,                                                                                                         // 135
      new TypeError('A promise cannot be resolved with itself.')                                                    // 136
    );                                                                                                              // 137
  }                                                                                                                 // 138
  if (                                                                                                              // 139
    newValue &&                                                                                                     // 140
    (typeof newValue === 'object' || typeof newValue === 'function')                                                // 141
  ) {                                                                                                               // 142
    var then = getThen(newValue);                                                                                   // 143
    if (then === IS_ERROR) {                                                                                        // 144
      return reject(self, LAST_ERROR);                                                                              // 145
    }                                                                                                               // 146
    if (                                                                                                            // 147
      then === self.then &&                                                                                         // 148
      newValue instanceof Promise                                                                                   // 149
    ) {                                                                                                             // 150
      self._81 = 3;                                                                                                 // 151
      self._65 = newValue;                                                                                          // 152
      finale(self);                                                                                                 // 153
      return;                                                                                                       // 154
    } else if (typeof then === 'function') {                                                                        // 155
      doResolve(then.bind(newValue), self);                                                                         // 156
      return;                                                                                                       // 157
    }                                                                                                               // 158
  }                                                                                                                 // 159
  self._81 = 1;                                                                                                     // 160
  self._65 = newValue;                                                                                              // 161
  finale(self);                                                                                                     // 162
}                                                                                                                   // 163
                                                                                                                    // 164
function reject(self, newValue) {                                                                                   // 165
  self._81 = 2;                                                                                                     // 166
  self._65 = newValue;                                                                                              // 167
  if (Promise._97) {                                                                                                // 168
    Promise._97(self, newValue);                                                                                    // 169
  }                                                                                                                 // 170
  finale(self);                                                                                                     // 171
}                                                                                                                   // 172
function finale(self) {                                                                                             // 173
  if (self._45 === 1) {                                                                                             // 174
    handle(self, self._54);                                                                                         // 175
    self._54 = null;                                                                                                // 176
  }                                                                                                                 // 177
  if (self._45 === 2) {                                                                                             // 178
    for (var i = 0; i < self._54.length; i++) {                                                                     // 179
      handle(self, self._54[i]);                                                                                    // 180
    }                                                                                                               // 181
    self._54 = null;                                                                                                // 182
  }                                                                                                                 // 183
}                                                                                                                   // 184
                                                                                                                    // 185
function Handler(onFulfilled, onRejected, promise){                                                                 // 186
  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;                                        // 187
  this.onRejected = typeof onRejected === 'function' ? onRejected : null;                                           // 188
  this.promise = promise;                                                                                           // 189
}                                                                                                                   // 190
                                                                                                                    // 191
/**                                                                                                                 // 192
 * Take a potentially misbehaving resolver function and make sure                                                   // 193
 * onFulfilled and onRejected are only called once.                                                                 // 194
 *                                                                                                                  // 195
 * Makes no guarantees about asynchrony.                                                                            // 196
 */                                                                                                                 // 197
function doResolve(fn, promise) {                                                                                   // 198
  var done = false;                                                                                                 // 199
  var res = tryCallTwo(fn, function (value) {                                                                       // 200
    if (done) return;                                                                                               // 201
    done = true;                                                                                                    // 202
    resolve(promise, value);                                                                                        // 203
  }, function (reason) {                                                                                            // 204
    if (done) return;                                                                                               // 205
    done = true;                                                                                                    // 206
    reject(promise, reason);                                                                                        // 207
  })                                                                                                                // 208
  if (!done && res === IS_ERROR) {                                                                                  // 209
    done = true;                                                                                                    // 210
    reject(promise, LAST_ERROR);                                                                                    // 211
  }                                                                                                                 // 212
}                                                                                                                   // 213
                                                                                                                    // 214
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]}},"asap":{"raw.js":["domain",function(require,exports,module){

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                  //
// node_modules/meteor/promise/node_modules/asap/raw.js                                                             //
//                                                                                                                  //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                    //
"use strict";                                                                                                       // 1
                                                                                                                    // 2
var domain; // The domain module is executed on demand                                                              // 3
var hasSetImmediate = typeof setImmediate === "function";                                                           // 4
                                                                                                                    // 5
// Use the fastest means possible to execute a task in its own turn, with                                           // 6
// priority over other events including network IO events in Node.js.                                               // 7
//                                                                                                                  // 8
// An exception thrown by a task will permanently interrupt the processing of                                       // 9
// subsequent tasks. The higher level `asap` function ensures that if an                                            // 10
// exception is thrown by a task, that the task queue will continue flushing as                                     // 11
// soon as possible, but if you use `rawAsap` directly, you are responsible to                                      // 12
// either ensure that no exceptions are thrown from your task, or to manually                                       // 13
// call `rawAsap.requestFlush` if an exception is thrown.                                                           // 14
module.exports = rawAsap;                                                                                           // 15
function rawAsap(task) {                                                                                            // 16
    if (!queue.length) {                                                                                            // 17
        requestFlush();                                                                                             // 18
        flushing = true;                                                                                            // 19
    }                                                                                                               // 20
    // Avoids a function call                                                                                       // 21
    queue[queue.length] = task;                                                                                     // 22
}                                                                                                                   // 23
                                                                                                                    // 24
var queue = [];                                                                                                     // 25
// Once a flush has been requested, no further calls to `requestFlush` are                                          // 26
// necessary until the next `flush` completes.                                                                      // 27
var flushing = false;                                                                                               // 28
// The position of the next task to execute in the task queue. This is                                              // 29
// preserved between calls to `flush` so that it can be resumed if                                                  // 30
// a task throws an exception.                                                                                      // 31
var index = 0;                                                                                                      // 32
// If a task schedules additional tasks recursively, the task queue can grow                                        // 33
// unbounded. To prevent memory excaustion, the task queue will periodically                                        // 34
// truncate already-completed tasks.                                                                                // 35
var capacity = 1024;                                                                                                // 36
                                                                                                                    // 37
// The flush function processes all tasks that have been scheduled with                                             // 38
// `rawAsap` unless and until one of those tasks throws an exception.                                               // 39
// If a task throws an exception, `flush` ensures that its state will remain                                        // 40
// consistent and will resume where it left off when called again.                                                  // 41
// However, `flush` does not make any arrangements to be called again if an                                         // 42
// exception is thrown.                                                                                             // 43
function flush() {                                                                                                  // 44
    while (index < queue.length) {                                                                                  // 45
        var currentIndex = index;                                                                                   // 46
        // Advance the index before calling the task. This ensures that we will                                     // 47
        // begin flushing on the next task the task throws an error.                                                // 48
        index = index + 1;                                                                                          // 49
        queue[currentIndex].call();                                                                                 // 50
        // Prevent leaking memory for long chains of recursive calls to `asap`.                                     // 51
        // If we call `asap` within tasks scheduled by `asap`, the queue will                                       // 52
        // grow, but to avoid an O(n) walk for every task we execute, we don't                                      // 53
        // shift tasks off the queue after they have been executed.                                                 // 54
        // Instead, we periodically shift 1024 tasks off the queue.                                                 // 55
        if (index > capacity) {                                                                                     // 56
            // Manually shift all values starting at the index back to the                                          // 57
            // beginning of the queue.                                                                              // 58
            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {                        // 59
                queue[scan] = queue[scan + index];                                                                  // 60
            }                                                                                                       // 61
            queue.length -= index;                                                                                  // 62
            index = 0;                                                                                              // 63
        }                                                                                                           // 64
    }                                                                                                               // 65
    queue.length = 0;                                                                                               // 66
    index = 0;                                                                                                      // 67
    flushing = false;                                                                                               // 68
}                                                                                                                   // 69
                                                                                                                    // 70
rawAsap.requestFlush = requestFlush;                                                                                // 71
function requestFlush() {                                                                                           // 72
    // Ensure flushing is not bound to any domain.                                                                  // 73
    // It is not sufficient to exit the domain, because domains exist on a stack.                                   // 74
    // To execute code outside of any domain, the following dance is necessary.                                     // 75
    var parentDomain = process.domain;                                                                              // 76
    if (parentDomain) {                                                                                             // 77
        if (!domain) {                                                                                              // 78
            // Lazy execute the domain module.                                                                      // 79
            // Only employed if the user elects to use domains.                                                     // 80
            domain = require("domain");                                                                             // 81
        }                                                                                                           // 82
        domain.active = process.domain = null;                                                                      // 83
    }                                                                                                               // 84
                                                                                                                    // 85
    // `setImmediate` is slower that `process.nextTick`, but `process.nextTick`                                     // 86
    // cannot handle recursion.                                                                                     // 87
    // `requestFlush` will only be called recursively from `asap.js`, to resume                                     // 88
    // flushing after an error is thrown into a domain.                                                             // 89
    // Conveniently, `setImmediate` was introduced in the same version                                              // 90
    // `process.nextTick` started throwing recursion errors.                                                        // 91
    if (flushing && hasSetImmediate) {                                                                              // 92
        setImmediate(flush);                                                                                        // 93
    } else {                                                                                                        // 94
        process.nextTick(flush);                                                                                    // 95
    }                                                                                                               // 96
                                                                                                                    // 97
    if (parentDomain) {                                                                                             // 98
        domain.active = process.domain = parentDomain;                                                              // 99
    }                                                                                                               // 100
}                                                                                                                   // 101
                                                                                                                    // 102
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]}}}}}},{"extensions":[".js",".json"]});
var exports = require("./node_modules/meteor/promise/client.js");

/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package.promise = exports, {
  Promise: Promise
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var meteorInstall = Package.modules.meteorInstall;
var Buffer = Package.modules.Buffer;
var process = Package.modules.process;
var Promise = Package.promise.Promise;

/* Package-scope variables */
var Symbol, Map, Set, __g, __e;

var require = meteorInstall({"node_modules":{"meteor":{"ecmascript-runtime":{"runtime.js":["meteor-ecmascript-runtime",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/ecmascript-runtime/runtime.js                                                                              //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// TODO Allow just api.mainModule("meteor-ecmascript-runtime");                                                        // 1
module.exports = require("meteor-ecmascript-runtime");                                                                 // 2
                                                                                                                       // 3
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"node_modules":{"meteor-ecmascript-runtime":{"package.json":function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// ../../.0.3.15.1ynew2g++os+web.browser+web.cordova/npm/node_modules/meteor-ecmascript-runtime/package.json           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.name = "meteor-ecmascript-runtime";                                                                            // 1
exports.version = "0.2.9";                                                                                             // 2
exports.main = "index.js";                                                                                             // 3
                                                                                                                       // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"index.js":["core-js/es6/object","core-js/es6/array","core-js/es6/string","core-js/es6/function","core-js/fn/array/includes","core-js/fn/object/values","core-js/fn/object/entries","core-js/fn/object/get-own-property-descriptors","core-js/fn/string/pad-start","core-js/fn/string/pad-end","core-js/fn/string/trim-start","core-js/fn/string/trim-end","core-js/es6/symbol","core-js/es6/map","core-js/es6/set",function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/meteor-ecmascript-runtime/index.js                              //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require("core-js/es6/object");                                                                                         // 1
require("core-js/es6/array");                                                                                          // 2
require("core-js/es6/string");                                                                                         // 3
require("core-js/es6/function");                                                                                       // 4
require("core-js/fn/array/includes");                                                                                  // 5
require("core-js/fn/object/values");                                                                                   // 6
require("core-js/fn/object/entries");                                                                                  // 7
require("core-js/fn/object/get-own-property-descriptors");                                                             // 8
require("core-js/fn/string/pad-start");                                                                                // 9
require("core-js/fn/string/pad-end");                                                                                  // 10
require("core-js/fn/string/trim-start");                                                                               // 11
require("core-js/fn/string/trim-end");                                                                                 // 12
                                                                                                                       // 13
Symbol = exports.Symbol = global.Symbol ||                                                                             // 14
  require("core-js/es6/symbol");                                                                                       // 15
                                                                                                                       // 16
Map = exports.Map = require("core-js/es6/map");                                                                        // 17
Set = exports.Set = require("core-js/es6/set");                                                                        // 18
                                                                                                                       // 19
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]},"core-js":{"es6":{"object.js":["../modules/es6.symbol","../modules/es6.object.create","../modules/es6.object.define-property","../modules/es6.object.define-properties","../modules/es6.object.get-own-property-descriptor","../modules/es6.object.get-prototype-of","../modules/es6.object.keys","../modules/es6.object.get-own-property-names","../modules/es6.object.freeze","../modules/es6.object.seal","../modules/es6.object.prevent-extensions","../modules/es6.object.is-frozen","../modules/es6.object.is-sealed","../modules/es6.object.is-extensible","../modules/es6.object.assign","../modules/es6.object.is","../modules/es6.object.set-prototype-of","../modules/es6.object.to-string","../modules/_core",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/es6/object.js                                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('../modules/es6.symbol');                                                                                      // 1
require('../modules/es6.object.create');                                                                               // 2
require('../modules/es6.object.define-property');                                                                      // 3
require('../modules/es6.object.define-properties');                                                                    // 4
require('../modules/es6.object.get-own-property-descriptor');                                                          // 5
require('../modules/es6.object.get-prototype-of');                                                                     // 6
require('../modules/es6.object.keys');                                                                                 // 7
require('../modules/es6.object.get-own-property-names');                                                               // 8
require('../modules/es6.object.freeze');                                                                               // 9
require('../modules/es6.object.seal');                                                                                 // 10
require('../modules/es6.object.prevent-extensions');                                                                   // 11
require('../modules/es6.object.is-frozen');                                                                            // 12
require('../modules/es6.object.is-sealed');                                                                            // 13
require('../modules/es6.object.is-extensible');                                                                        // 14
require('../modules/es6.object.assign');                                                                               // 15
require('../modules/es6.object.is');                                                                                   // 16
require('../modules/es6.object.set-prototype-of');                                                                     // 17
require('../modules/es6.object.to-string');                                                                            // 18
                                                                                                                       // 19
module.exports = require('../modules/_core').Object;                                                                   // 20
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"array.js":["../modules/es6.string.iterator","../modules/es6.array.is-array","../modules/es6.array.from","../modules/es6.array.of","../modules/es6.array.join","../modules/es6.array.slice","../modules/es6.array.sort","../modules/es6.array.for-each","../modules/es6.array.map","../modules/es6.array.filter","../modules/es6.array.some","../modules/es6.array.every","../modules/es6.array.reduce","../modules/es6.array.reduce-right","../modules/es6.array.index-of","../modules/es6.array.last-index-of","../modules/es6.array.copy-within","../modules/es6.array.fill","../modules/es6.array.find","../modules/es6.array.find-index","../modules/es6.array.species","../modules/es6.array.iterator","../modules/_core",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/es6/array.js                                            //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('../modules/es6.string.iterator');                                                                             // 1
require('../modules/es6.array.is-array');                                                                              // 2
require('../modules/es6.array.from');                                                                                  // 3
require('../modules/es6.array.of');                                                                                    // 4
require('../modules/es6.array.join');                                                                                  // 5
require('../modules/es6.array.slice');                                                                                 // 6
require('../modules/es6.array.sort');                                                                                  // 7
require('../modules/es6.array.for-each');                                                                              // 8
require('../modules/es6.array.map');                                                                                   // 9
require('../modules/es6.array.filter');                                                                                // 10
require('../modules/es6.array.some');                                                                                  // 11
require('../modules/es6.array.every');                                                                                 // 12
require('../modules/es6.array.reduce');                                                                                // 13
require('../modules/es6.array.reduce-right');                                                                          // 14
require('../modules/es6.array.index-of');                                                                              // 15
require('../modules/es6.array.last-index-of');                                                                         // 16
require('../modules/es6.array.copy-within');                                                                           // 17
require('../modules/es6.array.fill');                                                                                  // 18
require('../modules/es6.array.find');                                                                                  // 19
require('../modules/es6.array.find-index');                                                                            // 20
require('../modules/es6.array.species');                                                                               // 21
require('../modules/es6.array.iterator');                                                                              // 22
module.exports = require('../modules/_core').Array;                                                                    // 23
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"string.js":["../modules/es6.string.from-code-point","../modules/es6.string.raw","../modules/es6.string.trim","../modules/es6.string.iterator","../modules/es6.string.code-point-at","../modules/es6.string.ends-with","../modules/es6.string.includes","../modules/es6.string.repeat","../modules/es6.string.starts-with","../modules/es6.string.anchor","../modules/es6.string.big","../modules/es6.string.blink","../modules/es6.string.bold","../modules/es6.string.fixed","../modules/es6.string.fontcolor","../modules/es6.string.fontsize","../modules/es6.string.italics","../modules/es6.string.link","../modules/es6.string.small","../modules/es6.string.strike","../modules/es6.string.sub","../modules/es6.string.sup","../modules/es6.regexp.match","../modules/es6.regexp.replace","../modules/es6.regexp.search","../modules/es6.regexp.split","../modules/_core",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/es6/string.js                                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('../modules/es6.string.from-code-point');                                                                      // 1
require('../modules/es6.string.raw');                                                                                  // 2
require('../modules/es6.string.trim');                                                                                 // 3
require('../modules/es6.string.iterator');                                                                             // 4
require('../modules/es6.string.code-point-at');                                                                        // 5
require('../modules/es6.string.ends-with');                                                                            // 6
require('../modules/es6.string.includes');                                                                             // 7
require('../modules/es6.string.repeat');                                                                               // 8
require('../modules/es6.string.starts-with');                                                                          // 9
require('../modules/es6.string.anchor');                                                                               // 10
require('../modules/es6.string.big');                                                                                  // 11
require('../modules/es6.string.blink');                                                                                // 12
require('../modules/es6.string.bold');                                                                                 // 13
require('../modules/es6.string.fixed');                                                                                // 14
require('../modules/es6.string.fontcolor');                                                                            // 15
require('../modules/es6.string.fontsize');                                                                             // 16
require('../modules/es6.string.italics');                                                                              // 17
require('../modules/es6.string.link');                                                                                 // 18
require('../modules/es6.string.small');                                                                                // 19
require('../modules/es6.string.strike');                                                                               // 20
require('../modules/es6.string.sub');                                                                                  // 21
require('../modules/es6.string.sup');                                                                                  // 22
require('../modules/es6.regexp.match');                                                                                // 23
require('../modules/es6.regexp.replace');                                                                              // 24
require('../modules/es6.regexp.search');                                                                               // 25
require('../modules/es6.regexp.split');                                                                                // 26
module.exports = require('../modules/_core').String;                                                                   // 27
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"function.js":["../modules/es6.function.bind","../modules/es6.function.name","../modules/es6.function.has-instance","../modules/_core",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/es6/function.js                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('../modules/es6.function.bind');                                                                               // 1
require('../modules/es6.function.name');                                                                               // 2
require('../modules/es6.function.has-instance');                                                                       // 3
module.exports = require('../modules/_core').Function;                                                                 // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"symbol.js":["../modules/es6.symbol","../modules/es6.object.to-string","../modules/_core",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/es6/symbol.js                                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('../modules/es6.symbol');                                                                                      // 1
require('../modules/es6.object.to-string');                                                                            // 2
module.exports = require('../modules/_core').Symbol;                                                                   // 3
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"map.js":["../modules/es6.object.to-string","../modules/es6.string.iterator","../modules/web.dom.iterable","../modules/es6.map","../modules/_core",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/es6/map.js                                              //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('../modules/es6.object.to-string');                                                                            // 1
require('../modules/es6.string.iterator');                                                                             // 2
require('../modules/web.dom.iterable');                                                                                // 3
require('../modules/es6.map');                                                                                         // 4
module.exports = require('../modules/_core').Map;                                                                      // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"set.js":["../modules/es6.object.to-string","../modules/es6.string.iterator","../modules/web.dom.iterable","../modules/es6.set","../modules/_core",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/es6/set.js                                              //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('../modules/es6.object.to-string');                                                                            // 1
require('../modules/es6.string.iterator');                                                                             // 2
require('../modules/web.dom.iterable');                                                                                // 3
require('../modules/es6.set');                                                                                         // 4
module.exports = require('../modules/_core').Set;                                                                      // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]},"modules":{"es6.symbol.js":["./_global","./_has","./_descriptors","./_export","./_redefine","./_meta","./_fails","./_shared","./_set-to-string-tag","./_uid","./_wks","./_wks-ext","./_wks-define","./_keyof","./_enum-keys","./_is-array","./_an-object","./_to-iobject","./_to-primitive","./_property-desc","./_object-create","./_object-gopn-ext","./_object-gopd","./_object-dp","./_object-keys","./_object-gopn","./_object-pie","./_object-gops","./_library","./_hide",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.symbol.js                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// ECMAScript 6 symbols shim                                                                                           // 2
var global         = require('./_global')                                                                              // 3
  , has            = require('./_has')                                                                                 // 4
  , DESCRIPTORS    = require('./_descriptors')                                                                         // 5
  , $export        = require('./_export')                                                                              // 6
  , redefine       = require('./_redefine')                                                                            // 7
  , META           = require('./_meta').KEY                                                                            // 8
  , $fails         = require('./_fails')                                                                               // 9
  , shared         = require('./_shared')                                                                              // 10
  , setToStringTag = require('./_set-to-string-tag')                                                                   // 11
  , uid            = require('./_uid')                                                                                 // 12
  , wks            = require('./_wks')                                                                                 // 13
  , wksExt         = require('./_wks-ext')                                                                             // 14
  , wksDefine      = require('./_wks-define')                                                                          // 15
  , keyOf          = require('./_keyof')                                                                               // 16
  , enumKeys       = require('./_enum-keys')                                                                           // 17
  , isArray        = require('./_is-array')                                                                            // 18
  , anObject       = require('./_an-object')                                                                           // 19
  , toIObject      = require('./_to-iobject')                                                                          // 20
  , toPrimitive    = require('./_to-primitive')                                                                        // 21
  , createDesc     = require('./_property-desc')                                                                       // 22
  , _create        = require('./_object-create')                                                                       // 23
  , gOPNExt        = require('./_object-gopn-ext')                                                                     // 24
  , $GOPD          = require('./_object-gopd')                                                                         // 25
  , $DP            = require('./_object-dp')                                                                           // 26
  , $keys          = require('./_object-keys')                                                                         // 27
  , gOPD           = $GOPD.f                                                                                           // 28
  , dP             = $DP.f                                                                                             // 29
  , gOPN           = gOPNExt.f                                                                                         // 30
  , $Symbol        = global.Symbol                                                                                     // 31
  , $JSON          = global.JSON                                                                                       // 32
  , _stringify     = $JSON && $JSON.stringify                                                                          // 33
  , PROTOTYPE      = 'prototype'                                                                                       // 34
  , HIDDEN         = wks('_hidden')                                                                                    // 35
  , TO_PRIMITIVE   = wks('toPrimitive')                                                                                // 36
  , isEnum         = {}.propertyIsEnumerable                                                                           // 37
  , SymbolRegistry = shared('symbol-registry')                                                                         // 38
  , AllSymbols     = shared('symbols')                                                                                 // 39
  , OPSymbols      = shared('op-symbols')                                                                              // 40
  , ObjectProto    = Object[PROTOTYPE]                                                                                 // 41
  , USE_NATIVE     = typeof $Symbol == 'function'                                                                      // 42
  , QObject        = global.QObject;                                                                                   // 43
// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173                                      // 44
var setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;                                         // 45
                                                                                                                       // 46
// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687                                         // 47
var setSymbolDesc = DESCRIPTORS && $fails(function(){                                                                  // 48
  return _create(dP({}, 'a', {                                                                                         // 49
    get: function(){ return dP(this, 'a', {value: 7}).a; }                                                             // 50
  })).a != 7;                                                                                                          // 51
}) ? function(it, key, D){                                                                                             // 52
  var protoDesc = gOPD(ObjectProto, key);                                                                              // 53
  if(protoDesc)delete ObjectProto[key];                                                                                // 54
  dP(it, key, D);                                                                                                      // 55
  if(protoDesc && it !== ObjectProto)dP(ObjectProto, key, protoDesc);                                                  // 56
} : dP;                                                                                                                // 57
                                                                                                                       // 58
var wrap = function(tag){                                                                                              // 59
  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);                                                             // 60
  sym._k = tag;                                                                                                        // 61
  return sym;                                                                                                          // 62
};                                                                                                                     // 63
                                                                                                                       // 64
var isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function(it){                                       // 65
  return typeof it == 'symbol';                                                                                        // 66
} : function(it){                                                                                                      // 67
  return it instanceof $Symbol;                                                                                        // 68
};                                                                                                                     // 69
                                                                                                                       // 70
var $defineProperty = function defineProperty(it, key, D){                                                             // 71
  if(it === ObjectProto)$defineProperty(OPSymbols, key, D);                                                            // 72
  anObject(it);                                                                                                        // 73
  key = toPrimitive(key, true);                                                                                        // 74
  anObject(D);                                                                                                         // 75
  if(has(AllSymbols, key)){                                                                                            // 76
    if(!D.enumerable){                                                                                                 // 77
      if(!has(it, HIDDEN))dP(it, HIDDEN, createDesc(1, {}));                                                           // 78
      it[HIDDEN][key] = true;                                                                                          // 79
    } else {                                                                                                           // 80
      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;                                                   // 81
      D = _create(D, {enumerable: createDesc(0, false)});                                                              // 82
    } return setSymbolDesc(it, key, D);                                                                                // 83
  } return dP(it, key, D);                                                                                             // 84
};                                                                                                                     // 85
var $defineProperties = function defineProperties(it, P){                                                              // 86
  anObject(it);                                                                                                        // 87
  var keys = enumKeys(P = toIObject(P))                                                                                // 88
    , i    = 0                                                                                                         // 89
    , l = keys.length                                                                                                  // 90
    , key;                                                                                                             // 91
  while(l > i)$defineProperty(it, key = keys[i++], P[key]);                                                            // 92
  return it;                                                                                                           // 93
};                                                                                                                     // 94
var $create = function create(it, P){                                                                                  // 95
  return P === undefined ? _create(it) : $defineProperties(_create(it), P);                                            // 96
};                                                                                                                     // 97
var $propertyIsEnumerable = function propertyIsEnumerable(key){                                                        // 98
  var E = isEnum.call(this, key = toPrimitive(key, true));                                                             // 99
  if(this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return false;                                // 100
  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;           // 101
};                                                                                                                     // 102
var $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){                                            // 103
  it  = toIObject(it);                                                                                                 // 104
  key = toPrimitive(key, true);                                                                                        // 105
  if(it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return;                                        // 106
  var D = gOPD(it, key);                                                                                               // 107
  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;                           // 108
  return D;                                                                                                            // 109
};                                                                                                                     // 110
var $getOwnPropertyNames = function getOwnPropertyNames(it){                                                           // 111
  var names  = gOPN(toIObject(it))                                                                                     // 112
    , result = []                                                                                                      // 113
    , i      = 0                                                                                                       // 114
    , key;                                                                                                             // 115
  while(names.length > i){                                                                                             // 116
    if(!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META)result.push(key);                            // 117
  } return result;                                                                                                     // 118
};                                                                                                                     // 119
var $getOwnPropertySymbols = function getOwnPropertySymbols(it){                                                       // 120
  var IS_OP  = it === ObjectProto                                                                                      // 121
    , names  = gOPN(IS_OP ? OPSymbols : toIObject(it))                                                                 // 122
    , result = []                                                                                                      // 123
    , i      = 0                                                                                                       // 124
    , key;                                                                                                             // 125
  while(names.length > i){                                                                                             // 126
    if(has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true))result.push(AllSymbols[key]);       // 127
  } return result;                                                                                                     // 128
};                                                                                                                     // 129
                                                                                                                       // 130
// 19.4.1.1 Symbol([description])                                                                                      // 131
if(!USE_NATIVE){                                                                                                       // 132
  $Symbol = function Symbol(){                                                                                         // 133
    if(this instanceof $Symbol)throw TypeError('Symbol is not a constructor!');                                        // 134
    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);                                                    // 135
    var $set = function(value){                                                                                        // 136
      if(this === ObjectProto)$set.call(OPSymbols, value);                                                             // 137
      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;                                        // 138
      setSymbolDesc(this, tag, createDesc(1, value));                                                                  // 139
    };                                                                                                                 // 140
    if(DESCRIPTORS && setter)setSymbolDesc(ObjectProto, tag, {configurable: true, set: $set});                         // 141
    return wrap(tag);                                                                                                  // 142
  };                                                                                                                   // 143
  redefine($Symbol[PROTOTYPE], 'toString', function toString(){                                                        // 144
    return this._k;                                                                                                    // 145
  });                                                                                                                  // 146
                                                                                                                       // 147
  $GOPD.f = $getOwnPropertyDescriptor;                                                                                 // 148
  $DP.f   = $defineProperty;                                                                                           // 149
  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;                                                      // 150
  require('./_object-pie').f  = $propertyIsEnumerable;                                                                 // 151
  require('./_object-gops').f = $getOwnPropertySymbols;                                                                // 152
                                                                                                                       // 153
  if(DESCRIPTORS && !require('./_library')){                                                                           // 154
    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);                                        // 155
  }                                                                                                                    // 156
                                                                                                                       // 157
  wksExt.f = function(name){                                                                                           // 158
    return wrap(wks(name));                                                                                            // 159
  }                                                                                                                    // 160
}                                                                                                                      // 161
                                                                                                                       // 162
$export($export.G + $export.W + $export.F * !USE_NATIVE, {Symbol: $Symbol});                                           // 163
                                                                                                                       // 164
for(var symbols = (                                                                                                    // 165
  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14
  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'     // 167
).split(','), i = 0; symbols.length > i; )wks(symbols[i++]);                                                           // 168
                                                                                                                       // 169
for(var symbols = $keys(wks.store), i = 0; symbols.length > i; )wksDefine(symbols[i++]);                               // 170
                                                                                                                       // 171
$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {                                                               // 172
  // 19.4.2.1 Symbol.for(key)                                                                                          // 173
  'for': function(key){                                                                                                // 174
    return has(SymbolRegistry, key += '')                                                                              // 175
      ? SymbolRegistry[key]                                                                                            // 176
      : SymbolRegistry[key] = $Symbol(key);                                                                            // 177
  },                                                                                                                   // 178
  // 19.4.2.5 Symbol.keyFor(sym)                                                                                       // 179
  keyFor: function keyFor(key){                                                                                        // 180
    if(isSymbol(key))return keyOf(SymbolRegistry, key);                                                                // 181
    throw TypeError(key + ' is not a symbol!');                                                                        // 182
  },                                                                                                                   // 183
  useSetter: function(){ setter = true; },                                                                             // 184
  useSimple: function(){ setter = false; }                                                                             // 185
});                                                                                                                    // 186
                                                                                                                       // 187
$export($export.S + $export.F * !USE_NATIVE, 'Object', {                                                               // 188
  // 19.1.2.2 Object.create(O [, Properties])                                                                          // 189
  create: $create,                                                                                                     // 190
  // 19.1.2.4 Object.defineProperty(O, P, Attributes)                                                                  // 191
  defineProperty: $defineProperty,                                                                                     // 192
  // 19.1.2.3 Object.defineProperties(O, Properties)                                                                   // 193
  defineProperties: $defineProperties,                                                                                 // 194
  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)                                                                    // 195
  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,                                                                 // 196
  // 19.1.2.7 Object.getOwnPropertyNames(O)                                                                            // 197
  getOwnPropertyNames: $getOwnPropertyNames,                                                                           // 198
  // 19.1.2.8 Object.getOwnPropertySymbols(O)                                                                          // 199
  getOwnPropertySymbols: $getOwnPropertySymbols                                                                        // 200
});                                                                                                                    // 201
                                                                                                                       // 202
// 24.3.2 JSON.stringify(value [, replacer [, space]])                                                                 // 203
$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function(){                                            // 204
  var S = $Symbol();                                                                                                   // 205
  // MS Edge converts symbol values to JSON as {}                                                                      // 206
  // WebKit converts symbol values to JSON as null                                                                     // 207
  // V8 throws on boxed symbols                                                                                        // 208
  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';                   // 209
})), 'JSON', {                                                                                                         // 210
  stringify: function stringify(it){                                                                                   // 211
    if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined                                     // 212
    var args = [it]                                                                                                    // 213
      , i    = 1                                                                                                       // 214
      , replacer, $replacer;                                                                                           // 215
    while(arguments.length > i)args.push(arguments[i++]);                                                              // 216
    replacer = args[1];                                                                                                // 217
    if(typeof replacer == 'function')$replacer = replacer;                                                             // 218
    if($replacer || !isArray(replacer))replacer = function(key, value){                                                // 219
      if($replacer)value = $replacer.call(this, key, value);                                                           // 220
      if(!isSymbol(value))return value;                                                                                // 221
    };                                                                                                                 // 222
    args[1] = replacer;                                                                                                // 223
    return _stringify.apply($JSON, args);                                                                              // 224
  }                                                                                                                    // 225
});                                                                                                                    // 226
                                                                                                                       // 227
// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)                                                                      // 228
$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);  // 229
// 19.4.3.5 Symbol.prototype[@@toStringTag]                                                                            // 230
setToStringTag($Symbol, 'Symbol');                                                                                     // 231
// 20.2.1.9 Math[@@toStringTag]                                                                                        // 232
setToStringTag(Math, 'Math', true);                                                                                    // 233
// 24.3.3 JSON[@@toStringTag]                                                                                          // 234
setToStringTag(global.JSON, 'JSON', true);                                                                             // 235
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_global.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_global.js                                      //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028                                                // 1
var global = module.exports = typeof window != 'undefined' && window.Math == Math                                      // 2
  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();                       // 3
if(typeof __g == 'number')__g = global; // eslint-disable-line no-undef                                                // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_has.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_has.js                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var hasOwnProperty = {}.hasOwnProperty;                                                                                // 1
module.exports = function(it, key){                                                                                    // 2
  return hasOwnProperty.call(it, key);                                                                                 // 3
};                                                                                                                     // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_descriptors.js":["./_fails",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_descriptors.js                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// Thank's IE8 for his funny defineProperty                                                                            // 1
module.exports = !require('./_fails')(function(){                                                                      // 2
  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;                                        // 3
});                                                                                                                    // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_fails.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_fails.js                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = function(exec){                                                                                       // 1
  try {                                                                                                                // 2
    return !!exec();                                                                                                   // 3
  } catch(e){                                                                                                          // 4
    return true;                                                                                                       // 5
  }                                                                                                                    // 6
};                                                                                                                     // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_export.js":["./_global","./_core","./_hide","./_redefine","./_ctx",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_export.js                                      //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var global    = require('./_global')                                                                                   // 1
  , core      = require('./_core')                                                                                     // 2
  , hide      = require('./_hide')                                                                                     // 3
  , redefine  = require('./_redefine')                                                                                 // 4
  , ctx       = require('./_ctx')                                                                                      // 5
  , PROTOTYPE = 'prototype';                                                                                           // 6
                                                                                                                       // 7
var $export = function(type, name, source){                                                                            // 8
  var IS_FORCED = type & $export.F                                                                                     // 9
    , IS_GLOBAL = type & $export.G                                                                                     // 10
    , IS_STATIC = type & $export.S                                                                                     // 11
    , IS_PROTO  = type & $export.P                                                                                     // 12
    , IS_BIND   = type & $export.B                                                                                     // 13
    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE]
    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})                                                   // 15
    , expProto  = exports[PROTOTYPE] || (exports[PROTOTYPE] = {})                                                      // 16
    , key, own, out, exp;                                                                                              // 17
  if(IS_GLOBAL)source = name;                                                                                          // 18
  for(key in source){                                                                                                  // 19
    // contains in native                                                                                              // 20
    own = !IS_FORCED && target && target[key] !== undefined;                                                           // 21
    // export native or passed                                                                                         // 22
    out = (own ? target : source)[key];                                                                                // 23
    // bind timers to global for call from export context                                                              // 24
    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;    // 25
    // extend global                                                                                                   // 26
    if(target)redefine(target, key, out, type & $export.U);                                                            // 27
    // export                                                                                                          // 28
    if(exports[key] != out)hide(exports, key, exp);                                                                    // 29
    if(IS_PROTO && expProto[key] != out)expProto[key] = out;                                                           // 30
  }                                                                                                                    // 31
};                                                                                                                     // 32
global.core = core;                                                                                                    // 33
// type bitmap                                                                                                         // 34
$export.F = 1;   // forced                                                                                             // 35
$export.G = 2;   // global                                                                                             // 36
$export.S = 4;   // static                                                                                             // 37
$export.P = 8;   // proto                                                                                              // 38
$export.B = 16;  // bind                                                                                               // 39
$export.W = 32;  // wrap                                                                                               // 40
$export.U = 64;  // safe                                                                                               // 41
$export.R = 128; // real proto method for `library`                                                                    // 42
module.exports = $export;                                                                                              // 43
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_core.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_core.js                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var core = module.exports = {version: '2.4.0'};                                                                        // 1
if(typeof __e == 'number')__e = core; // eslint-disable-line no-undef                                                  // 2
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_hide.js":["./_object-dp","./_property-desc","./_descriptors",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_hide.js                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var dP         = require('./_object-dp')                                                                               // 1
  , createDesc = require('./_property-desc');                                                                          // 2
module.exports = require('./_descriptors') ? function(object, key, value){                                             // 3
  return dP.f(object, key, createDesc(1, value));                                                                      // 4
} : function(object, key, value){                                                                                      // 5
  object[key] = value;                                                                                                 // 6
  return object;                                                                                                       // 7
};                                                                                                                     // 8
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-dp.js":["./_an-object","./_ie8-dom-define","./_to-primitive","./_descriptors",function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_object-dp.js                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var anObject       = require('./_an-object')                                                                           // 1
  , IE8_DOM_DEFINE = require('./_ie8-dom-define')                                                                      // 2
  , toPrimitive    = require('./_to-primitive')                                                                        // 3
  , dP             = Object.defineProperty;                                                                            // 4
                                                                                                                       // 5
exports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){             // 6
  anObject(O);                                                                                                         // 7
  P = toPrimitive(P, true);                                                                                            // 8
  anObject(Attributes);                                                                                                // 9
  if(IE8_DOM_DEFINE)try {                                                                                              // 10
    return dP(O, P, Attributes);                                                                                       // 11
  } catch(e){ /* empty */ }                                                                                            // 12
  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');                           // 13
  if('value' in Attributes)O[P] = Attributes.value;                                                                    // 14
  return O;                                                                                                            // 15
};                                                                                                                     // 16
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_an-object.js":["./_is-object",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_an-object.js                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var isObject = require('./_is-object');                                                                                // 1
module.exports = function(it){                                                                                         // 2
  if(!isObject(it))throw TypeError(it + ' is not an object!');                                                         // 3
  return it;                                                                                                           // 4
};                                                                                                                     // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_is-object.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_is-object.js                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = function(it){                                                                                         // 1
  return typeof it === 'object' ? it !== null : typeof it === 'function';                                              // 2
};                                                                                                                     // 3
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_ie8-dom-define.js":["./_descriptors","./_fails","./_dom-create",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_ie8-dom-define.js                              //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = !require('./_descriptors') && !require('./_fails')(function(){                                        // 1
  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;           // 2
});                                                                                                                    // 3
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_dom-create.js":["./_is-object","./_global",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_dom-create.js                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var isObject = require('./_is-object')                                                                                 // 1
  , document = require('./_global').document                                                                           // 2
  // in old IE typeof document.createElement is 'object'                                                               // 3
  , is = isObject(document) && isObject(document.createElement);                                                       // 4
module.exports = function(it){                                                                                         // 5
  return is ? document.createElement(it) : {};                                                                         // 6
};                                                                                                                     // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_to-primitive.js":["./_is-object",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_to-primitive.js                                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 7.1.1 ToPrimitive(input [, PreferredType])                                                                          // 1
var isObject = require('./_is-object');                                                                                // 2
// instead of the ES6 spec version, we didn't implement @@toPrimitive case                                             // 3
// and the second argument - flag - preferred type is a string                                                         // 4
module.exports = function(it, S){                                                                                      // 5
  if(!isObject(it))return it;                                                                                          // 6
  var fn, val;                                                                                                         // 7
  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;                          // 8
  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;                                // 9
  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;                         // 10
  throw TypeError("Can't convert object to primitive value");                                                          // 11
};                                                                                                                     // 12
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_property-desc.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_property-desc.js                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = function(bitmap, value){                                                                              // 1
  return {                                                                                                             // 2
    enumerable  : !(bitmap & 1),                                                                                       // 3
    configurable: !(bitmap & 2),                                                                                       // 4
    writable    : !(bitmap & 4),                                                                                       // 5
    value       : value                                                                                                // 6
  };                                                                                                                   // 7
};                                                                                                                     // 8
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_redefine.js":["./_global","./_hide","./_has","./_uid","./_core",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_redefine.js                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var global    = require('./_global')                                                                                   // 1
  , hide      = require('./_hide')                                                                                     // 2
  , has       = require('./_has')                                                                                      // 3
  , SRC       = require('./_uid')('src')                                                                               // 4
  , TO_STRING = 'toString'                                                                                             // 5
  , $toString = Function[TO_STRING]                                                                                    // 6
  , TPL       = ('' + $toString).split(TO_STRING);                                                                     // 7
                                                                                                                       // 8
require('./_core').inspectSource = function(it){                                                                       // 9
  return $toString.call(it);                                                                                           // 10
};                                                                                                                     // 11
                                                                                                                       // 12
(module.exports = function(O, key, val, safe){                                                                         // 13
  var isFunction = typeof val == 'function';                                                                           // 14
  if(isFunction)has(val, 'name') || hide(val, 'name', key);                                                            // 15
  if(O[key] === val)return;                                                                                            // 16
  if(isFunction)has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));                         // 17
  if(O === global){                                                                                                    // 18
    O[key] = val;                                                                                                      // 19
  } else {                                                                                                             // 20
    if(!safe){                                                                                                         // 21
      delete O[key];                                                                                                   // 22
      hide(O, key, val);                                                                                               // 23
    } else {                                                                                                           // 24
      if(O[key])O[key] = val;                                                                                          // 25
      else hide(O, key, val);                                                                                          // 26
    }                                                                                                                  // 27
  }                                                                                                                    // 28
// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative        // 29
})(Function.prototype, TO_STRING, function toString(){                                                                 // 30
  return typeof this == 'function' && this[SRC] || $toString.call(this);                                               // 31
});                                                                                                                    // 32
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_uid.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_uid.js                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var id = 0                                                                                                             // 1
  , px = Math.random();                                                                                                // 2
module.exports = function(key){                                                                                        // 3
  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));                               // 4
};                                                                                                                     // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_ctx.js":["./_a-function",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_ctx.js                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// optional / simple context binding                                                                                   // 1
var aFunction = require('./_a-function');                                                                              // 2
module.exports = function(fn, that, length){                                                                           // 3
  aFunction(fn);                                                                                                       // 4
  if(that === undefined)return fn;                                                                                     // 5
  switch(length){                                                                                                      // 6
    case 1: return function(a){                                                                                        // 7
      return fn.call(that, a);                                                                                         // 8
    };                                                                                                                 // 9
    case 2: return function(a, b){                                                                                     // 10
      return fn.call(that, a, b);                                                                                      // 11
    };                                                                                                                 // 12
    case 3: return function(a, b, c){                                                                                  // 13
      return fn.call(that, a, b, c);                                                                                   // 14
    };                                                                                                                 // 15
  }                                                                                                                    // 16
  return function(/* ...args */){                                                                                      // 17
    return fn.apply(that, arguments);                                                                                  // 18
  };                                                                                                                   // 19
};                                                                                                                     // 20
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_a-function.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_a-function.js                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = function(it){                                                                                         // 1
  if(typeof it != 'function')throw TypeError(it + ' is not a function!');                                              // 2
  return it;                                                                                                           // 3
};                                                                                                                     // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_meta.js":["./_uid","./_is-object","./_has","./_object-dp","./_fails",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_meta.js                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var META     = require('./_uid')('meta')                                                                               // 1
  , isObject = require('./_is-object')                                                                                 // 2
  , has      = require('./_has')                                                                                       // 3
  , setDesc  = require('./_object-dp').f                                                                               // 4
  , id       = 0;                                                                                                      // 5
var isExtensible = Object.isExtensible || function(){                                                                  // 6
  return true;                                                                                                         // 7
};                                                                                                                     // 8
var FREEZE = !require('./_fails')(function(){                                                                          // 9
  return isExtensible(Object.preventExtensions({}));                                                                   // 10
});                                                                                                                    // 11
var setMeta = function(it){                                                                                            // 12
  setDesc(it, META, {value: {                                                                                          // 13
    i: 'O' + ++id, // object ID                                                                                        // 14
    w: {}          // weak collections IDs                                                                             // 15
  }});                                                                                                                 // 16
};                                                                                                                     // 17
var fastKey = function(it, create){                                                                                    // 18
  // return primitive with prefix                                                                                      // 19
  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;                       // 20
  if(!has(it, META)){                                                                                                  // 21
    // can't set metadata to uncaught frozen object                                                                    // 22
    if(!isExtensible(it))return 'F';                                                                                   // 23
    // not necessary to add metadata                                                                                   // 24
    if(!create)return 'E';                                                                                             // 25
    // add missing metadata                                                                                            // 26
    setMeta(it);                                                                                                       // 27
  // return object ID                                                                                                  // 28
  } return it[META].i;                                                                                                 // 29
};                                                                                                                     // 30
var getWeak = function(it, create){                                                                                    // 31
  if(!has(it, META)){                                                                                                  // 32
    // can't set metadata to uncaught frozen object                                                                    // 33
    if(!isExtensible(it))return true;                                                                                  // 34
    // not necessary to add metadata                                                                                   // 35
    if(!create)return false;                                                                                           // 36
    // add missing metadata                                                                                            // 37
    setMeta(it);                                                                                                       // 38
  // return hash weak collections IDs                                                                                  // 39
  } return it[META].w;                                                                                                 // 40
};                                                                                                                     // 41
// add metadata on freeze-family methods calling                                                                       // 42
var onFreeze = function(it){                                                                                           // 43
  if(FREEZE && meta.NEED && isExtensible(it) && !has(it, META))setMeta(it);                                            // 44
  return it;                                                                                                           // 45
};                                                                                                                     // 46
var meta = module.exports = {                                                                                          // 47
  KEY:      META,                                                                                                      // 48
  NEED:     false,                                                                                                     // 49
  fastKey:  fastKey,                                                                                                   // 50
  getWeak:  getWeak,                                                                                                   // 51
  onFreeze: onFreeze                                                                                                   // 52
};                                                                                                                     // 53
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_shared.js":["./_global",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_shared.js                                      //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var global = require('./_global')                                                                                      // 1
  , SHARED = '__core-js_shared__'                                                                                      // 2
  , store  = global[SHARED] || (global[SHARED] = {});                                                                  // 3
module.exports = function(key){                                                                                        // 4
  return store[key] || (store[key] = {});                                                                              // 5
};                                                                                                                     // 6
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_set-to-string-tag.js":["./_object-dp","./_has","./_wks",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_set-to-string-tag.js                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var def = require('./_object-dp').f                                                                                    // 1
  , has = require('./_has')                                                                                            // 2
  , TAG = require('./_wks')('toStringTag');                                                                            // 3
                                                                                                                       // 4
module.exports = function(it, tag, stat){                                                                              // 5
  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});                    // 6
};                                                                                                                     // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_wks.js":["./_shared","./_uid","./_global",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_wks.js                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var store      = require('./_shared')('wks')                                                                           // 1
  , uid        = require('./_uid')                                                                                     // 2
  , Symbol     = require('./_global').Symbol                                                                           // 3
  , USE_SYMBOL = typeof Symbol == 'function';                                                                          // 4
                                                                                                                       // 5
var $exports = module.exports = function(name){                                                                        // 6
  return store[name] || (store[name] =                                                                                 // 7
    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));                                      // 8
};                                                                                                                     // 9
                                                                                                                       // 10
$exports.store = store;                                                                                                // 11
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_wks-ext.js":["./_wks",function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_wks-ext.js                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.f = require('./_wks');                                                                                         // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_wks-define.js":["./_global","./_core","./_library","./_wks-ext","./_object-dp",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_wks-define.js                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var global         = require('./_global')                                                                              // 1
  , core           = require('./_core')                                                                                // 2
  , LIBRARY        = require('./_library')                                                                             // 3
  , wksExt         = require('./_wks-ext')                                                                             // 4
  , defineProperty = require('./_object-dp').f;                                                                        // 5
module.exports = function(name){                                                                                       // 6
  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});                                     // 7
  if(name.charAt(0) != '_' && !(name in $Symbol))defineProperty($Symbol, name, {value: wksExt.f(name)});               // 8
};                                                                                                                     // 9
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_library.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_library.js                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = false;                                                                                                // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_keyof.js":["./_object-keys","./_to-iobject",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_keyof.js                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var getKeys   = require('./_object-keys')                                                                              // 1
  , toIObject = require('./_to-iobject');                                                                              // 2
module.exports = function(object, el){                                                                                 // 3
  var O      = toIObject(object)                                                                                       // 4
    , keys   = getKeys(O)                                                                                              // 5
    , length = keys.length                                                                                             // 6
    , index  = 0                                                                                                       // 7
    , key;                                                                                                             // 8
  while(length > index)if(O[key = keys[index++]] === el)return key;                                                    // 9
};                                                                                                                     // 10
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-keys.js":["./_object-keys-internal","./_enum-bug-keys",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_object-keys.js                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.2.14 / 15.2.3.14 Object.keys(O)                                                                                // 1
var $keys       = require('./_object-keys-internal')                                                                   // 2
  , enumBugKeys = require('./_enum-bug-keys');                                                                         // 3
                                                                                                                       // 4
module.exports = Object.keys || function keys(O){                                                                      // 5
  return $keys(O, enumBugKeys);                                                                                        // 6
};                                                                                                                     // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-keys-internal.js":["./_has","./_to-iobject","./_array-includes","./_shared-key",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_object-keys-internal.js                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var has          = require('./_has')                                                                                   // 1
  , toIObject    = require('./_to-iobject')                                                                            // 2
  , arrayIndexOf = require('./_array-includes')(false)                                                                 // 3
  , IE_PROTO     = require('./_shared-key')('IE_PROTO');                                                               // 4
                                                                                                                       // 5
module.exports = function(object, names){                                                                              // 6
  var O      = toIObject(object)                                                                                       // 7
    , i      = 0                                                                                                       // 8
    , result = []                                                                                                      // 9
    , key;                                                                                                             // 10
  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);                                                     // 11
  // Don't enum bug & hidden keys                                                                                      // 12
  while(names.length > i)if(has(O, key = names[i++])){                                                                 // 13
    ~arrayIndexOf(result, key) || result.push(key);                                                                    // 14
  }                                                                                                                    // 15
  return result;                                                                                                       // 16
};                                                                                                                     // 17
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_to-iobject.js":["./_iobject","./_defined",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_to-iobject.js                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// to indexed object, toObject with fallback for non-array-like ES3 strings                                            // 1
var IObject = require('./_iobject')                                                                                    // 2
  , defined = require('./_defined');                                                                                   // 3
module.exports = function(it){                                                                                         // 4
  return IObject(defined(it));                                                                                         // 5
};                                                                                                                     // 6
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_iobject.js":["./_cof",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_iobject.js                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// fallback for non-array-like ES3 and non-enumerable old V8 strings                                                   // 1
var cof = require('./_cof');                                                                                           // 2
module.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){                                          // 3
  return cof(it) == 'String' ? it.split('') : Object(it);                                                              // 4
};                                                                                                                     // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_cof.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_cof.js                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var toString = {}.toString;                                                                                            // 1
                                                                                                                       // 2
module.exports = function(it){                                                                                         // 3
  return toString.call(it).slice(8, -1);                                                                               // 4
};                                                                                                                     // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_defined.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_defined.js                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 7.2.1 RequireObjectCoercible(argument)                                                                              // 1
module.exports = function(it){                                                                                         // 2
  if(it == undefined)throw TypeError("Can't call method on  " + it);                                                   // 3
  return it;                                                                                                           // 4
};                                                                                                                     // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_array-includes.js":["./_to-iobject","./_to-length","./_to-index",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_array-includes.js                              //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// false -> Array#indexOf                                                                                              // 1
// true  -> Array#includes                                                                                             // 2
var toIObject = require('./_to-iobject')                                                                               // 3
  , toLength  = require('./_to-length')                                                                                // 4
  , toIndex   = require('./_to-index');                                                                                // 5
module.exports = function(IS_INCLUDES){                                                                                // 6
  return function($this, el, fromIndex){                                                                               // 7
    var O      = toIObject($this)                                                                                      // 8
      , length = toLength(O.length)                                                                                    // 9
      , index  = toIndex(fromIndex, length)                                                                            // 10
      , value;                                                                                                         // 11
    // Array#includes uses SameValueZero equality algorithm                                                            // 12
    if(IS_INCLUDES && el != el)while(length > index){                                                                  // 13
      value = O[index++];                                                                                              // 14
      if(value != value)return true;                                                                                   // 15
    // Array#toIndex ignores holes, Array#includes - not                                                               // 16
    } else for(;length > index; index++)if(IS_INCLUDES || index in O){                                                 // 17
      if(O[index] === el)return IS_INCLUDES || index || 0;                                                             // 18
    } return !IS_INCLUDES && -1;                                                                                       // 19
  };                                                                                                                   // 20
};                                                                                                                     // 21
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_to-length.js":["./_to-integer",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_to-length.js                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 7.1.15 ToLength                                                                                                     // 1
var toInteger = require('./_to-integer')                                                                               // 2
  , min       = Math.min;                                                                                              // 3
module.exports = function(it){                                                                                         // 4
  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991                      // 5
};                                                                                                                     // 6
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_to-integer.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_to-integer.js                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 7.1.4 ToInteger                                                                                                     // 1
var ceil  = Math.ceil                                                                                                  // 2
  , floor = Math.floor;                                                                                                // 3
module.exports = function(it){                                                                                         // 4
  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);                                                            // 5
};                                                                                                                     // 6
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_to-index.js":["./_to-integer",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_to-index.js                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var toInteger = require('./_to-integer')                                                                               // 1
  , max       = Math.max                                                                                               // 2
  , min       = Math.min;                                                                                              // 3
module.exports = function(index, length){                                                                              // 4
  index = toInteger(index);                                                                                            // 5
  return index < 0 ? max(index + length, 0) : min(index, length);                                                      // 6
};                                                                                                                     // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_shared-key.js":["./_shared","./_uid",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_shared-key.js                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var shared = require('./_shared')('keys')                                                                              // 1
  , uid    = require('./_uid');                                                                                        // 2
module.exports = function(key){                                                                                        // 3
  return shared[key] || (shared[key] = uid(key));                                                                      // 4
};                                                                                                                     // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_enum-bug-keys.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_enum-bug-keys.js                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// IE 8- don't enum bug keys                                                                                           // 1
module.exports = (                                                                                                     // 2
  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'                      // 3
).split(',');                                                                                                          // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_enum-keys.js":["./_object-keys","./_object-gops","./_object-pie",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_enum-keys.js                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// all enumerable object keys, includes symbols                                                                        // 1
var getKeys = require('./_object-keys')                                                                                // 2
  , gOPS    = require('./_object-gops')                                                                                // 3
  , pIE     = require('./_object-pie');                                                                                // 4
module.exports = function(it){                                                                                         // 5
  var result     = getKeys(it)                                                                                         // 6
    , getSymbols = gOPS.f;                                                                                             // 7
  if(getSymbols){                                                                                                      // 8
    var symbols = getSymbols(it)                                                                                       // 9
      , isEnum  = pIE.f                                                                                                // 10
      , i       = 0                                                                                                    // 11
      , key;                                                                                                           // 12
    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))result.push(key);                                  // 13
  } return result;                                                                                                     // 14
};                                                                                                                     // 15
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-gops.js":function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_object-gops.js                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.f = Object.getOwnPropertySymbols;                                                                              // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_object-pie.js":function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_object-pie.js                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.f = {}.propertyIsEnumerable;                                                                                   // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_is-array.js":["./_cof",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_is-array.js                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 7.2.2 IsArray(argument)                                                                                             // 1
var cof = require('./_cof');                                                                                           // 2
module.exports = Array.isArray || function isArray(arg){                                                               // 3
  return cof(arg) == 'Array';                                                                                          // 4
};                                                                                                                     // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-create.js":["./_an-object","./_object-dps","./_enum-bug-keys","./_shared-key","./_dom-create","./_html",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_object-create.js                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])                                                                 // 1
var anObject    = require('./_an-object')                                                                              // 2
  , dPs         = require('./_object-dps')                                                                             // 3
  , enumBugKeys = require('./_enum-bug-keys')                                                                          // 4
  , IE_PROTO    = require('./_shared-key')('IE_PROTO')                                                                 // 5
  , Empty       = function(){ /* empty */ }                                                                            // 6
  , PROTOTYPE   = 'prototype';                                                                                         // 7
                                                                                                                       // 8
// Create object with fake `null` prototype: use iframe Object with cleared prototype                                  // 9
var createDict = function(){                                                                                           // 10
  // Thrash, waste and sodomy: IE GC bug                                                                               // 11
  var iframe = require('./_dom-create')('iframe')                                                                      // 12
    , i      = enumBugKeys.length                                                                                      // 13
    , lt     = '<'                                                                                                     // 14
    , gt     = '>'                                                                                                     // 15
    , iframeDocument;                                                                                                  // 16
  iframe.style.display = 'none';                                                                                       // 17
  require('./_html').appendChild(iframe);                                                                              // 18
  iframe.src = 'javascript:'; // eslint-disable-line no-script-url                                                     // 19
  // createDict = iframe.contentWindow.Object;                                                                         // 20
  // html.removeChild(iframe);                                                                                         // 21
  iframeDocument = iframe.contentWindow.document;                                                                      // 22
  iframeDocument.open();                                                                                               // 23
  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);                                // 24
  iframeDocument.close();                                                                                              // 25
  createDict = iframeDocument.F;                                                                                       // 26
  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];                                                              // 27
  return createDict();                                                                                                 // 28
};                                                                                                                     // 29
                                                                                                                       // 30
module.exports = Object.create || function create(O, Properties){                                                      // 31
  var result;                                                                                                          // 32
  if(O !== null){                                                                                                      // 33
    Empty[PROTOTYPE] = anObject(O);                                                                                    // 34
    result = new Empty;                                                                                                // 35
    Empty[PROTOTYPE] = null;                                                                                           // 36
    // add "__proto__" for Object.getPrototypeOf polyfill                                                              // 37
    result[IE_PROTO] = O;                                                                                              // 38
  } else result = createDict();                                                                                        // 39
  return Properties === undefined ? result : dPs(result, Properties);                                                  // 40
};                                                                                                                     // 41
                                                                                                                       // 42
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-dps.js":["./_object-dp","./_an-object","./_object-keys","./_descriptors",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_object-dps.js                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var dP       = require('./_object-dp')                                                                                 // 1
  , anObject = require('./_an-object')                                                                                 // 2
  , getKeys  = require('./_object-keys');                                                                              // 3
                                                                                                                       // 4
module.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties){       // 5
  anObject(O);                                                                                                         // 6
  var keys   = getKeys(Properties)                                                                                     // 7
    , length = keys.length                                                                                             // 8
    , i = 0                                                                                                            // 9
    , P;                                                                                                               // 10
  while(length > i)dP.f(O, P = keys[i++], Properties[P]);                                                              // 11
  return O;                                                                                                            // 12
};                                                                                                                     // 13
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_html.js":["./_global",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_html.js                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = require('./_global').document && document.documentElement;                                            // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-gopn-ext.js":["./_to-iobject","./_object-gopn",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_object-gopn-ext.js                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window                                           // 1
var toIObject = require('./_to-iobject')                                                                               // 2
  , gOPN      = require('./_object-gopn').f                                                                            // 3
  , toString  = {}.toString;                                                                                           // 4
                                                                                                                       // 5
var windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames                                    // 6
  ? Object.getOwnPropertyNames(window) : [];                                                                           // 7
                                                                                                                       // 8
var getWindowNames = function(it){                                                                                     // 9
  try {                                                                                                                // 10
    return gOPN(it);                                                                                                   // 11
  } catch(e){                                                                                                          // 12
    return windowNames.slice();                                                                                        // 13
  }                                                                                                                    // 14
};                                                                                                                     // 15
                                                                                                                       // 16
module.exports.f = function getOwnPropertyNames(it){                                                                   // 17
  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));             // 18
};                                                                                                                     // 19
                                                                                                                       // 20
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-gopn.js":["./_object-keys-internal","./_enum-bug-keys",function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_object-gopn.js                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)                                                                   // 1
var $keys      = require('./_object-keys-internal')                                                                    // 2
  , hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');                                            // 3
                                                                                                                       // 4
exports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O){                                             // 5
  return $keys(O, hiddenKeys);                                                                                         // 6
};                                                                                                                     // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-gopd.js":["./_object-pie","./_property-desc","./_to-iobject","./_to-primitive","./_has","./_ie8-dom-define","./_descriptors",function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_object-gopd.js                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var pIE            = require('./_object-pie')                                                                          // 1
  , createDesc     = require('./_property-desc')                                                                       // 2
  , toIObject      = require('./_to-iobject')                                                                          // 3
  , toPrimitive    = require('./_to-primitive')                                                                        // 4
  , has            = require('./_has')                                                                                 // 5
  , IE8_DOM_DEFINE = require('./_ie8-dom-define')                                                                      // 6
  , gOPD           = Object.getOwnPropertyDescriptor;                                                                  // 7
                                                                                                                       // 8
exports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P){                                // 9
  O = toIObject(O);                                                                                                    // 10
  P = toPrimitive(P, true);                                                                                            // 11
  if(IE8_DOM_DEFINE)try {                                                                                              // 12
    return gOPD(O, P);                                                                                                 // 13
  } catch(e){ /* empty */ }                                                                                            // 14
  if(has(O, P))return createDesc(!pIE.f.call(O, P), O[P]);                                                             // 15
};                                                                                                                     // 16
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.object.create.js":["./_export","./_object-create",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.object.create.js                            //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var $export = require('./_export')                                                                                     // 1
// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])                                                                 // 2
$export($export.S, 'Object', {create: require('./_object-create')});                                                   // 3
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.object.define-property.js":["./_export","./_descriptors","./_object-dp",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.object.define-property.js                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var $export = require('./_export');                                                                                    // 1
// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)                                                         // 2
$export($export.S + $export.F * !require('./_descriptors'), 'Object', {defineProperty: require('./_object-dp').f});    // 3
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.object.define-properties.js":["./_export","./_descriptors","./_object-dps",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.object.define-properties.js                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var $export = require('./_export');                                                                                    // 1
// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)                                                          // 2
$export($export.S + $export.F * !require('./_descriptors'), 'Object', {defineProperties: require('./_object-dps')});   // 3
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.object.get-own-property-descriptor.js":["./_to-iobject","./_object-gopd","./_object-sap",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.object.get-own-property-descriptor.js       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)                                                                      // 1
var toIObject                 = require('./_to-iobject')                                                               // 2
  , $getOwnPropertyDescriptor = require('./_object-gopd').f;                                                           // 3
                                                                                                                       // 4
require('./_object-sap')('getOwnPropertyDescriptor', function(){                                                       // 5
  return function getOwnPropertyDescriptor(it, key){                                                                   // 6
    return $getOwnPropertyDescriptor(toIObject(it), key);                                                              // 7
  };                                                                                                                   // 8
});                                                                                                                    // 9
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-sap.js":["./_export","./_core","./_fails",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_object-sap.js                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// most Object methods by ES6 should accept primitives                                                                 // 1
var $export = require('./_export')                                                                                     // 2
  , core    = require('./_core')                                                                                       // 3
  , fails   = require('./_fails');                                                                                     // 4
module.exports = function(KEY, exec){                                                                                  // 5
  var fn  = (core.Object || {})[KEY] || Object[KEY]                                                                    // 6
    , exp = {};                                                                                                        // 7
  exp[KEY] = exec(fn);                                                                                                 // 8
  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);                                         // 9
};                                                                                                                     // 10
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.object.get-prototype-of.js":["./_to-object","./_object-gpo","./_object-sap",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.object.get-prototype-of.js                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.2.9 Object.getPrototypeOf(O)                                                                                   // 1
var toObject        = require('./_to-object')                                                                          // 2
  , $getPrototypeOf = require('./_object-gpo');                                                                        // 3
                                                                                                                       // 4
require('./_object-sap')('getPrototypeOf', function(){                                                                 // 5
  return function getPrototypeOf(it){                                                                                  // 6
    return $getPrototypeOf(toObject(it));                                                                              // 7
  };                                                                                                                   // 8
});                                                                                                                    // 9
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_to-object.js":["./_defined",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_to-object.js                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 7.1.13 ToObject(argument)                                                                                           // 1
var defined = require('./_defined');                                                                                   // 2
module.exports = function(it){                                                                                         // 3
  return Object(defined(it));                                                                                          // 4
};                                                                                                                     // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-gpo.js":["./_has","./_to-object","./_shared-key",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_object-gpo.js                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)                                                                        // 1
var has         = require('./_has')                                                                                    // 2
  , toObject    = require('./_to-object')                                                                              // 3
  , IE_PROTO    = require('./_shared-key')('IE_PROTO')                                                                 // 4
  , ObjectProto = Object.prototype;                                                                                    // 5
                                                                                                                       // 6
module.exports = Object.getPrototypeOf || function(O){                                                                 // 7
  O = toObject(O);                                                                                                     // 8
  if(has(O, IE_PROTO))return O[IE_PROTO];                                                                              // 9
  if(typeof O.constructor == 'function' && O instanceof O.constructor){                                                // 10
    return O.constructor.prototype;                                                                                    // 11
  } return O instanceof Object ? ObjectProto : null;                                                                   // 12
};                                                                                                                     // 13
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.object.keys.js":["./_to-object","./_object-keys","./_object-sap",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.object.keys.js                              //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.2.14 Object.keys(O)                                                                                            // 1
var toObject = require('./_to-object')                                                                                 // 2
  , $keys    = require('./_object-keys');                                                                              // 3
                                                                                                                       // 4
require('./_object-sap')('keys', function(){                                                                           // 5
  return function keys(it){                                                                                            // 6
    return $keys(toObject(it));                                                                                        // 7
  };                                                                                                                   // 8
});                                                                                                                    // 9
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.object.get-own-property-names.js":["./_object-sap","./_object-gopn-ext",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.object.get-own-property-names.js            //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.2.7 Object.getOwnPropertyNames(O)                                                                              // 1
require('./_object-sap')('getOwnPropertyNames', function(){                                                            // 2
  return require('./_object-gopn-ext').f;                                                                              // 3
});                                                                                                                    // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.object.freeze.js":["./_is-object","./_meta","./_object-sap",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.object.freeze.js                            //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.2.5 Object.freeze(O)                                                                                           // 1
var isObject = require('./_is-object')                                                                                 // 2
  , meta     = require('./_meta').onFreeze;                                                                            // 3
                                                                                                                       // 4
require('./_object-sap')('freeze', function($freeze){                                                                  // 5
  return function freeze(it){                                                                                          // 6
    return $freeze && isObject(it) ? $freeze(meta(it)) : it;                                                           // 7
  };                                                                                                                   // 8
});                                                                                                                    // 9
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.object.seal.js":["./_is-object","./_meta","./_object-sap",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.object.seal.js                              //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.2.17 Object.seal(O)                                                                                            // 1
var isObject = require('./_is-object')                                                                                 // 2
  , meta     = require('./_meta').onFreeze;                                                                            // 3
                                                                                                                       // 4
require('./_object-sap')('seal', function($seal){                                                                      // 5
  return function seal(it){                                                                                            // 6
    return $seal && isObject(it) ? $seal(meta(it)) : it;                                                               // 7
  };                                                                                                                   // 8
});                                                                                                                    // 9
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.object.prevent-extensions.js":["./_is-object","./_meta","./_object-sap",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.object.prevent-extensions.js                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.2.15 Object.preventExtensions(O)                                                                               // 1
var isObject = require('./_is-object')                                                                                 // 2
  , meta     = require('./_meta').onFreeze;                                                                            // 3
                                                                                                                       // 4
require('./_object-sap')('preventExtensions', function($preventExtensions){                                            // 5
  return function preventExtensions(it){                                                                               // 6
    return $preventExtensions && isObject(it) ? $preventExtensions(meta(it)) : it;                                     // 7
  };                                                                                                                   // 8
});                                                                                                                    // 9
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.object.is-frozen.js":["./_is-object","./_object-sap",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.object.is-frozen.js                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.2.12 Object.isFrozen(O)                                                                                        // 1
var isObject = require('./_is-object');                                                                                // 2
                                                                                                                       // 3
require('./_object-sap')('isFrozen', function($isFrozen){                                                              // 4
  return function isFrozen(it){                                                                                        // 5
    return isObject(it) ? $isFrozen ? $isFrozen(it) : false : true;                                                    // 6
  };                                                                                                                   // 7
});                                                                                                                    // 8
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.object.is-sealed.js":["./_is-object","./_object-sap",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.object.is-sealed.js                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.2.13 Object.isSealed(O)                                                                                        // 1
var isObject = require('./_is-object');                                                                                // 2
                                                                                                                       // 3
require('./_object-sap')('isSealed', function($isSealed){                                                              // 4
  return function isSealed(it){                                                                                        // 5
    return isObject(it) ? $isSealed ? $isSealed(it) : false : true;                                                    // 6
  };                                                                                                                   // 7
});                                                                                                                    // 8
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.object.is-extensible.js":["./_is-object","./_object-sap",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.object.is-extensible.js                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.2.11 Object.isExtensible(O)                                                                                    // 1
var isObject = require('./_is-object');                                                                                // 2
                                                                                                                       // 3
require('./_object-sap')('isExtensible', function($isExtensible){                                                      // 4
  return function isExtensible(it){                                                                                    // 5
    return isObject(it) ? $isExtensible ? $isExtensible(it) : true : false;                                            // 6
  };                                                                                                                   // 7
});                                                                                                                    // 8
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.object.assign.js":["./_export","./_object-assign",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.object.assign.js                            //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.3.1 Object.assign(target, source)                                                                              // 1
var $export = require('./_export');                                                                                    // 2
                                                                                                                       // 3
$export($export.S + $export.F, 'Object', {assign: require('./_object-assign')});                                       // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-assign.js":["./_object-keys","./_object-gops","./_object-pie","./_to-object","./_iobject","./_fails",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_object-assign.js                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// 19.1.2.1 Object.assign(target, source, ...)                                                                         // 2
var getKeys  = require('./_object-keys')                                                                               // 3
  , gOPS     = require('./_object-gops')                                                                               // 4
  , pIE      = require('./_object-pie')                                                                                // 5
  , toObject = require('./_to-object')                                                                                 // 6
  , IObject  = require('./_iobject')                                                                                   // 7
  , $assign  = Object.assign;                                                                                          // 8
                                                                                                                       // 9
// should work with symbols and should have deterministic property order (V8 bug)                                      // 10
module.exports = !$assign || require('./_fails')(function(){                                                           // 11
  var A = {}                                                                                                           // 12
    , B = {}                                                                                                           // 13
    , S = Symbol()                                                                                                     // 14
    , K = 'abcdefghijklmnopqrst';                                                                                      // 15
  A[S] = 7;                                                                                                            // 16
  K.split('').forEach(function(k){ B[k] = k; });                                                                       // 17
  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;                                          // 18
}) ? function assign(target, source){ // eslint-disable-line no-unused-vars                                            // 19
  var T     = toObject(target)                                                                                         // 20
    , aLen  = arguments.length                                                                                         // 21
    , index = 1                                                                                                        // 22
    , getSymbols = gOPS.f                                                                                              // 23
    , isEnum     = pIE.f;                                                                                              // 24
  while(aLen > index){                                                                                                 // 25
    var S      = IObject(arguments[index++])                                                                           // 26
      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)                                            // 27
      , length = keys.length                                                                                           // 28
      , j      = 0                                                                                                     // 29
      , key;                                                                                                           // 30
    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];                                               // 31
  } return T;                                                                                                          // 32
} : $assign;                                                                                                           // 33
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.object.is.js":["./_export","./_same-value",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.object.is.js                                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.3.10 Object.is(value1, value2)                                                                                 // 1
var $export = require('./_export');                                                                                    // 2
$export($export.S, 'Object', {is: require('./_same-value')});                                                          // 3
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_same-value.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_same-value.js                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 7.2.9 SameValue(x, y)                                                                                               // 1
module.exports = Object.is || function is(x, y){                                                                       // 2
  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;                                                      // 3
};                                                                                                                     // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"es6.object.set-prototype-of.js":["./_export","./_set-proto",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.object.set-prototype-of.js                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.1.3.19 Object.setPrototypeOf(O, proto)                                                                           // 1
var $export = require('./_export');                                                                                    // 2
$export($export.S, 'Object', {setPrototypeOf: require('./_set-proto').set});                                           // 3
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_set-proto.js":["./_is-object","./_an-object","./_ctx","./_object-gopd",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_set-proto.js                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// Works with __proto__ only. Old v8 can't work with null proto objects.                                               // 1
/* eslint-disable no-proto */                                                                                          // 2
var isObject = require('./_is-object')                                                                                 // 3
  , anObject = require('./_an-object');                                                                                // 4
var check = function(O, proto){                                                                                        // 5
  anObject(O);                                                                                                         // 6
  if(!isObject(proto) && proto !== null)throw TypeError(proto + ": can't set as prototype!");                          // 7
};                                                                                                                     // 8
module.exports = {                                                                                                     // 9
  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line                                            // 10
    function(test, buggy, set){                                                                                        // 11
      try {                                                                                                            // 12
        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);     // 13
        set(test, []);                                                                                                 // 14
        buggy = !(test instanceof Array);                                                                              // 15
      } catch(e){ buggy = true; }                                                                                      // 16
      return function setPrototypeOf(O, proto){                                                                        // 17
        check(O, proto);                                                                                               // 18
        if(buggy)O.__proto__ = proto;                                                                                  // 19
        else set(O, proto);                                                                                            // 20
        return O;                                                                                                      // 21
      };                                                                                                               // 22
    }({}, false) : undefined),                                                                                         // 23
  check: check                                                                                                         // 24
};                                                                                                                     // 25
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.object.to-string.js":["./_classof","./_wks","./_redefine",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.object.to-string.js                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// 19.1.3.6 Object.prototype.toString()                                                                                // 2
var classof = require('./_classof')                                                                                    // 3
  , test    = {};                                                                                                      // 4
test[require('./_wks')('toStringTag')] = 'z';                                                                          // 5
if(test + '' != '[object z]'){                                                                                         // 6
  require('./_redefine')(Object.prototype, 'toString', function toString(){                                            // 7
    return '[object ' + classof(this) + ']';                                                                           // 8
  }, true);                                                                                                            // 9
}                                                                                                                      // 10
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_classof.js":["./_cof","./_wks",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_classof.js                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// getting tag from 19.1.3.6 Object.prototype.toString()                                                               // 1
var cof = require('./_cof')                                                                                            // 2
  , TAG = require('./_wks')('toStringTag')                                                                             // 3
  // ES3 wrong here                                                                                                    // 4
  , ARG = cof(function(){ return arguments; }()) == 'Arguments';                                                       // 5
                                                                                                                       // 6
// fallback for IE11 Script Access Denied error                                                                        // 7
var tryGet = function(it, key){                                                                                        // 8
  try {                                                                                                                // 9
    return it[key];                                                                                                    // 10
  } catch(e){ /* empty */ }                                                                                            // 11
};                                                                                                                     // 12
                                                                                                                       // 13
module.exports = function(it){                                                                                         // 14
  var O, T, B;                                                                                                         // 15
  return it === undefined ? 'Undefined' : it === null ? 'Null'                                                         // 16
    // @@toStringTag case                                                                                              // 17
    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T                                                         // 18
    // builtinTag case                                                                                                 // 19
    : ARG ? cof(O)                                                                                                     // 20
    // ES3 arguments fallback                                                                                          // 21
    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;                                     // 22
};                                                                                                                     // 23
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.string.iterator.js":["./_string-at","./_iter-define",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.iterator.js                          //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var $at  = require('./_string-at')(true);                                                                              // 2
                                                                                                                       // 3
// 21.1.3.27 String.prototype[@@iterator]()                                                                            // 4
require('./_iter-define')(String, 'String', function(iterated){                                                        // 5
  this._t = String(iterated); // target                                                                                // 6
  this._i = 0;                // next index                                                                            // 7
// 21.1.5.2.1 %StringIteratorPrototype%.next()                                                                         // 8
}, function(){                                                                                                         // 9
  var O     = this._t                                                                                                  // 10
    , index = this._i                                                                                                  // 11
    , point;                                                                                                           // 12
  if(index >= O.length)return {value: undefined, done: true};                                                          // 13
  point = $at(O, index);                                                                                               // 14
  this._i += point.length;                                                                                             // 15
  return {value: point, done: false};                                                                                  // 16
});                                                                                                                    // 17
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_string-at.js":["./_to-integer","./_defined",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_string-at.js                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var toInteger = require('./_to-integer')                                                                               // 1
  , defined   = require('./_defined');                                                                                 // 2
// true  -> String#at                                                                                                  // 3
// false -> String#codePointAt                                                                                         // 4
module.exports = function(TO_STRING){                                                                                  // 5
  return function(that, pos){                                                                                          // 6
    var s = String(defined(that))                                                                                      // 7
      , i = toInteger(pos)                                                                                             // 8
      , l = s.length                                                                                                   // 9
      , a, b;                                                                                                          // 10
    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;                                                              // 11
    a = s.charCodeAt(i);                                                                                               // 12
    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff                 // 13
      ? TO_STRING ? s.charAt(i) : a                                                                                    // 14
      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;                                   // 15
  };                                                                                                                   // 16
};                                                                                                                     // 17
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_iter-define.js":["./_library","./_export","./_redefine","./_hide","./_has","./_iterators","./_iter-create","./_set-to-string-tag","./_object-gpo","./_wks",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_iter-define.js                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var LIBRARY        = require('./_library')                                                                             // 2
  , $export        = require('./_export')                                                                              // 3
  , redefine       = require('./_redefine')                                                                            // 4
  , hide           = require('./_hide')                                                                                // 5
  , has            = require('./_has')                                                                                 // 6
  , Iterators      = require('./_iterators')                                                                           // 7
  , $iterCreate    = require('./_iter-create')                                                                         // 8
  , setToStringTag = require('./_set-to-string-tag')                                                                   // 9
  , getPrototypeOf = require('./_object-gpo')                                                                          // 10
  , ITERATOR       = require('./_wks')('iterator')                                                                     // 11
  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`                        // 12
  , FF_ITERATOR    = '@@iterator'                                                                                      // 13
  , KEYS           = 'keys'                                                                                            // 14
  , VALUES         = 'values';                                                                                         // 15
                                                                                                                       // 16
var returnThis = function(){ return this; };                                                                           // 17
                                                                                                                       // 18
module.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){                                     // 19
  $iterCreate(Constructor, NAME, next);                                                                                // 20
  var getMethod = function(kind){                                                                                      // 21
    if(!BUGGY && kind in proto)return proto[kind];                                                                     // 22
    switch(kind){                                                                                                      // 23
      case KEYS: return function keys(){ return new Constructor(this, kind); };                                        // 24
      case VALUES: return function values(){ return new Constructor(this, kind); };                                    // 25
    } return function entries(){ return new Constructor(this, kind); };                                                // 26
  };                                                                                                                   // 27
  var TAG        = NAME + ' Iterator'                                                                                  // 28
    , DEF_VALUES = DEFAULT == VALUES                                                                                   // 29
    , VALUES_BUG = false                                                                                               // 30
    , proto      = Base.prototype                                                                                      // 31
    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]                                  // 32
    , $default   = $native || getMethod(DEFAULT)                                                                       // 33
    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined                                 // 34
    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native                                                // 35
    , methods, key, IteratorPrototype;                                                                                 // 36
  // Fix native                                                                                                        // 37
  if($anyNative){                                                                                                      // 38
    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));                                                     // 39
    if(IteratorPrototype !== Object.prototype){                                                                        // 40
      // Set @@toStringTag to native iterators                                                                         // 41
      setToStringTag(IteratorPrototype, TAG, true);                                                                    // 42
      // fix for some old engines                                                                                      // 43
      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);                  // 44
    }                                                                                                                  // 45
  }                                                                                                                    // 46
  // fix Array#{values, @@iterator}.name in V8 / FF                                                                    // 47
  if(DEF_VALUES && $native && $native.name !== VALUES){                                                                // 48
    VALUES_BUG = true;                                                                                                 // 49
    $default = function values(){ return $native.call(this); };                                                        // 50
  }                                                                                                                    // 51
  // Define iterator                                                                                                   // 52
  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){                                               // 53
    hide(proto, ITERATOR, $default);                                                                                   // 54
  }                                                                                                                    // 55
  // Plug for library                                                                                                  // 56
  Iterators[NAME] = $default;                                                                                          // 57
  Iterators[TAG]  = returnThis;                                                                                        // 58
  if(DEFAULT){                                                                                                         // 59
    methods = {                                                                                                        // 60
      values:  DEF_VALUES ? $default : getMethod(VALUES),                                                              // 61
      keys:    IS_SET     ? $default : getMethod(KEYS),                                                                // 62
      entries: $entries                                                                                                // 63
    };                                                                                                                 // 64
    if(FORCED)for(key in methods){                                                                                     // 65
      if(!(key in proto))redefine(proto, key, methods[key]);                                                           // 66
    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);                                      // 67
  }                                                                                                                    // 68
  return methods;                                                                                                      // 69
};                                                                                                                     // 70
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_iterators.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_iterators.js                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = {};                                                                                                   // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_iter-create.js":["./_object-create","./_property-desc","./_set-to-string-tag","./_hide","./_wks",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_iter-create.js                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var create         = require('./_object-create')                                                                       // 2
  , descriptor     = require('./_property-desc')                                                                       // 3
  , setToStringTag = require('./_set-to-string-tag')                                                                   // 4
  , IteratorPrototype = {};                                                                                            // 5
                                                                                                                       // 6
// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()                                                                        // 7
require('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function(){ return this; });                      // 8
                                                                                                                       // 9
module.exports = function(Constructor, NAME, next){                                                                    // 10
  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});                                      // 11
  setToStringTag(Constructor, NAME + ' Iterator');                                                                     // 12
};                                                                                                                     // 13
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.is-array.js":["./_export","./_is-array",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.array.is-array.js                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 22.1.2.2 / 15.4.3.2 Array.isArray(arg)                                                                              // 1
var $export = require('./_export');                                                                                    // 2
                                                                                                                       // 3
$export($export.S, 'Array', {isArray: require('./_is-array')});                                                        // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.from.js":["./_ctx","./_export","./_to-object","./_iter-call","./_is-array-iter","./_to-length","./_create-property","./core.get-iterator-method","./_iter-detect",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.array.from.js                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var ctx            = require('./_ctx')                                                                                 // 2
  , $export        = require('./_export')                                                                              // 3
  , toObject       = require('./_to-object')                                                                           // 4
  , call           = require('./_iter-call')                                                                           // 5
  , isArrayIter    = require('./_is-array-iter')                                                                       // 6
  , toLength       = require('./_to-length')                                                                           // 7
  , createProperty = require('./_create-property')                                                                     // 8
  , getIterFn      = require('./core.get-iterator-method');                                                            // 9
                                                                                                                       // 10
$export($export.S + $export.F * !require('./_iter-detect')(function(iter){ Array.from(iter); }), 'Array', {            // 11
  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)                                            // 12
  from: function from(arrayLike/*, mapfn = undefined, thisArg = undefined*/){                                          // 13
    var O       = toObject(arrayLike)                                                                                  // 14
      , C       = typeof this == 'function' ? this : Array                                                             // 15
      , aLen    = arguments.length                                                                                     // 16
      , mapfn   = aLen > 1 ? arguments[1] : undefined                                                                  // 17
      , mapping = mapfn !== undefined                                                                                  // 18
      , index   = 0                                                                                                    // 19
      , iterFn  = getIterFn(O)                                                                                         // 20
      , length, result, step, iterator;                                                                                // 21
    if(mapping)mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);                                             // 22
    // if object isn't iterable or it's array with default iterator - use simple case                                  // 23
    if(iterFn != undefined && !(C == Array && isArrayIter(iterFn))){                                                   // 24
      for(iterator = iterFn.call(O), result = new C; !(step = iterator.next()).done; index++){                         // 25
        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);        // 26
      }                                                                                                                // 27
    } else {                                                                                                           // 28
      length = toLength(O.length);                                                                                     // 29
      for(result = new C(length); length > index; index++){                                                            // 30
        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);                                    // 31
      }                                                                                                                // 32
    }                                                                                                                  // 33
    result.length = index;                                                                                             // 34
    return result;                                                                                                     // 35
  }                                                                                                                    // 36
});                                                                                                                    // 37
                                                                                                                       // 38
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_iter-call.js":["./_an-object",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_iter-call.js                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// call something on iterator step with safe closing on error                                                          // 1
var anObject = require('./_an-object');                                                                                // 2
module.exports = function(iterator, fn, value, entries){                                                               // 3
  try {                                                                                                                // 4
    return entries ? fn(anObject(value)[0], value[1]) : fn(value);                                                     // 5
  // 7.4.6 IteratorClose(iterator, completion)                                                                         // 6
  } catch(e){                                                                                                          // 7
    var ret = iterator['return'];                                                                                      // 8
    if(ret !== undefined)anObject(ret.call(iterator));                                                                 // 9
    throw e;                                                                                                           // 10
  }                                                                                                                    // 11
};                                                                                                                     // 12
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_is-array-iter.js":["./_iterators","./_wks",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_is-array-iter.js                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// check on default Array iterator                                                                                     // 1
var Iterators  = require('./_iterators')                                                                               // 2
  , ITERATOR   = require('./_wks')('iterator')                                                                         // 3
  , ArrayProto = Array.prototype;                                                                                      // 4
                                                                                                                       // 5
module.exports = function(it){                                                                                         // 6
  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);                                  // 7
};                                                                                                                     // 8
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_create-property.js":["./_object-dp","./_property-desc",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_create-property.js                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var $defineProperty = require('./_object-dp')                                                                          // 2
  , createDesc      = require('./_property-desc');                                                                     // 3
                                                                                                                       // 4
module.exports = function(object, index, value){                                                                       // 5
  if(index in object)$defineProperty.f(object, index, createDesc(0, value));                                           // 6
  else object[index] = value;                                                                                          // 7
};                                                                                                                     // 8
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"core.get-iterator-method.js":["./_classof","./_wks","./_iterators","./_core",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/core.get-iterator-method.js                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var classof   = require('./_classof')                                                                                  // 1
  , ITERATOR  = require('./_wks')('iterator')                                                                          // 2
  , Iterators = require('./_iterators');                                                                               // 3
module.exports = require('./_core').getIteratorMethod = function(it){                                                  // 4
  if(it != undefined)return it[ITERATOR]                                                                               // 5
    || it['@@iterator']                                                                                                // 6
    || Iterators[classof(it)];                                                                                         // 7
};                                                                                                                     // 8
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_iter-detect.js":["./_wks",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_iter-detect.js                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var ITERATOR     = require('./_wks')('iterator')                                                                       // 1
  , SAFE_CLOSING = false;                                                                                              // 2
                                                                                                                       // 3
try {                                                                                                                  // 4
  var riter = [7][ITERATOR]();                                                                                         // 5
  riter['return'] = function(){ SAFE_CLOSING = true; };                                                                // 6
  Array.from(riter, function(){ throw 2; });                                                                           // 7
} catch(e){ /* empty */ }                                                                                              // 8
                                                                                                                       // 9
module.exports = function(exec, skipClosing){                                                                          // 10
  if(!skipClosing && !SAFE_CLOSING)return false;                                                                       // 11
  var safe = false;                                                                                                    // 12
  try {                                                                                                                // 13
    var arr  = [7]                                                                                                     // 14
      , iter = arr[ITERATOR]();                                                                                        // 15
    iter.next = function(){ return {done: safe = true}; };                                                             // 16
    arr[ITERATOR] = function(){ return iter; };                                                                        // 17
    exec(arr);                                                                                                         // 18
  } catch(e){ /* empty */ }                                                                                            // 19
  return safe;                                                                                                         // 20
};                                                                                                                     // 21
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.of.js":["./_export","./_create-property","./_fails",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.array.of.js                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var $export        = require('./_export')                                                                              // 2
  , createProperty = require('./_create-property');                                                                    // 3
                                                                                                                       // 4
// WebKit Array.of isn't generic                                                                                       // 5
$export($export.S + $export.F * require('./_fails')(function(){                                                        // 6
  function F(){}                                                                                                       // 7
  return !(Array.of.call(F) instanceof F);                                                                             // 8
}), 'Array', {                                                                                                         // 9
  // 22.1.2.3 Array.of( ...items)                                                                                      // 10
  of: function of(/* ...args */){                                                                                      // 11
    var index  = 0                                                                                                     // 12
      , aLen   = arguments.length                                                                                      // 13
      , result = new (typeof this == 'function' ? this : Array)(aLen);                                                 // 14
    while(aLen > index)createProperty(result, index, arguments[index++]);                                              // 15
    result.length = aLen;                                                                                              // 16
    return result;                                                                                                     // 17
  }                                                                                                                    // 18
});                                                                                                                    // 19
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.join.js":["./_export","./_to-iobject","./_iobject","./_strict-method",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.array.join.js                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// 22.1.3.13 Array.prototype.join(separator)                                                                           // 2
var $export   = require('./_export')                                                                                   // 3
  , toIObject = require('./_to-iobject')                                                                               // 4
  , arrayJoin = [].join;                                                                                               // 5
                                                                                                                       // 6
// fallback for not array-like strings                                                                                 // 7
$export($export.P + $export.F * (require('./_iobject') != Object || !require('./_strict-method')(arrayJoin)), 'Array', {
  join: function join(separator){                                                                                      // 9
    return arrayJoin.call(toIObject(this), separator === undefined ? ',' : separator);                                 // 10
  }                                                                                                                    // 11
});                                                                                                                    // 12
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_strict-method.js":["./_fails",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_strict-method.js                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var fails = require('./_fails');                                                                                       // 1
                                                                                                                       // 2
module.exports = function(method, arg){                                                                                // 3
  return !!method && fails(function(){                                                                                 // 4
    arg ? method.call(null, function(){}, 1) : method.call(null);                                                      // 5
  });                                                                                                                  // 6
};                                                                                                                     // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.slice.js":["./_export","./_html","./_cof","./_to-index","./_to-length","./_fails",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.array.slice.js                              //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var $export    = require('./_export')                                                                                  // 2
  , html       = require('./_html')                                                                                    // 3
  , cof        = require('./_cof')                                                                                     // 4
  , toIndex    = require('./_to-index')                                                                                // 5
  , toLength   = require('./_to-length')                                                                               // 6
  , arraySlice = [].slice;                                                                                             // 7
                                                                                                                       // 8
// fallback for not array-like ES3 strings and DOM objects                                                             // 9
$export($export.P + $export.F * require('./_fails')(function(){                                                        // 10
  if(html)arraySlice.call(html);                                                                                       // 11
}), 'Array', {                                                                                                         // 12
  slice: function slice(begin, end){                                                                                   // 13
    var len   = toLength(this.length)                                                                                  // 14
      , klass = cof(this);                                                                                             // 15
    end = end === undefined ? len : end;                                                                               // 16
    if(klass == 'Array')return arraySlice.call(this, begin, end);                                                      // 17
    var start  = toIndex(begin, len)                                                                                   // 18
      , upTo   = toIndex(end, len)                                                                                     // 19
      , size   = toLength(upTo - start)                                                                                // 20
      , cloned = Array(size)                                                                                           // 21
      , i      = 0;                                                                                                    // 22
    for(; i < size; i++)cloned[i] = klass == 'String'                                                                  // 23
      ? this.charAt(start + i)                                                                                         // 24
      : this[start + i];                                                                                               // 25
    return cloned;                                                                                                     // 26
  }                                                                                                                    // 27
});                                                                                                                    // 28
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.sort.js":["./_export","./_a-function","./_to-object","./_fails","./_strict-method",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.array.sort.js                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var $export   = require('./_export')                                                                                   // 2
  , aFunction = require('./_a-function')                                                                               // 3
  , toObject  = require('./_to-object')                                                                                // 4
  , fails     = require('./_fails')                                                                                    // 5
  , $sort     = [].sort                                                                                                // 6
  , test      = [1, 2, 3];                                                                                             // 7
                                                                                                                       // 8
$export($export.P + $export.F * (fails(function(){                                                                     // 9
  // IE8-                                                                                                              // 10
  test.sort(undefined);                                                                                                // 11
}) || !fails(function(){                                                                                               // 12
  // V8 bug                                                                                                            // 13
  test.sort(null);                                                                                                     // 14
  // Old WebKit                                                                                                        // 15
}) || !require('./_strict-method')($sort)), 'Array', {                                                                 // 16
  // 22.1.3.25 Array.prototype.sort(comparefn)                                                                         // 17
  sort: function sort(comparefn){                                                                                      // 18
    return comparefn === undefined                                                                                     // 19
      ? $sort.call(toObject(this))                                                                                     // 20
      : $sort.call(toObject(this), aFunction(comparefn));                                                              // 21
  }                                                                                                                    // 22
});                                                                                                                    // 23
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.for-each.js":["./_export","./_array-methods","./_strict-method",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.array.for-each.js                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var $export  = require('./_export')                                                                                    // 2
  , $forEach = require('./_array-methods')(0)                                                                          // 3
  , STRICT   = require('./_strict-method')([].forEach, true);                                                          // 4
                                                                                                                       // 5
$export($export.P + $export.F * !STRICT, 'Array', {                                                                    // 6
  // 22.1.3.10 / 15.4.4.18 Array.prototype.forEach(callbackfn [, thisArg])                                             // 7
  forEach: function forEach(callbackfn /* , thisArg */){                                                               // 8
    return $forEach(this, callbackfn, arguments[1]);                                                                   // 9
  }                                                                                                                    // 10
});                                                                                                                    // 11
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_array-methods.js":["./_ctx","./_iobject","./_to-object","./_to-length","./_array-species-create",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_array-methods.js                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 0 -> Array#forEach                                                                                                  // 1
// 1 -> Array#map                                                                                                      // 2
// 2 -> Array#filter                                                                                                   // 3
// 3 -> Array#some                                                                                                     // 4
// 4 -> Array#every                                                                                                    // 5
// 5 -> Array#find                                                                                                     // 6
// 6 -> Array#findIndex                                                                                                // 7
var ctx      = require('./_ctx')                                                                                       // 8
  , IObject  = require('./_iobject')                                                                                   // 9
  , toObject = require('./_to-object')                                                                                 // 10
  , toLength = require('./_to-length')                                                                                 // 11
  , asc      = require('./_array-species-create');                                                                     // 12
module.exports = function(TYPE, $create){                                                                              // 13
  var IS_MAP        = TYPE == 1                                                                                        // 14
    , IS_FILTER     = TYPE == 2                                                                                        // 15
    , IS_SOME       = TYPE == 3                                                                                        // 16
    , IS_EVERY      = TYPE == 4                                                                                        // 17
    , IS_FIND_INDEX = TYPE == 6                                                                                        // 18
    , NO_HOLES      = TYPE == 5 || IS_FIND_INDEX                                                                       // 19
    , create        = $create || asc;                                                                                  // 20
  return function($this, callbackfn, that){                                                                            // 21
    var O      = toObject($this)                                                                                       // 22
      , self   = IObject(O)                                                                                            // 23
      , f      = ctx(callbackfn, that, 3)                                                                              // 24
      , length = toLength(self.length)                                                                                 // 25
      , index  = 0                                                                                                     // 26
      , result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined                             // 27
      , val, res;                                                                                                      // 28
    for(;length > index; index++)if(NO_HOLES || index in self){                                                        // 29
      val = self[index];                                                                                               // 30
      res = f(val, index, O);                                                                                          // 31
      if(TYPE){                                                                                                        // 32
        if(IS_MAP)result[index] = res;            // map                                                               // 33
        else if(res)switch(TYPE){                                                                                      // 34
          case 3: return true;                    // some                                                              // 35
          case 5: return val;                     // find                                                              // 36
          case 6: return index;                   // findIndex                                                         // 37
          case 2: result.push(val);               // filter                                                            // 38
        } else if(IS_EVERY)return false;          // every                                                             // 39
      }                                                                                                                // 40
    }                                                                                                                  // 41
    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;                                               // 42
  };                                                                                                                   // 43
};                                                                                                                     // 44
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_array-species-create.js":["./_array-species-constructor",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_array-species-create.js                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 9.4.2.3 ArraySpeciesCreate(originalArray, length)                                                                   // 1
var speciesConstructor = require('./_array-species-constructor');                                                      // 2
                                                                                                                       // 3
module.exports = function(original, length){                                                                           // 4
  return new (speciesConstructor(original))(length);                                                                   // 5
};                                                                                                                     // 6
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_array-species-constructor.js":["./_is-object","./_is-array","./_wks",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_array-species-constructor.js                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var isObject = require('./_is-object')                                                                                 // 1
  , isArray  = require('./_is-array')                                                                                  // 2
  , SPECIES  = require('./_wks')('species');                                                                           // 3
                                                                                                                       // 4
module.exports = function(original){                                                                                   // 5
  var C;                                                                                                               // 6
  if(isArray(original)){                                                                                               // 7
    C = original.constructor;                                                                                          // 8
    // cross-realm fallback                                                                                            // 9
    if(typeof C == 'function' && (C === Array || isArray(C.prototype)))C = undefined;                                  // 10
    if(isObject(C)){                                                                                                   // 11
      C = C[SPECIES];                                                                                                  // 12
      if(C === null)C = undefined;                                                                                     // 13
    }                                                                                                                  // 14
  } return C === undefined ? Array : C;                                                                                // 15
};                                                                                                                     // 16
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.map.js":["./_export","./_array-methods","./_strict-method",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.array.map.js                                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var $export = require('./_export')                                                                                     // 2
  , $map    = require('./_array-methods')(1);                                                                          // 3
                                                                                                                       // 4
$export($export.P + $export.F * !require('./_strict-method')([].map, true), 'Array', {                                 // 5
  // 22.1.3.15 / 15.4.4.19 Array.prototype.map(callbackfn [, thisArg])                                                 // 6
  map: function map(callbackfn /* , thisArg */){                                                                       // 7
    return $map(this, callbackfn, arguments[1]);                                                                       // 8
  }                                                                                                                    // 9
});                                                                                                                    // 10
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.filter.js":["./_export","./_array-methods","./_strict-method",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.array.filter.js                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var $export = require('./_export')                                                                                     // 2
  , $filter = require('./_array-methods')(2);                                                                          // 3
                                                                                                                       // 4
$export($export.P + $export.F * !require('./_strict-method')([].filter, true), 'Array', {                              // 5
  // 22.1.3.7 / 15.4.4.20 Array.prototype.filter(callbackfn [, thisArg])                                               // 6
  filter: function filter(callbackfn /* , thisArg */){                                                                 // 7
    return $filter(this, callbackfn, arguments[1]);                                                                    // 8
  }                                                                                                                    // 9
});                                                                                                                    // 10
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.some.js":["./_export","./_array-methods","./_strict-method",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.array.some.js                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var $export = require('./_export')                                                                                     // 2
  , $some   = require('./_array-methods')(3);                                                                          // 3
                                                                                                                       // 4
$export($export.P + $export.F * !require('./_strict-method')([].some, true), 'Array', {                                // 5
  // 22.1.3.23 / 15.4.4.17 Array.prototype.some(callbackfn [, thisArg])                                                // 6
  some: function some(callbackfn /* , thisArg */){                                                                     // 7
    return $some(this, callbackfn, arguments[1]);                                                                      // 8
  }                                                                                                                    // 9
});                                                                                                                    // 10
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.every.js":["./_export","./_array-methods","./_strict-method",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.array.every.js                              //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var $export = require('./_export')                                                                                     // 2
  , $every  = require('./_array-methods')(4);                                                                          // 3
                                                                                                                       // 4
$export($export.P + $export.F * !require('./_strict-method')([].every, true), 'Array', {                               // 5
  // 22.1.3.5 / 15.4.4.16 Array.prototype.every(callbackfn [, thisArg])                                                // 6
  every: function every(callbackfn /* , thisArg */){                                                                   // 7
    return $every(this, callbackfn, arguments[1]);                                                                     // 8
  }                                                                                                                    // 9
});                                                                                                                    // 10
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.reduce.js":["./_export","./_array-reduce","./_strict-method",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.array.reduce.js                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var $export = require('./_export')                                                                                     // 2
  , $reduce = require('./_array-reduce');                                                                              // 3
                                                                                                                       // 4
$export($export.P + $export.F * !require('./_strict-method')([].reduce, true), 'Array', {                              // 5
  // 22.1.3.18 / 15.4.4.21 Array.prototype.reduce(callbackfn [, initialValue])                                         // 6
  reduce: function reduce(callbackfn /* , initialValue */){                                                            // 7
    return $reduce(this, callbackfn, arguments.length, arguments[1], false);                                           // 8
  }                                                                                                                    // 9
});                                                                                                                    // 10
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_array-reduce.js":["./_a-function","./_to-object","./_iobject","./_to-length",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_array-reduce.js                                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var aFunction = require('./_a-function')                                                                               // 1
  , toObject  = require('./_to-object')                                                                                // 2
  , IObject   = require('./_iobject')                                                                                  // 3
  , toLength  = require('./_to-length');                                                                               // 4
                                                                                                                       // 5
module.exports = function(that, callbackfn, aLen, memo, isRight){                                                      // 6
  aFunction(callbackfn);                                                                                               // 7
  var O      = toObject(that)                                                                                          // 8
    , self   = IObject(O)                                                                                              // 9
    , length = toLength(O.length)                                                                                      // 10
    , index  = isRight ? length - 1 : 0                                                                                // 11
    , i      = isRight ? -1 : 1;                                                                                       // 12
  if(aLen < 2)for(;;){                                                                                                 // 13
    if(index in self){                                                                                                 // 14
      memo = self[index];                                                                                              // 15
      index += i;                                                                                                      // 16
      break;                                                                                                           // 17
    }                                                                                                                  // 18
    index += i;                                                                                                        // 19
    if(isRight ? index < 0 : length <= index){                                                                         // 20
      throw TypeError('Reduce of empty array with no initial value');                                                  // 21
    }                                                                                                                  // 22
  }                                                                                                                    // 23
  for(;isRight ? index >= 0 : length > index; index += i)if(index in self){                                            // 24
    memo = callbackfn(memo, self[index], index, O);                                                                    // 25
  }                                                                                                                    // 26
  return memo;                                                                                                         // 27
};                                                                                                                     // 28
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.reduce-right.js":["./_export","./_array-reduce","./_strict-method",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.array.reduce-right.js                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var $export = require('./_export')                                                                                     // 2
  , $reduce = require('./_array-reduce');                                                                              // 3
                                                                                                                       // 4
$export($export.P + $export.F * !require('./_strict-method')([].reduceRight, true), 'Array', {                         // 5
  // 22.1.3.19 / 15.4.4.22 Array.prototype.reduceRight(callbackfn [, initialValue])                                    // 6
  reduceRight: function reduceRight(callbackfn /* , initialValue */){                                                  // 7
    return $reduce(this, callbackfn, arguments.length, arguments[1], true);                                            // 8
  }                                                                                                                    // 9
});                                                                                                                    // 10
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.index-of.js":["./_export","./_array-includes","./_strict-method",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.array.index-of.js                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var $export       = require('./_export')                                                                               // 2
  , $indexOf      = require('./_array-includes')(false)                                                                // 3
  , $native       = [].indexOf                                                                                         // 4
  , NEGATIVE_ZERO = !!$native && 1 / [1].indexOf(1, -0) < 0;                                                           // 5
                                                                                                                       // 6
$export($export.P + $export.F * (NEGATIVE_ZERO || !require('./_strict-method')($native)), 'Array', {                   // 7
  // 22.1.3.11 / 15.4.4.14 Array.prototype.indexOf(searchElement [, fromIndex])                                        // 8
  indexOf: function indexOf(searchElement /*, fromIndex = 0 */){                                                       // 9
    return NEGATIVE_ZERO                                                                                               // 10
      // convert -0 to +0                                                                                              // 11
      ? $native.apply(this, arguments) || 0                                                                            // 12
      : $indexOf(this, searchElement, arguments[1]);                                                                   // 13
  }                                                                                                                    // 14
});                                                                                                                    // 15
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.last-index-of.js":["./_export","./_to-iobject","./_to-integer","./_to-length","./_strict-method",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.array.last-index-of.js                      //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var $export       = require('./_export')                                                                               // 2
  , toIObject     = require('./_to-iobject')                                                                           // 3
  , toInteger     = require('./_to-integer')                                                                           // 4
  , toLength      = require('./_to-length')                                                                            // 5
  , $native       = [].lastIndexOf                                                                                     // 6
  , NEGATIVE_ZERO = !!$native && 1 / [1].lastIndexOf(1, -0) < 0;                                                       // 7
                                                                                                                       // 8
$export($export.P + $export.F * (NEGATIVE_ZERO || !require('./_strict-method')($native)), 'Array', {                   // 9
  // 22.1.3.14 / 15.4.4.15 Array.prototype.lastIndexOf(searchElement [, fromIndex])                                    // 10
  lastIndexOf: function lastIndexOf(searchElement /*, fromIndex = @[*-1] */){                                          // 11
    // convert -0 to +0                                                                                                // 12
    if(NEGATIVE_ZERO)return $native.apply(this, arguments) || 0;                                                       // 13
    var O      = toIObject(this)                                                                                       // 14
      , length = toLength(O.length)                                                                                    // 15
      , index  = length - 1;                                                                                           // 16
    if(arguments.length > 1)index = Math.min(index, toInteger(arguments[1]));                                          // 17
    if(index < 0)index = length + index;                                                                               // 18
    for(;index >= 0; index--)if(index in O)if(O[index] === searchElement)return index || 0;                            // 19
    return -1;                                                                                                         // 20
  }                                                                                                                    // 21
});                                                                                                                    // 22
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.copy-within.js":["./_export","./_array-copy-within","./_add-to-unscopables",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.array.copy-within.js                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)                                               // 1
var $export = require('./_export');                                                                                    // 2
                                                                                                                       // 3
$export($export.P, 'Array', {copyWithin: require('./_array-copy-within')});                                            // 4
                                                                                                                       // 5
require('./_add-to-unscopables')('copyWithin');                                                                        // 6
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_array-copy-within.js":["./_to-object","./_to-index","./_to-length",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_array-copy-within.js                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)                                               // 1
'use strict';                                                                                                          // 2
var toObject = require('./_to-object')                                                                                 // 3
  , toIndex  = require('./_to-index')                                                                                  // 4
  , toLength = require('./_to-length');                                                                                // 5
                                                                                                                       // 6
module.exports = [].copyWithin || function copyWithin(target/*= 0*/, start/*= 0, end = @length*/){                     // 7
  var O     = toObject(this)                                                                                           // 8
    , len   = toLength(O.length)                                                                                       // 9
    , to    = toIndex(target, len)                                                                                     // 10
    , from  = toIndex(start, len)                                                                                      // 11
    , end   = arguments.length > 2 ? arguments[2] : undefined                                                          // 12
    , count = Math.min((end === undefined ? len : toIndex(end, len)) - from, len - to)                                 // 13
    , inc   = 1;                                                                                                       // 14
  if(from < to && to < from + count){                                                                                  // 15
    inc  = -1;                                                                                                         // 16
    from += count - 1;                                                                                                 // 17
    to   += count - 1;                                                                                                 // 18
  }                                                                                                                    // 19
  while(count-- > 0){                                                                                                  // 20
    if(from in O)O[to] = O[from];                                                                                      // 21
    else delete O[to];                                                                                                 // 22
    to   += inc;                                                                                                       // 23
    from += inc;                                                                                                       // 24
  } return O;                                                                                                          // 25
};                                                                                                                     // 26
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_add-to-unscopables.js":["./_wks","./_hide",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_add-to-unscopables.js                          //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 22.1.3.31 Array.prototype[@@unscopables]                                                                            // 1
var UNSCOPABLES = require('./_wks')('unscopables')                                                                     // 2
  , ArrayProto  = Array.prototype;                                                                                     // 3
if(ArrayProto[UNSCOPABLES] == undefined)require('./_hide')(ArrayProto, UNSCOPABLES, {});                               // 4
module.exports = function(key){                                                                                        // 5
  ArrayProto[UNSCOPABLES][key] = true;                                                                                 // 6
};                                                                                                                     // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.fill.js":["./_export","./_array-fill","./_add-to-unscopables",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.array.fill.js                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)                                                  // 1
var $export = require('./_export');                                                                                    // 2
                                                                                                                       // 3
$export($export.P, 'Array', {fill: require('./_array-fill')});                                                         // 4
                                                                                                                       // 5
require('./_add-to-unscopables')('fill');                                                                              // 6
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_array-fill.js":["./_to-object","./_to-index","./_to-length",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_array-fill.js                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)                                                  // 1
'use strict';                                                                                                          // 2
var toObject = require('./_to-object')                                                                                 // 3
  , toIndex  = require('./_to-index')                                                                                  // 4
  , toLength = require('./_to-length');                                                                                // 5
module.exports = function fill(value /*, start = 0, end = @length */){                                                 // 6
  var O      = toObject(this)                                                                                          // 7
    , length = toLength(O.length)                                                                                      // 8
    , aLen   = arguments.length                                                                                        // 9
    , index  = toIndex(aLen > 1 ? arguments[1] : undefined, length)                                                    // 10
    , end    = aLen > 2 ? arguments[2] : undefined                                                                     // 11
    , endPos = end === undefined ? length : toIndex(end, length);                                                      // 12
  while(endPos > index)O[index++] = value;                                                                             // 13
  return O;                                                                                                            // 14
};                                                                                                                     // 15
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.find.js":["./_export","./_array-methods","./_add-to-unscopables",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.array.find.js                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)                                                       // 2
var $export = require('./_export')                                                                                     // 3
  , $find   = require('./_array-methods')(5)                                                                           // 4
  , KEY     = 'find'                                                                                                   // 5
  , forced  = true;                                                                                                    // 6
// Shouldn't skip holes                                                                                                // 7
if(KEY in [])Array(1)[KEY](function(){ forced = false; });                                                             // 8
$export($export.P + $export.F * forced, 'Array', {                                                                     // 9
  find: function find(callbackfn/*, that = undefined */){                                                              // 10
    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);                                   // 11
  }                                                                                                                    // 12
});                                                                                                                    // 13
require('./_add-to-unscopables')(KEY);                                                                                 // 14
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.find-index.js":["./_export","./_array-methods","./_add-to-unscopables",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.array.find-index.js                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)                                                  // 2
var $export = require('./_export')                                                                                     // 3
  , $find   = require('./_array-methods')(6)                                                                           // 4
  , KEY     = 'findIndex'                                                                                              // 5
  , forced  = true;                                                                                                    // 6
// Shouldn't skip holes                                                                                                // 7
if(KEY in [])Array(1)[KEY](function(){ forced = false; });                                                             // 8
$export($export.P + $export.F * forced, 'Array', {                                                                     // 9
  findIndex: function findIndex(callbackfn/*, that = undefined */){                                                    // 10
    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);                                   // 11
  }                                                                                                                    // 12
});                                                                                                                    // 13
require('./_add-to-unscopables')(KEY);                                                                                 // 14
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.species.js":["./_set-species",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.array.species.js                            //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('./_set-species')('Array');                                                                                    // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_set-species.js":["./_global","./_object-dp","./_descriptors","./_wks",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_set-species.js                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var global      = require('./_global')                                                                                 // 2
  , dP          = require('./_object-dp')                                                                              // 3
  , DESCRIPTORS = require('./_descriptors')                                                                            // 4
  , SPECIES     = require('./_wks')('species');                                                                        // 5
                                                                                                                       // 6
module.exports = function(KEY){                                                                                        // 7
  var C = global[KEY];                                                                                                 // 8
  if(DESCRIPTORS && C && !C[SPECIES])dP.f(C, SPECIES, {                                                                // 9
    configurable: true,                                                                                                // 10
    get: function(){ return this; }                                                                                    // 11
  });                                                                                                                  // 12
};                                                                                                                     // 13
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.array.iterator.js":["./_add-to-unscopables","./_iter-step","./_iterators","./_to-iobject","./_iter-define",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.array.iterator.js                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var addToUnscopables = require('./_add-to-unscopables')                                                                // 2
  , step             = require('./_iter-step')                                                                         // 3
  , Iterators        = require('./_iterators')                                                                         // 4
  , toIObject        = require('./_to-iobject');                                                                       // 5
                                                                                                                       // 6
// 22.1.3.4 Array.prototype.entries()                                                                                  // 7
// 22.1.3.13 Array.prototype.keys()                                                                                    // 8
// 22.1.3.29 Array.prototype.values()                                                                                  // 9
// 22.1.3.30 Array.prototype[@@iterator]()                                                                             // 10
module.exports = require('./_iter-define')(Array, 'Array', function(iterated, kind){                                   // 11
  this._t = toIObject(iterated); // target                                                                             // 12
  this._i = 0;                   // next index                                                                         // 13
  this._k = kind;                // kind                                                                               // 14
// 22.1.5.2.1 %ArrayIteratorPrototype%.next()                                                                          // 15
}, function(){                                                                                                         // 16
  var O     = this._t                                                                                                  // 17
    , kind  = this._k                                                                                                  // 18
    , index = this._i++;                                                                                               // 19
  if(!O || index >= O.length){                                                                                         // 20
    this._t = undefined;                                                                                               // 21
    return step(1);                                                                                                    // 22
  }                                                                                                                    // 23
  if(kind == 'keys'  )return step(0, index);                                                                           // 24
  if(kind == 'values')return step(0, O[index]);                                                                        // 25
  return step(0, [index, O[index]]);                                                                                   // 26
}, 'values');                                                                                                          // 27
                                                                                                                       // 28
// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)                                                 // 29
Iterators.Arguments = Iterators.Array;                                                                                 // 30
                                                                                                                       // 31
addToUnscopables('keys');                                                                                              // 32
addToUnscopables('values');                                                                                            // 33
addToUnscopables('entries');                                                                                           // 34
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_iter-step.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_iter-step.js                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = function(done, value){                                                                                // 1
  return {value: value, done: !!done};                                                                                 // 2
};                                                                                                                     // 3
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"es6.string.from-code-point.js":["./_export","./_to-index",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.from-code-point.js                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var $export        = require('./_export')                                                                              // 1
  , toIndex        = require('./_to-index')                                                                            // 2
  , fromCharCode   = String.fromCharCode                                                                               // 3
  , $fromCodePoint = String.fromCodePoint;                                                                             // 4
                                                                                                                       // 5
// length should be 1, old FF problem                                                                                  // 6
$export($export.S + $export.F * (!!$fromCodePoint && $fromCodePoint.length != 1), 'String', {                          // 7
  // 21.1.2.2 String.fromCodePoint(...codePoints)                                                                      // 8
  fromCodePoint: function fromCodePoint(x){ // eslint-disable-line no-unused-vars                                      // 9
    var res  = []                                                                                                      // 10
      , aLen = arguments.length                                                                                        // 11
      , i    = 0                                                                                                       // 12
      , code;                                                                                                          // 13
    while(aLen > i){                                                                                                   // 14
      code = +arguments[i++];                                                                                          // 15
      if(toIndex(code, 0x10ffff) !== code)throw RangeError(code + ' is not a valid code point');                       // 16
      res.push(code < 0x10000                                                                                          // 17
        ? fromCharCode(code)                                                                                           // 18
        : fromCharCode(((code -= 0x10000) >> 10) + 0xd800, code % 0x400 + 0xdc00)                                      // 19
      );                                                                                                               // 20
    } return res.join('');                                                                                             // 21
  }                                                                                                                    // 22
});                                                                                                                    // 23
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.string.raw.js":["./_export","./_to-iobject","./_to-length",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.raw.js                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var $export   = require('./_export')                                                                                   // 1
  , toIObject = require('./_to-iobject')                                                                               // 2
  , toLength  = require('./_to-length');                                                                               // 3
                                                                                                                       // 4
$export($export.S, 'String', {                                                                                         // 5
  // 21.1.2.4 String.raw(callSite, ...substitutions)                                                                   // 6
  raw: function raw(callSite){                                                                                         // 7
    var tpl  = toIObject(callSite.raw)                                                                                 // 8
      , len  = toLength(tpl.length)                                                                                    // 9
      , aLen = arguments.length                                                                                        // 10
      , res  = []                                                                                                      // 11
      , i    = 0;                                                                                                      // 12
    while(len > i){                                                                                                    // 13
      res.push(String(tpl[i++]));                                                                                      // 14
      if(i < aLen)res.push(String(arguments[i]));                                                                      // 15
    } return res.join('');                                                                                             // 16
  }                                                                                                                    // 17
});                                                                                                                    // 18
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.string.trim.js":["./_string-trim",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.trim.js                              //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// 21.1.3.25 String.prototype.trim()                                                                                   // 2
require('./_string-trim')('trim', function($trim){                                                                     // 3
  return function trim(){                                                                                              // 4
    return $trim(this, 3);                                                                                             // 5
  };                                                                                                                   // 6
});                                                                                                                    // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_string-trim.js":["./_export","./_defined","./_fails","./_string-ws",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_string-trim.js                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var $export = require('./_export')                                                                                     // 1
  , defined = require('./_defined')                                                                                    // 2
  , fails   = require('./_fails')                                                                                      // 3
  , spaces  = require('./_string-ws')                                                                                  // 4
  , space   = '[' + spaces + ']'                                                                                       // 5
  , non     = '\u200b\u0085'                                                                                           // 6
  , ltrim   = RegExp('^' + space + space + '*')                                                                        // 7
  , rtrim   = RegExp(space + space + '*$');                                                                            // 8
                                                                                                                       // 9
var exporter = function(KEY, exec, ALIAS){                                                                             // 10
  var exp   = {};                                                                                                      // 11
  var FORCE = fails(function(){                                                                                        // 12
    return !!spaces[KEY]() || non[KEY]() != non;                                                                       // 13
  });                                                                                                                  // 14
  var fn = exp[KEY] = FORCE ? exec(trim) : spaces[KEY];                                                                // 15
  if(ALIAS)exp[ALIAS] = fn;                                                                                            // 16
  $export($export.P + $export.F * FORCE, 'String', exp);                                                               // 17
};                                                                                                                     // 18
                                                                                                                       // 19
// 1 -> String#trimLeft                                                                                                // 20
// 2 -> String#trimRight                                                                                               // 21
// 3 -> String#trim                                                                                                    // 22
var trim = exporter.trim = function(string, TYPE){                                                                     // 23
  string = String(defined(string));                                                                                    // 24
  if(TYPE & 1)string = string.replace(ltrim, '');                                                                      // 25
  if(TYPE & 2)string = string.replace(rtrim, '');                                                                      // 26
  return string;                                                                                                       // 27
};                                                                                                                     // 28
                                                                                                                       // 29
module.exports = exporter;                                                                                             // 30
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_string-ws.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_string-ws.js                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = '\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003' +                                  // 1
  '\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF';                                    // 2
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"es6.string.code-point-at.js":["./_export","./_string-at",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.code-point-at.js                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var $export = require('./_export')                                                                                     // 2
  , $at     = require('./_string-at')(false);                                                                          // 3
$export($export.P, 'String', {                                                                                         // 4
  // 21.1.3.3 String.prototype.codePointAt(pos)                                                                        // 5
  codePointAt: function codePointAt(pos){                                                                              // 6
    return $at(this, pos);                                                                                             // 7
  }                                                                                                                    // 8
});                                                                                                                    // 9
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.string.ends-with.js":["./_export","./_to-length","./_string-context","./_fails-is-regexp",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.ends-with.js                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 21.1.3.6 String.prototype.endsWith(searchString [, endPosition])                                                    // 1
'use strict';                                                                                                          // 2
var $export   = require('./_export')                                                                                   // 3
  , toLength  = require('./_to-length')                                                                                // 4
  , context   = require('./_string-context')                                                                           // 5
  , ENDS_WITH = 'endsWith'                                                                                             // 6
  , $endsWith = ''[ENDS_WITH];                                                                                         // 7
                                                                                                                       // 8
$export($export.P + $export.F * require('./_fails-is-regexp')(ENDS_WITH), 'String', {                                  // 9
  endsWith: function endsWith(searchString /*, endPosition = @length */){                                              // 10
    var that = context(this, searchString, ENDS_WITH)                                                                  // 11
      , endPosition = arguments.length > 1 ? arguments[1] : undefined                                                  // 12
      , len    = toLength(that.length)                                                                                 // 13
      , end    = endPosition === undefined ? len : Math.min(toLength(endPosition), len)                                // 14
      , search = String(searchString);                                                                                 // 15
    return $endsWith                                                                                                   // 16
      ? $endsWith.call(that, search, end)                                                                              // 17
      : that.slice(end - search.length, end) === search;                                                               // 18
  }                                                                                                                    // 19
});                                                                                                                    // 20
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_string-context.js":["./_is-regexp","./_defined",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_string-context.js                              //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// helper for String#{startsWith, endsWith, includes}                                                                  // 1
var isRegExp = require('./_is-regexp')                                                                                 // 2
  , defined  = require('./_defined');                                                                                  // 3
                                                                                                                       // 4
module.exports = function(that, searchString, NAME){                                                                   // 5
  if(isRegExp(searchString))throw TypeError('String#' + NAME + " doesn't accept regex!");                              // 6
  return String(defined(that));                                                                                        // 7
};                                                                                                                     // 8
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_is-regexp.js":["./_is-object","./_cof","./_wks",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_is-regexp.js                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 7.2.8 IsRegExp(argument)                                                                                            // 1
var isObject = require('./_is-object')                                                                                 // 2
  , cof      = require('./_cof')                                                                                       // 3
  , MATCH    = require('./_wks')('match');                                                                             // 4
module.exports = function(it){                                                                                         // 5
  var isRegExp;                                                                                                        // 6
  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');                    // 7
};                                                                                                                     // 8
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_fails-is-regexp.js":["./_wks",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_fails-is-regexp.js                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var MATCH = require('./_wks')('match');                                                                                // 1
module.exports = function(KEY){                                                                                        // 2
  var re = /./;                                                                                                        // 3
  try {                                                                                                                // 4
    '/./'[KEY](re);                                                                                                    // 5
  } catch(e){                                                                                                          // 6
    try {                                                                                                              // 7
      re[MATCH] = false;                                                                                               // 8
      return !'/./'[KEY](re);                                                                                          // 9
    } catch(f){ /* empty */ }                                                                                          // 10
  } return true;                                                                                                       // 11
};                                                                                                                     // 12
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.string.includes.js":["./_export","./_string-context","./_fails-is-regexp",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.includes.js                          //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 21.1.3.7 String.prototype.includes(searchString, position = 0)                                                      // 1
'use strict';                                                                                                          // 2
var $export  = require('./_export')                                                                                    // 3
  , context  = require('./_string-context')                                                                            // 4
  , INCLUDES = 'includes';                                                                                             // 5
                                                                                                                       // 6
$export($export.P + $export.F * require('./_fails-is-regexp')(INCLUDES), 'String', {                                   // 7
  includes: function includes(searchString /*, position = 0 */){                                                       // 8
    return !!~context(this, searchString, INCLUDES)                                                                    // 9
      .indexOf(searchString, arguments.length > 1 ? arguments[1] : undefined);                                         // 10
  }                                                                                                                    // 11
});                                                                                                                    // 12
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.string.repeat.js":["./_export","./_string-repeat",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.repeat.js                            //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var $export = require('./_export');                                                                                    // 1
                                                                                                                       // 2
$export($export.P, 'String', {                                                                                         // 3
  // 21.1.3.13 String.prototype.repeat(count)                                                                          // 4
  repeat: require('./_string-repeat')                                                                                  // 5
});                                                                                                                    // 6
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_string-repeat.js":["./_to-integer","./_defined",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_string-repeat.js                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var toInteger = require('./_to-integer')                                                                               // 2
  , defined   = require('./_defined');                                                                                 // 3
                                                                                                                       // 4
module.exports = function repeat(count){                                                                               // 5
  var str = String(defined(this))                                                                                      // 6
    , res = ''                                                                                                         // 7
    , n   = toInteger(count);                                                                                          // 8
  if(n < 0 || n == Infinity)throw RangeError("Count can't be negative");                                               // 9
  for(;n > 0; (n >>>= 1) && (str += str))if(n & 1)res += str;                                                          // 10
  return res;                                                                                                          // 11
};                                                                                                                     // 12
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.string.starts-with.js":["./_export","./_to-length","./_string-context","./_fails-is-regexp",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.starts-with.js                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 21.1.3.18 String.prototype.startsWith(searchString [, position ])                                                   // 1
'use strict';                                                                                                          // 2
var $export     = require('./_export')                                                                                 // 3
  , toLength    = require('./_to-length')                                                                              // 4
  , context     = require('./_string-context')                                                                         // 5
  , STARTS_WITH = 'startsWith'                                                                                         // 6
  , $startsWith = ''[STARTS_WITH];                                                                                     // 7
                                                                                                                       // 8
$export($export.P + $export.F * require('./_fails-is-regexp')(STARTS_WITH), 'String', {                                // 9
  startsWith: function startsWith(searchString /*, position = 0 */){                                                   // 10
    var that   = context(this, searchString, STARTS_WITH)                                                              // 11
      , index  = toLength(Math.min(arguments.length > 1 ? arguments[1] : undefined, that.length))                      // 12
      , search = String(searchString);                                                                                 // 13
    return $startsWith                                                                                                 // 14
      ? $startsWith.call(that, search, index)                                                                          // 15
      : that.slice(index, index + search.length) === search;                                                           // 16
  }                                                                                                                    // 17
});                                                                                                                    // 18
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.string.anchor.js":["./_string-html",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.anchor.js                            //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// B.2.3.2 String.prototype.anchor(name)                                                                               // 2
require('./_string-html')('anchor', function(createHTML){                                                              // 3
  return function anchor(name){                                                                                        // 4
    return createHTML(this, 'a', 'name', name);                                                                        // 5
  }                                                                                                                    // 6
});                                                                                                                    // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_string-html.js":["./_export","./_fails","./_defined",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_string-html.js                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var $export = require('./_export')                                                                                     // 1
  , fails   = require('./_fails')                                                                                      // 2
  , defined = require('./_defined')                                                                                    // 3
  , quot    = /"/g;                                                                                                    // 4
// B.2.3.2.1 CreateHTML(string, tag, attribute, value)                                                                 // 5
var createHTML = function(string, tag, attribute, value) {                                                             // 6
  var S  = String(defined(string))                                                                                     // 7
    , p1 = '<' + tag;                                                                                                  // 8
  if(attribute !== '')p1 += ' ' + attribute + '="' + String(value).replace(quot, '&quot;') + '"';                      // 9
  return p1 + '>' + S + '</' + tag + '>';                                                                              // 10
};                                                                                                                     // 11
module.exports = function(NAME, exec){                                                                                 // 12
  var O = {};                                                                                                          // 13
  O[NAME] = exec(createHTML);                                                                                          // 14
  $export($export.P + $export.F * fails(function(){                                                                    // 15
    var test = ''[NAME]('"');                                                                                          // 16
    return test !== test.toLowerCase() || test.split('"').length > 3;                                                  // 17
  }), 'String', O);                                                                                                    // 18
};                                                                                                                     // 19
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.string.big.js":["./_string-html",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.big.js                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// B.2.3.3 String.prototype.big()                                                                                      // 2
require('./_string-html')('big', function(createHTML){                                                                 // 3
  return function big(){                                                                                               // 4
    return createHTML(this, 'big', '', '');                                                                            // 5
  }                                                                                                                    // 6
});                                                                                                                    // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.string.blink.js":["./_string-html",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.blink.js                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// B.2.3.4 String.prototype.blink()                                                                                    // 2
require('./_string-html')('blink', function(createHTML){                                                               // 3
  return function blink(){                                                                                             // 4
    return createHTML(this, 'blink', '', '');                                                                          // 5
  }                                                                                                                    // 6
});                                                                                                                    // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.string.bold.js":["./_string-html",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.bold.js                              //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// B.2.3.5 String.prototype.bold()                                                                                     // 2
require('./_string-html')('bold', function(createHTML){                                                                // 3
  return function bold(){                                                                                              // 4
    return createHTML(this, 'b', '', '');                                                                              // 5
  }                                                                                                                    // 6
});                                                                                                                    // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.string.fixed.js":["./_string-html",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.fixed.js                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// B.2.3.6 String.prototype.fixed()                                                                                    // 2
require('./_string-html')('fixed', function(createHTML){                                                               // 3
  return function fixed(){                                                                                             // 4
    return createHTML(this, 'tt', '', '');                                                                             // 5
  }                                                                                                                    // 6
});                                                                                                                    // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.string.fontcolor.js":["./_string-html",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.fontcolor.js                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// B.2.3.7 String.prototype.fontcolor(color)                                                                           // 2
require('./_string-html')('fontcolor', function(createHTML){                                                           // 3
  return function fontcolor(color){                                                                                    // 4
    return createHTML(this, 'font', 'color', color);                                                                   // 5
  }                                                                                                                    // 6
});                                                                                                                    // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.string.fontsize.js":["./_string-html",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.fontsize.js                          //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// B.2.3.8 String.prototype.fontsize(size)                                                                             // 2
require('./_string-html')('fontsize', function(createHTML){                                                            // 3
  return function fontsize(size){                                                                                      // 4
    return createHTML(this, 'font', 'size', size);                                                                     // 5
  }                                                                                                                    // 6
});                                                                                                                    // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.string.italics.js":["./_string-html",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.italics.js                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// B.2.3.9 String.prototype.italics()                                                                                  // 2
require('./_string-html')('italics', function(createHTML){                                                             // 3
  return function italics(){                                                                                           // 4
    return createHTML(this, 'i', '', '');                                                                              // 5
  }                                                                                                                    // 6
});                                                                                                                    // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.string.link.js":["./_string-html",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.link.js                              //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// B.2.3.10 String.prototype.link(url)                                                                                 // 2
require('./_string-html')('link', function(createHTML){                                                                // 3
  return function link(url){                                                                                           // 4
    return createHTML(this, 'a', 'href', url);                                                                         // 5
  }                                                                                                                    // 6
});                                                                                                                    // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.string.small.js":["./_string-html",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.small.js                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// B.2.3.11 String.prototype.small()                                                                                   // 2
require('./_string-html')('small', function(createHTML){                                                               // 3
  return function small(){                                                                                             // 4
    return createHTML(this, 'small', '', '');                                                                          // 5
  }                                                                                                                    // 6
});                                                                                                                    // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.string.strike.js":["./_string-html",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.strike.js                            //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// B.2.3.12 String.prototype.strike()                                                                                  // 2
require('./_string-html')('strike', function(createHTML){                                                              // 3
  return function strike(){                                                                                            // 4
    return createHTML(this, 'strike', '', '');                                                                         // 5
  }                                                                                                                    // 6
});                                                                                                                    // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.string.sub.js":["./_string-html",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.sub.js                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// B.2.3.13 String.prototype.sub()                                                                                     // 2
require('./_string-html')('sub', function(createHTML){                                                                 // 3
  return function sub(){                                                                                               // 4
    return createHTML(this, 'sub', '', '');                                                                            // 5
  }                                                                                                                    // 6
});                                                                                                                    // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.string.sup.js":["./_string-html",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.string.sup.js                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// B.2.3.14 String.prototype.sup()                                                                                     // 2
require('./_string-html')('sup', function(createHTML){                                                                 // 3
  return function sup(){                                                                                               // 4
    return createHTML(this, 'sup', '', '');                                                                            // 5
  }                                                                                                                    // 6
});                                                                                                                    // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.regexp.match.js":["./_fix-re-wks",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.regexp.match.js                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// @@match logic                                                                                                       // 1
require('./_fix-re-wks')('match', 1, function(defined, MATCH, $match){                                                 // 2
  // 21.1.3.11 String.prototype.match(regexp)                                                                          // 3
  return [function match(regexp){                                                                                      // 4
    'use strict';                                                                                                      // 5
    var O  = defined(this)                                                                                             // 6
      , fn = regexp == undefined ? undefined : regexp[MATCH];                                                          // 7
    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[MATCH](String(O));                               // 8
  }, $match];                                                                                                          // 9
});                                                                                                                    // 10
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_fix-re-wks.js":["./_hide","./_redefine","./_fails","./_defined","./_wks",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_fix-re-wks.js                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var hide     = require('./_hide')                                                                                      // 2
  , redefine = require('./_redefine')                                                                                  // 3
  , fails    = require('./_fails')                                                                                     // 4
  , defined  = require('./_defined')                                                                                   // 5
  , wks      = require('./_wks');                                                                                      // 6
                                                                                                                       // 7
module.exports = function(KEY, length, exec){                                                                          // 8
  var SYMBOL   = wks(KEY)                                                                                              // 9
    , fns      = exec(defined, SYMBOL, ''[KEY])                                                                        // 10
    , strfn    = fns[0]                                                                                                // 11
    , rxfn     = fns[1];                                                                                               // 12
  if(fails(function(){                                                                                                 // 13
    var O = {};                                                                                                        // 14
    O[SYMBOL] = function(){ return 7; };                                                                               // 15
    return ''[KEY](O) != 7;                                                                                            // 16
  })){                                                                                                                 // 17
    redefine(String.prototype, KEY, strfn);                                                                            // 18
    hide(RegExp.prototype, SYMBOL, length == 2                                                                         // 19
      // 21.2.5.8 RegExp.prototype[@@replace](string, replaceValue)                                                    // 20
      // 21.2.5.11 RegExp.prototype[@@split](string, limit)                                                            // 21
      ? function(string, arg){ return rxfn.call(string, this, arg); }                                                  // 22
      // 21.2.5.6 RegExp.prototype[@@match](string)                                                                    // 23
      // 21.2.5.9 RegExp.prototype[@@search](string)                                                                   // 24
      : function(string){ return rxfn.call(string, this); }                                                            // 25
    );                                                                                                                 // 26
  }                                                                                                                    // 27
};                                                                                                                     // 28
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.regexp.replace.js":["./_fix-re-wks",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.regexp.replace.js                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// @@replace logic                                                                                                     // 1
require('./_fix-re-wks')('replace', 2, function(defined, REPLACE, $replace){                                           // 2
  // 21.1.3.14 String.prototype.replace(searchValue, replaceValue)                                                     // 3
  return [function replace(searchValue, replaceValue){                                                                 // 4
    'use strict';                                                                                                      // 5
    var O  = defined(this)                                                                                             // 6
      , fn = searchValue == undefined ? undefined : searchValue[REPLACE];                                              // 7
    return fn !== undefined                                                                                            // 8
      ? fn.call(searchValue, O, replaceValue)                                                                          // 9
      : $replace.call(String(O), searchValue, replaceValue);                                                           // 10
  }, $replace];                                                                                                        // 11
});                                                                                                                    // 12
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.regexp.search.js":["./_fix-re-wks",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.regexp.search.js                            //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// @@search logic                                                                                                      // 1
require('./_fix-re-wks')('search', 1, function(defined, SEARCH, $search){                                              // 2
  // 21.1.3.15 String.prototype.search(regexp)                                                                         // 3
  return [function search(regexp){                                                                                     // 4
    'use strict';                                                                                                      // 5
    var O  = defined(this)                                                                                             // 6
      , fn = regexp == undefined ? undefined : regexp[SEARCH];                                                         // 7
    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));                              // 8
  }, $search];                                                                                                         // 9
});                                                                                                                    // 10
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.regexp.split.js":["./_fix-re-wks","./_is-regexp",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.regexp.split.js                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// @@split logic                                                                                                       // 1
require('./_fix-re-wks')('split', 2, function(defined, SPLIT, $split){                                                 // 2
  'use strict';                                                                                                        // 3
  var isRegExp   = require('./_is-regexp')                                                                             // 4
    , _split     = $split                                                                                              // 5
    , $push      = [].push                                                                                             // 6
    , $SPLIT     = 'split'                                                                                             // 7
    , LENGTH     = 'length'                                                                                            // 8
    , LAST_INDEX = 'lastIndex';                                                                                        // 9
  if(                                                                                                                  // 10
    'abbc'[$SPLIT](/(b)*/)[1] == 'c' ||                                                                                // 11
    'test'[$SPLIT](/(?:)/, -1)[LENGTH] != 4 ||                                                                         // 12
    'ab'[$SPLIT](/(?:ab)*/)[LENGTH] != 2 ||                                                                            // 13
    '.'[$SPLIT](/(.?)(.?)/)[LENGTH] != 4 ||                                                                            // 14
    '.'[$SPLIT](/()()/)[LENGTH] > 1 ||                                                                                 // 15
    ''[$SPLIT](/.?/)[LENGTH]                                                                                           // 16
  ){                                                                                                                   // 17
    var NPCG = /()??/.exec('')[1] === undefined; // nonparticipating capturing group                                   // 18
    // based on es5-shim implementation, need to rework it                                                             // 19
    $split = function(separator, limit){                                                                               // 20
      var string = String(this);                                                                                       // 21
      if(separator === undefined && limit === 0)return [];                                                             // 22
      // If `separator` is not a regex, use native split                                                               // 23
      if(!isRegExp(separator))return _split.call(string, separator, limit);                                            // 24
      var output = [];                                                                                                 // 25
      var flags = (separator.ignoreCase ? 'i' : '') +                                                                  // 26
                  (separator.multiline ? 'm' : '') +                                                                   // 27
                  (separator.unicode ? 'u' : '') +                                                                     // 28
                  (separator.sticky ? 'y' : '');                                                                       // 29
      var lastLastIndex = 0;                                                                                           // 30
      var splitLimit = limit === undefined ? 4294967295 : limit >>> 0;                                                 // 31
      // Make `global` and avoid `lastIndex` issues by working with a copy                                             // 32
      var separatorCopy = new RegExp(separator.source, flags + 'g');                                                   // 33
      var separator2, match, lastIndex, lastLength, i;                                                                 // 34
      // Doesn't need flags gy, but they don't hurt                                                                    // 35
      if(!NPCG)separator2 = new RegExp('^' + separatorCopy.source + '$(?!\\s)', flags);                                // 36
      while(match = separatorCopy.exec(string)){                                                                       // 37
        // `separatorCopy.lastIndex` is not reliable cross-browser                                                     // 38
        lastIndex = match.index + match[0][LENGTH];                                                                    // 39
        if(lastIndex > lastLastIndex){                                                                                 // 40
          output.push(string.slice(lastLastIndex, match.index));                                                       // 41
          // Fix browsers whose `exec` methods don't consistently return `undefined` for NPCG                          // 42
          if(!NPCG && match[LENGTH] > 1)match[0].replace(separator2, function(){                                       // 43
            for(i = 1; i < arguments[LENGTH] - 2; i++)if(arguments[i] === undefined)match[i] = undefined;              // 44
          });                                                                                                          // 45
          if(match[LENGTH] > 1 && match.index < string[LENGTH])$push.apply(output, match.slice(1));                    // 46
          lastLength = match[0][LENGTH];                                                                               // 47
          lastLastIndex = lastIndex;                                                                                   // 48
          if(output[LENGTH] >= splitLimit)break;                                                                       // 49
        }                                                                                                              // 50
        if(separatorCopy[LAST_INDEX] === match.index)separatorCopy[LAST_INDEX]++; // Avoid an infinite loop            // 51
      }                                                                                                                // 52
      if(lastLastIndex === string[LENGTH]){                                                                            // 53
        if(lastLength || !separatorCopy.test(''))output.push('');                                                      // 54
      } else output.push(string.slice(lastLastIndex));                                                                 // 55
      return output[LENGTH] > splitLimit ? output.slice(0, splitLimit) : output;                                       // 56
    };                                                                                                                 // 57
  // Chakra, V8                                                                                                        // 58
  } else if('0'[$SPLIT](undefined, 0)[LENGTH]){                                                                        // 59
    $split = function(separator, limit){                                                                               // 60
      return separator === undefined && limit === 0 ? [] : _split.call(this, separator, limit);                        // 61
    };                                                                                                                 // 62
  }                                                                                                                    // 63
  // 21.1.3.17 String.prototype.split(separator, limit)                                                                // 64
  return [function split(separator, limit){                                                                            // 65
    var O  = defined(this)                                                                                             // 66
      , fn = separator == undefined ? undefined : separator[SPLIT];                                                    // 67
    return fn !== undefined ? fn.call(separator, O, limit) : $split.call(String(O), separator, limit);                 // 68
  }, $split];                                                                                                          // 69
});                                                                                                                    // 70
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.function.bind.js":["./_export","./_bind",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.function.bind.js                            //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// 19.2.3.2 / 15.3.4.5 Function.prototype.bind(thisArg, args...)                                                       // 1
var $export = require('./_export');                                                                                    // 2
                                                                                                                       // 3
$export($export.P, 'Function', {bind: require('./_bind')});                                                            // 4
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_bind.js":["./_a-function","./_is-object","./_invoke",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_bind.js                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var aFunction  = require('./_a-function')                                                                              // 2
  , isObject   = require('./_is-object')                                                                               // 3
  , invoke     = require('./_invoke')                                                                                  // 4
  , arraySlice = [].slice                                                                                              // 5
  , factories  = {};                                                                                                   // 6
                                                                                                                       // 7
var construct = function(F, len, args){                                                                                // 8
  if(!(len in factories)){                                                                                             // 9
    for(var n = [], i = 0; i < len; i++)n[i] = 'a[' + i + ']';                                                         // 10
    factories[len] = Function('F,a', 'return new F(' + n.join(',') + ')');                                             // 11
  } return factories[len](F, args);                                                                                    // 12
};                                                                                                                     // 13
                                                                                                                       // 14
module.exports = Function.bind || function bind(that /*, args... */){                                                  // 15
  var fn       = aFunction(this)                                                                                       // 16
    , partArgs = arraySlice.call(arguments, 1);                                                                        // 17
  var bound = function(/* args... */){                                                                                 // 18
    var args = partArgs.concat(arraySlice.call(arguments));                                                            // 19
    return this instanceof bound ? construct(fn, args.length, args) : invoke(fn, args, that);                          // 20
  };                                                                                                                   // 21
  if(isObject(fn.prototype))bound.prototype = fn.prototype;                                                            // 22
  return bound;                                                                                                        // 23
};                                                                                                                     // 24
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_invoke.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_invoke.js                                      //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// fast apply, http://jsperf.lnkit.com/fast-apply/5                                                                    // 1
module.exports = function(fn, args, that){                                                                             // 2
  var un = that === undefined;                                                                                         // 3
  switch(args.length){                                                                                                 // 4
    case 0: return un ? fn()                                                                                           // 5
                      : fn.call(that);                                                                                 // 6
    case 1: return un ? fn(args[0])                                                                                    // 7
                      : fn.call(that, args[0]);                                                                        // 8
    case 2: return un ? fn(args[0], args[1])                                                                           // 9
                      : fn.call(that, args[0], args[1]);                                                               // 10
    case 3: return un ? fn(args[0], args[1], args[2])                                                                  // 11
                      : fn.call(that, args[0], args[1], args[2]);                                                      // 12
    case 4: return un ? fn(args[0], args[1], args[2], args[3])                                                         // 13
                      : fn.call(that, args[0], args[1], args[2], args[3]);                                             // 14
  } return              fn.apply(that, args);                                                                          // 15
};                                                                                                                     // 16
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"es6.function.name.js":["./_object-dp","./_property-desc","./_has","./_descriptors",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.function.name.js                            //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var dP         = require('./_object-dp').f                                                                             // 1
  , createDesc = require('./_property-desc')                                                                           // 2
  , has        = require('./_has')                                                                                     // 3
  , FProto     = Function.prototype                                                                                    // 4
  , nameRE     = /^\s*function ([^ (]*)/                                                                               // 5
  , NAME       = 'name';                                                                                               // 6
                                                                                                                       // 7
var isExtensible = Object.isExtensible || function(){                                                                  // 8
  return true;                                                                                                         // 9
};                                                                                                                     // 10
                                                                                                                       // 11
// 19.2.4.2 name                                                                                                       // 12
NAME in FProto || require('./_descriptors') && dP(FProto, NAME, {                                                      // 13
  configurable: true,                                                                                                  // 14
  get: function(){                                                                                                     // 15
    try {                                                                                                              // 16
      var that = this                                                                                                  // 17
        , name = ('' + that).match(nameRE)[1];                                                                         // 18
      has(that, NAME) || !isExtensible(that) || dP(that, NAME, createDesc(5, name));                                   // 19
      return name;                                                                                                     // 20
    } catch(e){                                                                                                        // 21
      return '';                                                                                                       // 22
    }                                                                                                                  // 23
  }                                                                                                                    // 24
});                                                                                                                    // 25
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.function.has-instance.js":["./_is-object","./_object-gpo","./_wks","./_object-dp",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.function.has-instance.js                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var isObject       = require('./_is-object')                                                                           // 2
  , getPrototypeOf = require('./_object-gpo')                                                                          // 3
  , HAS_INSTANCE   = require('./_wks')('hasInstance')                                                                  // 4
  , FunctionProto  = Function.prototype;                                                                               // 5
// 19.2.3.6 Function.prototype[@@hasInstance](V)                                                                       // 6
if(!(HAS_INSTANCE in FunctionProto))require('./_object-dp').f(FunctionProto, HAS_INSTANCE, {value: function(O){        // 7
  if(typeof this != 'function' || !isObject(O))return false;                                                           // 8
  if(!isObject(this.prototype))return O instanceof this;                                                               // 9
  // for environment w/o native `@@hasInstance` logic enough `instanceof`, but add this:                               // 10
  while(O = getPrototypeOf(O))if(this.prototype === O)return true;                                                     // 11
  return false;                                                                                                        // 12
}});                                                                                                                   // 13
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es7.array.includes.js":["./_export","./_array-includes","./_add-to-unscopables",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es7.array.includes.js                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// https://github.com/tc39/Array.prototype.includes                                                                    // 2
var $export   = require('./_export')                                                                                   // 3
  , $includes = require('./_array-includes')(true);                                                                    // 4
                                                                                                                       // 5
$export($export.P, 'Array', {                                                                                          // 6
  includes: function includes(el /*, fromIndex = 0 */){                                                                // 7
    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);                                       // 8
  }                                                                                                                    // 9
});                                                                                                                    // 10
                                                                                                                       // 11
require('./_add-to-unscopables')('includes');                                                                          // 12
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es7.object.values.js":["./_export","./_object-to-array",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es7.object.values.js                            //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// https://github.com/tc39/proposal-object-values-entries                                                              // 1
var $export = require('./_export')                                                                                     // 2
  , $values = require('./_object-to-array')(false);                                                                    // 3
                                                                                                                       // 4
$export($export.S, 'Object', {                                                                                         // 5
  values: function values(it){                                                                                         // 6
    return $values(it);                                                                                                // 7
  }                                                                                                                    // 8
});                                                                                                                    // 9
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_object-to-array.js":["./_object-keys","./_to-iobject","./_object-pie",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_object-to-array.js                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var getKeys   = require('./_object-keys')                                                                              // 1
  , toIObject = require('./_to-iobject')                                                                               // 2
  , isEnum    = require('./_object-pie').f;                                                                            // 3
module.exports = function(isEntries){                                                                                  // 4
  return function(it){                                                                                                 // 5
    var O      = toIObject(it)                                                                                         // 6
      , keys   = getKeys(O)                                                                                            // 7
      , length = keys.length                                                                                           // 8
      , i      = 0                                                                                                     // 9
      , result = []                                                                                                    // 10
      , key;                                                                                                           // 11
    while(length > i)if(isEnum.call(O, key = keys[i++])){                                                              // 12
      result.push(isEntries ? [key, O[key]] : O[key]);                                                                 // 13
    } return result;                                                                                                   // 14
  };                                                                                                                   // 15
};                                                                                                                     // 16
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es7.object.entries.js":["./_export","./_object-to-array",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es7.object.entries.js                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// https://github.com/tc39/proposal-object-values-entries                                                              // 1
var $export  = require('./_export')                                                                                    // 2
  , $entries = require('./_object-to-array')(true);                                                                    // 3
                                                                                                                       // 4
$export($export.S, 'Object', {                                                                                         // 5
  entries: function entries(it){                                                                                       // 6
    return $entries(it);                                                                                               // 7
  }                                                                                                                    // 8
});                                                                                                                    // 9
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es7.object.get-own-property-descriptors.js":["./_export","./_own-keys","./_to-iobject","./_object-gopd","./_create-property",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es7.object.get-own-property-descriptors.js      //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// https://github.com/tc39/proposal-object-getownpropertydescriptors                                                   // 1
var $export        = require('./_export')                                                                              // 2
  , ownKeys        = require('./_own-keys')                                                                            // 3
  , toIObject      = require('./_to-iobject')                                                                          // 4
  , gOPD           = require('./_object-gopd')                                                                         // 5
  , createProperty = require('./_create-property');                                                                    // 6
                                                                                                                       // 7
$export($export.S, 'Object', {                                                                                         // 8
  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object){                                               // 9
    var O       = toIObject(object)                                                                                    // 10
      , getDesc = gOPD.f                                                                                               // 11
      , keys    = ownKeys(O)                                                                                           // 12
      , result  = {}                                                                                                   // 13
      , i       = 0                                                                                                    // 14
      , key;                                                                                                           // 15
    while(keys.length > i)createProperty(result, key = keys[i++], getDesc(O, key));                                    // 16
    return result;                                                                                                     // 17
  }                                                                                                                    // 18
});                                                                                                                    // 19
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_own-keys.js":["./_object-gopn","./_object-gops","./_an-object","./_global",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_own-keys.js                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// all object keys, includes non-enumerable and symbols                                                                // 1
var gOPN     = require('./_object-gopn')                                                                               // 2
  , gOPS     = require('./_object-gops')                                                                               // 3
  , anObject = require('./_an-object')                                                                                 // 4
  , Reflect  = require('./_global').Reflect;                                                                           // 5
module.exports = Reflect && Reflect.ownKeys || function ownKeys(it){                                                   // 6
  var keys       = gOPN.f(anObject(it))                                                                                // 7
    , getSymbols = gOPS.f;                                                                                             // 8
  return getSymbols ? keys.concat(getSymbols(it)) : keys;                                                              // 9
};                                                                                                                     // 10
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es7.string.pad-start.js":["./_export","./_string-pad",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es7.string.pad-start.js                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// https://github.com/tc39/proposal-string-pad-start-end                                                               // 2
var $export = require('./_export')                                                                                     // 3
  , $pad    = require('./_string-pad');                                                                                // 4
                                                                                                                       // 5
$export($export.P, 'String', {                                                                                         // 6
  padStart: function padStart(maxLength /*, fillString = ' ' */){                                                      // 7
    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, true);                               // 8
  }                                                                                                                    // 9
});                                                                                                                    // 10
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_string-pad.js":["./_to-length","./_string-repeat","./_defined",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_string-pad.js                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// https://github.com/tc39/proposal-string-pad-start-end                                                               // 1
var toLength = require('./_to-length')                                                                                 // 2
  , repeat   = require('./_string-repeat')                                                                             // 3
  , defined  = require('./_defined');                                                                                  // 4
                                                                                                                       // 5
module.exports = function(that, maxLength, fillString, left){                                                          // 6
  var S            = String(defined(that))                                                                             // 7
    , stringLength = S.length                                                                                          // 8
    , fillStr      = fillString === undefined ? ' ' : String(fillString)                                               // 9
    , intMaxLength = toLength(maxLength);                                                                              // 10
  if(intMaxLength <= stringLength || fillStr == '')return S;                                                           // 11
  var fillLen = intMaxLength - stringLength                                                                            // 12
    , stringFiller = repeat.call(fillStr, Math.ceil(fillLen / fillStr.length));                                        // 13
  if(stringFiller.length > fillLen)stringFiller = stringFiller.slice(0, fillLen);                                      // 14
  return left ? stringFiller + S : S + stringFiller;                                                                   // 15
};                                                                                                                     // 16
                                                                                                                       // 17
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es7.string.pad-end.js":["./_export","./_string-pad",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es7.string.pad-end.js                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// https://github.com/tc39/proposal-string-pad-start-end                                                               // 2
var $export = require('./_export')                                                                                     // 3
  , $pad    = require('./_string-pad');                                                                                // 4
                                                                                                                       // 5
$export($export.P, 'String', {                                                                                         // 6
  padEnd: function padEnd(maxLength /*, fillString = ' ' */){                                                          // 7
    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, false);                              // 8
  }                                                                                                                    // 9
});                                                                                                                    // 10
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es7.string.trim-left.js":["./_string-trim",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es7.string.trim-left.js                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// https://github.com/sebmarkbage/ecmascript-string-left-right-trim                                                    // 2
require('./_string-trim')('trimLeft', function($trim){                                                                 // 3
  return function trimLeft(){                                                                                          // 4
    return $trim(this, 1);                                                                                             // 5
  };                                                                                                                   // 6
}, 'trimStart');                                                                                                       // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es7.string.trim-right.js":["./_string-trim",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es7.string.trim-right.js                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
// https://github.com/sebmarkbage/ecmascript-string-left-right-trim                                                    // 2
require('./_string-trim')('trimRight', function($trim){                                                                // 3
  return function trimRight(){                                                                                         // 4
    return $trim(this, 2);                                                                                             // 5
  };                                                                                                                   // 6
}, 'trimEnd');                                                                                                         // 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"web.dom.iterable.js":["./es6.array.iterator","./_redefine","./_global","./_hide","./_iterators","./_wks",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/web.dom.iterable.js                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var $iterators    = require('./es6.array.iterator')                                                                    // 1
  , redefine      = require('./_redefine')                                                                             // 2
  , global        = require('./_global')                                                                               // 3
  , hide          = require('./_hide')                                                                                 // 4
  , Iterators     = require('./_iterators')                                                                            // 5
  , wks           = require('./_wks')                                                                                  // 6
  , ITERATOR      = wks('iterator')                                                                                    // 7
  , TO_STRING_TAG = wks('toStringTag')                                                                                 // 8
  , ArrayValues   = Iterators.Array;                                                                                   // 9
                                                                                                                       // 10
for(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){  // 11
  var NAME       = collections[i]                                                                                      // 12
    , Collection = global[NAME]                                                                                        // 13
    , proto      = Collection && Collection.prototype                                                                  // 14
    , key;                                                                                                             // 15
  if(proto){                                                                                                           // 16
    if(!proto[ITERATOR])hide(proto, ITERATOR, ArrayValues);                                                            // 17
    if(!proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);                                                         // 18
    Iterators[NAME] = ArrayValues;                                                                                     // 19
    for(key in $iterators)if(!proto[key])redefine(proto, key, $iterators[key], true);                                  // 20
  }                                                                                                                    // 21
}                                                                                                                      // 22
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.map.js":["./_collection-strong","./_collection",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.map.js                                      //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var strong = require('./_collection-strong');                                                                          // 2
                                                                                                                       // 3
// 23.1 Map Objects                                                                                                    // 4
module.exports = require('./_collection')('Map', function(get){                                                        // 5
  return function Map(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };                         // 6
}, {                                                                                                                   // 7
  // 23.1.3.6 Map.prototype.get(key)                                                                                   // 8
  get: function get(key){                                                                                              // 9
    var entry = strong.getEntry(this, key);                                                                            // 10
    return entry && entry.v;                                                                                           // 11
  },                                                                                                                   // 12
  // 23.1.3.9 Map.prototype.set(key, value)                                                                            // 13
  set: function set(key, value){                                                                                       // 14
    return strong.def(this, key === 0 ? 0 : key, value);                                                               // 15
  }                                                                                                                    // 16
}, strong, true);                                                                                                      // 17
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_collection-strong.js":["./_object-dp","./_object-create","./_redefine-all","./_ctx","./_an-instance","./_defined","./_for-of","./_iter-define","./_iter-step","./_set-species","./_descriptors","./_meta",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_collection-strong.js                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var dP          = require('./_object-dp').f                                                                            // 2
  , create      = require('./_object-create')                                                                          // 3
  , redefineAll = require('./_redefine-all')                                                                           // 4
  , ctx         = require('./_ctx')                                                                                    // 5
  , anInstance  = require('./_an-instance')                                                                            // 6
  , defined     = require('./_defined')                                                                                // 7
  , forOf       = require('./_for-of')                                                                                 // 8
  , $iterDefine = require('./_iter-define')                                                                            // 9
  , step        = require('./_iter-step')                                                                              // 10
  , setSpecies  = require('./_set-species')                                                                            // 11
  , DESCRIPTORS = require('./_descriptors')                                                                            // 12
  , fastKey     = require('./_meta').fastKey                                                                           // 13
  , SIZE        = DESCRIPTORS ? '_s' : 'size';                                                                         // 14
                                                                                                                       // 15
var getEntry = function(that, key){                                                                                    // 16
  // fast case                                                                                                         // 17
  var index = fastKey(key), entry;                                                                                     // 18
  if(index !== 'F')return that._i[index];                                                                              // 19
  // frozen object case                                                                                                // 20
  for(entry = that._f; entry; entry = entry.n){                                                                        // 21
    if(entry.k == key)return entry;                                                                                    // 22
  }                                                                                                                    // 23
};                                                                                                                     // 24
                                                                                                                       // 25
module.exports = {                                                                                                     // 26
  getConstructor: function(wrapper, NAME, IS_MAP, ADDER){                                                              // 27
    var C = wrapper(function(that, iterable){                                                                          // 28
      anInstance(that, C, NAME, '_i');                                                                                 // 29
      that._i = create(null); // index                                                                                 // 30
      that._f = undefined;    // first entry                                                                           // 31
      that._l = undefined;    // last entry                                                                            // 32
      that[SIZE] = 0;         // size                                                                                  // 33
      if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);                                             // 34
    });                                                                                                                // 35
    redefineAll(C.prototype, {                                                                                         // 36
      // 23.1.3.1 Map.prototype.clear()                                                                                // 37
      // 23.2.3.2 Set.prototype.clear()                                                                                // 38
      clear: function clear(){                                                                                         // 39
        for(var that = this, data = that._i, entry = that._f; entry; entry = entry.n){                                 // 40
          entry.r = true;                                                                                              // 41
          if(entry.p)entry.p = entry.p.n = undefined;                                                                  // 42
          delete data[entry.i];                                                                                        // 43
        }                                                                                                              // 44
        that._f = that._l = undefined;                                                                                 // 45
        that[SIZE] = 0;                                                                                                // 46
      },                                                                                                               // 47
      // 23.1.3.3 Map.prototype.delete(key)                                                                            // 48
      // 23.2.3.4 Set.prototype.delete(value)                                                                          // 49
      'delete': function(key){                                                                                         // 50
        var that  = this                                                                                               // 51
          , entry = getEntry(that, key);                                                                               // 52
        if(entry){                                                                                                     // 53
          var next = entry.n                                                                                           // 54
            , prev = entry.p;                                                                                          // 55
          delete that._i[entry.i];                                                                                     // 56
          entry.r = true;                                                                                              // 57
          if(prev)prev.n = next;                                                                                       // 58
          if(next)next.p = prev;                                                                                       // 59
          if(that._f == entry)that._f = next;                                                                          // 60
          if(that._l == entry)that._l = prev;                                                                          // 61
          that[SIZE]--;                                                                                                // 62
        } return !!entry;                                                                                              // 63
      },                                                                                                               // 64
      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)                                               // 65
      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)                                               // 66
      forEach: function forEach(callbackfn /*, that = undefined */){                                                   // 67
        anInstance(this, C, 'forEach');                                                                                // 68
        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3)                                    // 69
          , entry;                                                                                                     // 70
        while(entry = entry ? entry.n : this._f){                                                                      // 71
          f(entry.v, entry.k, this);                                                                                   // 72
          // revert to the last existing entry                                                                         // 73
          while(entry && entry.r)entry = entry.p;                                                                      // 74
        }                                                                                                              // 75
      },                                                                                                               // 76
      // 23.1.3.7 Map.prototype.has(key)                                                                               // 77
      // 23.2.3.7 Set.prototype.has(value)                                                                             // 78
      has: function has(key){                                                                                          // 79
        return !!getEntry(this, key);                                                                                  // 80
      }                                                                                                                // 81
    });                                                                                                                // 82
    if(DESCRIPTORS)dP(C.prototype, 'size', {                                                                           // 83
      get: function(){                                                                                                 // 84
        return defined(this[SIZE]);                                                                                    // 85
      }                                                                                                                // 86
    });                                                                                                                // 87
    return C;                                                                                                          // 88
  },                                                                                                                   // 89
  def: function(that, key, value){                                                                                     // 90
    var entry = getEntry(that, key)                                                                                    // 91
      , prev, index;                                                                                                   // 92
    // change existing entry                                                                                           // 93
    if(entry){                                                                                                         // 94
      entry.v = value;                                                                                                 // 95
    // create new entry                                                                                                // 96
    } else {                                                                                                           // 97
      that._l = entry = {                                                                                              // 98
        i: index = fastKey(key, true), // <- index                                                                     // 99
        k: key,                        // <- key                                                                       // 100
        v: value,                      // <- value                                                                     // 101
        p: prev = that._l,             // <- previous entry                                                            // 102
        n: undefined,                  // <- next entry                                                                // 103
        r: false                       // <- removed                                                                   // 104
      };                                                                                                               // 105
      if(!that._f)that._f = entry;                                                                                     // 106
      if(prev)prev.n = entry;                                                                                          // 107
      that[SIZE]++;                                                                                                    // 108
      // add to index                                                                                                  // 109
      if(index !== 'F')that._i[index] = entry;                                                                         // 110
    } return that;                                                                                                     // 111
  },                                                                                                                   // 112
  getEntry: getEntry,                                                                                                  // 113
  setStrong: function(C, NAME, IS_MAP){                                                                                // 114
    // add .keys, .values, .entries, [@@iterator]                                                                      // 115
    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11                              // 116
    $iterDefine(C, NAME, function(iterated, kind){                                                                     // 117
      this._t = iterated;  // target                                                                                   // 118
      this._k = kind;      // kind                                                                                     // 119
      this._l = undefined; // previous                                                                                 // 120
    }, function(){                                                                                                     // 121
      var that  = this                                                                                                 // 122
        , kind  = that._k                                                                                              // 123
        , entry = that._l;                                                                                             // 124
      // revert to the last existing entry                                                                             // 125
      while(entry && entry.r)entry = entry.p;                                                                          // 126
      // get next entry                                                                                                // 127
      if(!that._t || !(that._l = entry = entry ? entry.n : that._t._f)){                                               // 128
        // or finish the iteration                                                                                     // 129
        that._t = undefined;                                                                                           // 130
        return step(1);                                                                                                // 131
      }                                                                                                                // 132
      // return step by kind                                                                                           // 133
      if(kind == 'keys'  )return step(0, entry.k);                                                                     // 134
      if(kind == 'values')return step(0, entry.v);                                                                     // 135
      return step(0, [entry.k, entry.v]);                                                                              // 136
    }, IS_MAP ? 'entries' : 'values' , !IS_MAP, true);                                                                 // 137
                                                                                                                       // 138
    // add [@@species], 23.1.2.2, 23.2.2.2                                                                             // 139
    setSpecies(NAME);                                                                                                  // 140
  }                                                                                                                    // 141
};                                                                                                                     // 142
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_redefine-all.js":["./_redefine",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_redefine-all.js                                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var redefine = require('./_redefine');                                                                                 // 1
module.exports = function(target, src, safe){                                                                          // 2
  for(var key in src)redefine(target, key, src[key], safe);                                                            // 3
  return target;                                                                                                       // 4
};                                                                                                                     // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_an-instance.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_an-instance.js                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.exports = function(it, Constructor, name, forbiddenField){                                                      // 1
  if(!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)){                          // 2
    throw TypeError(name + ': incorrect invocation!');                                                                 // 3
  } return it;                                                                                                         // 4
};                                                                                                                     // 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"_for-of.js":["./_ctx","./_iter-call","./_is-array-iter","./_an-object","./_to-length","./core.get-iterator-method",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_for-of.js                                      //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var ctx         = require('./_ctx')                                                                                    // 1
  , call        = require('./_iter-call')                                                                              // 2
  , isArrayIter = require('./_is-array-iter')                                                                          // 3
  , anObject    = require('./_an-object')                                                                              // 4
  , toLength    = require('./_to-length')                                                                              // 5
  , getIterFn   = require('./core.get-iterator-method')                                                                // 6
  , BREAK       = {}                                                                                                   // 7
  , RETURN      = {};                                                                                                  // 8
var exports = module.exports = function(iterable, entries, fn, that, ITERATOR){                                        // 9
  var iterFn = ITERATOR ? function(){ return iterable; } : getIterFn(iterable)                                         // 10
    , f      = ctx(fn, that, entries ? 2 : 1)                                                                          // 11
    , index  = 0                                                                                                       // 12
    , length, step, iterator, result;                                                                                  // 13
  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');                                      // 14
  // fast case for arrays with default iterator                                                                        // 15
  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){                             // 16
    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);                           // 17
    if(result === BREAK || result === RETURN)return result;                                                            // 18
  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){                                      // 19
    result = call(iterator, f, step.value, entries);                                                                   // 20
    if(result === BREAK || result === RETURN)return result;                                                            // 21
  }                                                                                                                    // 22
};                                                                                                                     // 23
exports.BREAK  = BREAK;                                                                                                // 24
exports.RETURN = RETURN;                                                                                               // 25
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_collection.js":["./_global","./_export","./_redefine","./_redefine-all","./_meta","./_for-of","./_an-instance","./_is-object","./_fails","./_iter-detect","./_set-to-string-tag","./_inherit-if-required",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_collection.js                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var global            = require('./_global')                                                                           // 2
  , $export           = require('./_export')                                                                           // 3
  , redefine          = require('./_redefine')                                                                         // 4
  , redefineAll       = require('./_redefine-all')                                                                     // 5
  , meta              = require('./_meta')                                                                             // 6
  , forOf             = require('./_for-of')                                                                           // 7
  , anInstance        = require('./_an-instance')                                                                      // 8
  , isObject          = require('./_is-object')                                                                        // 9
  , fails             = require('./_fails')                                                                            // 10
  , $iterDetect       = require('./_iter-detect')                                                                      // 11
  , setToStringTag    = require('./_set-to-string-tag')                                                                // 12
  , inheritIfRequired = require('./_inherit-if-required');                                                             // 13
                                                                                                                       // 14
module.exports = function(NAME, wrapper, methods, common, IS_MAP, IS_WEAK){                                            // 15
  var Base  = global[NAME]                                                                                             // 16
    , C     = Base                                                                                                     // 17
    , ADDER = IS_MAP ? 'set' : 'add'                                                                                   // 18
    , proto = C && C.prototype                                                                                         // 19
    , O     = {};                                                                                                      // 20
  var fixMethod = function(KEY){                                                                                       // 21
    var fn = proto[KEY];                                                                                               // 22
    redefine(proto, KEY,                                                                                               // 23
      KEY == 'delete' ? function(a){                                                                                   // 24
        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);                                       // 25
      } : KEY == 'has' ? function has(a){                                                                              // 26
        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);                                       // 27
      } : KEY == 'get' ? function get(a){                                                                              // 28
        return IS_WEAK && !isObject(a) ? undefined : fn.call(this, a === 0 ? 0 : a);                                   // 29
      } : KEY == 'add' ? function add(a){ fn.call(this, a === 0 ? 0 : a); return this; }                               // 30
        : function set(a, b){ fn.call(this, a === 0 ? 0 : a, b); return this; }                                        // 31
    );                                                                                                                 // 32
  };                                                                                                                   // 33
  if(typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function(){                                        // 34
    new C().entries().next();                                                                                          // 35
  }))){                                                                                                                // 36
    // create collection constructor                                                                                   // 37
    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);                                                           // 38
    redefineAll(C.prototype, methods);                                                                                 // 39
    meta.NEED = true;                                                                                                  // 40
  } else {                                                                                                             // 41
    var instance             = new C                                                                                   // 42
      // early implementations not supports chaining                                                                   // 43
      , HASNT_CHAINING       = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance                                       // 44
      // V8 ~  Chromium 40- weak-collections throws on primitives, but should return false                             // 45
      , THROWS_ON_PRIMITIVES = fails(function(){ instance.has(1); })                                                   // 46
      // most early implementations doesn't supports iterables, most modern - not close it correctly                   // 47
      , ACCEPT_ITERABLES     = $iterDetect(function(iter){ new C(iter); }) // eslint-disable-line no-new               // 48
      // for early implementations -0 and +0 not the same                                                              // 49
      , BUGGY_ZERO = !IS_WEAK && fails(function(){                                                                     // 50
        // V8 ~ Chromium 42- fails only with 5+ elements                                                               // 51
        var $instance = new C()                                                                                        // 52
          , index     = 5;                                                                                             // 53
        while(index--)$instance[ADDER](index, index);                                                                  // 54
        return !$instance.has(-0);                                                                                     // 55
      });                                                                                                              // 56
    if(!ACCEPT_ITERABLES){                                                                                             // 57
      C = wrapper(function(target, iterable){                                                                          // 58
        anInstance(target, C, NAME);                                                                                   // 59
        var that = inheritIfRequired(new Base, target, C);                                                             // 60
        if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);                                           // 61
        return that;                                                                                                   // 62
      });                                                                                                              // 63
      C.prototype = proto;                                                                                             // 64
      proto.constructor = C;                                                                                           // 65
    }                                                                                                                  // 66
    if(THROWS_ON_PRIMITIVES || BUGGY_ZERO){                                                                            // 67
      fixMethod('delete');                                                                                             // 68
      fixMethod('has');                                                                                                // 69
      IS_MAP && fixMethod('get');                                                                                      // 70
    }                                                                                                                  // 71
    if(BUGGY_ZERO || HASNT_CHAINING)fixMethod(ADDER);                                                                  // 72
    // weak collections should not contains .clear method                                                              // 73
    if(IS_WEAK && proto.clear)delete proto.clear;                                                                      // 74
  }                                                                                                                    // 75
                                                                                                                       // 76
  setToStringTag(C, NAME);                                                                                             // 77
                                                                                                                       // 78
  O[NAME] = C;                                                                                                         // 79
  $export($export.G + $export.W + $export.F * (C != Base), O);                                                         // 80
                                                                                                                       // 81
  if(!IS_WEAK)common.setStrong(C, NAME, IS_MAP);                                                                       // 82
                                                                                                                       // 83
  return C;                                                                                                            // 84
};                                                                                                                     // 85
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"_inherit-if-required.js":["./_is-object","./_set-proto",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/_inherit-if-required.js                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var isObject       = require('./_is-object')                                                                           // 1
  , setPrototypeOf = require('./_set-proto').set;                                                                      // 2
module.exports = function(that, target, C){                                                                            // 3
  var P, S = target.constructor;                                                                                       // 4
  if(S !== C && typeof S == 'function' && (P = S.prototype) !== C.prototype && isObject(P) && setPrototypeOf){         // 5
    setPrototypeOf(that, P);                                                                                           // 6
  } return that;                                                                                                       // 7
};                                                                                                                     // 8
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"es6.set.js":["./_collection-strong","./_collection",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/modules/es6.set.js                                      //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
'use strict';                                                                                                          // 1
var strong = require('./_collection-strong');                                                                          // 2
                                                                                                                       // 3
// 23.2 Set Objects                                                                                                    // 4
module.exports = require('./_collection')('Set', function(get){                                                        // 5
  return function Set(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };                         // 6
}, {                                                                                                                   // 7
  // 23.2.3.1 Set.prototype.add(value)                                                                                 // 8
  add: function add(value){                                                                                            // 9
    return strong.def(this, value = value === 0 ? 0 : value, value);                                                   // 10
  }                                                                                                                    // 11
}, strong);                                                                                                            // 12
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]},"fn":{"array":{"includes.js":["../../modules/es7.array.includes","../../modules/_core",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/fn/array/includes.js                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('../../modules/es7.array.includes');                                                                           // 1
module.exports = require('../../modules/_core').Array.includes;                                                        // 2
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]},"object":{"values.js":["../../modules/es7.object.values","../../modules/_core",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/fn/object/values.js                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('../../modules/es7.object.values');                                                                            // 1
module.exports = require('../../modules/_core').Object.values;                                                         // 2
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"entries.js":["../../modules/es7.object.entries","../../modules/_core",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/fn/object/entries.js                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('../../modules/es7.object.entries');                                                                           // 1
module.exports = require('../../modules/_core').Object.entries;                                                        // 2
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"get-own-property-descriptors.js":["../../modules/es7.object.get-own-property-descriptors","../../modules/_core",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/fn/object/get-own-property-descriptors.js               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('../../modules/es7.object.get-own-property-descriptors');                                                      // 1
module.exports = require('../../modules/_core').Object.getOwnPropertyDescriptors;                                      // 2
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]},"string":{"pad-start.js":["../../modules/es7.string.pad-start","../../modules/_core",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/fn/string/pad-start.js                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('../../modules/es7.string.pad-start');                                                                         // 1
module.exports = require('../../modules/_core').String.padStart;                                                       // 2
                                                                                                                       // 3
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"pad-end.js":["../../modules/es7.string.pad-end","../../modules/_core",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/fn/string/pad-end.js                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('../../modules/es7.string.pad-end');                                                                           // 1
module.exports = require('../../modules/_core').String.padEnd;                                                         // 2
                                                                                                                       // 3
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"trim-start.js":["../../modules/es7.string.trim-left","../../modules/_core",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/fn/string/trim-start.js                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('../../modules/es7.string.trim-left');                                                                         // 1
module.exports = require('../../modules/_core').String.trimLeft;                                                       // 2
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"trim-end.js":["../../modules/es7.string.trim-right","../../modules/_core",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// node_modules/meteor/ecmascript-runtime/node_modules/core-js/fn/string/trim-end.js                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('../../modules/es7.string.trim-right');                                                                        // 1
module.exports = require('../../modules/_core').String.trimRight;                                                      // 2
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]}}}}}}}},{"extensions":[".js",".json"]});
var exports = require("./node_modules/meteor/ecmascript-runtime/runtime.js");

/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package['ecmascript-runtime'] = exports, {
  Symbol: Symbol,
  Map: Map,
  Set: Set
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {



/* Exports */
if (typeof Package === 'undefined') Package = {};
Package['babel-compiler'] = {};

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {



/* Exports */
if (typeof Package === 'undefined') Package = {};
Package.ecmascript = {};

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var meteorInstall = Package.modules.meteorInstall;
var Buffer = Package.modules.Buffer;
var process = Package.modules.process;
var Promise = Package.promise.Promise;

/* Package-scope variables */
var meteorBabelHelpers;

var require = meteorInstall({"node_modules":{"meteor":{"babel-runtime":{"babel-runtime.js":["meteor-babel-helpers","babel-runtime/regenerator",function(require,exports){

////////////////////////////////////////////////////////////////////////////////
//                                                                            //
// packages/babel-runtime/babel-runtime.js                                    //
//                                                                            //
////////////////////////////////////////////////////////////////////////////////
                                                                              //
exports.meteorBabelHelpers = require("meteor-babel-helpers");                 // 1
                                                                              // 2
// Returns true if a given absolute identifier will be provided at runtime    // 3
// by the babel-runtime package.                                              // 4
exports.checkHelper = function checkHelper(id) {                              // 5
  // There used to be more complicated logic here, when the babel-runtime     // 6
  // package provided helper implementations of its own, but now this         // 7
  // function exists just for backwards compatibility.                        // 8
  return false;                                                               // 9
};                                                                            // 10
                                                                              // 11
try {                                                                         // 12
  var regeneratorRuntime = require("babel-runtime/regenerator");              // 13
} catch (e) {                                                                 // 14
  throw new Error([                                                           // 15
    "The babel-runtime npm package could not be found in your node_modules ",
    "directory. Please run the following command to install it:",             // 17
    "",                                                                       // 18
    "  meteor npm install --save babel-runtime",                              // 19
    ""                                                                        // 20
  ].join("\n"));                                                              // 21
}                                                                             // 22
                                                                              // 23
if (regeneratorRuntime &&                                                     // 24
    typeof Promise === "function" &&                                          // 25
    typeof Promise.asyncApply === "function") {                               // 26
  // If Promise.asyncApply is defined, use it to wrap calls to                // 27
  // runtime.async so that the entire async function will run in its own      // 28
  // Fiber, not just the code that comes after the first await.               // 29
  var realAsync = regeneratorRuntime.async;                                   // 30
  regeneratorRuntime.async = function () {                                    // 31
    return Promise.asyncApply(realAsync, regeneratorRuntime, arguments);      // 32
  };                                                                          // 33
}                                                                             // 34
                                                                              // 35
////////////////////////////////////////////////////////////////////////////////

}],"node_modules":{"meteor-babel-helpers":{"package.json":function(require,exports){

////////////////////////////////////////////////////////////////////////////////
//                                                                            //
// ../../.1.0.1.stszlh++os+web.browser+web.cordova/npm/node_modules/meteor-ba //
//                                                                            //
////////////////////////////////////////////////////////////////////////////////
                                                                              //
exports.name = "meteor-babel-helpers";                                        // 1
exports.version = "0.0.3";                                                    // 2
exports.main = "index.js";                                                    // 3
                                                                              // 4
////////////////////////////////////////////////////////////////////////////////

},"index.js":function(require,exports,module){

////////////////////////////////////////////////////////////////////////////////
//                                                                            //
// node_modules/meteor/babel-runtime/node_modules/meteor-babel-helpers/index. //
//                                                                            //
////////////////////////////////////////////////////////////////////////////////
                                                                              //
function canDefineNonEnumerableProperties() {                                 // 1
  var testObj = {};                                                           // 2
  var testPropName = "t";                                                     // 3
                                                                              // 4
  try {                                                                       // 5
    Object.defineProperty(testObj, testPropName, {                            // 6
      enumerable: false,                                                      // 7
      value: testObj                                                          // 8
    });                                                                       // 9
                                                                              // 10
    for (var k in testObj) {                                                  // 11
      if (k === testPropName) {                                               // 12
        return false;                                                         // 13
      }                                                                       // 14
    }                                                                         // 15
  } catch (e) {                                                               // 16
    return false;                                                             // 17
  }                                                                           // 18
                                                                              // 19
  return testObj[testPropName] === testObj;                                   // 20
}                                                                             // 21
                                                                              // 22
function sanitizeEasy(value) {                                                // 23
  return value;                                                               // 24
}                                                                             // 25
                                                                              // 26
function sanitizeHard(obj) {                                                  // 27
  if (Array.isArray(obj)) {                                                   // 28
    var newObj = {};                                                          // 29
    var keys = Object.keys(obj);                                              // 30
    var keyCount = keys.length;                                               // 31
    for (var i = 0; i < keyCount; ++i) {                                      // 32
      var key = keys[i];                                                      // 33
      newObj[key] = obj[key];                                                 // 34
    }                                                                         // 35
    return newObj;                                                            // 36
  }                                                                           // 37
                                                                              // 38
  return obj;                                                                 // 39
}                                                                             // 40
                                                                              // 41
meteorBabelHelpers = module.exports = {                                       // 42
  // Meteor-specific runtime helper for wrapping the object of for-in         // 43
  // loops, so that inherited Array methods defined by es5-shim can be        // 44
  // ignored in browsers where they cannot be defined as non-enumerable.      // 45
  sanitizeForInObject: canDefineNonEnumerableProperties()                     // 46
    ? sanitizeEasy                                                            // 47
    : sanitizeHard,                                                           // 48
                                                                              // 49
  // Exposed so that we can test sanitizeForInObject in environments that     // 50
  // support defining non-enumerable properties.                              // 51
  _sanitizeForInObjectHard: sanitizeHard                                      // 52
};                                                                            // 53
                                                                              // 54
////////////////////////////////////////////////////////////////////////////////

}}}}}}},{"extensions":[".js",".json"]});
var exports = require("./node_modules/meteor/babel-runtime/babel-runtime.js");

/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package['babel-runtime'] = exports, {
  meteorBabelHelpers: meteorBabelHelpers
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var _ = Package.underscore._;
var meteorInstall = Package.modules.meteorInstall;
var Buffer = Package.modules.Buffer;
var process = Package.modules.process;
var Symbol = Package['ecmascript-runtime'].Symbol;
var Map = Package['ecmascript-runtime'].Map;
var Set = Package['ecmascript-runtime'].Set;
var meteorBabelHelpers = Package['babel-runtime'].meteorBabelHelpers;
var Promise = Package.promise.Promise;

/* Package-scope variables */
var WebApp;

var require = meteorInstall({"node_modules":{"meteor":{"webapp":{"webapp_client.js":function(){

///////////////////////////////////////////////////////////////////////
//                                                                   //
// packages/webapp/webapp_client.js                                  //
//                                                                   //
///////////////////////////////////////////////////////////////////////
                                                                     //
WebApp = {                                                           // 1
  _isCssLoaded: function () {                                        // 3
    if (document.styleSheets.length === 0) return true;              // 4
    return _.find(document.styleSheets, function (sheet) {           // 7
      if (sheet.cssText && !sheet.cssRules) // IE8                   // 8
        return !sheet.cssText.match(/meteor-css-not-found-error/);   // 9
      return !_.find(sheet.cssRules, function (rule) {               // 10
        return rule.selectorText === '.meteor-css-not-found-error';  // 11
      });                                                            // 12
    });                                                              // 13
  }                                                                  // 14
};                                                                   // 1
///////////////////////////////////////////////////////////////////////

}}}}},{"extensions":[".js",".json"]});
require("./node_modules/meteor/webapp/webapp_client.js");

/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package.webapp = {}, {
  WebApp: WebApp
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;

/* Package-scope variables */
var Base64;

(function(){

//////////////////////////////////////////////////////////////////////////////////////////
//                                                                                      //
// packages/base64/base64.js                                                            //
//                                                                                      //
//////////////////////////////////////////////////////////////////////////////////////////
                                                                                        //
// Base 64 encoding                                                                     // 1
                                                                                        // 2
var BASE_64_CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
                                                                                        // 4
var BASE_64_VALS = {};                                                                  // 5
                                                                                        // 6
for (var i = 0; i < BASE_64_CHARS.length; i++) {                                        // 7
  BASE_64_VALS[BASE_64_CHARS.charAt(i)] = i;                                            // 8
};                                                                                      // 9
                                                                                        // 10
Base64 = {};                                                                            // 11
                                                                                        // 12
Base64.encode = function (array) {                                                      // 13
                                                                                        // 14
  if (typeof array === "string") {                                                      // 15
    var str = array;                                                                    // 16
    array = Base64.newBinary(str.length);                                               // 17
    for (var i = 0; i < str.length; i++) {                                              // 18
      var ch = str.charCodeAt(i);                                                       // 19
      if (ch > 0xFF) {                                                                  // 20
        throw new Error(                                                                // 21
          "Not ascii. Base64.encode can only take ascii strings.");                     // 22
      }                                                                                 // 23
      array[i] = ch;                                                                    // 24
    }                                                                                   // 25
  }                                                                                     // 26
                                                                                        // 27
  var answer = [];                                                                      // 28
  var a = null;                                                                         // 29
  var b = null;                                                                         // 30
  var c = null;                                                                         // 31
  var d = null;                                                                         // 32
  for (var i = 0; i < array.length; i++) {                                              // 33
    switch (i % 3) {                                                                    // 34
    case 0:                                                                             // 35
      a = (array[i] >> 2) & 0x3F;                                                       // 36
      b = (array[i] & 0x03) << 4;                                                       // 37
      break;                                                                            // 38
    case 1:                                                                             // 39
      b = b | (array[i] >> 4) & 0xF;                                                    // 40
      c = (array[i] & 0xF) << 2;                                                        // 41
      break;                                                                            // 42
    case 2:                                                                             // 43
      c = c | (array[i] >> 6) & 0x03;                                                   // 44
      d = array[i] & 0x3F;                                                              // 45
      answer.push(getChar(a));                                                          // 46
      answer.push(getChar(b));                                                          // 47
      answer.push(getChar(c));                                                          // 48
      answer.push(getChar(d));                                                          // 49
      a = null;                                                                         // 50
      b = null;                                                                         // 51
      c = null;                                                                         // 52
      d = null;                                                                         // 53
      break;                                                                            // 54
    }                                                                                   // 55
  }                                                                                     // 56
  if (a != null) {                                                                      // 57
    answer.push(getChar(a));                                                            // 58
    answer.push(getChar(b));                                                            // 59
    if (c == null)                                                                      // 60
      answer.push('=');                                                                 // 61
    else                                                                                // 62
      answer.push(getChar(c));                                                          // 63
    if (d == null)                                                                      // 64
      answer.push('=');                                                                 // 65
  }                                                                                     // 66
  return answer.join("");                                                               // 67
};                                                                                      // 68
                                                                                        // 69
var getChar = function (val) {                                                          // 70
  return BASE_64_CHARS.charAt(val);                                                     // 71
};                                                                                      // 72
                                                                                        // 73
var getVal = function (ch) {                                                            // 74
  if (ch === '=') {                                                                     // 75
    return -1;                                                                          // 76
  }                                                                                     // 77
  return BASE_64_VALS[ch];                                                              // 78
};                                                                                      // 79
                                                                                        // 80
// XXX This is a weird place for this to live, but it's used both by                    // 81
// this package and 'ejson', and we can't put it in 'ejson' without                     // 82
// introducing a circular dependency. It should probably be in its own                  // 83
// package or as a helper in a package that both 'base64' and 'ejson'                   // 84
// use.                                                                                 // 85
Base64.newBinary = function (len) {                                                     // 86
  if (typeof Uint8Array === 'undefined' || typeof ArrayBuffer === 'undefined') {        // 87
    var ret = [];                                                                       // 88
    for (var i = 0; i < len; i++) {                                                     // 89
      ret.push(0);                                                                      // 90
    }                                                                                   // 91
    ret.$Uint8ArrayPolyfill = true;                                                     // 92
    return ret;                                                                         // 93
  }                                                                                     // 94
  return new Uint8Array(new ArrayBuffer(len));                                          // 95
};                                                                                      // 96
                                                                                        // 97
Base64.decode = function (str) {                                                        // 98
  var len = Math.floor((str.length*3)/4);                                               // 99
  if (str.charAt(str.length - 1) == '=') {                                              // 100
    len--;                                                                              // 101
    if (str.charAt(str.length - 2) == '=')                                              // 102
      len--;                                                                            // 103
  }                                                                                     // 104
  var arr = Base64.newBinary(len);                                                      // 105
                                                                                        // 106
  var one = null;                                                                       // 107
  var two = null;                                                                       // 108
  var three = null;                                                                     // 109
                                                                                        // 110
  var j = 0;                                                                            // 111
                                                                                        // 112
  for (var i = 0; i < str.length; i++) {                                                // 113
    var c = str.charAt(i);                                                              // 114
    var v = getVal(c);                                                                  // 115
    switch (i % 4) {                                                                    // 116
    case 0:                                                                             // 117
      if (v < 0)                                                                        // 118
        throw new Error('invalid base64 string');                                       // 119
      one = v << 2;                                                                     // 120
      break;                                                                            // 121
    case 1:                                                                             // 122
      if (v < 0)                                                                        // 123
        throw new Error('invalid base64 string');                                       // 124
      one = one | (v >> 4);                                                             // 125
      arr[j++] = one;                                                                   // 126
      two = (v & 0x0F) << 4;                                                            // 127
      break;                                                                            // 128
    case 2:                                                                             // 129
      if (v >= 0) {                                                                     // 130
        two = two | (v >> 2);                                                           // 131
        arr[j++] = two;                                                                 // 132
        three = (v & 0x03) << 6;                                                        // 133
      }                                                                                 // 134
      break;                                                                            // 135
    case 3:                                                                             // 136
      if (v >= 0) {                                                                     // 137
        arr[j++] = three | v;                                                           // 138
      }                                                                                 // 139
      break;                                                                            // 140
    }                                                                                   // 141
  }                                                                                     // 142
  return arr;                                                                           // 143
};                                                                                      // 144
                                                                                        // 145
//////////////////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package.base64 = {}, {
  Base64: Base64
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var _ = Package.underscore._;
var Base64 = Package.base64.Base64;

/* Package-scope variables */
var EJSON, EJSONTest;

(function(){

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                   //
// packages/ejson/ejson.js                                                                                           //
//                                                                                                                   //
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                     //
/**                                                                                                                  // 1
 * @namespace                                                                                                        // 2
 * @summary Namespace for EJSON functions                                                                            // 3
 */                                                                                                                  // 4
EJSON = {};                                                                                                          // 5
EJSONTest = {};                                                                                                      // 6
                                                                                                                     // 7
                                                                                                                     // 8
                                                                                                                     // 9
// Custom type interface definition                                                                                  // 10
/**                                                                                                                  // 11
 * @class CustomType                                                                                                 // 12
 * @instanceName customType                                                                                          // 13
 * @memberOf EJSON                                                                                                   // 14
 * @summary The interface that a class must satisfy to be able to become an                                          // 15
 * EJSON custom type via EJSON.addType.                                                                              // 16
 */                                                                                                                  // 17
                                                                                                                     // 18
/**                                                                                                                  // 19
 * @function typeName                                                                                                // 20
 * @memberOf EJSON.CustomType                                                                                        // 21
 * @summary Return the tag used to identify this type.  This must match the tag used to register this type with [`EJSON.addType`](#ejson_add_type).
 * @locus Anywhere                                                                                                   // 23
 * @instance                                                                                                         // 24
 */                                                                                                                  // 25
                                                                                                                     // 26
/**                                                                                                                  // 27
 * @function toJSONValue                                                                                             // 28
 * @memberOf EJSON.CustomType                                                                                        // 29
 * @summary Serialize this instance into a JSON-compatible value.                                                    // 30
 * @locus Anywhere                                                                                                   // 31
 * @instance                                                                                                         // 32
 */                                                                                                                  // 33
                                                                                                                     // 34
/**                                                                                                                  // 35
 * @function clone                                                                                                   // 36
 * @memberOf EJSON.CustomType                                                                                        // 37
 * @summary Return a value `r` such that `this.equals(r)` is true, and modifications to `r` do not affect `this` and vice versa.
 * @locus Anywhere                                                                                                   // 39
 * @instance                                                                                                         // 40
 */                                                                                                                  // 41
                                                                                                                     // 42
/**                                                                                                                  // 43
 * @function equals                                                                                                  // 44
 * @memberOf EJSON.CustomType                                                                                        // 45
 * @summary Return `true` if `other` has a value equal to `this`; `false` otherwise.                                 // 46
 * @locus Anywhere                                                                                                   // 47
 * @param {Object} other Another object to compare this to.                                                          // 48
 * @instance                                                                                                         // 49
 */                                                                                                                  // 50
                                                                                                                     // 51
                                                                                                                     // 52
var customTypes = {};                                                                                                // 53
// Add a custom type, using a method of your choice to get to and                                                    // 54
// from a basic JSON-able representation.  The factory argument                                                      // 55
// is a function of JSON-able --> your object                                                                        // 56
// The type you add must have:                                                                                       // 57
// - A toJSONValue() method, so that Meteor can serialize it                                                         // 58
// - a typeName() method, to show how to look it up in our type table.                                               // 59
// It is okay if these methods are monkey-patched on.                                                                // 60
// EJSON.clone will use toJSONValue and the given factory to produce                                                 // 61
// a clone, but you may specify a method clone() that will be                                                        // 62
// used instead.                                                                                                     // 63
// Similarly, EJSON.equals will use toJSONValue to make comparisons,                                                 // 64
// but you may provide a method equals() instead.                                                                    // 65
/**                                                                                                                  // 66
 * @summary Add a custom datatype to EJSON.                                                                          // 67
 * @locus Anywhere                                                                                                   // 68
 * @param {String} name A tag for your custom type; must be unique among custom data types defined in your project, and must match the result of your type's `typeName` method.
 * @param {Function} factory A function that deserializes a JSON-compatible value into an instance of your type.  This should match the serialization performed by your type's `toJSONValue` method.
 */                                                                                                                  // 71
EJSON.addType = function (name, factory) {                                                                           // 72
  if (_.has(customTypes, name))                                                                                      // 73
    throw new Error("Type " + name + " already present");                                                            // 74
  customTypes[name] = factory;                                                                                       // 75
};                                                                                                                   // 76
                                                                                                                     // 77
var isInfOrNan = function (obj) {                                                                                    // 78
  return _.isNaN(obj) || obj === Infinity || obj === -Infinity;                                                      // 79
};                                                                                                                   // 80
                                                                                                                     // 81
var builtinConverters = [                                                                                            // 82
  { // Date                                                                                                          // 83
    matchJSONValue: function (obj) {                                                                                 // 84
      return _.has(obj, '$date') && _.size(obj) === 1;                                                               // 85
    },                                                                                                               // 86
    matchObject: function (obj) {                                                                                    // 87
      return obj instanceof Date;                                                                                    // 88
    },                                                                                                               // 89
    toJSONValue: function (obj) {                                                                                    // 90
      return {$date: obj.getTime()};                                                                                 // 91
    },                                                                                                               // 92
    fromJSONValue: function (obj) {                                                                                  // 93
      return new Date(obj.$date);                                                                                    // 94
    }                                                                                                                // 95
  },                                                                                                                 // 96
  { // NaN, Inf, -Inf. (These are the only objects with typeof !== 'object'                                          // 97
    // which we match.)                                                                                              // 98
    matchJSONValue: function (obj) {                                                                                 // 99
      return _.has(obj, '$InfNaN') && _.size(obj) === 1;                                                             // 100
    },                                                                                                               // 101
    matchObject: isInfOrNan,                                                                                         // 102
    toJSONValue: function (obj) {                                                                                    // 103
      var sign;                                                                                                      // 104
      if (_.isNaN(obj))                                                                                              // 105
        sign = 0;                                                                                                    // 106
      else if (obj === Infinity)                                                                                     // 107
        sign = 1;                                                                                                    // 108
      else                                                                                                           // 109
        sign = -1;                                                                                                   // 110
      return {$InfNaN: sign};                                                                                        // 111
    },                                                                                                               // 112
    fromJSONValue: function (obj) {                                                                                  // 113
      return obj.$InfNaN/0;                                                                                          // 114
    }                                                                                                                // 115
  },                                                                                                                 // 116
  { // Binary                                                                                                        // 117
    matchJSONValue: function (obj) {                                                                                 // 118
      return _.has(obj, '$binary') && _.size(obj) === 1;                                                             // 119
    },                                                                                                               // 120
    matchObject: function (obj) {                                                                                    // 121
      return typeof Uint8Array !== 'undefined' && obj instanceof Uint8Array                                          // 122
        || (obj && _.has(obj, '$Uint8ArrayPolyfill'));                                                               // 123
    },                                                                                                               // 124
    toJSONValue: function (obj) {                                                                                    // 125
      return {$binary: Base64.encode(obj)};                                                                          // 126
    },                                                                                                               // 127
    fromJSONValue: function (obj) {                                                                                  // 128
      return Base64.decode(obj.$binary);                                                                             // 129
    }                                                                                                                // 130
  },                                                                                                                 // 131
  { // Escaping one level                                                                                            // 132
    matchJSONValue: function (obj) {                                                                                 // 133
      return _.has(obj, '$escape') && _.size(obj) === 1;                                                             // 134
    },                                                                                                               // 135
    matchObject: function (obj) {                                                                                    // 136
      if (_.isEmpty(obj) || _.size(obj) > 2) {                                                                       // 137
        return false;                                                                                                // 138
      }                                                                                                              // 139
      return _.any(builtinConverters, function (converter) {                                                         // 140
        return converter.matchJSONValue(obj);                                                                        // 141
      });                                                                                                            // 142
    },                                                                                                               // 143
    toJSONValue: function (obj) {                                                                                    // 144
      var newObj = {};                                                                                               // 145
      _.each(obj, function (value, key) {                                                                            // 146
        newObj[key] = EJSON.toJSONValue(value);                                                                      // 147
      });                                                                                                            // 148
      return {$escape: newObj};                                                                                      // 149
    },                                                                                                               // 150
    fromJSONValue: function (obj) {                                                                                  // 151
      var newObj = {};                                                                                               // 152
      _.each(obj.$escape, function (value, key) {                                                                    // 153
        newObj[key] = EJSON.fromJSONValue(value);                                                                    // 154
      });                                                                                                            // 155
      return newObj;                                                                                                 // 156
    }                                                                                                                // 157
  },                                                                                                                 // 158
  { // Custom                                                                                                        // 159
    matchJSONValue: function (obj) {                                                                                 // 160
      return _.has(obj, '$type') && _.has(obj, '$value') && _.size(obj) === 2;                                       // 161
    },                                                                                                               // 162
    matchObject: function (obj) {                                                                                    // 163
      return EJSON._isCustomType(obj);                                                                               // 164
    },                                                                                                               // 165
    toJSONValue: function (obj) {                                                                                    // 166
      var jsonValue = Meteor._noYieldsAllowed(function () {                                                          // 167
        return obj.toJSONValue();                                                                                    // 168
      });                                                                                                            // 169
      return {$type: obj.typeName(), $value: jsonValue};                                                             // 170
    },                                                                                                               // 171
    fromJSONValue: function (obj) {                                                                                  // 172
      var typeName = obj.$type;                                                                                      // 173
      if (!_.has(customTypes, typeName))                                                                             // 174
        throw new Error("Custom EJSON type " + typeName + " is not defined");                                        // 175
      var converter = customTypes[typeName];                                                                         // 176
      return Meteor._noYieldsAllowed(function () {                                                                   // 177
        return converter(obj.$value);                                                                                // 178
      });                                                                                                            // 179
    }                                                                                                                // 180
  }                                                                                                                  // 181
];                                                                                                                   // 182
                                                                                                                     // 183
EJSON._isCustomType = function (obj) {                                                                               // 184
  return obj &&                                                                                                      // 185
    typeof obj.toJSONValue === 'function' &&                                                                         // 186
    typeof obj.typeName === 'function' &&                                                                            // 187
    _.has(customTypes, obj.typeName());                                                                              // 188
};                                                                                                                   // 189
                                                                                                                     // 190
EJSON._getTypes = function () {                                                                                      // 191
  return customTypes;                                                                                                // 192
};                                                                                                                   // 193
                                                                                                                     // 194
EJSON._getConverters = function () {                                                                                 // 195
  return builtinConverters;                                                                                          // 196
};                                                                                                                   // 197
                                                                                                                     // 198
// for both arrays and objects, in-place modification.                                                               // 199
var adjustTypesToJSONValue =                                                                                         // 200
EJSON._adjustTypesToJSONValue = function (obj) {                                                                     // 201
  // Is it an atom that we need to adjust?                                                                           // 202
  if (obj === null)                                                                                                  // 203
    return null;                                                                                                     // 204
  var maybeChanged = toJSONValueHelper(obj);                                                                         // 205
  if (maybeChanged !== undefined)                                                                                    // 206
    return maybeChanged;                                                                                             // 207
                                                                                                                     // 208
  // Other atoms are unchanged.                                                                                      // 209
  if (typeof obj !== 'object')                                                                                       // 210
    return obj;                                                                                                      // 211
                                                                                                                     // 212
  // Iterate over array or object structure.                                                                         // 213
  _.each(obj, function (value, key) {                                                                                // 214
    if (typeof value !== 'object' && value !== undefined &&                                                          // 215
        !isInfOrNan(value))                                                                                          // 216
      return; // continue                                                                                            // 217
                                                                                                                     // 218
    var changed = toJSONValueHelper(value);                                                                          // 219
    if (changed) {                                                                                                   // 220
      obj[key] = changed;                                                                                            // 221
      return; // on to the next key                                                                                  // 222
    }                                                                                                                // 223
    // if we get here, value is an object but not adjustable                                                         // 224
    // at this level.  recurse.                                                                                      // 225
    adjustTypesToJSONValue(value);                                                                                   // 226
  });                                                                                                                // 227
  return obj;                                                                                                        // 228
};                                                                                                                   // 229
                                                                                                                     // 230
// Either return the JSON-compatible version of the argument, or undefined (if                                       // 231
// the item isn't itself replaceable, but maybe some fields in it are)                                               // 232
var toJSONValueHelper = function (item) {                                                                            // 233
  for (var i = 0; i < builtinConverters.length; i++) {                                                               // 234
    var converter = builtinConverters[i];                                                                            // 235
    if (converter.matchObject(item)) {                                                                               // 236
      return converter.toJSONValue(item);                                                                            // 237
    }                                                                                                                // 238
  }                                                                                                                  // 239
  return undefined;                                                                                                  // 240
};                                                                                                                   // 241
                                                                                                                     // 242
/**                                                                                                                  // 243
 * @summary Serialize an EJSON-compatible value into its plain JSON representation.                                  // 244
 * @locus Anywhere                                                                                                   // 245
 * @param {EJSON} val A value to serialize to plain JSON.                                                            // 246
 */                                                                                                                  // 247
EJSON.toJSONValue = function (item) {                                                                                // 248
  var changed = toJSONValueHelper(item);                                                                             // 249
  if (changed !== undefined)                                                                                         // 250
    return changed;                                                                                                  // 251
  if (typeof item === 'object') {                                                                                    // 252
    item = EJSON.clone(item);                                                                                        // 253
    adjustTypesToJSONValue(item);                                                                                    // 254
  }                                                                                                                  // 255
  return item;                                                                                                       // 256
};                                                                                                                   // 257
                                                                                                                     // 258
// for both arrays and objects. Tries its best to just                                                               // 259
// use the object you hand it, but may return something                                                              // 260
// different if the object you hand it itself needs changing.                                                        // 261
//                                                                                                                   // 262
var adjustTypesFromJSONValue =                                                                                       // 263
EJSON._adjustTypesFromJSONValue = function (obj) {                                                                   // 264
  if (obj === null)                                                                                                  // 265
    return null;                                                                                                     // 266
  var maybeChanged = fromJSONValueHelper(obj);                                                                       // 267
  if (maybeChanged !== obj)                                                                                          // 268
    return maybeChanged;                                                                                             // 269
                                                                                                                     // 270
  // Other atoms are unchanged.                                                                                      // 271
  if (typeof obj !== 'object')                                                                                       // 272
    return obj;                                                                                                      // 273
                                                                                                                     // 274
  _.each(obj, function (value, key) {                                                                                // 275
    if (typeof value === 'object') {                                                                                 // 276
      var changed = fromJSONValueHelper(value);                                                                      // 277
      if (value !== changed) {                                                                                       // 278
        obj[key] = changed;                                                                                          // 279
        return;                                                                                                      // 280
      }                                                                                                              // 281
      // if we get here, value is an object but not adjustable                                                       // 282
      // at this level.  recurse.                                                                                    // 283
      adjustTypesFromJSONValue(value);                                                                               // 284
    }                                                                                                                // 285
  });                                                                                                                // 286
  return obj;                                                                                                        // 287
};                                                                                                                   // 288
                                                                                                                     // 289
// Either return the argument changed to have the non-json                                                           // 290
// rep of itself (the Object version) or the argument itself.                                                        // 291
                                                                                                                     // 292
// DOES NOT RECURSE.  For actually getting the fully-changed value, use                                              // 293
// EJSON.fromJSONValue                                                                                               // 294
var fromJSONValueHelper = function (value) {                                                                         // 295
  if (typeof value === 'object' && value !== null) {                                                                 // 296
    if (_.size(value) <= 2                                                                                           // 297
        && _.all(value, function (v, k) {                                                                            // 298
          return typeof k === 'string' && k.substr(0, 1) === '$';                                                    // 299
        })) {                                                                                                        // 300
      for (var i = 0; i < builtinConverters.length; i++) {                                                           // 301
        var converter = builtinConverters[i];                                                                        // 302
        if (converter.matchJSONValue(value)) {                                                                       // 303
          return converter.fromJSONValue(value);                                                                     // 304
        }                                                                                                            // 305
      }                                                                                                              // 306
    }                                                                                                                // 307
  }                                                                                                                  // 308
  return value;                                                                                                      // 309
};                                                                                                                   // 310
                                                                                                                     // 311
/**                                                                                                                  // 312
 * @summary Deserialize an EJSON value from its plain JSON representation.                                           // 313
 * @locus Anywhere                                                                                                   // 314
 * @param {JSONCompatible} val A value to deserialize into EJSON.                                                    // 315
 */                                                                                                                  // 316
EJSON.fromJSONValue = function (item) {                                                                              // 317
  var changed = fromJSONValueHelper(item);                                                                           // 318
  if (changed === item && typeof item === 'object') {                                                                // 319
    item = EJSON.clone(item);                                                                                        // 320
    adjustTypesFromJSONValue(item);                                                                                  // 321
    return item;                                                                                                     // 322
  } else {                                                                                                           // 323
    return changed;                                                                                                  // 324
  }                                                                                                                  // 325
};                                                                                                                   // 326
                                                                                                                     // 327
/**                                                                                                                  // 328
 * @summary Serialize a value to a string.                                                                           // 329
                                                                                                                     // 330
For EJSON values, the serialization fully represents the value. For non-EJSON values, serializes the same way as `JSON.stringify`.
 * @locus Anywhere                                                                                                   // 332
 * @param {EJSON} val A value to stringify.                                                                          // 333
 * @param {Object} [options]                                                                                         // 334
 * @param {Boolean | Integer | String} options.indent Indents objects and arrays for easy readability.  When `true`, indents by 2 spaces; when an integer, indents by that number of spaces; and when a string, uses the string as the indentation pattern.
 * @param {Boolean} options.canonical When `true`, stringifies keys in an object in sorted order.                    // 336
 */                                                                                                                  // 337
EJSON.stringify = function (item, options) {                                                                         // 338
  var json = EJSON.toJSONValue(item);                                                                                // 339
  if (options && (options.canonical || options.indent)) {                                                            // 340
    return EJSON._canonicalStringify(json, options);                                                                 // 341
  } else {                                                                                                           // 342
    return JSON.stringify(json);                                                                                     // 343
  }                                                                                                                  // 344
};                                                                                                                   // 345
                                                                                                                     // 346
/**                                                                                                                  // 347
 * @summary Parse a string into an EJSON value. Throws an error if the string is not valid EJSON.                    // 348
 * @locus Anywhere                                                                                                   // 349
 * @param {String} str A string to parse into an EJSON value.                                                        // 350
 */                                                                                                                  // 351
EJSON.parse = function (item) {                                                                                      // 352
  if (typeof item !== 'string')                                                                                      // 353
    throw new Error("EJSON.parse argument should be a string");                                                      // 354
  return EJSON.fromJSONValue(JSON.parse(item));                                                                      // 355
};                                                                                                                   // 356
                                                                                                                     // 357
/**                                                                                                                  // 358
 * @summary Returns true if `x` is a buffer of binary data, as returned from [`EJSON.newBinary`](#ejson_new_binary).
 * @param {Object} x The variable to check.                                                                          // 360
 * @locus Anywhere                                                                                                   // 361
 */                                                                                                                  // 362
EJSON.isBinary = function (obj) {                                                                                    // 363
  return !!((typeof Uint8Array !== 'undefined' && obj instanceof Uint8Array) ||                                      // 364
    (obj && obj.$Uint8ArrayPolyfill));                                                                               // 365
};                                                                                                                   // 366
                                                                                                                     // 367
/**                                                                                                                  // 368
 * @summary Return true if `a` and `b` are equal to each other.  Return false otherwise.  Uses the `equals` method on `a` if present, otherwise performs a deep comparison.
 * @locus Anywhere                                                                                                   // 370
 * @param {EJSON} a                                                                                                  // 371
 * @param {EJSON} b                                                                                                  // 372
 * @param {Object} [options]                                                                                         // 373
 * @param {Boolean} options.keyOrderSensitive Compare in key sensitive order, if supported by the JavaScript implementation.  For example, `{a: 1, b: 2}` is equal to `{b: 2, a: 1}` only when `keyOrderSensitive` is `false`.  The default is `false`.
 */                                                                                                                  // 375
EJSON.equals = function (a, b, options) {                                                                            // 376
  var i;                                                                                                             // 377
  var keyOrderSensitive = !!(options && options.keyOrderSensitive);                                                  // 378
  if (a === b)                                                                                                       // 379
    return true;                                                                                                     // 380
  if (_.isNaN(a) && _.isNaN(b))                                                                                      // 381
    return true; // This differs from the IEEE spec for NaN equality, b/c we don't want                              // 382
                 // anything ever with a NaN to be poisoned from becoming equal to anything.                         // 383
  if (!a || !b) // if either one is falsy, they'd have to be === to be equal                                         // 384
    return false;                                                                                                    // 385
  if (!(typeof a === 'object' && typeof b === 'object'))                                                             // 386
    return false;                                                                                                    // 387
  if (a instanceof Date && b instanceof Date)                                                                        // 388
    return a.valueOf() === b.valueOf();                                                                              // 389
  if (EJSON.isBinary(a) && EJSON.isBinary(b)) {                                                                      // 390
    if (a.length !== b.length)                                                                                       // 391
      return false;                                                                                                  // 392
    for (i = 0; i < a.length; i++) {                                                                                 // 393
      if (a[i] !== b[i])                                                                                             // 394
        return false;                                                                                                // 395
    }                                                                                                                // 396
    return true;                                                                                                     // 397
  }                                                                                                                  // 398
  if (typeof (a.equals) === 'function')                                                                              // 399
    return a.equals(b, options);                                                                                     // 400
  if (typeof (b.equals) === 'function')                                                                              // 401
    return b.equals(a, options);                                                                                     // 402
  if (a instanceof Array) {                                                                                          // 403
    if (!(b instanceof Array))                                                                                       // 404
      return false;                                                                                                  // 405
    if (a.length !== b.length)                                                                                       // 406
      return false;                                                                                                  // 407
    for (i = 0; i < a.length; i++) {                                                                                 // 408
      if (!EJSON.equals(a[i], b[i], options))                                                                        // 409
        return false;                                                                                                // 410
    }                                                                                                                // 411
    return true;                                                                                                     // 412
  }                                                                                                                  // 413
  // fallback for custom types that don't implement their own equals                                                 // 414
  switch (EJSON._isCustomType(a) + EJSON._isCustomType(b)) {                                                         // 415
    case 1: return false;                                                                                            // 416
    case 2: return EJSON.equals(EJSON.toJSONValue(a), EJSON.toJSONValue(b));                                         // 417
  }                                                                                                                  // 418
  // fall back to structural equality of objects                                                                     // 419
  var ret;                                                                                                           // 420
  if (keyOrderSensitive) {                                                                                           // 421
    var bKeys = [];                                                                                                  // 422
    _.each(b, function (val, x) {                                                                                    // 423
        bKeys.push(x);                                                                                               // 424
    });                                                                                                              // 425
    i = 0;                                                                                                           // 426
    ret = _.all(a, function (val, x) {                                                                               // 427
      if (i >= bKeys.length) {                                                                                       // 428
        return false;                                                                                                // 429
      }                                                                                                              // 430
      if (x !== bKeys[i]) {                                                                                          // 431
        return false;                                                                                                // 432
      }                                                                                                              // 433
      if (!EJSON.equals(val, b[bKeys[i]], options)) {                                                                // 434
        return false;                                                                                                // 435
      }                                                                                                              // 436
      i++;                                                                                                           // 437
      return true;                                                                                                   // 438
    });                                                                                                              // 439
    return ret && i === bKeys.length;                                                                                // 440
  } else {                                                                                                           // 441
    i = 0;                                                                                                           // 442
    ret = _.all(a, function (val, key) {                                                                             // 443
      if (!_.has(b, key)) {                                                                                          // 444
        return false;                                                                                                // 445
      }                                                                                                              // 446
      if (!EJSON.equals(val, b[key], options)) {                                                                     // 447
        return false;                                                                                                // 448
      }                                                                                                              // 449
      i++;                                                                                                           // 450
      return true;                                                                                                   // 451
    });                                                                                                              // 452
    return ret && _.size(b) === i;                                                                                   // 453
  }                                                                                                                  // 454
};                                                                                                                   // 455
                                                                                                                     // 456
/**                                                                                                                  // 457
 * @summary Return a deep copy of `val`.                                                                             // 458
 * @locus Anywhere                                                                                                   // 459
 * @param {EJSON} val A value to copy.                                                                               // 460
 */                                                                                                                  // 461
EJSON.clone = function (v) {                                                                                         // 462
  var ret;                                                                                                           // 463
  if (typeof v !== "object")                                                                                         // 464
    return v;                                                                                                        // 465
  if (v === null)                                                                                                    // 466
    return null; // null has typeof "object"                                                                         // 467
  if (v instanceof Date)                                                                                             // 468
    return new Date(v.getTime());                                                                                    // 469
  // RegExps are not really EJSON elements (eg we don't define a serialization                                       // 470
  // for them), but they're immutable anyway, so we can support them in clone.                                       // 471
  if (v instanceof RegExp)                                                                                           // 472
    return v;                                                                                                        // 473
  if (EJSON.isBinary(v)) {                                                                                           // 474
    ret = EJSON.newBinary(v.length);                                                                                 // 475
    for (var i = 0; i < v.length; i++) {                                                                             // 476
      ret[i] = v[i];                                                                                                 // 477
    }                                                                                                                // 478
    return ret;                                                                                                      // 479
  }                                                                                                                  // 480
  // XXX: Use something better than underscore's isArray                                                             // 481
  if (_.isArray(v) || _.isArguments(v)) {                                                                            // 482
    // For some reason, _.map doesn't work in this context on Opera (weird test                                      // 483
    // failures).                                                                                                    // 484
    ret = [];                                                                                                        // 485
    for (i = 0; i < v.length; i++)                                                                                   // 486
      ret[i] = EJSON.clone(v[i]);                                                                                    // 487
    return ret;                                                                                                      // 488
  }                                                                                                                  // 489
  // handle general user-defined typed Objects if they have a clone method                                           // 490
  if (typeof v.clone === 'function') {                                                                               // 491
    return v.clone();                                                                                                // 492
  }                                                                                                                  // 493
  // handle other custom types                                                                                       // 494
  if (EJSON._isCustomType(v)) {                                                                                      // 495
    return EJSON.fromJSONValue(EJSON.clone(EJSON.toJSONValue(v)), true);                                             // 496
  }                                                                                                                  // 497
  // handle other objects                                                                                            // 498
  ret = {};                                                                                                          // 499
  _.each(v, function (value, key) {                                                                                  // 500
    ret[key] = EJSON.clone(value);                                                                                   // 501
  });                                                                                                                // 502
  return ret;                                                                                                        // 503
};                                                                                                                   // 504
                                                                                                                     // 505
/**                                                                                                                  // 506
 * @summary Allocate a new buffer of binary data that EJSON can serialize.                                           // 507
 * @locus Anywhere                                                                                                   // 508
 * @param {Number} size The number of bytes of binary data to allocate.                                              // 509
 */                                                                                                                  // 510
// EJSON.newBinary is the public documented API for this functionality,                                              // 511
// but the implementation is in the 'base64' package to avoid                                                        // 512
// introducing a circular dependency. (If the implementation were here,                                              // 513
// then 'base64' would have to use EJSON.newBinary, and 'ejson' would                                                // 514
// also have to use 'base64'.)                                                                                       // 515
EJSON.newBinary = Base64.newBinary;                                                                                  // 516
                                                                                                                     // 517
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                   //
// packages/ejson/stringify.js                                                                                       //
//                                                                                                                   //
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                     //
// Based on json2.js from https://github.com/douglascrockford/JSON-js                                                // 1
//                                                                                                                   // 2
//    json2.js                                                                                                       // 3
//    2012-10-08                                                                                                     // 4
//                                                                                                                   // 5
//    Public Domain.                                                                                                 // 6
//                                                                                                                   // 7
//    NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.                                                        // 8
                                                                                                                     // 9
function quote(string) {                                                                                             // 10
  return JSON.stringify(string);                                                                                     // 11
}                                                                                                                    // 12
                                                                                                                     // 13
var str = function (key, holder, singleIndent, outerIndent, canonical) {                                             // 14
                                                                                                                     // 15
  // Produce a string from holder[key].                                                                              // 16
                                                                                                                     // 17
  var i;          // The loop counter.                                                                               // 18
  var k;          // The member key.                                                                                 // 19
  var v;          // The member value.                                                                               // 20
  var length;                                                                                                        // 21
  var innerIndent = outerIndent;                                                                                     // 22
  var partial;                                                                                                       // 23
  var value = holder[key];                                                                                           // 24
                                                                                                                     // 25
  // What happens next depends on the value's type.                                                                  // 26
                                                                                                                     // 27
  switch (typeof value) {                                                                                            // 28
  case 'string':                                                                                                     // 29
    return quote(value);                                                                                             // 30
  case 'number':                                                                                                     // 31
    // JSON numbers must be finite. Encode non-finite numbers as null.                                               // 32
    return isFinite(value) ? String(value) : 'null';                                                                 // 33
  case 'boolean':                                                                                                    // 34
    return String(value);                                                                                            // 35
  // If the type is 'object', we might be dealing with an object or an array or                                      // 36
  // null.                                                                                                           // 37
  case 'object':                                                                                                     // 38
    // Due to a specification blunder in ECMAScript, typeof null is 'object',                                        // 39
    // so watch out for that case.                                                                                   // 40
    if (!value) {                                                                                                    // 41
      return 'null';                                                                                                 // 42
    }                                                                                                                // 43
    // Make an array to hold the partial results of stringifying this object value.                                  // 44
    innerIndent = outerIndent + singleIndent;                                                                        // 45
    partial = [];                                                                                                    // 46
                                                                                                                     // 47
    // Is the value an array?                                                                                        // 48
    if (_.isArray(value) || _.isArguments(value)) {                                                                  // 49
                                                                                                                     // 50
      // The value is an array. Stringify every element. Use null as a placeholder                                   // 51
      // for non-JSON values.                                                                                        // 52
                                                                                                                     // 53
      length = value.length;                                                                                         // 54
      for (i = 0; i < length; i += 1) {                                                                              // 55
        partial[i] = str(i, value, singleIndent, innerIndent, canonical) || 'null';                                  // 56
      }                                                                                                              // 57
                                                                                                                     // 58
      // Join all of the elements together, separated with commas, and wrap them in                                  // 59
      // brackets.                                                                                                   // 60
                                                                                                                     // 61
      if (partial.length === 0) {                                                                                    // 62
        v = '[]';                                                                                                    // 63
      } else if (innerIndent) {                                                                                      // 64
        v = '[\n' + innerIndent + partial.join(',\n' + innerIndent) + '\n' + outerIndent + ']';                      // 65
      } else {                                                                                                       // 66
        v = '[' + partial.join(',') + ']';                                                                           // 67
      }                                                                                                              // 68
      return v;                                                                                                      // 69
    }                                                                                                                // 70
                                                                                                                     // 71
                                                                                                                     // 72
    // Iterate through all of the keys in the object.                                                                // 73
    var keys = _.keys(value);                                                                                        // 74
    if (canonical)                                                                                                   // 75
      keys = keys.sort();                                                                                            // 76
    _.each(keys, function (k) {                                                                                      // 77
      v = str(k, value, singleIndent, innerIndent, canonical);                                                       // 78
      if (v) {                                                                                                       // 79
        partial.push(quote(k) + (innerIndent ? ': ' : ':') + v);                                                     // 80
      }                                                                                                              // 81
    });                                                                                                              // 82
                                                                                                                     // 83
                                                                                                                     // 84
    // Join all of the member texts together, separated with commas,                                                 // 85
    // and wrap them in braces.                                                                                      // 86
                                                                                                                     // 87
    if (partial.length === 0) {                                                                                      // 88
      v = '{}';                                                                                                      // 89
    } else if (innerIndent) {                                                                                        // 90
      v = '{\n' + innerIndent + partial.join(',\n' + innerIndent) + '\n' + outerIndent + '}';                        // 91
    } else {                                                                                                         // 92
      v = '{' + partial.join(',') + '}';                                                                             // 93
    }                                                                                                                // 94
    return v;                                                                                                        // 95
  }                                                                                                                  // 96
}                                                                                                                    // 97
                                                                                                                     // 98
// If the JSON object does not yet have a stringify method, give it one.                                             // 99
                                                                                                                     // 100
EJSON._canonicalStringify = function (value, options) {                                                              // 101
  // Make a fake root object containing our value under the key of ''.                                               // 102
  // Return the result of stringifying the value.                                                                    // 103
  options = _.extend({                                                                                               // 104
    indent: "",                                                                                                      // 105
    canonical: false                                                                                                 // 106
  }, options);                                                                                                       // 107
  if (options.indent === true) {                                                                                     // 108
    options.indent = "  ";                                                                                           // 109
  } else if (typeof options.indent === 'number') {                                                                   // 110
    var newIndent = "";                                                                                              // 111
    for (var i = 0; i < options.indent; i++) {                                                                       // 112
      newIndent += ' ';                                                                                              // 113
    }                                                                                                                // 114
    options.indent = newIndent;                                                                                      // 115
  }                                                                                                                  // 116
  return str('', {'': value}, options.indent, "", options.canonical);                                                // 117
};                                                                                                                   // 118
                                                                                                                     // 119
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package.ejson = {}, {
  EJSON: EJSON,
  EJSONTest: EJSONTest
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var meteorInstall = Package.modules.meteorInstall;
var Buffer = Package.modules.Buffer;
var process = Package.modules.process;
var _ = Package.underscore._;
var EJSON = Package.ejson.EJSON;

/* Package-scope variables */
var check, Match;

var require = meteorInstall({"node_modules":{"meteor":{"check":{"match.js":["./isPlainObject.js",function(require,exports){

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                   //
// packages/check/match.js                                                                                           //
//                                                                                                                   //
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                     //
// XXX docs                                                                                                          // 1
                                                                                                                     // 2
// Things we explicitly do NOT support:                                                                              // 3
//    - heterogenous arrays                                                                                          // 4
                                                                                                                     // 5
var currentArgumentChecker = new Meteor.EnvironmentVariable;                                                         // 6
var isPlainObject = require("./isPlainObject.js").isPlainObject;                                                     // 7
                                                                                                                     // 8
/**                                                                                                                  // 9
 * @summary Check that a value matches a [pattern](#matchpatterns).                                                  // 10
 * If the value does not match the pattern, throw a `Match.Error`.                                                   // 11
 *                                                                                                                   // 12
 * Particularly useful to assert that arguments to a function have the right                                         // 13
 * types and structure.                                                                                              // 14
 * @locus Anywhere                                                                                                   // 15
 * @param {Any} value The value to check                                                                             // 16
 * @param {MatchPattern} pattern The pattern to match                                                                // 17
 * `value` against                                                                                                   // 18
 */                                                                                                                  // 19
var check = exports.check = function (value, pattern) {                                                              // 20
  // Record that check got called, if somebody cared.                                                                // 21
  //                                                                                                                 // 22
  // We use getOrNullIfOutsideFiber so that it's OK to call check()                                                  // 23
  // from non-Fiber server contexts; the downside is that if you forget to                                           // 24
  // bindEnvironment on some random callback in your method/publisher,                                               // 25
  // it might not find the argumentChecker and you'll get an error about                                             // 26
  // not checking an argument that it looks like you're checking (instead                                            // 27
  // of just getting a "Node code must run in a Fiber" error).                                                       // 28
  var argChecker = currentArgumentChecker.getOrNullIfOutsideFiber();                                                 // 29
  if (argChecker)                                                                                                    // 30
    argChecker.checking(value);                                                                                      // 31
  var result = testSubtree(value, pattern);                                                                          // 32
  if (result) {                                                                                                      // 33
    var err = new Match.Error(result.message);                                                                       // 34
    if (result.path) {                                                                                               // 35
      err.message += " in field " + result.path;                                                                     // 36
      err.path = result.path;                                                                                        // 37
    }                                                                                                                // 38
    throw err;                                                                                                       // 39
  }                                                                                                                  // 40
};                                                                                                                   // 41
                                                                                                                     // 42
/**                                                                                                                  // 43
 * @namespace Match                                                                                                  // 44
 * @summary The namespace for all Match types and methods.                                                           // 45
 */                                                                                                                  // 46
var Match = exports.Match = {                                                                                        // 47
  Optional: function (pattern) {                                                                                     // 48
    return new Optional(pattern);                                                                                    // 49
  },                                                                                                                 // 50
  Maybe: function (pattern) {                                                                                        // 51
    return new Maybe(pattern);                                                                                       // 52
  },                                                                                                                 // 53
  OneOf: function (/*arguments*/) {                                                                                  // 54
    return new OneOf(_.toArray(arguments));                                                                          // 55
  },                                                                                                                 // 56
  Any: ['__any__'],                                                                                                  // 57
  Where: function (condition) {                                                                                      // 58
    return new Where(condition);                                                                                     // 59
  },                                                                                                                 // 60
  ObjectIncluding: function (pattern) {                                                                              // 61
    return new ObjectIncluding(pattern);                                                                             // 62
  },                                                                                                                 // 63
  ObjectWithValues: function (pattern) {                                                                             // 64
    return new ObjectWithValues(pattern);                                                                            // 65
  },                                                                                                                 // 66
  // Matches only signed 32-bit integers                                                                             // 67
  Integer: ['__integer__'],                                                                                          // 68
                                                                                                                     // 69
  // XXX matchers should know how to describe themselves for errors                                                  // 70
  Error: Meteor.makeErrorType("Match.Error", function (msg) {                                                        // 71
    this.message = "Match error: " + msg;                                                                            // 72
    // The path of the value that failed to match. Initially empty, this gets                                        // 73
    // populated by catching and rethrowing the exception as it goes back up the                                     // 74
    // stack.                                                                                                        // 75
    // E.g.: "vals[3].entity.created"                                                                                // 76
    this.path = "";                                                                                                  // 77
    // If this gets sent over DDP, don't give full internal details but at least                                     // 78
    // provide something better than 500 Internal server error.                                                      // 79
    this.sanitizedError = new Meteor.Error(400, "Match failed");                                                     // 80
  }),                                                                                                                // 81
                                                                                                                     // 82
  // Tests to see if value matches pattern. Unlike check, it merely returns true                                     // 83
  // or false (unless an error other than Match.Error was thrown). It does not                                       // 84
  // interact with _failIfArgumentsAreNotAllChecked.                                                                 // 85
  // XXX maybe also implement a Match.match which returns more information about                                     // 86
  //     failures but without using exception handling or doing what check()                                         // 87
  //     does with _failIfArgumentsAreNotAllChecked and Meteor.Error conversion                                      // 88
                                                                                                                     // 89
  /**                                                                                                                // 90
   * @summary Returns true if the value matches the pattern.                                                         // 91
   * @locus Anywhere                                                                                                 // 92
   * @param {Any} value The value to check                                                                           // 93
   * @param {MatchPattern} pattern The pattern to match `value` against                                              // 94
   */                                                                                                                // 95
  test: function (value, pattern) {                                                                                  // 96
    return !testSubtree(value, pattern);                                                                             // 97
  },                                                                                                                 // 98
                                                                                                                     // 99
  // Runs `f.apply(context, args)`. If check() is not called on every element of                                     // 100
  // `args` (either directly or in the first level of an array), throws an error                                     // 101
  // (using `description` in the message).                                                                           // 102
  //                                                                                                                 // 103
  _failIfArgumentsAreNotAllChecked: function (f, context, args, description) {                                       // 104
    var argChecker = new ArgumentChecker(args, description);                                                         // 105
    var result = currentArgumentChecker.withValue(argChecker, function () {                                          // 106
      return f.apply(context, args);                                                                                 // 107
    });                                                                                                              // 108
    // If f didn't itself throw, make sure it checked all of its arguments.                                          // 109
    argChecker.throwUnlessAllArgumentsHaveBeenChecked();                                                             // 110
    return result;                                                                                                   // 111
  }                                                                                                                  // 112
};                                                                                                                   // 113
                                                                                                                     // 114
var Optional = function (pattern) {                                                                                  // 115
  this.pattern = pattern;                                                                                            // 116
};                                                                                                                   // 117
                                                                                                                     // 118
var Maybe = function (pattern) {                                                                                     // 119
  this.pattern = pattern;                                                                                            // 120
};                                                                                                                   // 121
                                                                                                                     // 122
var OneOf = function (choices) {                                                                                     // 123
  if (_.isEmpty(choices))                                                                                            // 124
    throw new Error("Must provide at least one choice to Match.OneOf");                                              // 125
  this.choices = choices;                                                                                            // 126
};                                                                                                                   // 127
                                                                                                                     // 128
var Where = function (condition) {                                                                                   // 129
  this.condition = condition;                                                                                        // 130
};                                                                                                                   // 131
                                                                                                                     // 132
var ObjectIncluding = function (pattern) {                                                                           // 133
  this.pattern = pattern;                                                                                            // 134
};                                                                                                                   // 135
                                                                                                                     // 136
var ObjectWithValues = function (pattern) {                                                                          // 137
  this.pattern = pattern;                                                                                            // 138
};                                                                                                                   // 139
                                                                                                                     // 140
var stringForErrorMessage = function (value, options) {                                                              // 141
  options = options || {};                                                                                           // 142
                                                                                                                     // 143
  if ( value === null ) return "null";                                                                               // 144
                                                                                                                     // 145
  if ( options.onlyShowType ) {                                                                                      // 146
    return typeof value;                                                                                             // 147
  }                                                                                                                  // 148
                                                                                                                     // 149
  // Your average non-object things.  Saves from doing the try/catch below for.                                      // 150
  if ( typeof value !== "object" ) {                                                                                 // 151
    return EJSON.stringify(value)                                                                                    // 152
  }                                                                                                                  // 153
                                                                                                                     // 154
  try {                                                                                                              // 155
    // Find objects with circular references since EJSON doesn't support them yet (Issue #4778 + Unaccepted PR)      // 156
    // If the native stringify is going to choke, EJSON.stringify is going to choke too.                             // 157
    JSON.stringify(value);                                                                                           // 158
  } catch (stringifyError) {                                                                                         // 159
    if ( stringifyError.name === "TypeError" ) {                                                                     // 160
      return typeof value;                                                                                           // 161
    }                                                                                                                // 162
  }                                                                                                                  // 163
                                                                                                                     // 164
  return EJSON.stringify(value);                                                                                     // 165
};                                                                                                                   // 166
                                                                                                                     // 167
var typeofChecks = [                                                                                                 // 168
  [String, "string"],                                                                                                // 169
  [Number, "number"],                                                                                                // 170
  [Boolean, "boolean"],                                                                                              // 171
  // While we don't allow undefined/function in EJSON, this is good for optional                                     // 172
  // arguments with OneOf.                                                                                           // 173
  [Function, "function"],                                                                                            // 174
  [undefined, "undefined"]                                                                                           // 175
];                                                                                                                   // 176
                                                                                                                     // 177
// Return `false` if it matches. Otherwise, return an object with a `message` and a `path` field.                    // 178
var testSubtree = function (value, pattern) {                                                                        // 179
  // Match anything!                                                                                                 // 180
  if (pattern === Match.Any)                                                                                         // 181
    return false;                                                                                                    // 182
                                                                                                                     // 183
  // Basic atomic types.                                                                                             // 184
  // Do not match boxed objects (e.g. String, Boolean)                                                               // 185
  for (var i = 0; i < typeofChecks.length; ++i) {                                                                    // 186
    if (pattern === typeofChecks[i][0]) {                                                                            // 187
      if (typeof value === typeofChecks[i][1])                                                                       // 188
        return false;                                                                                                // 189
      return {                                                                                                       // 190
        message: "Expected " + typeofChecks[i][1] + ", got " + stringForErrorMessage(value, { onlyShowType: true }),
        path: ""                                                                                                     // 192
      };                                                                                                             // 193
    }                                                                                                                // 194
  }                                                                                                                  // 195
                                                                                                                     // 196
  if (pattern === null) {                                                                                            // 197
    if (value === null) {                                                                                            // 198
      return false;                                                                                                  // 199
    }                                                                                                                // 200
    return {                                                                                                         // 201
      message: "Expected null, got " + stringForErrorMessage(value),                                                 // 202
      path: ""                                                                                                       // 203
    };                                                                                                               // 204
  }                                                                                                                  // 205
                                                                                                                     // 206
  // Strings, numbers, and booleans match literally. Goes well with Match.OneOf.                                     // 207
  if (typeof pattern === "string" || typeof pattern === "number" || typeof pattern === "boolean") {                  // 208
    if (value === pattern)                                                                                           // 209
      return false;                                                                                                  // 210
    return {                                                                                                         // 211
      message: "Expected " + pattern + ", got " + stringForErrorMessage(value),                                      // 212
      path: ""                                                                                                       // 213
    };                                                                                                               // 214
  }                                                                                                                  // 215
                                                                                                                     // 216
  // Match.Integer is special type encoded with array                                                                // 217
  if (pattern === Match.Integer) {                                                                                   // 218
    // There is no consistent and reliable way to check if variable is a 64-bit                                      // 219
    // integer. One of the popular solutions is to get reminder of division by 1                                     // 220
    // but this method fails on really large floats with big precision.                                              // 221
    // E.g.: 1.348192308491824e+23 % 1 === 0 in V8                                                                   // 222
    // Bitwise operators work consistantly but always cast variable to 32-bit                                        // 223
    // signed integer according to JavaScript specs.                                                                 // 224
    if (typeof value === "number" && (value | 0) === value)                                                          // 225
      return false;                                                                                                  // 226
    return {                                                                                                         // 227
      message: "Expected Integer, got " + stringForErrorMessage(value),                                              // 228
      path: ""                                                                                                       // 229
    };                                                                                                               // 230
  }                                                                                                                  // 231
                                                                                                                     // 232
  // "Object" is shorthand for Match.ObjectIncluding({});                                                            // 233
  if (pattern === Object)                                                                                            // 234
    pattern = Match.ObjectIncluding({});                                                                             // 235
                                                                                                                     // 236
  // Array (checked AFTER Any, which is implemented as an Array).                                                    // 237
  if (pattern instanceof Array) {                                                                                    // 238
    if (pattern.length !== 1) {                                                                                      // 239
      return {                                                                                                       // 240
        message: "Bad pattern: arrays must have one type element" + stringForErrorMessage(pattern),                  // 241
        path: ""                                                                                                     // 242
      };                                                                                                             // 243
    }                                                                                                                // 244
    if (!_.isArray(value) && !_.isArguments(value)) {                                                                // 245
      return {                                                                                                       // 246
        message: "Expected array, got " + stringForErrorMessage(value),                                              // 247
        path: ""                                                                                                     // 248
      };                                                                                                             // 249
    }                                                                                                                // 250
                                                                                                                     // 251
    for (var i = 0, length = value.length; i < length; i++) {                                                        // 252
      var result = testSubtree(value[i], pattern[0]);                                                                // 253
      if (result) {                                                                                                  // 254
        result.path = _prependPath(i, result.path);                                                                  // 255
        return result;                                                                                               // 256
      }                                                                                                              // 257
    }                                                                                                                // 258
    return false;                                                                                                    // 259
  }                                                                                                                  // 260
                                                                                                                     // 261
  // Arbitrary validation checks. The condition can return false or throw a                                          // 262
  // Match.Error (ie, it can internally use check()) to fail.                                                        // 263
  if (pattern instanceof Where) {                                                                                    // 264
    var result;                                                                                                      // 265
    try {                                                                                                            // 266
      result = pattern.condition(value);                                                                             // 267
    } catch (err) {                                                                                                  // 268
      if (!(err instanceof Match.Error))                                                                             // 269
        throw err;                                                                                                   // 270
      return {                                                                                                       // 271
        message: err.message,                                                                                        // 272
        path: err.path                                                                                               // 273
      };                                                                                                             // 274
    }                                                                                                                // 275
    if (result)                                                                                                      // 276
      return false;                                                                                                  // 277
    // XXX this error is terrible                                                                                    // 278
    return {                                                                                                         // 279
      message: "Failed Match.Where validation",                                                                      // 280
      path: ""                                                                                                       // 281
    };                                                                                                               // 282
  }                                                                                                                  // 283
                                                                                                                     // 284
                                                                                                                     // 285
  if (pattern instanceof Maybe) {                                                                                    // 286
    pattern = Match.OneOf(undefined, null, pattern.pattern);                                                         // 287
  }                                                                                                                  // 288
  else if (pattern instanceof Optional) {                                                                            // 289
    pattern = Match.OneOf(undefined, pattern.pattern);                                                               // 290
  }                                                                                                                  // 291
                                                                                                                     // 292
  if (pattern instanceof OneOf) {                                                                                    // 293
    for (var i = 0; i < pattern.choices.length; ++i) {                                                               // 294
      var result = testSubtree(value, pattern.choices[i]);                                                           // 295
      if (!result) {                                                                                                 // 296
        // No error? Yay, return.                                                                                    // 297
        return false;                                                                                                // 298
      }                                                                                                              // 299
      // Match errors just mean try another choice.                                                                  // 300
    }                                                                                                                // 301
    // XXX this error is terrible                                                                                    // 302
    return {                                                                                                         // 303
      message: "Failed Match.OneOf, Match.Maybe or Match.Optional validation",                                       // 304
      path: ""                                                                                                       // 305
    };                                                                                                               // 306
  }                                                                                                                  // 307
                                                                                                                     // 308
  // A function that isn't something we special-case is assumed to be a                                              // 309
  // constructor.                                                                                                    // 310
  if (pattern instanceof Function) {                                                                                 // 311
    if (value instanceof pattern)                                                                                    // 312
      return false;                                                                                                  // 313
    return {                                                                                                         // 314
      message: "Expected " + (pattern.name ||"particular constructor"),                                              // 315
      path: ""                                                                                                       // 316
    };                                                                                                               // 317
  }                                                                                                                  // 318
                                                                                                                     // 319
  var unknownKeysAllowed = false;                                                                                    // 320
  var unknownKeyPattern;                                                                                             // 321
  if (pattern instanceof ObjectIncluding) {                                                                          // 322
    unknownKeysAllowed = true;                                                                                       // 323
    pattern = pattern.pattern;                                                                                       // 324
  }                                                                                                                  // 325
  if (pattern instanceof ObjectWithValues) {                                                                         // 326
    unknownKeysAllowed = true;                                                                                       // 327
    unknownKeyPattern = [pattern.pattern];                                                                           // 328
    pattern = {};  // no required keys                                                                               // 329
  }                                                                                                                  // 330
                                                                                                                     // 331
  if (typeof pattern !== "object") {                                                                                 // 332
    return {                                                                                                         // 333
      message: "Bad pattern: unknown pattern type",                                                                  // 334
      path: ""                                                                                                       // 335
    };                                                                                                               // 336
  }                                                                                                                  // 337
                                                                                                                     // 338
  // An object, with required and optional keys. Note that this does NOT do                                          // 339
  // structural matches against objects of special types that happen to match                                        // 340
  // the pattern: this really needs to be a plain old {Object}!                                                      // 341
  if (typeof value !== 'object') {                                                                                   // 342
    return {                                                                                                         // 343
      message: "Expected object, got " + typeof value,                                                               // 344
      path: ""                                                                                                       // 345
    };                                                                                                               // 346
  }                                                                                                                  // 347
  if (value === null) {                                                                                              // 348
    return {                                                                                                         // 349
      message: "Expected object, got null",                                                                          // 350
      path: ""                                                                                                       // 351
    };                                                                                                               // 352
  }                                                                                                                  // 353
  if (! isPlainObject(value)) {                                                                                      // 354
    return {                                                                                                         // 355
      message: "Expected plain object",                                                                              // 356
      path: ""                                                                                                       // 357
    };                                                                                                               // 358
  }                                                                                                                  // 359
                                                                                                                     // 360
  var requiredPatterns = {};                                                                                         // 361
  var optionalPatterns = {};                                                                                         // 362
  _.each(pattern, function (subPattern, key) {                                                                       // 363
    if (subPattern instanceof Optional || subPattern instanceof Maybe)                                               // 364
      optionalPatterns[key] = subPattern.pattern;                                                                    // 365
    else                                                                                                             // 366
      requiredPatterns[key] = subPattern;                                                                            // 367
  });                                                                                                                // 368
                                                                                                                     // 369
  //XXX: replace with underscore's _.allKeys if Meteor updates underscore to 1.8+ (or lodash)                        // 370
  var allKeys = function(obj){                                                                                       // 371
    var keys = [];                                                                                                   // 372
    if (_.isObject(obj)){                                                                                            // 373
      for (var key in obj) keys.push(key);                                                                           // 374
    }                                                                                                                // 375
    return keys;                                                                                                     // 376
  }                                                                                                                  // 377
                                                                                                                     // 378
  for (var keys = allKeys(value), i = 0, length = keys.length; i < length; i++) {                                    // 379
    var key = keys[i];                                                                                               // 380
    var subValue = value[key];                                                                                       // 381
    if (_.has(requiredPatterns, key)) {                                                                              // 382
      var result = testSubtree(subValue, requiredPatterns[key]);                                                     // 383
      if (result) {                                                                                                  // 384
        result.path = _prependPath(key, result.path);                                                                // 385
        return result;                                                                                               // 386
      }                                                                                                              // 387
      delete requiredPatterns[key];                                                                                  // 388
    } else if (_.has(optionalPatterns, key)) {                                                                       // 389
      var result = testSubtree(subValue, optionalPatterns[key]);                                                     // 390
      if (result) {                                                                                                  // 391
        result.path = _prependPath(key, result.path);                                                                // 392
        return result;                                                                                               // 393
      }                                                                                                              // 394
    } else {                                                                                                         // 395
      if (!unknownKeysAllowed) {                                                                                     // 396
        return {                                                                                                     // 397
          message: "Unknown key",                                                                                    // 398
          path: key                                                                                                  // 399
        };                                                                                                           // 400
      }                                                                                                              // 401
      if (unknownKeyPattern) {                                                                                       // 402
        var result = testSubtree(subValue, unknownKeyPattern[0]);                                                    // 403
        if (result) {                                                                                                // 404
          result.path = _prependPath(key, result.path);                                                              // 405
          return result;                                                                                             // 406
        }                                                                                                            // 407
      }                                                                                                              // 408
    }                                                                                                                // 409
  }                                                                                                                  // 410
                                                                                                                     // 411
  var keys = _.keys(requiredPatterns);                                                                               // 412
  if (keys.length) {                                                                                                 // 413
    return {                                                                                                         // 414
      message: "Missing key '" + keys[0] + "'",                                                                      // 415
      path: ""                                                                                                       // 416
    };                                                                                                               // 417
  }                                                                                                                  // 418
};                                                                                                                   // 419
                                                                                                                     // 420
var ArgumentChecker = function (args, description) {                                                                 // 421
  var self = this;                                                                                                   // 422
  // Make a SHALLOW copy of the arguments. (We'll be doing identity checks                                           // 423
  // against its contents.)                                                                                          // 424
  self.args = _.clone(args);                                                                                         // 425
  // Since the common case will be to check arguments in order, and we splice                                        // 426
  // out arguments when we check them, make it so we splice out from the end                                         // 427
  // rather than the beginning.                                                                                      // 428
  self.args.reverse();                                                                                               // 429
  self.description = description;                                                                                    // 430
};                                                                                                                   // 431
                                                                                                                     // 432
_.extend(ArgumentChecker.prototype, {                                                                                // 433
  checking: function (value) {                                                                                       // 434
    var self = this;                                                                                                 // 435
    if (self._checkingOneValue(value))                                                                               // 436
      return;                                                                                                        // 437
    // Allow check(arguments, [String]) or check(arguments.slice(1), [String])                                       // 438
    // or check([foo, bar], [String]) to count... but only if value wasn't                                           // 439
    // itself an argument.                                                                                           // 440
    if (_.isArray(value) || _.isArguments(value)) {                                                                  // 441
      _.each(value, _.bind(self._checkingOneValue, self));                                                           // 442
    }                                                                                                                // 443
  },                                                                                                                 // 444
  _checkingOneValue: function (value) {                                                                              // 445
    var self = this;                                                                                                 // 446
    for (var i = 0; i < self.args.length; ++i) {                                                                     // 447
      // Is this value one of the arguments? (This can have a false positive if                                      // 448
      // the argument is an interned primitive, but it's still a good enough                                         // 449
      // check.)                                                                                                     // 450
      // (NaN is not === to itself, so we have to check specially.)                                                  // 451
      if (value === self.args[i] || (_.isNaN(value) && _.isNaN(self.args[i]))) {                                     // 452
        self.args.splice(i, 1);                                                                                      // 453
        return true;                                                                                                 // 454
      }                                                                                                              // 455
    }                                                                                                                // 456
    return false;                                                                                                    // 457
  },                                                                                                                 // 458
  throwUnlessAllArgumentsHaveBeenChecked: function () {                                                              // 459
    var self = this;                                                                                                 // 460
    if (!_.isEmpty(self.args))                                                                                       // 461
      throw new Error("Did not check() all arguments during " +                                                      // 462
                      self.description);                                                                             // 463
  }                                                                                                                  // 464
});                                                                                                                  // 465
                                                                                                                     // 466
var _jsKeywords = ["do", "if", "in", "for", "let", "new", "try", "var", "case",                                      // 467
  "else", "enum", "eval", "false", "null", "this", "true", "void", "with",                                           // 468
  "break", "catch", "class", "const", "super", "throw", "while", "yield",                                            // 469
  "delete", "export", "import", "public", "return", "static", "switch",                                              // 470
  "typeof", "default", "extends", "finally", "package", "private", "continue",                                       // 471
  "debugger", "function", "arguments", "interface", "protected", "implements",                                       // 472
  "instanceof"];                                                                                                     // 473
                                                                                                                     // 474
// Assumes the base of path is already escaped properly                                                              // 475
// returns key + base                                                                                                // 476
var _prependPath = function (key, base) {                                                                            // 477
  if ((typeof key) === "number" || key.match(/^[0-9]+$/))                                                            // 478
    key = "[" + key + "]";                                                                                           // 479
  else if (!key.match(/^[a-z_$][0-9a-z_$]*$/i) || _.contains(_jsKeywords, key))                                      // 480
    key = JSON.stringify([key]);                                                                                     // 481
                                                                                                                     // 482
  if (base && base[0] !== "[")                                                                                       // 483
    return key + '.' + base;                                                                                         // 484
  return key + base;                                                                                                 // 485
};                                                                                                                   // 486
                                                                                                                     // 487
                                                                                                                     // 488
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"isPlainObject.js":function(require,exports){

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                   //
// packages/check/isPlainObject.js                                                                                   //
//                                                                                                                   //
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                     //
// Copy of jQuery.isPlainObject for the server side from jQuery v3.1.1.                                              // 1
                                                                                                                     // 2
var class2type = {};                                                                                                 // 3
                                                                                                                     // 4
var toString = class2type.toString;                                                                                  // 5
                                                                                                                     // 6
var hasOwn = class2type.hasOwnProperty;                                                                              // 7
                                                                                                                     // 8
var fnToString = hasOwn.toString;                                                                                    // 9
                                                                                                                     // 10
var ObjectFunctionString = fnToString.call(Object);                                                                  // 11
                                                                                                                     // 12
var getProto = Object.getPrototypeOf;                                                                                // 13
                                                                                                                     // 14
exports.isPlainObject = function( obj ) {                                                                            // 15
  var proto,                                                                                                         // 16
    Ctor;                                                                                                            // 17
                                                                                                                     // 18
  // Detect obvious negatives                                                                                        // 19
  // Use toString instead of jQuery.type to catch host objects                                                       // 20
  if (!obj || toString.call(obj) !== "[object Object]") {                                                            // 21
    return false;                                                                                                    // 22
  }                                                                                                                  // 23
                                                                                                                     // 24
  proto = getProto(obj);                                                                                             // 25
                                                                                                                     // 26
  // Objects with no prototype (e.g., `Object.create( null )`) are plain                                             // 27
  if (!proto) {                                                                                                      // 28
    return true;                                                                                                     // 29
  }                                                                                                                  // 30
                                                                                                                     // 31
  // Objects with prototype are plain iff they were constructed by a global Object function                          // 32
  Ctor = hasOwn.call(proto, "constructor") && proto.constructor;                                                     // 33
  return typeof Ctor === "function" && fnToString.call(Ctor) === ObjectFunctionString;                               // 34
};                                                                                                                   // 35
                                                                                                                     // 36
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}}}}},{"extensions":[".js",".json"]});
var exports = require("./node_modules/meteor/check/match.js");

/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package.check = exports, {
  check: check,
  Match: Match
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var _ = Package.underscore._;
var meteorInstall = Package.modules.meteorInstall;
var Buffer = Package.modules.Buffer;
var process = Package.modules.process;
var Symbol = Package['ecmascript-runtime'].Symbol;
var Map = Package['ecmascript-runtime'].Map;
var Set = Package['ecmascript-runtime'].Set;
var meteorBabelHelpers = Package['babel-runtime'].meteorBabelHelpers;
var Promise = Package.promise.Promise;

/* Package-scope variables */
var Random;

var require = meteorInstall({"node_modules":{"meteor":{"random":{"random.js":function(require){

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                               //
// packages/random/random.js                                                                                     //
//                                                                                                               //
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                 //
// We use cryptographically strong PRNGs (crypto.getRandomBytes() on the server,                                 // 1
// window.crypto.getRandomValues() in the browser) when available. If these                                      // 2
// PRNGs fail, we fall back to the Alea PRNG, which is not cryptographically                                     // 3
// strong, and we seed it with various sources such as the date, Math.random,                                    // 4
// and window size on the client.  When using crypto.getRandomValues(), our                                      // 5
// primitive is hexString(), from which we construct fraction(). When using                                      // 6
// window.crypto.getRandomValues() or alea, the primitive is fraction and we use                                 // 7
// that to construct hex string.                                                                                 // 8
if (Meteor.isServer) var nodeCrypto = Npm.require('crypto'); // see http://baagoe.org/en/wiki/Better_random_numbers_for_javascript
// for a full discussion and Alea implementation.                                                                // 14
                                                                                                                 //
var Alea = function () {                                                                                         // 15
  function Mash() {                                                                                              // 16
    var n = 0xefc8249d;                                                                                          // 17
                                                                                                                 //
    var mash = function (data) {                                                                                 // 19
      data = data.toString();                                                                                    // 20
                                                                                                                 //
      for (var i = 0; i < data.length; i++) {                                                                    // 21
        n += data.charCodeAt(i);                                                                                 // 22
        var h = 0.02519603282416938 * n;                                                                         // 23
        n = h >>> 0;                                                                                             // 24
        h -= n;                                                                                                  // 25
        h *= n;                                                                                                  // 26
        n = h >>> 0;                                                                                             // 27
        h -= n;                                                                                                  // 28
        n += h * 0x100000000; // 2^32                                                                            // 29
      }                                                                                                          // 30
                                                                                                                 //
      return (n >>> 0) * 2.3283064365386963e-10; // 2^-32                                                        // 31
    };                                                                                                           // 32
                                                                                                                 //
    mash.version = 'Mash 0.9';                                                                                   // 34
    return mash;                                                                                                 // 35
  }                                                                                                              // 36
                                                                                                                 //
  return function (args) {                                                                                       // 38
    var s0 = 0;                                                                                                  // 39
    var s1 = 0;                                                                                                  // 40
    var s2 = 0;                                                                                                  // 41
    var c = 1;                                                                                                   // 42
                                                                                                                 //
    if (args.length == 0) {                                                                                      // 44
      args = [+new Date()];                                                                                      // 45
    }                                                                                                            // 46
                                                                                                                 //
    var mash = Mash();                                                                                           // 47
    s0 = mash(' ');                                                                                              // 48
    s1 = mash(' ');                                                                                              // 49
    s2 = mash(' ');                                                                                              // 50
                                                                                                                 //
    for (var i = 0; i < args.length; i++) {                                                                      // 52
      s0 -= mash(args[i]);                                                                                       // 53
                                                                                                                 //
      if (s0 < 0) {                                                                                              // 54
        s0 += 1;                                                                                                 // 55
      }                                                                                                          // 56
                                                                                                                 //
      s1 -= mash(args[i]);                                                                                       // 57
                                                                                                                 //
      if (s1 < 0) {                                                                                              // 58
        s1 += 1;                                                                                                 // 59
      }                                                                                                          // 60
                                                                                                                 //
      s2 -= mash(args[i]);                                                                                       // 61
                                                                                                                 //
      if (s2 < 0) {                                                                                              // 62
        s2 += 1;                                                                                                 // 63
      }                                                                                                          // 64
    }                                                                                                            // 65
                                                                                                                 //
    mash = null;                                                                                                 // 66
                                                                                                                 //
    var random = function () {                                                                                   // 68
      var t = 2091639 * s0 + c * 2.3283064365386963e-10; // 2^-32                                                // 69
                                                                                                                 //
      s0 = s1;                                                                                                   // 70
      s1 = s2;                                                                                                   // 71
      return s2 = t - (c = t | 0);                                                                               // 72
    };                                                                                                           // 73
                                                                                                                 //
    random.uint32 = function () {                                                                                // 74
      return random() * 0x100000000; // 2^32                                                                     // 75
    };                                                                                                           // 76
                                                                                                                 //
    random.fract53 = function () {                                                                               // 77
      return random() + (random() * 0x200000 | 0) * 1.1102230246251565e-16; // 2^-53                             // 78
    };                                                                                                           // 80
                                                                                                                 //
    random.version = 'Alea 0.9';                                                                                 // 81
    random.args = args;                                                                                          // 82
    return random;                                                                                               // 83
  }(Array.prototype.slice.call(arguments));                                                                      // 85
};                                                                                                               // 86
                                                                                                                 //
var UNMISTAKABLE_CHARS = "23456789ABCDEFGHJKLMNPQRSTWXYZabcdefghijkmnopqrstuvwxyz";                              // 88
var BASE64_CHARS = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ" + "0123456789-_"; // `type` is one of `RandomGenerator.Type` as defined below.
//                                                                                                               // 93
// options:                                                                                                      // 94
// - seeds: (required, only for RandomGenerator.Type.ALEA) an array                                              // 95
//   whose items will be `toString`ed and used as the seed to the Alea                                           // 96
//   algorithm                                                                                                   // 97
                                                                                                                 //
var RandomGenerator = function (type, options) {                                                                 // 98
  var self = this;                                                                                               // 99
  self.type = type;                                                                                              // 100
                                                                                                                 //
  if (!RandomGenerator.Type[type]) {                                                                             // 102
    throw new Error("Unknown random generator type: " + type);                                                   // 103
  }                                                                                                              // 104
                                                                                                                 //
  if (type === RandomGenerator.Type.ALEA) {                                                                      // 106
    if (!options.seeds) {                                                                                        // 107
      throw new Error("No seeds were provided for Alea PRNG");                                                   // 108
    }                                                                                                            // 109
                                                                                                                 //
    self.alea = Alea.apply(null, options.seeds);                                                                 // 110
  }                                                                                                              // 111
}; // Types of PRNGs supported by the `RandomGenerator` class                                                    // 112
                                                                                                                 //
                                                                                                                 //
RandomGenerator.Type = {                                                                                         // 115
  // Use Node's built-in `crypto.getRandomBytes` (cryptographically                                              // 116
  // secure but not seedable, runs only on the server). Reverts to                                               // 117
  // `crypto.getPseudoRandomBytes` in the extremely uncommon case that                                           // 118
  // there isn't enough entropy yet                                                                              // 119
  NODE_CRYPTO: "NODE_CRYPTO",                                                                                    // 120
  // Use non-IE browser's built-in `window.crypto.getRandomValues`                                               // 122
  // (cryptographically secure but not seedable, runs only in the                                                // 123
  // browser).                                                                                                   // 124
  BROWSER_CRYPTO: "BROWSER_CRYPTO",                                                                              // 125
  // Use the *fast*, seedaable and not cryptographically secure                                                  // 127
  // Alea algorithm                                                                                              // 128
  ALEA: "ALEA"                                                                                                   // 129
}; /**                                                                                                           // 115
    * @name Random.fraction                                                                                      //
    * @summary Return a number between 0 and 1, like `Math.random`.                                              //
    * @locus Anywhere                                                                                            //
    */                                                                                                           //
                                                                                                                 //
RandomGenerator.prototype.fraction = function () {                                                               // 137
  var self = this;                                                                                               // 138
                                                                                                                 //
  if (self.type === RandomGenerator.Type.ALEA) {                                                                 // 139
    return self.alea();                                                                                          // 140
  } else if (self.type === RandomGenerator.Type.NODE_CRYPTO) {                                                   // 141
    var numerator = parseInt(self.hexString(8), 16);                                                             // 142
    return numerator * 2.3283064365386963e-10; // 2^-32                                                          // 143
  } else if (self.type === RandomGenerator.Type.BROWSER_CRYPTO) {                                                // 144
    var array = new Uint32Array(1);                                                                              // 145
    window.crypto.getRandomValues(array);                                                                        // 146
    return array[0] * 2.3283064365386963e-10; // 2^-32                                                           // 147
  } else {                                                                                                       // 148
    throw new Error('Unknown random generator type: ' + self.type);                                              // 149
  }                                                                                                              // 150
}; /**                                                                                                           // 151
    * @name Random.hexString                                                                                     //
    * @summary Return a random string of `n` hexadecimal digits.                                                 //
    * @locus Anywhere                                                                                            //
    * @param {Number} n Length of the string                                                                     //
    */                                                                                                           //
                                                                                                                 //
RandomGenerator.prototype.hexString = function (digits) {                                                        // 159
  var self = this;                                                                                               // 160
                                                                                                                 //
  if (self.type === RandomGenerator.Type.NODE_CRYPTO) {                                                          // 161
    var numBytes = Math.ceil(digits / 2);                                                                        // 162
    var bytes; // Try to get cryptographically strong randomness. Fall back to                                   // 163
    // non-cryptographically strong if not available.                                                            // 165
                                                                                                                 //
    try {                                                                                                        // 166
      bytes = nodeCrypto.randomBytes(numBytes);                                                                  // 167
    } catch (e) {                                                                                                // 168
      // XXX should re-throw any error except insufficient entropy                                               // 169
      bytes = nodeCrypto.pseudoRandomBytes(numBytes);                                                            // 170
    }                                                                                                            // 171
                                                                                                                 //
    var result = bytes.toString("hex"); // If the number of digits is odd, we'll have generated an extra 4 bits  // 172
    // of randomness, so we need to trim the last digit.                                                         // 174
                                                                                                                 //
    return result.substring(0, digits);                                                                          // 175
  } else {                                                                                                       // 176
    return this._randomString(digits, "0123456789abcdef");                                                       // 177
  }                                                                                                              // 178
};                                                                                                               // 179
                                                                                                                 //
RandomGenerator.prototype._randomString = function (charsCount, alphabet) {                                      // 181
  var self = this;                                                                                               // 183
  var digits = [];                                                                                               // 184
                                                                                                                 //
  for (var i = 0; i < charsCount; i++) {                                                                         // 185
    digits[i] = self.choice(alphabet);                                                                           // 186
  }                                                                                                              // 187
                                                                                                                 //
  return digits.join("");                                                                                        // 188
}; /**                                                                                                           // 189
    * @name Random.id                                                                                            //
    * @summary Return a unique identifier, such as `"Jjwjg6gouWLXhMGKW"`, that is                                //
    * likely to be unique in the whole world.                                                                    //
    * @locus Anywhere                                                                                            //
    * @param {Number} [n] Optional length of the identifier in characters                                        //
    *   (defaults to 17)                                                                                         //
    */                                                                                                           //
                                                                                                                 //
RandomGenerator.prototype.id = function (charsCount) {                                                           // 199
  var self = this; // 17 characters is around 96 bits of entropy, which is the amount of                         // 200
  // state in the Alea PRNG.                                                                                     // 202
                                                                                                                 //
  if (charsCount === undefined) charsCount = 17;                                                                 // 203
  return self._randomString(charsCount, UNMISTAKABLE_CHARS);                                                     // 206
}; /**                                                                                                           // 207
    * @name Random.secret                                                                                        //
    * @summary Return a random string of printable characters with 6 bits of                                     //
    * entropy per character. Use `Random.secret` for security-critical secrets                                   //
    * that are intended for machine, rather than human, consumption.                                             //
    * @locus Anywhere                                                                                            //
    * @param {Number} [n] Optional length of the secret string (defaults to 43                                   //
    *   characters, or 256 bits of entropy)                                                                      //
    */                                                                                                           //
                                                                                                                 //
RandomGenerator.prototype.secret = function (charsCount) {                                                       // 218
  var self = this; // Default to 256 bits of entropy, or 43 characters at 6 bits per                             // 219
  // character.                                                                                                  // 221
                                                                                                                 //
  if (charsCount === undefined) charsCount = 43;                                                                 // 222
  return self._randomString(charsCount, BASE64_CHARS);                                                           // 224
}; /**                                                                                                           // 225
    * @name Random.choice                                                                                        //
    * @summary Return a random element of the given array or string.                                             //
    * @locus Anywhere                                                                                            //
    * @param {Array|String} arrayOrString Array or string to choose from                                         //
    */                                                                                                           //
                                                                                                                 //
RandomGenerator.prototype.choice = function (arrayOrString) {                                                    // 233
  var index = Math.floor(this.fraction() * arrayOrString.length);                                                // 234
  if (typeof arrayOrString === "string") return arrayOrString.substr(index, 1);else return arrayOrString[index];
}; // instantiate RNG.  Heuristically collect entropy from various sources when a                                // 239
// cryptographic PRNG isn't available.                                                                           // 242
// client sources                                                                                                // 244
                                                                                                                 //
                                                                                                                 //
var height = typeof window !== 'undefined' && window.innerHeight || typeof document !== 'undefined' && document.documentElement && document.documentElement.clientHeight || typeof document !== 'undefined' && document.body && document.body.clientHeight || 1;
var width = typeof window !== 'undefined' && window.innerWidth || typeof document !== 'undefined' && document.documentElement && document.documentElement.clientWidth || typeof document !== 'undefined' && document.body && document.body.clientWidth || 1;
var agent = typeof navigator !== 'undefined' && navigator.userAgent || "";                                       // 263
                                                                                                                 //
function createAleaGeneratorWithGeneratedSeed() {                                                                // 265
  return new RandomGenerator(RandomGenerator.Type.ALEA, {                                                        // 266
    seeds: [new Date(), height, width, agent, Math.random()]                                                     // 268
  });                                                                                                            // 268
}                                                                                                                // 269
                                                                                                                 //
;                                                                                                                // 269
                                                                                                                 //
if (Meteor.isServer) {                                                                                           // 271
  Random = new RandomGenerator(RandomGenerator.Type.NODE_CRYPTO);                                                // 272
} else {                                                                                                         // 273
  if (typeof window !== "undefined" && window.crypto && window.crypto.getRandomValues) {                         // 274
    Random = new RandomGenerator(RandomGenerator.Type.BROWSER_CRYPTO);                                           // 276
  } else {                                                                                                       // 277
    // On IE 10 and below, there's no browser crypto API                                                         // 278
    // available. Fall back to Alea                                                                              // 279
    //                                                                                                           // 280
    // XXX looks like at the moment, we use Alea in IE 11 as well,                                               // 281
    // which has `window.msCrypto` instead of `window.crypto`.                                                   // 282
    Random = createAleaGeneratorWithGeneratedSeed();                                                             // 283
  }                                                                                                              // 284
} // Create a non-cryptographically secure PRNG with a given seed (using                                         // 285
// the Alea algorithm)                                                                                           // 288
                                                                                                                 //
                                                                                                                 //
Random.createWithSeeds = function () {                                                                           // 289
  for (var _len = arguments.length, seeds = Array(_len), _key = 0; _key < _len; _key++) {                        // 289
    seeds[_key] = arguments[_key];                                                                               // 289
  }                                                                                                              // 289
                                                                                                                 //
  if (seeds.length === 0) {                                                                                      // 290
    throw new Error("No seeds were provided");                                                                   // 291
  }                                                                                                              // 292
                                                                                                                 //
  return new RandomGenerator(RandomGenerator.Type.ALEA, {                                                        // 293
    seeds: seeds                                                                                                 // 293
  });                                                                                                            // 293
}; // Used like `Random`, but much faster and not cryptographically                                              // 294
// secure                                                                                                        // 297
                                                                                                                 //
                                                                                                                 //
Random.insecure = createAleaGeneratorWithGeneratedSeed();                                                        // 298
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"deprecated.js":function(){

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                               //
// packages/random/deprecated.js                                                                                 //
//                                                                                                               //
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                 //
// Before this package existed, we used to use this Meteor.uuid()                                                // 1
// implementing the RFC 4122 v4 UUID. It is no longer documented                                                 // 2
// and will go away.                                                                                             // 3
// XXX COMPAT WITH 0.5.6                                                                                         // 4
Meteor.uuid = function () {                                                                                      // 5
  var HEX_DIGITS = "0123456789abcdef";                                                                           // 6
  var s = [];                                                                                                    // 7
                                                                                                                 //
  for (var i = 0; i < 36; i++) {                                                                                 // 8
    s[i] = Random.choice(HEX_DIGITS);                                                                            // 9
  }                                                                                                              // 10
                                                                                                                 //
  s[14] = "4";                                                                                                   // 11
  s[19] = HEX_DIGITS.substr(parseInt(s[19], 16) & 0x3 | 0x8, 1);                                                 // 12
  s[8] = s[13] = s[18] = s[23] = "-";                                                                            // 13
  var uuid = s.join("");                                                                                         // 15
  return uuid;                                                                                                   // 16
};                                                                                                               // 17
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}}}}},{"extensions":[".js",".json"]});
require("./node_modules/meteor/random/random.js");
require("./node_modules/meteor/random/deprecated.js");

/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package.random = {}, {
  Random: Random
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;

/* Package-scope variables */
var Tracker, Deps;

(function(){

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                    //
// packages/tracker/tracker.js                                                                                        //
//                                                                                                                    //
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                      //
/////////////////////////////////////////////////////                                                                 // 1
// Package docs at http://docs.meteor.com/#tracker //                                                                 // 2
/////////////////////////////////////////////////////                                                                 // 3
                                                                                                                      // 4
/**                                                                                                                   // 5
 * @namespace Tracker                                                                                                 // 6
 * @summary The namespace for Tracker-related methods.                                                                // 7
 */                                                                                                                   // 8
Tracker = {};                                                                                                         // 9
                                                                                                                      // 10
// http://docs.meteor.com/#tracker_active                                                                             // 11
                                                                                                                      // 12
/**                                                                                                                   // 13
 * @summary True if there is a current computation, meaning that dependencies on reactive data sources will be tracked and potentially cause the current computation to be rerun.
 * @locus Client                                                                                                      // 15
 * @type {Boolean}                                                                                                    // 16
 */                                                                                                                   // 17
Tracker.active = false;                                                                                               // 18
                                                                                                                      // 19
// http://docs.meteor.com/#tracker_currentcomputation                                                                 // 20
                                                                                                                      // 21
/**                                                                                                                   // 22
 * @summary The current computation, or `null` if there isn't one.  The current computation is the [`Tracker.Computation`](#tracker_computation) object created by the innermost active call to `Tracker.autorun`, and it's the computation that gains dependencies when reactive data sources are accessed.
 * @locus Client                                                                                                      // 24
 * @type {Tracker.Computation}                                                                                        // 25
 */                                                                                                                   // 26
Tracker.currentComputation = null;                                                                                    // 27
                                                                                                                      // 28
var setCurrentComputation = function (c) {                                                                            // 29
  Tracker.currentComputation = c;                                                                                     // 30
  Tracker.active = !! c;                                                                                              // 31
};                                                                                                                    // 32
                                                                                                                      // 33
var _debugFunc = function () {                                                                                        // 34
  // We want this code to work without Meteor, and also without                                                       // 35
  // "console" (which is technically non-standard and may be missing                                                  // 36
  // on some browser we come across, like it was on IE 7).                                                            // 37
  //                                                                                                                  // 38
  // Lazy evaluation because `Meteor` does not exist right away.(??)                                                  // 39
  return (typeof Meteor !== "undefined" ? Meteor._debug :                                                             // 40
          ((typeof console !== "undefined") && console.error ?                                                        // 41
           function () { console.error.apply(console, arguments); } :                                                 // 42
           function () {}));                                                                                          // 43
};                                                                                                                    // 44
                                                                                                                      // 45
var _maybeSuppressMoreLogs = function (messagesLength) {                                                              // 46
  // Sometimes when running tests, we intentionally suppress logs on expected                                         // 47
  // printed errors. Since the current implementation of _throwOrLog can log                                          // 48
  // multiple separate log messages, suppress all of them if at least one suppress                                    // 49
  // is expected as we still want them to count as one.                                                               // 50
  if (typeof Meteor !== "undefined") {                                                                                // 51
    if (Meteor._suppressed_log_expected()) {                                                                          // 52
      Meteor._suppress_log(messagesLength - 1);                                                                       // 53
    }                                                                                                                 // 54
  }                                                                                                                   // 55
};                                                                                                                    // 56
                                                                                                                      // 57
var _throwOrLog = function (from, e) {                                                                                // 58
  if (throwFirstError) {                                                                                              // 59
    throw e;                                                                                                          // 60
  } else {                                                                                                            // 61
    var printArgs = ["Exception from Tracker " + from + " function:"];                                                // 62
    if (e.stack && e.message && e.name) {                                                                             // 63
      var idx = e.stack.indexOf(e.message);                                                                           // 64
      if (idx < 0 || idx > e.name.length + 2) { // check for "Error: "                                                // 65
        // message is not part of the stack                                                                           // 66
        var message = e.name + ": " + e.message;                                                                      // 67
        printArgs.push(message);                                                                                      // 68
      }                                                                                                               // 69
    }                                                                                                                 // 70
    printArgs.push(e.stack);                                                                                          // 71
    _maybeSuppressMoreLogs(printArgs.length);                                                                         // 72
                                                                                                                      // 73
    for (var i = 0; i < printArgs.length; i++) {                                                                      // 74
      _debugFunc()(printArgs[i]);                                                                                     // 75
    }                                                                                                                 // 76
  }                                                                                                                   // 77
};                                                                                                                    // 78
                                                                                                                      // 79
// Takes a function `f`, and wraps it in a `Meteor._noYieldsAllowed`                                                  // 80
// block if we are running on the server. On the client, returns the                                                  // 81
// original function (since `Meteor._noYieldsAllowed` is a                                                            // 82
// no-op). This has the benefit of not adding an unnecessary stack                                                    // 83
// frame on the client.                                                                                               // 84
var withNoYieldsAllowed = function (f) {                                                                              // 85
  if ((typeof Meteor === 'undefined') || Meteor.isClient) {                                                           // 86
    return f;                                                                                                         // 87
  } else {                                                                                                            // 88
    return function () {                                                                                              // 89
      var args = arguments;                                                                                           // 90
      Meteor._noYieldsAllowed(function () {                                                                           // 91
        f.apply(null, args);                                                                                          // 92
      });                                                                                                             // 93
    };                                                                                                                // 94
  }                                                                                                                   // 95
};                                                                                                                    // 96
                                                                                                                      // 97
var nextId = 1;                                                                                                       // 98
// computations whose callbacks we should call at flush time                                                          // 99
var pendingComputations = [];                                                                                         // 100
// `true` if a Tracker.flush is scheduled, or if we are in Tracker.flush now                                          // 101
var willFlush = false;                                                                                                // 102
// `true` if we are in Tracker.flush now                                                                              // 103
var inFlush = false;                                                                                                  // 104
// `true` if we are computing a computation now, either first time                                                    // 105
// or recompute.  This matches Tracker.active unless we are inside                                                    // 106
// Tracker.nonreactive, which nullfies currentComputation even though                                                 // 107
// an enclosing computation may still be running.                                                                     // 108
var inCompute = false;                                                                                                // 109
// `true` if the `_throwFirstError` option was passed in to the call                                                  // 110
// to Tracker.flush that we are in. When set, throw rather than log the                                               // 111
// first error encountered while flushing. Before throwing the error,                                                 // 112
// finish flushing (from a finally block), logging any subsequent                                                     // 113
// errors.                                                                                                            // 114
var throwFirstError = false;                                                                                          // 115
                                                                                                                      // 116
var afterFlushCallbacks = [];                                                                                         // 117
                                                                                                                      // 118
var requireFlush = function () {                                                                                      // 119
  if (! willFlush) {                                                                                                  // 120
    // We want this code to work without Meteor, see debugFunc above                                                  // 121
    if (typeof Meteor !== "undefined")                                                                                // 122
      Meteor._setImmediate(Tracker._runFlush);                                                                        // 123
    else                                                                                                              // 124
      setTimeout(Tracker._runFlush, 0);                                                                               // 125
    willFlush = true;                                                                                                 // 126
  }                                                                                                                   // 127
};                                                                                                                    // 128
                                                                                                                      // 129
// Tracker.Computation constructor is visible but private                                                             // 130
// (throws an error if you try to call it)                                                                            // 131
var constructingComputation = false;                                                                                  // 132
                                                                                                                      // 133
//                                                                                                                    // 134
// http://docs.meteor.com/#tracker_computation                                                                        // 135
                                                                                                                      // 136
/**                                                                                                                   // 137
 * @summary A Computation object represents code that is repeatedly rerun                                             // 138
 * in response to                                                                                                     // 139
 * reactive data changes. Computations don't have return values; they just                                            // 140
 * perform actions, such as rerendering a template on the screen. Computations                                        // 141
 * are created using Tracker.autorun. Use stop to prevent further rerunning of a                                      // 142
 * computation.                                                                                                       // 143
 * @instancename computation                                                                                          // 144
 */                                                                                                                   // 145
Tracker.Computation = function (f, parent, onError) {                                                                 // 146
  if (! constructingComputation)                                                                                      // 147
    throw new Error(                                                                                                  // 148
      "Tracker.Computation constructor is private; use Tracker.autorun");                                             // 149
  constructingComputation = false;                                                                                    // 150
                                                                                                                      // 151
  var self = this;                                                                                                    // 152
                                                                                                                      // 153
  // http://docs.meteor.com/#computation_stopped                                                                      // 154
                                                                                                                      // 155
  /**                                                                                                                 // 156
   * @summary True if this computation has been stopped.                                                              // 157
   * @locus Client                                                                                                    // 158
   * @memberOf Tracker.Computation                                                                                    // 159
   * @instance                                                                                                        // 160
   * @name  stopped                                                                                                   // 161
   */                                                                                                                 // 162
  self.stopped = false;                                                                                               // 163
                                                                                                                      // 164
  // http://docs.meteor.com/#computation_invalidated                                                                  // 165
                                                                                                                      // 166
  /**                                                                                                                 // 167
   * @summary True if this computation has been invalidated (and not yet rerun), or if it has been stopped.           // 168
   * @locus Client                                                                                                    // 169
   * @memberOf Tracker.Computation                                                                                    // 170
   * @instance                                                                                                        // 171
   * @name  invalidated                                                                                               // 172
   * @type {Boolean}                                                                                                  // 173
   */                                                                                                                 // 174
  self.invalidated = false;                                                                                           // 175
                                                                                                                      // 176
  // http://docs.meteor.com/#computation_firstrun                                                                     // 177
                                                                                                                      // 178
  /**                                                                                                                 // 179
   * @summary True during the initial run of the computation at the time `Tracker.autorun` is called, and false on subsequent reruns and at other times.
   * @locus Client                                                                                                    // 181
   * @memberOf Tracker.Computation                                                                                    // 182
   * @instance                                                                                                        // 183
   * @name  firstRun                                                                                                  // 184
   * @type {Boolean}                                                                                                  // 185
   */                                                                                                                 // 186
  self.firstRun = true;                                                                                               // 187
                                                                                                                      // 188
  self._id = nextId++;                                                                                                // 189
  self._onInvalidateCallbacks = [];                                                                                   // 190
  self._onStopCallbacks = [];                                                                                         // 191
  // the plan is at some point to use the parent relation                                                             // 192
  // to constrain the order that computations are processed                                                           // 193
  self._parent = parent;                                                                                              // 194
  self._func = f;                                                                                                     // 195
  self._onError = onError;                                                                                            // 196
  self._recomputing = false;                                                                                          // 197
                                                                                                                      // 198
  var errored = true;                                                                                                 // 199
  try {                                                                                                               // 200
    self._compute();                                                                                                  // 201
    errored = false;                                                                                                  // 202
  } finally {                                                                                                         // 203
    self.firstRun = false;                                                                                            // 204
    if (errored)                                                                                                      // 205
      self.stop();                                                                                                    // 206
  }                                                                                                                   // 207
};                                                                                                                    // 208
                                                                                                                      // 209
// http://docs.meteor.com/#computation_oninvalidate                                                                   // 210
                                                                                                                      // 211
/**                                                                                                                   // 212
 * @summary Registers `callback` to run when this computation is next invalidated, or runs it immediately if the computation is already invalidated.  The callback is run exactly once and not upon future invalidations unless `onInvalidate` is called again after the computation becomes valid again.
 * @locus Client                                                                                                      // 214
 * @param {Function} callback Function to be called on invalidation. Receives one argument, the computation that was invalidated.
 */                                                                                                                   // 216
Tracker.Computation.prototype.onInvalidate = function (f) {                                                           // 217
  var self = this;                                                                                                    // 218
                                                                                                                      // 219
  if (typeof f !== 'function')                                                                                        // 220
    throw new Error("onInvalidate requires a function");                                                              // 221
                                                                                                                      // 222
  if (self.invalidated) {                                                                                             // 223
    Tracker.nonreactive(function () {                                                                                 // 224
      withNoYieldsAllowed(f)(self);                                                                                   // 225
    });                                                                                                               // 226
  } else {                                                                                                            // 227
    self._onInvalidateCallbacks.push(f);                                                                              // 228
  }                                                                                                                   // 229
};                                                                                                                    // 230
                                                                                                                      // 231
/**                                                                                                                   // 232
 * @summary Registers `callback` to run when this computation is stopped, or runs it immediately if the computation is already stopped.  The callback is run after any `onInvalidate` callbacks.
 * @locus Client                                                                                                      // 234
 * @param {Function} callback Function to be called on stop. Receives one argument, the computation that was stopped.
 */                                                                                                                   // 236
Tracker.Computation.prototype.onStop = function (f) {                                                                 // 237
  var self = this;                                                                                                    // 238
                                                                                                                      // 239
  if (typeof f !== 'function')                                                                                        // 240
    throw new Error("onStop requires a function");                                                                    // 241
                                                                                                                      // 242
  if (self.stopped) {                                                                                                 // 243
    Tracker.nonreactive(function () {                                                                                 // 244
      withNoYieldsAllowed(f)(self);                                                                                   // 245
    });                                                                                                               // 246
  } else {                                                                                                            // 247
    self._onStopCallbacks.push(f);                                                                                    // 248
  }                                                                                                                   // 249
};                                                                                                                    // 250
                                                                                                                      // 251
// http://docs.meteor.com/#computation_invalidate                                                                     // 252
                                                                                                                      // 253
/**                                                                                                                   // 254
 * @summary Invalidates this computation so that it will be rerun.                                                    // 255
 * @locus Client                                                                                                      // 256
 */                                                                                                                   // 257
Tracker.Computation.prototype.invalidate = function () {                                                              // 258
  var self = this;                                                                                                    // 259
  if (! self.invalidated) {                                                                                           // 260
    // if we're currently in _recompute(), don't enqueue                                                              // 261
    // ourselves, since we'll rerun immediately anyway.                                                               // 262
    if (! self._recomputing && ! self.stopped) {                                                                      // 263
      requireFlush();                                                                                                 // 264
      pendingComputations.push(this);                                                                                 // 265
    }                                                                                                                 // 266
                                                                                                                      // 267
    self.invalidated = true;                                                                                          // 268
                                                                                                                      // 269
    // callbacks can't add callbacks, because                                                                         // 270
    // self.invalidated === true.                                                                                     // 271
    for(var i = 0, f; f = self._onInvalidateCallbacks[i]; i++) {                                                      // 272
      Tracker.nonreactive(function () {                                                                               // 273
        withNoYieldsAllowed(f)(self);                                                                                 // 274
      });                                                                                                             // 275
    }                                                                                                                 // 276
    self._onInvalidateCallbacks = [];                                                                                 // 277
  }                                                                                                                   // 278
};                                                                                                                    // 279
                                                                                                                      // 280
// http://docs.meteor.com/#computation_stop                                                                           // 281
                                                                                                                      // 282
/**                                                                                                                   // 283
 * @summary Prevents this computation from rerunning.                                                                 // 284
 * @locus Client                                                                                                      // 285
 */                                                                                                                   // 286
Tracker.Computation.prototype.stop = function () {                                                                    // 287
  var self = this;                                                                                                    // 288
                                                                                                                      // 289
  if (! self.stopped) {                                                                                               // 290
    self.stopped = true;                                                                                              // 291
    self.invalidate();                                                                                                // 292
    for(var i = 0, f; f = self._onStopCallbacks[i]; i++) {                                                            // 293
      Tracker.nonreactive(function () {                                                                               // 294
        withNoYieldsAllowed(f)(self);                                                                                 // 295
      });                                                                                                             // 296
    }                                                                                                                 // 297
    self._onStopCallbacks = [];                                                                                       // 298
  }                                                                                                                   // 299
};                                                                                                                    // 300
                                                                                                                      // 301
Tracker.Computation.prototype._compute = function () {                                                                // 302
  var self = this;                                                                                                    // 303
  self.invalidated = false;                                                                                           // 304
                                                                                                                      // 305
  var previous = Tracker.currentComputation;                                                                          // 306
  setCurrentComputation(self);                                                                                        // 307
  var previousInCompute = inCompute;                                                                                  // 308
  inCompute = true;                                                                                                   // 309
  try {                                                                                                               // 310
    withNoYieldsAllowed(self._func)(self);                                                                            // 311
  } finally {                                                                                                         // 312
    setCurrentComputation(previous);                                                                                  // 313
    inCompute = previousInCompute;                                                                                    // 314
  }                                                                                                                   // 315
};                                                                                                                    // 316
                                                                                                                      // 317
Tracker.Computation.prototype._needsRecompute = function () {                                                         // 318
  var self = this;                                                                                                    // 319
  return self.invalidated && ! self.stopped;                                                                          // 320
};                                                                                                                    // 321
                                                                                                                      // 322
Tracker.Computation.prototype._recompute = function () {                                                              // 323
  var self = this;                                                                                                    // 324
                                                                                                                      // 325
  self._recomputing = true;                                                                                           // 326
  try {                                                                                                               // 327
    if (self._needsRecompute()) {                                                                                     // 328
      try {                                                                                                           // 329
        self._compute();                                                                                              // 330
      } catch (e) {                                                                                                   // 331
        if (self._onError) {                                                                                          // 332
          self._onError(e);                                                                                           // 333
        } else {                                                                                                      // 334
          _throwOrLog("recompute", e);                                                                                // 335
        }                                                                                                             // 336
      }                                                                                                               // 337
    }                                                                                                                 // 338
  } finally {                                                                                                         // 339
    self._recomputing = false;                                                                                        // 340
  }                                                                                                                   // 341
};                                                                                                                    // 342
                                                                                                                      // 343
/**                                                                                                                   // 344
 * @summary Process the reactive updates for this computation immediately                                             // 345
 * and ensure that the computation is rerun. The computation is rerun only                                            // 346
 * if it is invalidated.                                                                                              // 347
 * @locus Client                                                                                                      // 348
 */                                                                                                                   // 349
Tracker.Computation.prototype.flush = function () {                                                                   // 350
  var self = this;                                                                                                    // 351
                                                                                                                      // 352
  if (self._recomputing)                                                                                              // 353
    return;                                                                                                           // 354
                                                                                                                      // 355
  self._recompute();                                                                                                  // 356
};                                                                                                                    // 357
                                                                                                                      // 358
/**                                                                                                                   // 359
 * @summary Causes the function inside this computation to run and                                                    // 360
 * synchronously process all reactive updtes.                                                                         // 361
 * @locus Client                                                                                                      // 362
 */                                                                                                                   // 363
Tracker.Computation.prototype.run = function () {                                                                     // 364
  var self = this;                                                                                                    // 365
  self.invalidate();                                                                                                  // 366
  self.flush();                                                                                                       // 367
};                                                                                                                    // 368
                                                                                                                      // 369
//                                                                                                                    // 370
// http://docs.meteor.com/#tracker_dependency                                                                         // 371
                                                                                                                      // 372
/**                                                                                                                   // 373
 * @summary A Dependency represents an atomic unit of reactive data that a                                            // 374
 * computation might depend on. Reactive data sources such as Session or                                              // 375
 * Minimongo internally create different Dependency objects for different                                             // 376
 * pieces of data, each of which may be depended on by multiple computations.                                         // 377
 * When the data changes, the computations are invalidated.                                                           // 378
 * @class                                                                                                             // 379
 * @instanceName dependency                                                                                           // 380
 */                                                                                                                   // 381
Tracker.Dependency = function () {                                                                                    // 382
  this._dependentsById = {};                                                                                          // 383
};                                                                                                                    // 384
                                                                                                                      // 385
// http://docs.meteor.com/#dependency_depend                                                                          // 386
//                                                                                                                    // 387
// Adds `computation` to this set if it is not already                                                                // 388
// present.  Returns true if `computation` is a new member of the set.                                                // 389
// If no argument, defaults to currentComputation, or does nothing                                                    // 390
// if there is no currentComputation.                                                                                 // 391
                                                                                                                      // 392
/**                                                                                                                   // 393
 * @summary Declares that the current computation (or `fromComputation` if given) depends on `dependency`.  The computation will be invalidated the next time `dependency` changes.
                                                                                                                      // 395
If there is no current computation and `depend()` is called with no arguments, it does nothing and returns false.     // 396
                                                                                                                      // 397
Returns true if the computation is a new dependent of `dependency` rather than an existing one.                       // 398
 * @locus Client                                                                                                      // 399
 * @param {Tracker.Computation} [fromComputation] An optional computation declared to depend on `dependency` instead of the current computation.
 * @returns {Boolean}                                                                                                 // 401
 */                                                                                                                   // 402
Tracker.Dependency.prototype.depend = function (computation) {                                                        // 403
  if (! computation) {                                                                                                // 404
    if (! Tracker.active)                                                                                             // 405
      return false;                                                                                                   // 406
                                                                                                                      // 407
    computation = Tracker.currentComputation;                                                                         // 408
  }                                                                                                                   // 409
  var self = this;                                                                                                    // 410
  var id = computation._id;                                                                                           // 411
  if (! (id in self._dependentsById)) {                                                                               // 412
    self._dependentsById[id] = computation;                                                                           // 413
    computation.onInvalidate(function () {                                                                            // 414
      delete self._dependentsById[id];                                                                                // 415
    });                                                                                                               // 416
    return true;                                                                                                      // 417
  }                                                                                                                   // 418
  return false;                                                                                                       // 419
};                                                                                                                    // 420
                                                                                                                      // 421
// http://docs.meteor.com/#dependency_changed                                                                         // 422
                                                                                                                      // 423
/**                                                                                                                   // 424
 * @summary Invalidate all dependent computations immediately and remove them as dependents.                          // 425
 * @locus Client                                                                                                      // 426
 */                                                                                                                   // 427
Tracker.Dependency.prototype.changed = function () {                                                                  // 428
  var self = this;                                                                                                    // 429
  for (var id in self._dependentsById)                                                                                // 430
    self._dependentsById[id].invalidate();                                                                            // 431
};                                                                                                                    // 432
                                                                                                                      // 433
// http://docs.meteor.com/#dependency_hasdependents                                                                   // 434
                                                                                                                      // 435
/**                                                                                                                   // 436
 * @summary True if this Dependency has one or more dependent Computations, which would be invalidated if this Dependency were to change.
 * @locus Client                                                                                                      // 438
 * @returns {Boolean}                                                                                                 // 439
 */                                                                                                                   // 440
Tracker.Dependency.prototype.hasDependents = function () {                                                            // 441
  var self = this;                                                                                                    // 442
  for(var id in self._dependentsById)                                                                                 // 443
    return true;                                                                                                      // 444
  return false;                                                                                                       // 445
};                                                                                                                    // 446
                                                                                                                      // 447
// http://docs.meteor.com/#tracker_flush                                                                              // 448
                                                                                                                      // 449
/**                                                                                                                   // 450
 * @summary Process all reactive updates immediately and ensure that all invalidated computations are rerun.          // 451
 * @locus Client                                                                                                      // 452
 */                                                                                                                   // 453
Tracker.flush = function (options) {                                                                                  // 454
  Tracker._runFlush({ finishSynchronously: true,                                                                      // 455
                      throwFirstError: options && options._throwFirstError });                                        // 456
};                                                                                                                    // 457
                                                                                                                      // 458
/**                                                                                                                   // 459
 * @summary True if we are computing a computation now, either first time or recompute.  This matches Tracker.active unless we are inside Tracker.nonreactive, which nullfies currentComputation even though an enclosing computation may still be running.
 * @locus Client                                                                                                      // 461
 * @returns {Boolean}                                                                                                 // 462
 */                                                                                                                   // 463
Tracker.inFlush = function () {                                                                                       // 464
  return inFlush;                                                                                                     // 465
}                                                                                                                     // 466
                                                                                                                      // 467
// Run all pending computations and afterFlush callbacks.  If we were not called                                      // 468
// directly via Tracker.flush, this may return before they're all done to allow                                       // 469
// the event loop to run a little before continuing.                                                                  // 470
Tracker._runFlush = function (options) {                                                                              // 471
  // XXX What part of the comment below is still true? (We no longer                                                  // 472
  // have Spark)                                                                                                      // 473
  //                                                                                                                  // 474
  // Nested flush could plausibly happen if, say, a flush causes                                                      // 475
  // DOM mutation, which causes a "blur" event, which runs an                                                         // 476
  // app event handler that calls Tracker.flush.  At the moment                                                       // 477
  // Spark blocks event handlers during DOM mutation anyway,                                                          // 478
  // because the LiveRange tree isn't valid.  And we don't have                                                       // 479
  // any useful notion of a nested flush.                                                                             // 480
  //                                                                                                                  // 481
  // https://app.asana.com/0/159908330244/385138233856                                                                // 482
  if (Tracker.inFlush())                                                                                              // 483
    throw new Error("Can't call Tracker.flush while flushing");                                                       // 484
                                                                                                                      // 485
  if (inCompute)                                                                                                      // 486
    throw new Error("Can't flush inside Tracker.autorun");                                                            // 487
                                                                                                                      // 488
  options = options || {};                                                                                            // 489
                                                                                                                      // 490
  inFlush = true;                                                                                                     // 491
  willFlush = true;                                                                                                   // 492
  throwFirstError = !! options.throwFirstError;                                                                       // 493
                                                                                                                      // 494
  var recomputedCount = 0;                                                                                            // 495
  var finishedTry = false;                                                                                            // 496
  try {                                                                                                               // 497
    while (pendingComputations.length ||                                                                              // 498
           afterFlushCallbacks.length) {                                                                              // 499
                                                                                                                      // 500
      // recompute all pending computations                                                                           // 501
      while (pendingComputations.length) {                                                                            // 502
        var comp = pendingComputations.shift();                                                                       // 503
        comp._recompute();                                                                                            // 504
        if (comp._needsRecompute()) {                                                                                 // 505
          pendingComputations.unshift(comp);                                                                          // 506
        }                                                                                                             // 507
                                                                                                                      // 508
        if (! options.finishSynchronously && ++recomputedCount > 1000) {                                              // 509
          finishedTry = true;                                                                                         // 510
          return;                                                                                                     // 511
        }                                                                                                             // 512
      }                                                                                                               // 513
                                                                                                                      // 514
      if (afterFlushCallbacks.length) {                                                                               // 515
        // call one afterFlush callback, which may                                                                    // 516
        // invalidate more computations                                                                               // 517
        var func = afterFlushCallbacks.shift();                                                                       // 518
        try {                                                                                                         // 519
          func();                                                                                                     // 520
        } catch (e) {                                                                                                 // 521
          _throwOrLog("afterFlush", e);                                                                               // 522
        }                                                                                                             // 523
      }                                                                                                               // 524
    }                                                                                                                 // 525
    finishedTry = true;                                                                                               // 526
  } finally {                                                                                                         // 527
    if (! finishedTry) {                                                                                              // 528
      // we're erroring due to throwFirstError being true.                                                            // 529
      inFlush = false; // needed before calling `Tracker.flush()` again                                               // 530
      // finish flushing                                                                                              // 531
      Tracker._runFlush({                                                                                             // 532
        finishSynchronously: options.finishSynchronously,                                                             // 533
        throwFirstError: false                                                                                        // 534
      });                                                                                                             // 535
    }                                                                                                                 // 536
    willFlush = false;                                                                                                // 537
    inFlush = false;                                                                                                  // 538
    if (pendingComputations.length || afterFlushCallbacks.length) {                                                   // 539
      // We're yielding because we ran a bunch of computations and we aren't                                          // 540
      // required to finish synchronously, so we'd like to give the event loop a                                      // 541
      // chance. We should flush again soon.                                                                          // 542
      if (options.finishSynchronously) {                                                                              // 543
        throw new Error("still have more to do?");  // shouldn't happen                                               // 544
      }                                                                                                               // 545
      setTimeout(requireFlush, 10);                                                                                   // 546
    }                                                                                                                 // 547
  }                                                                                                                   // 548
};                                                                                                                    // 549
                                                                                                                      // 550
// http://docs.meteor.com/#tracker_autorun                                                                            // 551
//                                                                                                                    // 552
// Run f(). Record its dependencies. Rerun it whenever the                                                            // 553
// dependencies change.                                                                                               // 554
//                                                                                                                    // 555
// Returns a new Computation, which is also passed to f.                                                              // 556
//                                                                                                                    // 557
// Links the computation to the current computation                                                                   // 558
// so that it is stopped if the current computation is invalidated.                                                   // 559
                                                                                                                      // 560
/**                                                                                                                   // 561
 * @callback Tracker.ComputationFunction                                                                              // 562
 * @param {Tracker.Computation}                                                                                       // 563
 */                                                                                                                   // 564
/**                                                                                                                   // 565
 * @summary Run a function now and rerun it later whenever its dependencies                                           // 566
 * change. Returns a Computation object that can be used to stop or observe the                                       // 567
 * rerunning.                                                                                                         // 568
 * @locus Client                                                                                                      // 569
 * @param {Tracker.ComputationFunction} runFunc The function to run. It receives                                      // 570
 * one argument: the Computation object that will be returned.                                                        // 571
 * @param {Object} [options]                                                                                          // 572
 * @param {Function} options.onError Optional. The function to run when an error                                      // 573
 * happens in the Computation. The only argument it receives is the Error                                             // 574
 * thrown. Defaults to the error being logged to the console.                                                         // 575
 * @returns {Tracker.Computation}                                                                                     // 576
 */                                                                                                                   // 577
Tracker.autorun = function (f, options) {                                                                             // 578
  if (typeof f !== 'function')                                                                                        // 579
    throw new Error('Tracker.autorun requires a function argument');                                                  // 580
                                                                                                                      // 581
  options = options || {};                                                                                            // 582
                                                                                                                      // 583
  constructingComputation = true;                                                                                     // 584
  var c = new Tracker.Computation(                                                                                    // 585
    f, Tracker.currentComputation, options.onError);                                                                  // 586
                                                                                                                      // 587
  if (Tracker.active)                                                                                                 // 588
    Tracker.onInvalidate(function () {                                                                                // 589
      c.stop();                                                                                                       // 590
    });                                                                                                               // 591
                                                                                                                      // 592
  return c;                                                                                                           // 593
};                                                                                                                    // 594
                                                                                                                      // 595
// http://docs.meteor.com/#tracker_nonreactive                                                                        // 596
//                                                                                                                    // 597
// Run `f` with no current computation, returning the return value                                                    // 598
// of `f`.  Used to turn off reactivity for the duration of `f`,                                                      // 599
// so that reactive data sources accessed by `f` will not result in any                                               // 600
// computations being invalidated.                                                                                    // 601
                                                                                                                      // 602
/**                                                                                                                   // 603
 * @summary Run a function without tracking dependencies.                                                             // 604
 * @locus Client                                                                                                      // 605
 * @param {Function} func A function to call immediately.                                                             // 606
 */                                                                                                                   // 607
Tracker.nonreactive = function (f) {                                                                                  // 608
  var previous = Tracker.currentComputation;                                                                          // 609
  setCurrentComputation(null);                                                                                        // 610
  try {                                                                                                               // 611
    return f();                                                                                                       // 612
  } finally {                                                                                                         // 613
    setCurrentComputation(previous);                                                                                  // 614
  }                                                                                                                   // 615
};                                                                                                                    // 616
                                                                                                                      // 617
// http://docs.meteor.com/#tracker_oninvalidate                                                                       // 618
                                                                                                                      // 619
/**                                                                                                                   // 620
 * @summary Registers a new [`onInvalidate`](#computation_oninvalidate) callback on the current computation (which must exist), to be called immediately when the current computation is invalidated or stopped.
 * @locus Client                                                                                                      // 622
 * @param {Function} callback A callback function that will be invoked as `func(c)`, where `c` is the computation on which the callback is registered.
 */                                                                                                                   // 624
Tracker.onInvalidate = function (f) {                                                                                 // 625
  if (! Tracker.active)                                                                                               // 626
    throw new Error("Tracker.onInvalidate requires a currentComputation");                                            // 627
                                                                                                                      // 628
  Tracker.currentComputation.onInvalidate(f);                                                                         // 629
};                                                                                                                    // 630
                                                                                                                      // 631
// http://docs.meteor.com/#tracker_afterflush                                                                         // 632
                                                                                                                      // 633
/**                                                                                                                   // 634
 * @summary Schedules a function to be called during the next flush, or later in the current flush if one is in progress, after all invalidated computations have been rerun.  The function will be run once and not on subsequent flushes unless `afterFlush` is called again.
 * @locus Client                                                                                                      // 636
 * @param {Function} callback A function to call at flush time.                                                       // 637
 */                                                                                                                   // 638
Tracker.afterFlush = function (f) {                                                                                   // 639
  afterFlushCallbacks.push(f);                                                                                        // 640
  requireFlush();                                                                                                     // 641
};                                                                                                                    // 642
                                                                                                                      // 643
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                    //
// packages/tracker/deprecated.js                                                                                     //
//                                                                                                                    //
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                      //
// Deprecated functions.                                                                                              // 1
                                                                                                                      // 2
// These functions used to be on the Meteor object (and worked slightly                                               // 3
// differently).                                                                                                      // 4
// XXX COMPAT WITH 0.5.7                                                                                              // 5
Meteor.flush = Tracker.flush;                                                                                         // 6
Meteor.autorun = Tracker.autorun;                                                                                     // 7
                                                                                                                      // 8
// We used to require a special "autosubscribe" call to reactively subscribe to                                       // 9
// things. Now, it works with autorun.                                                                                // 10
// XXX COMPAT WITH 0.5.4                                                                                              // 11
Meteor.autosubscribe = Tracker.autorun;                                                                               // 12
                                                                                                                      // 13
// This Tracker API briefly existed in 0.5.8 and 0.5.9                                                                // 14
// XXX COMPAT WITH 0.5.9                                                                                              // 15
Tracker.depend = function (d) {                                                                                       // 16
  return d.depend();                                                                                                  // 17
};                                                                                                                    // 18
                                                                                                                      // 19
Deps = Tracker;                                                                                                       // 20
                                                                                                                      // 21
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package.tracker = {}, {
  Tracker: Tracker,
  Deps: Deps
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var _ = Package.underscore._;
var Random = Package.random.Random;

/* Package-scope variables */
var Retry;

(function(){

/////////////////////////////////////////////////////////////////////////////
//                                                                         //
// packages/retry/retry.js                                                 //
//                                                                         //
/////////////////////////////////////////////////////////////////////////////
                                                                           //
// Retry logic with an exponential backoff.                                // 1
//                                                                         // 2
// options:                                                                // 3
//  baseTimeout: time for initial reconnect attempt (ms).                  // 4
//  exponent: exponential factor to increase timeout each attempt.         // 5
//  maxTimeout: maximum time between retries (ms).                         // 6
//  minCount: how many times to reconnect "instantly".                     // 7
//  minTimeout: time to wait for the first `minCount` retries (ms).        // 8
//  fuzz: factor to randomize retry times by (to avoid retry storms).      // 9
                                                                           // 10
Retry = function (options) {                                               // 11
  var self = this;                                                         // 12
  _.extend(self, _.defaults(_.clone(options || {}), {                      // 13
    baseTimeout: 1000, // 1 second                                         // 14
    exponent: 2.2,                                                         // 15
    // The default is high-ish to ensure a server can recover from a       // 16
    // failure caused by load.                                             // 17
    maxTimeout: 5 * 60000, // 5 minutes                                    // 18
    minTimeout: 10,                                                        // 19
    minCount: 2,                                                           // 20
    fuzz: 0.5 // +- 25%                                                    // 21
  }));                                                                     // 22
  self.retryTimer = null;                                                  // 23
};                                                                         // 24
                                                                           // 25
_.extend(Retry.prototype, {                                                // 26
                                                                           // 27
  // Reset a pending retry, if any.                                        // 28
  clear: function () {                                                     // 29
    var self = this;                                                       // 30
    if (self.retryTimer)                                                   // 31
      clearTimeout(self.retryTimer);                                       // 32
    self.retryTimer = null;                                                // 33
  },                                                                       // 34
                                                                           // 35
  // Calculate how long to wait in milliseconds to retry, based on the     // 36
  // `count` of which retry this is.                                       // 37
  _timeout: function (count) {                                             // 38
    var self = this;                                                       // 39
                                                                           // 40
    if (count < self.minCount)                                             // 41
      return self.minTimeout;                                              // 42
                                                                           // 43
    var timeout = Math.min(                                                // 44
      self.maxTimeout,                                                     // 45
      self.baseTimeout * Math.pow(self.exponent, count));                  // 46
    // fuzz the timeout randomly, to avoid reconnect storms when a         // 47
    // server goes down.                                                   // 48
    timeout = timeout * ((Random.fraction() * self.fuzz) +                 // 49
                         (1 - self.fuzz/2));                               // 50
    return timeout;                                                        // 51
  },                                                                       // 52
                                                                           // 53
  // Call `fn` after a delay, based on the `count` of which retry this is.
  retryLater: function (count, fn) {                                       // 55
    var self = this;                                                       // 56
    var timeout = self._timeout(count);                                    // 57
    if (self.retryTimer)                                                   // 58
      clearTimeout(self.retryTimer);                                       // 59
    self.retryTimer = Meteor.setTimeout(fn, timeout);                      // 60
    return timeout;                                                        // 61
  }                                                                        // 62
                                                                           // 63
});                                                                        // 64
                                                                           // 65
/////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package.retry = {}, {
  Retry: Retry
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var _ = Package.underscore._;
var EJSON = Package.ejson.EJSON;

/* Package-scope variables */
var IdMap;

(function(){

////////////////////////////////////////////////////////////////////////////////
//                                                                            //
// packages/id-map/id-map.js                                                  //
//                                                                            //
////////////////////////////////////////////////////////////////////////////////
                                                                              //
IdMap = function (idStringify, idParse) {                                     // 1
  var self = this;                                                            // 2
  self._map = {};                                                             // 3
  self._idStringify = idStringify || JSON.stringify;                          // 4
  self._idParse = idParse || JSON.parse;                                      // 5
};                                                                            // 6
                                                                              // 7
// Some of these methods are designed to match methods on OrderedDict, since  // 8
// (eg) ObserveMultiplex and _CachingChangeObserver use them interchangeably.
// (Conceivably, this should be replaced with "UnorderedDict" with a specific
// set of methods that overlap between the two.)                              // 11
                                                                              // 12
_.extend(IdMap.prototype, {                                                   // 13
  get: function (id) {                                                        // 14
    var self = this;                                                          // 15
    var key = self._idStringify(id);                                          // 16
    return self._map[key];                                                    // 17
  },                                                                          // 18
  set: function (id, value) {                                                 // 19
    var self = this;                                                          // 20
    var key = self._idStringify(id);                                          // 21
    self._map[key] = value;                                                   // 22
  },                                                                          // 23
  remove: function (id) {                                                     // 24
    var self = this;                                                          // 25
    var key = self._idStringify(id);                                          // 26
    delete self._map[key];                                                    // 27
  },                                                                          // 28
  has: function (id) {                                                        // 29
    var self = this;                                                          // 30
    var key = self._idStringify(id);                                          // 31
    return _.has(self._map, key);                                             // 32
  },                                                                          // 33
  empty: function () {                                                        // 34
    var self = this;                                                          // 35
    return _.isEmpty(self._map);                                              // 36
  },                                                                          // 37
  clear: function () {                                                        // 38
    var self = this;                                                          // 39
    self._map = {};                                                           // 40
  },                                                                          // 41
  // Iterates over the items in the map. Return `false` to break the loop.    // 42
  forEach: function (iterator) {                                              // 43
    var self = this;                                                          // 44
    // don't use _.each, because we can't break out of it.                    // 45
    var keys = _.keys(self._map);                                             // 46
    for (var i = 0; i < keys.length; i++) {                                   // 47
      var breakIfFalse = iterator.call(null, self._map[keys[i]],              // 48
                                       self._idParse(keys[i]));               // 49
      if (breakIfFalse === false)                                             // 50
        return;                                                               // 51
    }                                                                         // 52
  },                                                                          // 53
  size: function () {                                                         // 54
    var self = this;                                                          // 55
    return _.size(self._map);                                                 // 56
  },                                                                          // 57
  setDefault: function (id, def) {                                            // 58
    var self = this;                                                          // 59
    var key = self._idStringify(id);                                          // 60
    if (_.has(self._map, key))                                                // 61
      return self._map[key];                                                  // 62
    self._map[key] = def;                                                     // 63
    return def;                                                               // 64
  },                                                                          // 65
  // Assumes that values are EJSON-cloneable, and that we don't need to clone
  // IDs (ie, that nobody is going to mutate an ObjectId).                    // 67
  clone: function () {                                                        // 68
    var self = this;                                                          // 69
    var clone = new IdMap(self._idStringify, self._idParse);                  // 70
    self.forEach(function (value, id) {                                       // 71
      clone.set(id, EJSON.clone(value));                                      // 72
    });                                                                       // 73
    return clone;                                                             // 74
  }                                                                           // 75
});                                                                           // 76
                                                                              // 77
                                                                              // 78
////////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package['id-map'] = {}, {
  IdMap: IdMap
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var check = Package.check.check;
var Match = Package.check.Match;
var Random = Package.random.Random;
var EJSON = Package.ejson.EJSON;
var _ = Package.underscore._;
var Tracker = Package.tracker.Tracker;
var Deps = Package.tracker.Deps;
var Retry = Package.retry.Retry;

/* Package-scope variables */
var DDPCommon;

(function(){

///////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                   //
// packages/ddp-common/namespace.js                                                                  //
//                                                                                                   //
///////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                     //
/**                                                                                                  // 1
 * @namespace DDPCommon                                                                              // 2
 * @summary Namespace for DDPCommon-related methods/classes. Shared between                          // 3
 * `ddp-client` and `ddp-server`, where the ddp-client is the implementation                         // 4
 * of a ddp client for both client AND server; and the ddp server is the                             // 5
 * implementation of the livedata server and stream server. Common                                   // 6
 * functionality shared between both can be shared under this namespace                              // 7
 */                                                                                                  // 8
DDPCommon = {};                                                                                      // 9
                                                                                                     // 10
///////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

///////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                   //
// packages/ddp-common/heartbeat.js                                                                  //
//                                                                                                   //
///////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                     //
// Heartbeat options:                                                                                // 1
//   heartbeatInterval: interval to send pings, in milliseconds.                                     // 2
//   heartbeatTimeout: timeout to close the connection if a reply isn't                              // 3
//     received, in milliseconds.                                                                    // 4
//   sendPing: function to call to send a ping on the connection.                                    // 5
//   onTimeout: function to call to close the connection.                                            // 6
                                                                                                     // 7
DDPCommon.Heartbeat = function (options) {                                                           // 8
  var self = this;                                                                                   // 9
                                                                                                     // 10
  self.heartbeatInterval = options.heartbeatInterval;                                                // 11
  self.heartbeatTimeout = options.heartbeatTimeout;                                                  // 12
  self._sendPing = options.sendPing;                                                                 // 13
  self._onTimeout = options.onTimeout;                                                               // 14
  self._seenPacket = false;                                                                          // 15
                                                                                                     // 16
  self._heartbeatIntervalHandle = null;                                                              // 17
  self._heartbeatTimeoutHandle = null;                                                               // 18
};                                                                                                   // 19
                                                                                                     // 20
_.extend(DDPCommon.Heartbeat.prototype, {                                                            // 21
  stop: function () {                                                                                // 22
    var self = this;                                                                                 // 23
    self._clearHeartbeatIntervalTimer();                                                             // 24
    self._clearHeartbeatTimeoutTimer();                                                              // 25
  },                                                                                                 // 26
                                                                                                     // 27
  start: function () {                                                                               // 28
    var self = this;                                                                                 // 29
    self.stop();                                                                                     // 30
    self._startHeartbeatIntervalTimer();                                                             // 31
  },                                                                                                 // 32
                                                                                                     // 33
  _startHeartbeatIntervalTimer: function () {                                                        // 34
    var self = this;                                                                                 // 35
    self._heartbeatIntervalHandle = Meteor.setInterval(                                              // 36
      _.bind(self._heartbeatIntervalFired, self),                                                    // 37
      self.heartbeatInterval                                                                         // 38
    );                                                                                               // 39
  },                                                                                                 // 40
                                                                                                     // 41
  _startHeartbeatTimeoutTimer: function () {                                                         // 42
    var self = this;                                                                                 // 43
    self._heartbeatTimeoutHandle = Meteor.setTimeout(                                                // 44
      _.bind(self._heartbeatTimeoutFired, self),                                                     // 45
      self.heartbeatTimeout                                                                          // 46
    );                                                                                               // 47
  },                                                                                                 // 48
                                                                                                     // 49
  _clearHeartbeatIntervalTimer: function () {                                                        // 50
    var self = this;                                                                                 // 51
    if (self._heartbeatIntervalHandle) {                                                             // 52
      Meteor.clearInterval(self._heartbeatIntervalHandle);                                           // 53
      self._heartbeatIntervalHandle = null;                                                          // 54
    }                                                                                                // 55
  },                                                                                                 // 56
                                                                                                     // 57
  _clearHeartbeatTimeoutTimer: function () {                                                         // 58
    var self = this;                                                                                 // 59
    if (self._heartbeatTimeoutHandle) {                                                              // 60
      Meteor.clearTimeout(self._heartbeatTimeoutHandle);                                             // 61
      self._heartbeatTimeoutHandle = null;                                                           // 62
    }                                                                                                // 63
  },                                                                                                 // 64
                                                                                                     // 65
  // The heartbeat interval timer is fired when we should send a ping.                               // 66
  _heartbeatIntervalFired: function () {                                                             // 67
    var self = this;                                                                                 // 68
    // don't send ping if we've seen a packet since we last checked,                                 // 69
    // *or* if we have already sent a ping and are awaiting a timeout.                               // 70
    // That shouldn't happen, but it's possible if                                                   // 71
    // `self.heartbeatInterval` is smaller than                                                      // 72
    // `self.heartbeatTimeout`.                                                                      // 73
    if (! self._seenPacket && ! self._heartbeatTimeoutHandle) {                                      // 74
      self._sendPing();                                                                              // 75
      // Set up timeout, in case a pong doesn't arrive in time.                                      // 76
      self._startHeartbeatTimeoutTimer();                                                            // 77
    }                                                                                                // 78
    self._seenPacket = false;                                                                        // 79
  },                                                                                                 // 80
                                                                                                     // 81
  // The heartbeat timeout timer is fired when we sent a ping, but we                                // 82
  // timed out waiting for the pong.                                                                 // 83
  _heartbeatTimeoutFired: function () {                                                              // 84
    var self = this;                                                                                 // 85
    self._heartbeatTimeoutHandle = null;                                                             // 86
    self._onTimeout();                                                                               // 87
  },                                                                                                 // 88
                                                                                                     // 89
  messageReceived: function () {                                                                     // 90
    var self = this;                                                                                 // 91
    // Tell periodic checkin that we have seen a packet, and thus it                                 // 92
    // does not need to send a ping this cycle.                                                      // 93
    self._seenPacket = true;                                                                         // 94
    // If we were waiting for a pong, we got it.                                                     // 95
    if (self._heartbeatTimeoutHandle) {                                                              // 96
      self._clearHeartbeatTimeoutTimer();                                                            // 97
    }                                                                                                // 98
  }                                                                                                  // 99
});                                                                                                  // 100
                                                                                                     // 101
///////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

///////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                   //
// packages/ddp-common/utils.js                                                                      //
//                                                                                                   //
///////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                     //
DDPCommon.SUPPORTED_DDP_VERSIONS = [ '1', 'pre2', 'pre1' ];                                          // 1
                                                                                                     // 2
DDPCommon.parseDDP = function (stringMessage) {                                                      // 3
  try {                                                                                              // 4
    var msg = JSON.parse(stringMessage);                                                             // 5
  } catch (e) {                                                                                      // 6
    Meteor._debug("Discarding message with invalid JSON", stringMessage);                            // 7
    return null;                                                                                     // 8
  }                                                                                                  // 9
  // DDP messages must be objects.                                                                   // 10
  if (msg === null || typeof msg !== 'object') {                                                     // 11
    Meteor._debug("Discarding non-object DDP message", stringMessage);                               // 12
    return null;                                                                                     // 13
  }                                                                                                  // 14
                                                                                                     // 15
  // massage msg to get it into "abstract ddp" rather than "wire ddp" format.                        // 16
                                                                                                     // 17
  // switch between "cleared" rep of unsetting fields and "undefined"                                // 18
  // rep of same                                                                                     // 19
  if (_.has(msg, 'cleared')) {                                                                       // 20
    if (!_.has(msg, 'fields'))                                                                       // 21
      msg.fields = {};                                                                               // 22
    _.each(msg.cleared, function (clearKey) {                                                        // 23
      msg.fields[clearKey] = undefined;                                                              // 24
    });                                                                                              // 25
    delete msg.cleared;                                                                              // 26
  }                                                                                                  // 27
                                                                                                     // 28
  _.each(['fields', 'params', 'result'], function (field) {                                          // 29
    if (_.has(msg, field))                                                                           // 30
      msg[field] = EJSON._adjustTypesFromJSONValue(msg[field]);                                      // 31
  });                                                                                                // 32
                                                                                                     // 33
  return msg;                                                                                        // 34
};                                                                                                   // 35
                                                                                                     // 36
DDPCommon.stringifyDDP = function (msg) {                                                            // 37
  var copy = EJSON.clone(msg);                                                                       // 38
  // swizzle 'changed' messages from 'fields undefined' rep to 'fields                               // 39
  // and cleared' rep                                                                                // 40
  if (_.has(msg, 'fields')) {                                                                        // 41
    var cleared = [];                                                                                // 42
    _.each(msg.fields, function (value, key) {                                                       // 43
      if (value === undefined) {                                                                     // 44
        cleared.push(key);                                                                           // 45
        delete copy.fields[key];                                                                     // 46
      }                                                                                              // 47
    });                                                                                              // 48
    if (!_.isEmpty(cleared))                                                                         // 49
      copy.cleared = cleared;                                                                        // 50
    if (_.isEmpty(copy.fields))                                                                      // 51
      delete copy.fields;                                                                            // 52
  }                                                                                                  // 53
  // adjust types to basic                                                                           // 54
  _.each(['fields', 'params', 'result'], function (field) {                                          // 55
    if (_.has(copy, field))                                                                          // 56
      copy[field] = EJSON._adjustTypesToJSONValue(copy[field]);                                      // 57
  });                                                                                                // 58
  if (msg.id && typeof msg.id !== 'string') {                                                        // 59
    throw new Error("Message id is not a string");                                                   // 60
  }                                                                                                  // 61
  return JSON.stringify(copy);                                                                       // 62
};                                                                                                   // 63
                                                                                                     // 64
                                                                                                     // 65
///////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

///////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                   //
// packages/ddp-common/method_invocation.js                                                          //
//                                                                                                   //
///////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                     //
// Instance name is this because it is usually referred to as this inside a                          // 1
// method definition                                                                                 // 2
/**                                                                                                  // 3
 * @summary The state for a single invocation of a method, referenced by this                        // 4
 * inside a method definition.                                                                       // 5
 * @param {Object} options                                                                           // 6
 * @instanceName this                                                                                // 7
 * @showInstanceName true                                                                            // 8
 */                                                                                                  // 9
DDPCommon.MethodInvocation = function (options) {                                                    // 10
  var self = this;                                                                                   // 11
                                                                                                     // 12
  // true if we're running not the actual method, but a stub (that is,                               // 13
  // if we're on a client (which may be a browser, or in the future a                                // 14
  // server connecting to another server) and presently running a                                    // 15
  // simulation of a server-side method for latency compensation                                     // 16
  // purposes). not currently true except in a client such as a browser,                             // 17
  // since there's usually no point in running stubs unless you have a                               // 18
  // zero-latency connection to the user.                                                            // 19
                                                                                                     // 20
  /**                                                                                                // 21
   * @summary Access inside a method invocation.  Boolean value, true if this invocation is a stub.  // 22
   * @locus Anywhere                                                                                 // 23
   * @name  isSimulation                                                                             // 24
   * @memberOf DDPCommon.MethodInvocation                                                            // 25
   * @instance                                                                                       // 26
   * @type {Boolean}                                                                                 // 27
   */                                                                                                // 28
  this.isSimulation = options.isSimulation;                                                          // 29
                                                                                                     // 30
  // call this function to allow other method invocations (from the                                  // 31
  // same client) to continue running without waiting for this one to                                // 32
  // complete.                                                                                       // 33
  this._unblock = options.unblock || function () {};                                                 // 34
  this._calledUnblock = false;                                                                       // 35
                                                                                                     // 36
  // current user id                                                                                 // 37
                                                                                                     // 38
  /**                                                                                                // 39
   * @summary The id of the user that made this method call, or `null` if no user was logged in.     // 40
   * @locus Anywhere                                                                                 // 41
   * @name  userId                                                                                   // 42
   * @memberOf DDPCommon.MethodInvocation                                                            // 43
   * @instance                                                                                       // 44
   */                                                                                                // 45
  this.userId = options.userId;                                                                      // 46
                                                                                                     // 47
  // sets current user id in all appropriate server contexts and                                     // 48
  // reruns subscriptions                                                                            // 49
  this._setUserId = options.setUserId || function () {};                                             // 50
                                                                                                     // 51
  // On the server, the connection this method call came in on.                                      // 52
                                                                                                     // 53
  /**                                                                                                // 54
   * @summary Access inside a method invocation. The [connection](#meteor_onconnection) that this method was received on. `null` if the method is not associated with a connection, eg. a server initiated method call. Calls to methods made from a server method which was in turn initiated from the client share the same `connection`.
   * @locus Server                                                                                   // 56
   * @name  connection                                                                               // 57
   * @memberOf DDPCommon.MethodInvocation                                                            // 58
   * @instance                                                                                       // 59
   */                                                                                                // 60
  this.connection = options.connection;                                                              // 61
                                                                                                     // 62
  // The seed for randomStream value generation                                                      // 63
  this.randomSeed = options.randomSeed;                                                              // 64
                                                                                                     // 65
  // This is set by RandomStream.get; and holds the random stream state                              // 66
  this.randomStream = null;                                                                          // 67
};                                                                                                   // 68
                                                                                                     // 69
_.extend(DDPCommon.MethodInvocation.prototype, {                                                     // 70
  /**                                                                                                // 71
   * @summary Call inside a method invocation.  Allow subsequent method from this client to begin running in a new fiber.
   * @locus Server                                                                                   // 73
   * @memberOf DDPCommon.MethodInvocation                                                            // 74
   * @instance                                                                                       // 75
   */                                                                                                // 76
  unblock: function () {                                                                             // 77
    var self = this;                                                                                 // 78
    self._calledUnblock = true;                                                                      // 79
    self._unblock();                                                                                 // 80
  },                                                                                                 // 81
                                                                                                     // 82
  /**                                                                                                // 83
   * @summary Set the logged in user.                                                                // 84
   * @locus Server                                                                                   // 85
   * @memberOf DDPCommon.MethodInvocation                                                            // 86
   * @instance                                                                                       // 87
   * @param {String | null} userId The value that should be returned by `userId` on this connection.
   */                                                                                                // 89
  setUserId: function(userId) {                                                                      // 90
    var self = this;                                                                                 // 91
    if (self._calledUnblock)                                                                         // 92
      throw new Error("Can't call setUserId in a method after calling unblock");                     // 93
    self.userId = userId;                                                                            // 94
    self._setUserId(userId);                                                                         // 95
  }                                                                                                  // 96
});                                                                                                  // 97
                                                                                                     // 98
///////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

///////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                   //
// packages/ddp-common/random_stream.js                                                              //
//                                                                                                   //
///////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                     //
// RandomStream allows for generation of pseudo-random values, from a seed.                          // 1
//                                                                                                   // 2
// We use this for consistent 'random' numbers across the client and server.                         // 3
// We want to generate probably-unique IDs on the client, and we ideally want                        // 4
// the server to generate the same IDs when it executes the method.                                  // 5
//                                                                                                   // 6
// For generated values to be the same, we must seed ourselves the same way,                         // 7
// and we must keep track of the current state of our pseudo-random generators.                      // 8
// We call this state the scope. By default, we use the current DDP method                           // 9
// invocation as our scope.  DDP now allows the client to specify a randomSeed.                      // 10
// If a randomSeed is provided it will be used to seed our random sequences.                         // 11
// In this way, client and server method calls will generate the same values.                        // 12
//                                                                                                   // 13
// We expose multiple named streams; each stream is independent                                      // 14
// and is seeded differently (but predictably from the name).                                        // 15
// By using multiple streams, we support reordering of requests,                                     // 16
// as long as they occur on different streams.                                                       // 17
//                                                                                                   // 18
// @param options {Optional Object}                                                                  // 19
//   seed: Array or value - Seed value(s) for the generator.                                         // 20
//                          If an array, will be used as-is                                          // 21
//                          If a value, will be converted to a single-value array                    // 22
//                          If omitted, a random array will be used as the seed.                     // 23
DDPCommon.RandomStream = function (options) {                                                        // 24
  var self = this;                                                                                   // 25
                                                                                                     // 26
  this.seed = [].concat(options.seed || randomToken());                                              // 27
                                                                                                     // 28
  this.sequences = {};                                                                               // 29
};                                                                                                   // 30
                                                                                                     // 31
// Returns a random string of sufficient length for a random seed.                                   // 32
// This is a placeholder function; a similar function is planned                                     // 33
// for Random itself; when that is added we should remove this function,                             // 34
// and call Random's randomToken instead.                                                            // 35
function randomToken() {                                                                             // 36
  return Random.hexString(20);                                                                       // 37
};                                                                                                   // 38
                                                                                                     // 39
// Returns the random stream with the specified name, in the specified                               // 40
// scope. If a scope is passed, then we use that to seed a (not                                      // 41
// cryptographically secure) PRNG using the fast Alea algorithm.  If                                 // 42
// scope is null (or otherwise falsey) then we use a generated seed.                                 // 43
//                                                                                                   // 44
// However, scope will normally be the current DDP method invocation,                                // 45
// so we'll use the stream with the specified name, and we should get                                // 46
// consistent values on the client and server sides of a method call.                                // 47
DDPCommon.RandomStream.get = function (scope, name) {                                                // 48
  if (!name) {                                                                                       // 49
    name = "default";                                                                                // 50
  }                                                                                                  // 51
  if (!scope) {                                                                                      // 52
    // There was no scope passed in; the sequence won't actually be                                  // 53
    // reproducible. but make it fast (and not cryptographically                                     // 54
    // secure) anyways, so that the behavior is similar to what you'd                                // 55
    // get by passing in a scope.                                                                    // 56
    return Random.insecure;                                                                          // 57
  }                                                                                                  // 58
  var randomStream = scope.randomStream;                                                             // 59
  if (!randomStream) {                                                                               // 60
    scope.randomStream = randomStream = new DDPCommon.RandomStream({                                 // 61
      seed: scope.randomSeed                                                                         // 62
    });                                                                                              // 63
  }                                                                                                  // 64
  return randomStream._sequence(name);                                                               // 65
};                                                                                                   // 66
                                                                                                     // 67
                                                                                                     // 68
// Creates a randomSeed for passing to a method call.                                                // 69
// Note that we take enclosing as an argument,                                                       // 70
// though we expect it to be DDP._CurrentInvocation.get()                                            // 71
// However, we often evaluate makeRpcSeed lazily, and thus the relevant                              // 72
// invocation may not be the one currently in scope.                                                 // 73
// If enclosing is null, we'll use Random and values won't be repeatable.                            // 74
DDPCommon.makeRpcSeed = function (enclosing, methodName) {                                           // 75
  var stream = DDPCommon.RandomStream.get(enclosing, '/rpc/' + methodName);                          // 76
  return stream.hexString(20);                                                                       // 77
};                                                                                                   // 78
                                                                                                     // 79
_.extend(DDPCommon.RandomStream.prototype, {                                                         // 80
  // Get a random sequence with the specified name, creating it if does not exist.                   // 81
  // New sequences are seeded with the seed concatenated with the name.                              // 82
  // By passing a seed into Random.create, we use the Alea generator.                                // 83
  _sequence: function (name) {                                                                       // 84
    var self = this;                                                                                 // 85
                                                                                                     // 86
    var sequence = self.sequences[name] || null;                                                     // 87
    if (sequence === null) {                                                                         // 88
      var sequenceSeed = self.seed.concat(name);                                                     // 89
      for (var i = 0; i < sequenceSeed.length; i++) {                                                // 90
        if (_.isFunction(sequenceSeed[i])) {                                                         // 91
          sequenceSeed[i] = sequenceSeed[i]();                                                       // 92
        }                                                                                            // 93
      }                                                                                              // 94
      self.sequences[name] = sequence = Random.createWithSeeds.apply(null, sequenceSeed);            // 95
    }                                                                                                // 96
    return sequence;                                                                                 // 97
  }                                                                                                  // 98
});                                                                                                  // 99
                                                                                                     // 100
///////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package['ddp-common'] = {}, {
  DDPCommon: DDPCommon
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var _ = Package.underscore._;
var Symbol = Package['ecmascript-runtime'].Symbol;
var Map = Package['ecmascript-runtime'].Map;
var Set = Package['ecmascript-runtime'].Set;

/* Package-scope variables */
var Reload;

(function(){

/////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                         //
// packages/reload/reload.js                                                               //
//                                                                                         //
/////////////////////////////////////////////////////////////////////////////////////////////
                                                                                           //
/**                                                                                        // 1
 * This code does _NOT_ support hot (session-restoring) reloads on                         // 2
 * IE6,7. It only works on browsers with sessionStorage support.                           // 3
 *                                                                                         // 4
 * There are a couple approaches to add IE6,7 support:                                     // 5
 *                                                                                         // 6
 * - use IE's "userData" mechanism in combination with window.name.                        // 7
 * This mostly works, however the problem is that it can not get to the                    // 8
 * data until after DOMReady. This is a problem for us since this API                      // 9
 * relies on the data being ready before API users run. We could                           // 10
 * refactor using Meteor.startup in all API users, but that might slow                     // 11
 * page loads as we couldn't start the stream until after DOMReady.                        // 12
 * Here are some resources on this approach:                                               // 13
 * https://github.com/hugeinc/USTORE.js                                                    // 14
 * http://thudjs.tumblr.com/post/419577524/localstorage-userdata                           // 15
 * http://www.javascriptkit.com/javatutors/domstorage2.shtml                               // 16
 *                                                                                         // 17
 * - POST the data to the server, and have the server send it back on                      // 18
 * page load. This is nice because it sidesteps all the local storage                      // 19
 * compatibility issues, however it is kinda tricky. We can use a unique                   // 20
 * token in the URL, then get rid of it with HTML5 pushstate, but that                     // 21
 * only works on pushstate browsers.                                                       // 22
 *                                                                                         // 23
 * This will all need to be reworked entirely when we add server-side                      // 24
 * HTML rendering. In that case, the server will need to have access to                    // 25
 * the client's session to render properly.                                                // 26
 */                                                                                        // 27
                                                                                           // 28
// XXX when making this API public, also expose a flag for the app                         // 29
// developer to know whether a hot code push is happening. This is                         // 30
// useful for apps using `window.onbeforeunload`. See                                      // 31
// https://github.com/meteor/meteor/pull/657                                               // 32
                                                                                           // 33
Reload = {};                                                                               // 34
                                                                                           // 35
var KEY_NAME = 'Meteor_Reload';                                                            // 36
                                                                                           // 37
var old_data = {};                                                                         // 38
// read in old data at startup.                                                            // 39
var old_json;                                                                              // 40
                                                                                           // 41
// This logic for sessionStorage detection is based on browserstate/history.js             // 42
var safeSessionStorage = null;                                                             // 43
try {                                                                                      // 44
  // This throws a SecurityError on Chrome if cookies & localStorage are                   // 45
  // explicitly disabled                                                                   // 46
  //                                                                                       // 47
  // On Firefox with dom.storage.enabled set to false, sessionStorage is null              // 48
  //                                                                                       // 49
  // We can't even do (typeof sessionStorage) on Chrome, it throws.  So we rely            // 50
  // on the throw if sessionStorage == null; the alternative is browser                    // 51
  // detection, but this seems better.                                                     // 52
  safeSessionStorage = window.sessionStorage;                                              // 53
                                                                                           // 54
  // Check we can actually use it                                                          // 55
  if (safeSessionStorage) {                                                                // 56
    safeSessionStorage.setItem('__dummy__', '1');                                          // 57
    safeSessionStorage.removeItem('__dummy__');                                            // 58
  } else {                                                                                 // 59
    // Be consistently null, for safety                                                    // 60
    safeSessionStorage = null;                                                             // 61
  }                                                                                        // 62
} catch(e) {                                                                               // 63
  // Expected on chrome with strict security, or if sessionStorage not supported           // 64
  safeSessionStorage = null;                                                               // 65
}                                                                                          // 66
                                                                                           // 67
// Exported for test.                                                                      // 68
Reload._getData = function () {                                                            // 69
  return safeSessionStorage && safeSessionStorage.getItem(KEY_NAME);                       // 70
};                                                                                         // 71
                                                                                           // 72
if (safeSessionStorage) {                                                                  // 73
  old_json = Reload._getData();                                                            // 74
  safeSessionStorage.removeItem(KEY_NAME);                                                 // 75
} else {                                                                                   // 76
  // Unsupported browser (IE 6,7) or locked down security settings.                        // 77
  // No session resumption.                                                                // 78
  // Meteor._debug("XXX UNSUPPORTED BROWSER/SETTINGS");                                    // 79
}                                                                                          // 80
                                                                                           // 81
if (!old_json) old_json = '{}';                                                            // 82
var old_parsed = {};                                                                       // 83
try {                                                                                      // 84
  old_parsed = JSON.parse(old_json);                                                       // 85
  if (typeof old_parsed !== "object") {                                                    // 86
    Meteor._debug("Got bad data on reload. Ignoring.");                                    // 87
    old_parsed = {};                                                                       // 88
  }                                                                                        // 89
} catch (err) {                                                                            // 90
  Meteor._debug("Got invalid JSON on reload. Ignoring.");                                  // 91
}                                                                                          // 92
                                                                                           // 93
if (old_parsed.reload && typeof old_parsed.data === "object") {                            // 94
  // Meteor._debug("Restoring reload data.");                                              // 95
  old_data = old_parsed.data;                                                              // 96
}                                                                                          // 97
                                                                                           // 98
                                                                                           // 99
var providers = [];                                                                        // 100
                                                                                           // 101
////////// External API //////////                                                         // 102
                                                                                           // 103
// Packages that support migration should register themselves by calling                   // 104
// this function. When it's time to migrate, callback will be called                       // 105
// with one argument, the "retry function," and an optional 'option'                       // 106
// argument (containing a key 'immediateMigration'). If the package                        // 107
// is ready to migrate, it should return [true, data], where data is                       // 108
// its migration data, an arbitrary JSON value (or [true] if it has                        // 109
// no migration data this time). If the package needs more time                            // 110
// before it is ready to migrate, it should return false. Then, once                       // 111
// it is ready to migrating again, it should call the retry                                // 112
// function. The retry function will return immediately, but will                          // 113
// schedule the migration to be retried, meaning that every package                        // 114
// will be polled once again for its migration data. If they are all                       // 115
// ready this time, then the migration will happen. name must be set if there              // 116
// is migration data. If 'immediateMigration' is set in the options                        // 117
// argument, then it doesn't matter whether the package is ready to                        // 118
// migrate or not; the reload will happen immediately without waiting                      // 119
// (used for OAuth redirect login).                                                        // 120
//                                                                                         // 121
Reload._onMigrate = function (name, callback) {                                            // 122
  if (!callback) {                                                                         // 123
    // name not provided, so first arg is callback.                                        // 124
    callback = name;                                                                       // 125
    name = undefined;                                                                      // 126
  }                                                                                        // 127
  providers.push({name: name, callback: callback});                                        // 128
};                                                                                         // 129
                                                                                           // 130
// Called by packages when they start up.                                                  // 131
// Returns the object that was saved, or undefined if none saved.                          // 132
//                                                                                         // 133
Reload._migrationData = function (name) {                                                  // 134
  return old_data[name];                                                                   // 135
};                                                                                         // 136
                                                                                           // 137
// Options are the same as for `Reload._migrate`.                                          // 138
var pollProviders = function (tryReload, options) {                                        // 139
  tryReload = tryReload || function () {};                                                 // 140
  options = options || {};                                                                 // 141
                                                                                           // 142
  var migrationData = {};                                                                  // 143
  var remaining = _.clone(providers);                                                      // 144
  var allReady = true;                                                                     // 145
  while (remaining.length) {                                                               // 146
    var p = remaining.shift();                                                             // 147
    var status = p.callback(tryReload, options);                                           // 148
    if (!status[0])                                                                        // 149
      allReady = false;                                                                    // 150
    if (status.length > 1 && p.name)                                                       // 151
      migrationData[p.name] = status[1];                                                   // 152
  };                                                                                       // 153
  if (allReady || options.immediateMigration)                                              // 154
    return migrationData;                                                                  // 155
  else                                                                                     // 156
    return null;                                                                           // 157
};                                                                                         // 158
                                                                                           // 159
// Options are:                                                                            // 160
//  - immediateMigration: true if the page will be reloaded immediately                    // 161
//    regardless of whether packages report that they are ready or not.                    // 162
Reload._migrate = function (tryReload, options) {                                          // 163
  // Make sure each package is ready to go, and collect their                              // 164
  // migration data                                                                        // 165
  var migrationData = pollProviders(tryReload, options);                                   // 166
  if (migrationData === null)                                                              // 167
    return false; // not ready yet..                                                       // 168
                                                                                           // 169
  try {                                                                                    // 170
    // Persist the migration data                                                          // 171
    var json = JSON.stringify({                                                            // 172
      data: migrationData, reload: true                                                    // 173
    });                                                                                    // 174
  } catch (err) {                                                                          // 175
    Meteor._debug("Couldn't serialize data for migration", migrationData);                 // 176
    throw err;                                                                             // 177
  }                                                                                        // 178
                                                                                           // 179
  if (safeSessionStorage) {                                                                // 180
    try {                                                                                  // 181
      safeSessionStorage.setItem(KEY_NAME, json);                                          // 182
    } catch (err) {                                                                        // 183
      // We should have already checked this, but just log - don't throw                   // 184
      Meteor._debug("Couldn't save data for migration to sessionStorage", err);            // 185
    }                                                                                      // 186
  } else {                                                                                 // 187
    Meteor._debug("Browser does not support sessionStorage. Not saving migration state.");
  }                                                                                        // 189
                                                                                           // 190
  return true;                                                                             // 191
};                                                                                         // 192
                                                                                           // 193
// Allows tests to isolate the list of providers.                                          // 194
Reload._withFreshProvidersForTest = function (f) {                                         // 195
  var originalProviders = _.clone(providers);                                              // 196
  providers = [];                                                                          // 197
  try {                                                                                    // 198
    f();                                                                                   // 199
  } finally {                                                                              // 200
    providers = originalProviders;                                                         // 201
  }                                                                                        // 202
};                                                                                         // 203
                                                                                           // 204
// Migrating reload: reload this page (presumably to pick up a new                         // 205
// version of the code or assets), but save the program state and                          // 206
// migrate it over. This function returns immediately. The reload                          // 207
// will happen at some point in the future once all of the packages                        // 208
// are ready to migrate.                                                                   // 209
//                                                                                         // 210
var reloading = false;                                                                     // 211
Reload._reload = function (options) {                                                      // 212
  options = options || {};                                                                 // 213
                                                                                           // 214
  if (reloading)                                                                           // 215
    return;                                                                                // 216
  reloading = true;                                                                        // 217
                                                                                           // 218
  var tryReload = function () { _.defer(function () {                                      // 219
    if (Reload._migrate(tryReload, options)) {                                             // 220
      // We'd like to make the browser reload the page using location.replace()            // 221
      // instead of location.reload(), because this avoids validating assets               // 222
      // with the server if we still have a valid cached copy. This doesn't work           // 223
      // when the location contains a hash however, because that wouldn't reload           // 224
      // the page and just scroll to the hash location instead.                            // 225
      if (window.location.hash || window.location.href.endsWith("#")) {                    // 226
        window.location.reload();                                                          // 227
      } else {                                                                             // 228
        window.location.replace(window.location.href);                                     // 229
      }                                                                                    // 230
    }                                                                                      // 231
  }); };                                                                                   // 232
                                                                                           // 233
  tryReload();                                                                             // 234
};                                                                                         // 235
                                                                                           // 236
/////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

/////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                         //
// packages/reload/deprecated.js                                                           //
//                                                                                         //
/////////////////////////////////////////////////////////////////////////////////////////////
                                                                                           //
// Reload functionality used to live on Meteor._reload. Be nice and try not to             // 1
// break code that uses it, even though it's internal.                                     // 2
// XXX COMPAT WITH 0.6.4                                                                   // 3
Meteor._reload = {                                                                         // 4
  onMigrate: Reload._onMigrate,                                                            // 5
  migrationData: Reload._migrationData,                                                    // 6
  reload: Reload._reload                                                                   // 7
};                                                                                         // 8
                                                                                           // 9
/////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package.reload = {}, {
  Reload: Reload
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var _ = Package.underscore._;
var EJSON = Package.ejson.EJSON;

/* Package-scope variables */
var DiffSequence;

(function(){

/////////////////////////////////////////////////////////////////////////////////////
//                                                                                 //
// packages/diff-sequence/diff.js                                                  //
//                                                                                 //
/////////////////////////////////////////////////////////////////////////////////////
                                                                                   //
DiffSequence = {};                                                                 // 1
                                                                                   // 2
// ordered: bool.                                                                  // 3
// old_results and new_results: collections of documents.                          // 4
//    if ordered, they are arrays.                                                 // 5
//    if unordered, they are IdMaps                                                // 6
DiffSequence.diffQueryChanges = function (ordered, oldResults, newResults,         // 7
                                              observer, options) {                 // 8
  if (ordered)                                                                     // 9
    DiffSequence.diffQueryOrderedChanges(                                          // 10
      oldResults, newResults, observer, options);                                  // 11
  else                                                                             // 12
    DiffSequence.diffQueryUnorderedChanges(                                        // 13
      oldResults, newResults, observer, options);                                  // 14
};                                                                                 // 15
                                                                                   // 16
DiffSequence.diffQueryUnorderedChanges = function (oldResults, newResults,         // 17
                                                       observer, options) {        // 18
  options = options || {};                                                         // 19
  var projectionFn = options.projectionFn || EJSON.clone;                          // 20
                                                                                   // 21
  if (observer.movedBefore) {                                                      // 22
    throw new Error("_diffQueryUnordered called with a movedBefore observer!");    // 23
  }                                                                                // 24
                                                                                   // 25
  newResults.forEach(function (newDoc, id) {                                       // 26
    var oldDoc = oldResults.get(id);                                               // 27
    if (oldDoc) {                                                                  // 28
      if (observer.changed && !EJSON.equals(oldDoc, newDoc)) {                     // 29
        var projectedNew = projectionFn(newDoc);                                   // 30
        var projectedOld = projectionFn(oldDoc);                                   // 31
        var changedFields =                                                        // 32
              DiffSequence.makeChangedFields(projectedNew, projectedOld);          // 33
        if (! _.isEmpty(changedFields)) {                                          // 34
          observer.changed(id, changedFields);                                     // 35
        }                                                                          // 36
      }                                                                            // 37
    } else if (observer.added) {                                                   // 38
      var fields = projectionFn(newDoc);                                           // 39
      delete fields._id;                                                           // 40
      observer.added(newDoc._id, fields);                                          // 41
    }                                                                              // 42
  });                                                                              // 43
                                                                                   // 44
  if (observer.removed) {                                                          // 45
    oldResults.forEach(function (oldDoc, id) {                                     // 46
      if (!newResults.has(id))                                                     // 47
        observer.removed(id);                                                      // 48
    });                                                                            // 49
  }                                                                                // 50
};                                                                                 // 51
                                                                                   // 52
                                                                                   // 53
DiffSequence.diffQueryOrderedChanges = function (old_results, new_results,         // 54
                                                     observer, options) {          // 55
  options = options || {};                                                         // 56
  var projectionFn = options.projectionFn || EJSON.clone;                          // 57
                                                                                   // 58
  var new_presence_of_id = {};                                                     // 59
  _.each(new_results, function (doc) {                                             // 60
    if (new_presence_of_id[doc._id])                                               // 61
      Meteor._debug("Duplicate _id in new_results");                               // 62
    new_presence_of_id[doc._id] = true;                                            // 63
  });                                                                              // 64
                                                                                   // 65
  var old_index_of_id = {};                                                        // 66
  _.each(old_results, function (doc, i) {                                          // 67
    if (doc._id in old_index_of_id)                                                // 68
      Meteor._debug("Duplicate _id in old_results");                               // 69
    old_index_of_id[doc._id] = i;                                                  // 70
  });                                                                              // 71
                                                                                   // 72
  // ALGORITHM:                                                                    // 73
  //                                                                               // 74
  // To determine which docs should be considered "moved" (and which               // 75
  // merely change position because of other docs moving) we run                   // 76
  // a "longest common subsequence" (LCS) algorithm.  The LCS of the               // 77
  // old doc IDs and the new doc IDs gives the docs that should NOT be             // 78
  // considered moved.                                                             // 79
                                                                                   // 80
  // To actually call the appropriate callbacks to get from the old state to the   // 81
  // new state:                                                                    // 82
                                                                                   // 83
  // First, we call removed() on all the items that only appear in the old         // 84
  // state.                                                                        // 85
                                                                                   // 86
  // Then, once we have the items that should not move, we walk through the new    // 87
  // results array group-by-group, where a "group" is a set of items that have     // 88
  // moved, anchored on the end by an item that should not move.  One by one, we   // 89
  // move each of those elements into place "before" the anchoring end-of-group    // 90
  // item, and fire changed events on them if necessary.  Then we fire a changed   // 91
  // event on the anchor, and move on to the next group.  There is always at       // 92
  // least one group; the last group is anchored by a virtual "null" id at the     // 93
  // end.                                                                          // 94
                                                                                   // 95
  // Asymptotically: O(N k) where k is number of ops, or potentially               // 96
  // O(N log N) if inner loop of LCS were made to be binary search.                // 97
                                                                                   // 98
                                                                                   // 99
  //////// LCS (longest common sequence, with respect to _id)                      // 100
  // (see Wikipedia article on Longest Increasing Subsequence,                     // 101
  // where the LIS is taken of the sequence of old indices of the                  // 102
  // docs in new_results)                                                          // 103
  //                                                                               // 104
  // unmoved: the output of the algorithm; members of the LCS,                     // 105
  // in the form of indices into new_results                                       // 106
  var unmoved = [];                                                                // 107
  // max_seq_len: length of LCS found so far                                       // 108
  var max_seq_len = 0;                                                             // 109
  // seq_ends[i]: the index into new_results of the last doc in a                  // 110
  // common subsequence of length of i+1 <= max_seq_len                            // 111
  var N = new_results.length;                                                      // 112
  var seq_ends = new Array(N);                                                     // 113
  // ptrs:  the common subsequence ending with new_results[n] extends              // 114
  // a common subsequence ending with new_results[ptr[n]], unless                  // 115
  // ptr[n] is -1.                                                                 // 116
  var ptrs = new Array(N);                                                         // 117
  // virtual sequence of old indices of new results                                // 118
  var old_idx_seq = function(i_new) {                                              // 119
    return old_index_of_id[new_results[i_new]._id];                                // 120
  };                                                                               // 121
  // for each item in new_results, use it to extend a common subsequence           // 122
  // of length j <= max_seq_len                                                    // 123
  for(var i=0; i<N; i++) {                                                         // 124
    if (old_index_of_id[new_results[i]._id] !== undefined) {                       // 125
      var j = max_seq_len;                                                         // 126
      // this inner loop would traditionally be a binary search,                   // 127
      // but scanning backwards we will likely find a subseq to extend             // 128
      // pretty soon, bounded for example by the total number of ops.              // 129
      // If this were to be changed to a binary search, we'd still want            // 130
      // to scan backwards a bit as an optimization.                               // 131
      while (j > 0) {                                                              // 132
        if (old_idx_seq(seq_ends[j-1]) < old_idx_seq(i))                           // 133
          break;                                                                   // 134
        j--;                                                                       // 135
      }                                                                            // 136
                                                                                   // 137
      ptrs[i] = (j === 0 ? -1 : seq_ends[j-1]);                                    // 138
      seq_ends[j] = i;                                                             // 139
      if (j+1 > max_seq_len)                                                       // 140
        max_seq_len = j+1;                                                         // 141
    }                                                                              // 142
  }                                                                                // 143
                                                                                   // 144
  // pull out the LCS/LIS into unmoved                                             // 145
  var idx = (max_seq_len === 0 ? -1 : seq_ends[max_seq_len-1]);                    // 146
  while (idx >= 0) {                                                               // 147
    unmoved.push(idx);                                                             // 148
    idx = ptrs[idx];                                                               // 149
  }                                                                                // 150
  // the unmoved item list is built backwards, so fix that                         // 151
  unmoved.reverse();                                                               // 152
                                                                                   // 153
  // the last group is always anchored by the end of the result list, which is     // 154
  // an id of "null"                                                               // 155
  unmoved.push(new_results.length);                                                // 156
                                                                                   // 157
  _.each(old_results, function (doc) {                                             // 158
    if (!new_presence_of_id[doc._id])                                              // 159
      observer.removed && observer.removed(doc._id);                               // 160
  });                                                                              // 161
  // for each group of things in the new_results that is anchored by an unmoved    // 162
  // element, iterate through the things before it.                                // 163
  var startOfGroup = 0;                                                            // 164
  _.each(unmoved, function (endOfGroup) {                                          // 165
    var groupId = new_results[endOfGroup] ? new_results[endOfGroup]._id : null;    // 166
    var oldDoc, newDoc, fields, projectedNew, projectedOld;                        // 167
    for (var i = startOfGroup; i < endOfGroup; i++) {                              // 168
      newDoc = new_results[i];                                                     // 169
      if (!_.has(old_index_of_id, newDoc._id)) {                                   // 170
        fields = projectionFn(newDoc);                                             // 171
        delete fields._id;                                                         // 172
        observer.addedBefore && observer.addedBefore(newDoc._id, fields, groupId);
        observer.added && observer.added(newDoc._id, fields);                      // 174
      } else {                                                                     // 175
        // moved                                                                   // 176
        oldDoc = old_results[old_index_of_id[newDoc._id]];                         // 177
        projectedNew = projectionFn(newDoc);                                       // 178
        projectedOld = projectionFn(oldDoc);                                       // 179
        fields = DiffSequence.makeChangedFields(projectedNew, projectedOld);       // 180
        if (!_.isEmpty(fields)) {                                                  // 181
          observer.changed && observer.changed(newDoc._id, fields);                // 182
        }                                                                          // 183
        observer.movedBefore && observer.movedBefore(newDoc._id, groupId);         // 184
      }                                                                            // 185
    }                                                                              // 186
    if (groupId) {                                                                 // 187
      newDoc = new_results[endOfGroup];                                            // 188
      oldDoc = old_results[old_index_of_id[newDoc._id]];                           // 189
      projectedNew = projectionFn(newDoc);                                         // 190
      projectedOld = projectionFn(oldDoc);                                         // 191
      fields = DiffSequence.makeChangedFields(projectedNew, projectedOld);         // 192
      if (!_.isEmpty(fields)) {                                                    // 193
        observer.changed && observer.changed(newDoc._id, fields);                  // 194
      }                                                                            // 195
    }                                                                              // 196
    startOfGroup = endOfGroup+1;                                                   // 197
  });                                                                              // 198
                                                                                   // 199
                                                                                   // 200
};                                                                                 // 201
                                                                                   // 202
                                                                                   // 203
// General helper for diff-ing two objects.                                        // 204
// callbacks is an object like so:                                                 // 205
// { leftOnly: function (key, leftValue) {...},                                    // 206
//   rightOnly: function (key, rightValue) {...},                                  // 207
//   both: function (key, leftValue, rightValue) {...},                            // 208
// }                                                                               // 209
DiffSequence.diffObjects = function (left, right, callbacks) {                     // 210
  _.each(left, function (leftValue, key) {                                         // 211
    if (_.has(right, key))                                                         // 212
      callbacks.both && callbacks.both(key, leftValue, right[key]);                // 213
    else                                                                           // 214
      callbacks.leftOnly && callbacks.leftOnly(key, leftValue);                    // 215
  });                                                                              // 216
  if (callbacks.rightOnly) {                                                       // 217
    _.each(right, function(rightValue, key) {                                      // 218
      if (!_.has(left, key))                                                       // 219
        callbacks.rightOnly(key, rightValue);                                      // 220
    });                                                                            // 221
  }                                                                                // 222
};                                                                                 // 223
                                                                                   // 224
                                                                                   // 225
DiffSequence.makeChangedFields = function (newDoc, oldDoc) {                       // 226
  var fields = {};                                                                 // 227
  DiffSequence.diffObjects(oldDoc, newDoc, {                                       // 228
    leftOnly: function (key, value) {                                              // 229
      fields[key] = undefined;                                                     // 230
    },                                                                             // 231
    rightOnly: function (key, value) {                                             // 232
      fields[key] = value;                                                         // 233
    },                                                                             // 234
    both: function (key, leftValue, rightValue) {                                  // 235
      if (!EJSON.equals(leftValue, rightValue))                                    // 236
        fields[key] = rightValue;                                                  // 237
    }                                                                              // 238
  });                                                                              // 239
  return fields;                                                                   // 240
};                                                                                 // 241
                                                                                   // 242
DiffSequence.applyChanges = function (doc, changeFields) {                         // 243
  _.each(changeFields, function (value, key) {                                     // 244
    if (value === undefined)                                                       // 245
      delete doc[key];                                                             // 246
    else                                                                           // 247
      doc[key] = value;                                                            // 248
  });                                                                              // 249
};                                                                                 // 250
                                                                                   // 251
                                                                                   // 252
/////////////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package['diff-sequence'] = {}, {
  DiffSequence: DiffSequence
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var EJSON = Package.ejson.EJSON;
var IdMap = Package['id-map'].IdMap;
var Random = Package.random.Random;

/* Package-scope variables */
var MongoID;

(function(){

////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                    //
// packages/mongo-id/id.js                                                                            //
//                                                                                                    //
////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                      //
MongoID = {};                                                                                         // 1
                                                                                                      // 2
MongoID._looksLikeObjectID = function (str) {                                                         // 3
  return str.length === 24 && str.match(/^[0-9a-f]*$/);                                               // 4
};                                                                                                    // 5
                                                                                                      // 6
MongoID.ObjectID = function (hexString) {                                                             // 7
  //random-based impl of Mongo ObjectID                                                               // 8
  var self = this;                                                                                    // 9
  if (hexString) {                                                                                    // 10
    hexString = hexString.toLowerCase();                                                              // 11
    if (!MongoID._looksLikeObjectID(hexString)) {                                                     // 12
      throw new Error("Invalid hexadecimal string for creating an ObjectID");                         // 13
    }                                                                                                 // 14
    // meant to work with _.isEqual(), which relies on structural equality                            // 15
    self._str = hexString;                                                                            // 16
  } else {                                                                                            // 17
    self._str = Random.hexString(24);                                                                 // 18
  }                                                                                                   // 19
};                                                                                                    // 20
                                                                                                      // 21
MongoID.ObjectID.prototype.toString = function () {                                                   // 22
  var self = this;                                                                                    // 23
  return "ObjectID(\"" + self._str + "\")";                                                           // 24
};                                                                                                    // 25
                                                                                                      // 26
MongoID.ObjectID.prototype.equals = function (other) {                                                // 27
  var self = this;                                                                                    // 28
  return other instanceof MongoID.ObjectID &&                                                         // 29
    self.valueOf() === other.valueOf();                                                               // 30
};                                                                                                    // 31
                                                                                                      // 32
MongoID.ObjectID.prototype.clone = function () {                                                      // 33
  var self = this;                                                                                    // 34
  return new MongoID.ObjectID(self._str);                                                             // 35
};                                                                                                    // 36
                                                                                                      // 37
MongoID.ObjectID.prototype.typeName = function() {                                                    // 38
  return "oid";                                                                                       // 39
};                                                                                                    // 40
                                                                                                      // 41
MongoID.ObjectID.prototype.getTimestamp = function() {                                                // 42
  var self = this;                                                                                    // 43
  return parseInt(self._str.substr(0, 8), 16);                                                        // 44
};                                                                                                    // 45
                                                                                                      // 46
MongoID.ObjectID.prototype.valueOf =                                                                  // 47
    MongoID.ObjectID.prototype.toJSONValue =                                                          // 48
    MongoID.ObjectID.prototype.toHexString =                                                          // 49
    function () { return this._str; };                                                                // 50
                                                                                                      // 51
EJSON.addType("oid",  function (str) {                                                                // 52
  return new MongoID.ObjectID(str);                                                                   // 53
});                                                                                                   // 54
                                                                                                      // 55
MongoID.idStringify = function (id) {                                                                 // 56
  if (id instanceof MongoID.ObjectID) {                                                               // 57
    return id.valueOf();                                                                              // 58
  } else if (typeof id === 'string') {                                                                // 59
    if (id === "") {                                                                                  // 60
      return id;                                                                                      // 61
    } else if (id.substr(0, 1) === "-" || // escape previously dashed strings                         // 62
               id.substr(0, 1) === "~" || // escape escaped numbers, true, false                      // 63
               MongoID._looksLikeObjectID(id) || // escape object-id-form strings                     // 64
               id.substr(0, 1) === '{') { // escape object-form strings, for maybe implementing later
      return "-" + id;                                                                                // 66
    } else {                                                                                          // 67
      return id; // other strings go through unchanged.                                               // 68
    }                                                                                                 // 69
  } else if (id === undefined) {                                                                      // 70
    return '-';                                                                                       // 71
  } else if (typeof id === 'object' && id !== null) {                                                 // 72
    throw new Error("Meteor does not currently support objects other than ObjectID as ids");          // 73
  } else { // Numbers, true, false, null                                                              // 74
    return "~" + JSON.stringify(id);                                                                  // 75
  }                                                                                                   // 76
};                                                                                                    // 77
                                                                                                      // 78
                                                                                                      // 79
MongoID.idParse = function (id) {                                                                     // 80
  if (id === "") {                                                                                    // 81
    return id;                                                                                        // 82
  } else if (id === '-') {                                                                            // 83
    return undefined;                                                                                 // 84
  } else if (id.substr(0, 1) === '-') {                                                               // 85
    return id.substr(1);                                                                              // 86
  } else if (id.substr(0, 1) === '~') {                                                               // 87
    return JSON.parse(id.substr(1));                                                                  // 88
  } else if (MongoID._looksLikeObjectID(id)) {                                                        // 89
    return new MongoID.ObjectID(id);                                                                  // 90
  } else {                                                                                            // 91
    return id;                                                                                        // 92
  }                                                                                                   // 93
};                                                                                                    // 94
                                                                                                      // 95
                                                                                                      // 96
////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package['mongo-id'] = {}, {
  MongoID: MongoID
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var check = Package.check.check;
var Match = Package.check.Match;
var Random = Package.random.Random;
var EJSON = Package.ejson.EJSON;
var _ = Package.underscore._;
var Tracker = Package.tracker.Tracker;
var Deps = Package.tracker.Deps;
var Retry = Package.retry.Retry;
var IdMap = Package['id-map'].IdMap;
var DDPCommon = Package['ddp-common'].DDPCommon;
var DiffSequence = Package['diff-sequence'].DiffSequence;
var MongoID = Package['mongo-id'].MongoID;
var meteorInstall = Package.modules.meteorInstall;
var Buffer = Package.modules.Buffer;
var process = Package.modules.process;
var Symbol = Package['ecmascript-runtime'].Symbol;
var Map = Package['ecmascript-runtime'].Map;
var Set = Package['ecmascript-runtime'].Set;
var meteorBabelHelpers = Package['babel-runtime'].meteorBabelHelpers;
var Promise = Package.promise.Promise;

/* Package-scope variables */
var SockJS, toSockjsUrl, toWebsocketUrl, allConnections, DDP;

var require = meteorInstall({"node_modules":{"meteor":{"ddp-client":{"sockjs-0.3.4.js":["babel-runtime/helpers/typeof",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/ddp-client/sockjs-0.3.4.js                                                                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _typeof2 = require("babel-runtime/helpers/typeof");                                                                //
                                                                                                                       //
var _typeof3 = _interopRequireDefault(_typeof2);                                                                       //
                                                                                                                       //
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }                      //
                                                                                                                       //
// XXX METEOR changes in <METEOR>                                                                                      // 1
/* SockJS client, version 0.3.4, http://sockjs.org, MIT License                                                        // 3
                                                                                                                       //
Copyright (c) 2011-2012 VMware, Inc.                                                                                   //
                                                                                                                       //
Permission is hereby granted, free of charge, to any person obtaining a copy                                           //
of this software and associated documentation files (the "Software"), to deal                                          //
in the Software without restriction, including without limitation the rights                                           //
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell                                              //
copies of the Software, and to permit persons to whom the Software is                                                  //
furnished to do so, subject to the following conditions:                                                               //
                                                                                                                       //
The above copyright notice and this permission notice shall be included in                                             //
all copies or substantial portions of the Software.                                                                    //
                                                                                                                       //
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR                                             //
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,                                               //
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE                                            //
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER                                                 //
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,                                          //
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN                                              //
THE SOFTWARE.                                                                                                          //
*/ // <METEOR> Commented out JSO implementation (use json package instead).                                            //
// JSON2 by Douglas Crockford (minified).                                                                              // 27
// var JSON;JSON||(JSON={}),function(){function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g;return e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)typeof rep[c]=="string"&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g;return e}}function quote(a){escapable.lastIndex=0;return escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function f(a){return a<10?"0"+a:a}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver=="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")})}()
// </METEOR>                                                                                                           // 29
//     [*] Including lib/index.js                                                                                      // 31
// Public object                                                                                                       // 32
SockJS = function () {                                                                                                 // 33
    var _document = document;                                                                                          // 34
    var _window = window;                                                                                              // 35
    var utils = {}; //         [*] Including lib/reventtarget.js                                                       // 36
    /*                                                                                                                 // 40
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */ /* Simplified implementation of DOM2 EventTarget.                                                              //
         *   http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget                                    //
         */                                                                                                            //
                                                                                                                       //
    var REventTarget = function () {};                                                                                 // 51
                                                                                                                       //
    REventTarget.prototype.addEventListener = function (eventType, listener) {                                         // 52
        if (!this._listeners) {                                                                                        // 53
            this._listeners = {};                                                                                      // 54
        }                                                                                                              // 55
                                                                                                                       //
        if (!(eventType in this._listeners)) {                                                                         // 56
            this._listeners[eventType] = [];                                                                           // 57
        }                                                                                                              // 58
                                                                                                                       //
        var arr = this._listeners[eventType];                                                                          // 59
                                                                                                                       //
        if (utils.arrIndexOf(arr, listener) === -1) {                                                                  // 60
            arr.push(listener);                                                                                        // 61
        }                                                                                                              // 62
                                                                                                                       //
        return;                                                                                                        // 63
    };                                                                                                                 // 64
                                                                                                                       //
    REventTarget.prototype.removeEventListener = function (eventType, listener) {                                      // 66
        if (!(this._listeners && eventType in this._listeners)) {                                                      // 67
            return;                                                                                                    // 68
        }                                                                                                              // 69
                                                                                                                       //
        var arr = this._listeners[eventType];                                                                          // 70
        var idx = utils.arrIndexOf(arr, listener);                                                                     // 71
                                                                                                                       //
        if (idx !== -1) {                                                                                              // 72
            if (arr.length > 1) {                                                                                      // 73
                this._listeners[eventType] = arr.slice(0, idx).concat(arr.slice(idx + 1));                             // 74
            } else {                                                                                                   // 75
                delete this._listeners[eventType];                                                                     // 76
            }                                                                                                          // 77
                                                                                                                       //
            return;                                                                                                    // 78
        }                                                                                                              // 79
                                                                                                                       //
        return;                                                                                                        // 80
    };                                                                                                                 // 81
                                                                                                                       //
    REventTarget.prototype.dispatchEvent = function (event) {                                                          // 83
        var t = event.type;                                                                                            // 84
        var args = Array.prototype.slice.call(arguments, 0);                                                           // 85
                                                                                                                       //
        if (this['on' + t]) {                                                                                          // 86
            this['on' + t].apply(this, args);                                                                          // 87
        }                                                                                                              // 88
                                                                                                                       //
        if (this._listeners && t in this._listeners) {                                                                 // 89
            for (var i = 0; i < this._listeners[t].length; i++) {                                                      // 90
                this._listeners[t][i].apply(this, args);                                                               // 91
            }                                                                                                          // 92
        }                                                                                                              // 93
    }; //         [*] End of lib/reventtarget.js                                                                       // 94
    //         [*] Including lib/simpleevent.js                                                                        // 98
    /*                                                                                                                 // 99
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */                                                                                                                //
                                                                                                                       //
    var SimpleEvent = function (type, obj) {                                                                           // 107
        this.type = type;                                                                                              // 108
                                                                                                                       //
        if (typeof obj !== 'undefined') {                                                                              // 109
            for (var k in meteorBabelHelpers.sanitizeForInObject(obj)) {                                               // 110
                if (!obj.hasOwnProperty(k)) continue;                                                                  // 111
                this[k] = obj[k];                                                                                      // 112
            }                                                                                                          // 113
        }                                                                                                              // 114
    };                                                                                                                 // 115
                                                                                                                       //
    SimpleEvent.prototype.toString = function () {                                                                     // 117
        var r = [];                                                                                                    // 118
                                                                                                                       //
        for (var k in meteorBabelHelpers.sanitizeForInObject(this)) {                                                  // 119
            if (!this.hasOwnProperty(k)) continue;                                                                     // 120
            var v = this[k];                                                                                           // 121
            if (typeof v === 'function') v = '[function]';                                                             // 122
            r.push(k + '=' + v);                                                                                       // 123
        }                                                                                                              // 124
                                                                                                                       //
        return 'SimpleEvent(' + r.join(', ') + ')';                                                                    // 125
    }; //         [*] End of lib/simpleevent.js                                                                        // 126
    //         [*] Including lib/eventemitter.js                                                                       // 130
    /*                                                                                                                 // 131
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */                                                                                                                //
                                                                                                                       //
    var EventEmitter = function (events) {                                                                             // 139
        var that = this;                                                                                               // 140
        that._events = events || [];                                                                                   // 141
        that._listeners = {};                                                                                          // 142
    };                                                                                                                 // 143
                                                                                                                       //
    EventEmitter.prototype.emit = function (type) {                                                                    // 144
        var that = this;                                                                                               // 145
                                                                                                                       //
        that._verifyType(type);                                                                                        // 146
                                                                                                                       //
        if (that._nuked) return;                                                                                       // 147
        var args = Array.prototype.slice.call(arguments, 1);                                                           // 149
                                                                                                                       //
        if (that['on' + type]) {                                                                                       // 150
            that['on' + type].apply(that, args);                                                                       // 151
        }                                                                                                              // 152
                                                                                                                       //
        if (type in that._listeners) {                                                                                 // 153
            for (var i = 0; i < that._listeners[type].length; i++) {                                                   // 154
                that._listeners[type][i].apply(that, args);                                                            // 155
            }                                                                                                          // 156
        }                                                                                                              // 157
    };                                                                                                                 // 158
                                                                                                                       //
    EventEmitter.prototype.on = function (type, callback) {                                                            // 160
        var that = this;                                                                                               // 161
                                                                                                                       //
        that._verifyType(type);                                                                                        // 162
                                                                                                                       //
        if (that._nuked) return;                                                                                       // 163
                                                                                                                       //
        if (!(type in that._listeners)) {                                                                              // 165
            that._listeners[type] = [];                                                                                // 166
        }                                                                                                              // 167
                                                                                                                       //
        that._listeners[type].push(callback);                                                                          // 168
    };                                                                                                                 // 169
                                                                                                                       //
    EventEmitter.prototype._verifyType = function (type) {                                                             // 171
        var that = this;                                                                                               // 172
                                                                                                                       //
        if (utils.arrIndexOf(that._events, type) === -1) {                                                             // 173
            utils.log('Event ' + JSON.stringify(type) + ' not listed ' + JSON.stringify(that._events) + ' in ' + that);
        }                                                                                                              // 177
    };                                                                                                                 // 178
                                                                                                                       //
    EventEmitter.prototype.nuke = function () {                                                                        // 180
        var that = this;                                                                                               // 181
        that._nuked = true;                                                                                            // 182
                                                                                                                       //
        for (var i = 0; i < that._events.length; i++) {                                                                // 183
            delete that[that._events[i]];                                                                              // 184
        }                                                                                                              // 185
                                                                                                                       //
        that._listeners = {};                                                                                          // 186
    }; //         [*] End of lib/eventemitter.js                                                                       // 187
    //         [*] Including lib/utils.js                                                                              // 191
    /*                                                                                                                 // 192
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */                                                                                                                //
                                                                                                                       //
    var random_string_chars = 'abcdefghijklmnopqrstuvwxyz0123456789_';                                                 // 200
                                                                                                                       //
    utils.random_string = function (length, max) {                                                                     // 201
        max = max || random_string_chars.length;                                                                       // 202
        var i,                                                                                                         // 203
            ret = [];                                                                                                  // 203
                                                                                                                       //
        for (i = 0; i < length; i++) {                                                                                 // 204
            ret.push(random_string_chars.substr(Math.floor(Math.random() * max), 1));                                  // 205
        }                                                                                                              // 206
                                                                                                                       //
        return ret.join('');                                                                                           // 207
    };                                                                                                                 // 208
                                                                                                                       //
    utils.random_number = function (max) {                                                                             // 209
        return Math.floor(Math.random() * max);                                                                        // 210
    };                                                                                                                 // 211
                                                                                                                       //
    utils.random_number_string = function (max) {                                                                      // 212
        var t = ('' + (max - 1)).length;                                                                               // 213
        var p = Array(t + 1).join('0');                                                                                // 214
        return (p + utils.random_number(max)).slice(-t);                                                               // 215
    }; // Assuming that url looks like: http://asdasd:111/asd                                                          // 216
                                                                                                                       //
                                                                                                                       //
    utils.getOrigin = function (url) {                                                                                 // 219
        url += '/';                                                                                                    // 220
        var parts = url.split('/').slice(0, 3);                                                                        // 221
        return parts.join('/');                                                                                        // 222
    };                                                                                                                 // 223
                                                                                                                       //
    utils.isSameOriginUrl = function (url_a, url_b) {                                                                  // 225
        // location.origin would do, but it's not always available.                                                    // 226
        if (!url_b) url_b = _window.location.href;                                                                     // 227
        return url_a.split('/').slice(0, 3).join('/') === url_b.split('/').slice(0, 3).join('/');                      // 229
    }; // <METEOR>                                                                                                     // 232
    // https://github.com/sockjs/sockjs-client/issues/79                                                               // 235
                                                                                                                       //
                                                                                                                       //
    utils.isSameOriginScheme = function (url_a, url_b) {                                                               // 236
        if (!url_b) url_b = _window.location.href;                                                                     // 237
        return url_a.split(':')[0] === url_b.split(':')[0];                                                            // 239
    }; // </METEOR>                                                                                                    // 242
                                                                                                                       //
                                                                                                                       //
    utils.getParentDomain = function (url) {                                                                           // 246
        // ipv4 ip address                                                                                             // 247
        if (/^[0-9.]*$/.test(url)) return url; // ipv6 ip address                                                      // 248
                                                                                                                       //
        if (/^\[/.test(url)) return url; // no dots                                                                    // 250
                                                                                                                       //
        if (!/[.]/.test(url)) return url;                                                                              // 252
        var parts = url.split('.').slice(1);                                                                           // 254
        return parts.join('.');                                                                                        // 255
    };                                                                                                                 // 256
                                                                                                                       //
    utils.objectExtend = function (dst, src) {                                                                         // 258
        for (var k in meteorBabelHelpers.sanitizeForInObject(src)) {                                                   // 259
            if (src.hasOwnProperty(k)) {                                                                               // 260
                dst[k] = src[k];                                                                                       // 261
            }                                                                                                          // 262
        }                                                                                                              // 263
                                                                                                                       //
        return dst;                                                                                                    // 264
    };                                                                                                                 // 265
                                                                                                                       //
    var WPrefix = '_jp';                                                                                               // 267
                                                                                                                       //
    utils.polluteGlobalNamespace = function () {                                                                       // 269
        if (!(WPrefix in _window)) {                                                                                   // 270
            _window[WPrefix] = {};                                                                                     // 271
        }                                                                                                              // 272
    };                                                                                                                 // 273
                                                                                                                       //
    utils.closeFrame = function (code, reason) {                                                                       // 275
        return 'c' + JSON.stringify([code, reason]);                                                                   // 276
    };                                                                                                                 // 277
                                                                                                                       //
    utils.userSetCode = function (code) {                                                                              // 279
        return code === 1000 || code >= 3000 && code <= 4999;                                                          // 280
    }; // See: http://www.erg.abdn.ac.uk/~gerrit/dccp/notes/ccid2/rto_estimator/                                       // 281
    // and RFC 2988.                                                                                                   // 284
                                                                                                                       //
                                                                                                                       //
    utils.countRTO = function (rtt) {                                                                                  // 285
        var rto;                                                                                                       // 286
                                                                                                                       //
        if (rtt > 100) {                                                                                               // 287
            rto = 3 * rtt; // rto > 300msec                                                                            // 288
        } else {                                                                                                       // 289
            rto = rtt + 200; // 200msec < rto <= 300msec                                                               // 290
        }                                                                                                              // 291
                                                                                                                       //
        return rto;                                                                                                    // 292
    };                                                                                                                 // 293
                                                                                                                       //
    utils.log = function () {                                                                                          // 295
        if (_window.console && console.log && console.log.apply) {                                                     // 296
            console.log.apply(console, arguments);                                                                     // 297
        }                                                                                                              // 298
    };                                                                                                                 // 299
                                                                                                                       //
    utils.bind = function (fun, that) {                                                                                // 301
        if (fun.bind) {                                                                                                // 302
            return fun.bind(that);                                                                                     // 303
        } else {                                                                                                       // 304
            return function () {                                                                                       // 305
                return fun.apply(that, arguments);                                                                     // 306
            };                                                                                                         // 307
        }                                                                                                              // 308
    };                                                                                                                 // 309
                                                                                                                       //
    utils.flatUrl = function (url) {                                                                                   // 311
        return url.indexOf('?') === -1 && url.indexOf('#') === -1;                                                     // 312
    }; // `relativeTo` is an optional absolute URL. If provided, `url` will be                                         // 313
    // interpreted relative to `relativeTo`. Defaults to `document.location`.                                          // 316
    // <METEOR>                                                                                                        // 317
                                                                                                                       //
                                                                                                                       //
    utils.amendUrl = function (url, relativeTo) {                                                                      // 318
        var baseUrl;                                                                                                   // 319
                                                                                                                       //
        if (relativeTo === undefined) {                                                                                // 320
            baseUrl = _document.location;                                                                              // 321
        } else {                                                                                                       // 322
            var protocolMatch = /^([a-z0-9.+-]+:)/i.exec(relativeTo);                                                  // 323
                                                                                                                       //
            if (protocolMatch) {                                                                                       // 324
                var protocol = protocolMatch[0].toLowerCase();                                                         // 325
                var rest = relativeTo.substring(protocol.length);                                                      // 326
                var hostMatch = /[a-z0-9\.-]+(:[0-9]+)?/.exec(rest);                                                   // 327
                if (hostMatch) var host = hostMatch[0];                                                                // 328
            }                                                                                                          // 330
                                                                                                                       //
            if (!protocol || !host) throw new Error("relativeTo must be an absolute url");                             // 331
            baseUrl = {                                                                                                // 333
                protocol: protocol,                                                                                    // 334
                host: host                                                                                             // 335
            };                                                                                                         // 333
        }                                                                                                              // 337
                                                                                                                       //
        if (!url) {                                                                                                    // 338
            throw new Error('Wrong url for SockJS');                                                                   // 339
        }                                                                                                              // 340
                                                                                                                       //
        if (!utils.flatUrl(url)) {                                                                                     // 341
            throw new Error('Only basic urls are supported in SockJS');                                                // 342
        } //  '//abc' --> 'http://abc'                                                                                 // 343
                                                                                                                       //
                                                                                                                       //
        if (url.indexOf('//') === 0) {                                                                                 // 346
            url = baseUrl.protocol + url;                                                                              // 347
        } // '/abc' --> 'http://localhost:1234/abc'                                                                    // 348
                                                                                                                       //
                                                                                                                       //
        if (url.indexOf('/') === 0) {                                                                                  // 350
            url = baseUrl.protocol + '//' + baseUrl.host + url;                                                        // 351
        } // </METEOR>                                                                                                 // 352
        // strip trailing slashes                                                                                      // 354
                                                                                                                       //
                                                                                                                       //
        url = url.replace(/[/]+$/, ''); // We have a full url here, with proto and host. For some browsers             // 355
        // http://localhost:80/ is not in the same origin as http://localhost/                                         // 358
        // Remove explicit :80 or :443 in such cases. See #74                                                          // 359
                                                                                                                       //
        var parts = url.split("/");                                                                                    // 360
                                                                                                                       //
        if (parts[0] === "http:" && /:80$/.test(parts[2]) || parts[0] === "https:" && /:443$/.test(parts[2])) {        // 361
            parts[2] = parts[2].replace(/:(80|443)$/, "");                                                             // 363
        }                                                                                                              // 364
                                                                                                                       //
        url = parts.join("/");                                                                                         // 365
        return url;                                                                                                    // 366
    }; // IE doesn't support [].indexOf.                                                                               // 367
                                                                                                                       //
                                                                                                                       //
    utils.arrIndexOf = function (arr, obj) {                                                                           // 370
        for (var i = 0; i < arr.length; i++) {                                                                         // 371
            if (arr[i] === obj) {                                                                                      // 372
                return i;                                                                                              // 373
            }                                                                                                          // 374
        }                                                                                                              // 375
                                                                                                                       //
        return -1;                                                                                                     // 376
    };                                                                                                                 // 377
                                                                                                                       //
    utils.arrSkip = function (arr, obj) {                                                                              // 379
        var idx = utils.arrIndexOf(arr, obj);                                                                          // 380
                                                                                                                       //
        if (idx === -1) {                                                                                              // 381
            return arr.slice();                                                                                        // 382
        } else {                                                                                                       // 383
            var dst = arr.slice(0, idx);                                                                               // 384
            return dst.concat(arr.slice(idx + 1));                                                                     // 385
        }                                                                                                              // 386
    }; // Via: https://gist.github.com/1133122/2121c601c5549155483f50be3da5305e83b8c5df                                // 387
                                                                                                                       //
                                                                                                                       //
    utils.isArray = Array.isArray || function (value) {                                                                // 390
        return {}.toString.call(value).indexOf('Array') >= 0;                                                          // 391
    };                                                                                                                 // 392
                                                                                                                       //
    utils.delay = function (t, fun) {                                                                                  // 394
        if (typeof t === 'function') {                                                                                 // 395
            fun = t;                                                                                                   // 396
            t = 0;                                                                                                     // 397
        }                                                                                                              // 398
                                                                                                                       //
        return setTimeout(fun, t);                                                                                     // 399
    }; // Chars worth escaping, as defined by Douglas Crockford:                                                       // 400
    //   https://github.com/douglascrockford/JSON-js/blob/47a9882cddeb1e8529e07af9736218075372b8ac/json2.js#L196       // 404
                                                                                                                       //
                                                                                                                       //
    var json_escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
        json_lookup = {                                                                                                // 405
        "\0": "\\u0000",                                                                                               // 407
        "\x01": "\\u0001",                                                                                             // 407
        "\x02": "\\u0002",                                                                                             // 407
        "\x03": "\\u0003",                                                                                             // 407
        "\x04": "\\u0004",                                                                                             // 408
        "\x05": "\\u0005",                                                                                             // 408
        "\x06": "\\u0006",                                                                                             // 408
        "\x07": "\\u0007",                                                                                             // 408
        "\b": "\\b",                                                                                                   // 409
        "\t": "\\t",                                                                                                   // 409
        "\n": "\\n",                                                                                                   // 409
        "\x0B": "\\u000b",                                                                                             // 409
        "\f": "\\f",                                                                                                   // 409
        "\r": "\\r",                                                                                                   // 409
        "\x0E": "\\u000e",                                                                                             // 410
        "\x0F": "\\u000f",                                                                                             // 410
        "\x10": "\\u0010",                                                                                             // 410
        "\x11": "\\u0011",                                                                                             // 410
        "\x12": "\\u0012",                                                                                             // 411
        "\x13": "\\u0013",                                                                                             // 411
        "\x14": "\\u0014",                                                                                             // 411
        "\x15": "\\u0015",                                                                                             // 411
        "\x16": "\\u0016",                                                                                             // 412
        "\x17": "\\u0017",                                                                                             // 412
        "\x18": "\\u0018",                                                                                             // 412
        "\x19": "\\u0019",                                                                                             // 412
        "\x1A": "\\u001a",                                                                                             // 413
        "\x1B": "\\u001b",                                                                                             // 413
        "\x1C": "\\u001c",                                                                                             // 413
        "\x1D": "\\u001d",                                                                                             // 413
        "\x1E": "\\u001e",                                                                                             // 414
        "\x1F": "\\u001f",                                                                                             // 414
        "\"": "\\\"",                                                                                                  // 414
        "\\": "\\\\",                                                                                                  // 414
        "\x7F": "\\u007f",                                                                                             // 415
        "\x80": "\\u0080",                                                                                             // 415
        "\x81": "\\u0081",                                                                                             // 415
        "\x82": "\\u0082",                                                                                             // 415
        "\x83": "\\u0083",                                                                                             // 416
        "\x84": "\\u0084",                                                                                             // 416
        "\x85": "\\u0085",                                                                                             // 416
        "\x86": "\\u0086",                                                                                             // 416
        "\x87": "\\u0087",                                                                                             // 417
        "\x88": "\\u0088",                                                                                             // 417
        "\x89": "\\u0089",                                                                                             // 417
        "\x8A": "\\u008a",                                                                                             // 417
        "\x8B": "\\u008b",                                                                                             // 418
        "\x8C": "\\u008c",                                                                                             // 418
        "\x8D": "\\u008d",                                                                                             // 418
        "\x8E": "\\u008e",                                                                                             // 418
        "\x8F": "\\u008f",                                                                                             // 419
        "\x90": "\\u0090",                                                                                             // 419
        "\x91": "\\u0091",                                                                                             // 419
        "\x92": "\\u0092",                                                                                             // 419
        "\x93": "\\u0093",                                                                                             // 420
        "\x94": "\\u0094",                                                                                             // 420
        "\x95": "\\u0095",                                                                                             // 420
        "\x96": "\\u0096",                                                                                             // 420
        "\x97": "\\u0097",                                                                                             // 421
        "\x98": "\\u0098",                                                                                             // 421
        "\x99": "\\u0099",                                                                                             // 421
        "\x9A": "\\u009a",                                                                                             // 421
        "\x9B": "\\u009b",                                                                                             // 422
        "\x9C": "\\u009c",                                                                                             // 422
        "\x9D": "\\u009d",                                                                                             // 422
        "\x9E": "\\u009e",                                                                                             // 422
        "\x9F": "\\u009f",                                                                                             // 423
        "\xAD": "\\u00ad",                                                                                             // 423
        "\u0600": "\\u0600",                                                                                           // 423
        "\u0601": "\\u0601",                                                                                           // 423
        "\u0602": "\\u0602",                                                                                           // 424
        "\u0603": "\\u0603",                                                                                           // 424
        "\u0604": "\\u0604",                                                                                           // 424
        "\u070F": "\\u070f",                                                                                           // 424
        "\u17B4": "\\u17b4",                                                                                           // 425
        "\u17B5": "\\u17b5",                                                                                           // 425
        "\u200C": "\\u200c",                                                                                           // 425
        "\u200D": "\\u200d",                                                                                           // 425
        "\u200E": "\\u200e",                                                                                           // 426
        "\u200F": "\\u200f",                                                                                           // 426
        "\u2028": "\\u2028",                                                                                           // 426
        "\u2029": "\\u2029",                                                                                           // 426
        "\u202A": "\\u202a",                                                                                           // 427
        "\u202B": "\\u202b",                                                                                           // 427
        "\u202C": "\\u202c",                                                                                           // 427
        "\u202D": "\\u202d",                                                                                           // 427
        "\u202E": "\\u202e",                                                                                           // 428
        "\u202F": "\\u202f",                                                                                           // 428
        "\u2060": "\\u2060",                                                                                           // 428
        "\u2061": "\\u2061",                                                                                           // 428
        "\u2062": "\\u2062",                                                                                           // 429
        "\u2063": "\\u2063",                                                                                           // 429
        "\u2064": "\\u2064",                                                                                           // 429
        "\u2065": "\\u2065",                                                                                           // 429
        "\u2066": "\\u2066",                                                                                           // 430
        "\u2067": "\\u2067",                                                                                           // 430
        "\u2068": "\\u2068",                                                                                           // 430
        "\u2069": "\\u2069",                                                                                           // 430
        "\u206A": "\\u206a",                                                                                           // 431
        "\u206B": "\\u206b",                                                                                           // 431
        "\u206C": "\\u206c",                                                                                           // 431
        "\u206D": "\\u206d",                                                                                           // 431
        "\u206E": "\\u206e",                                                                                           // 432
        "\u206F": "\\u206f",                                                                                           // 432
        "\uFEFF": "\\ufeff",                                                                                           // 432
        "\uFFF0": "\\ufff0",                                                                                           // 432
        "\uFFF1": "\\ufff1",                                                                                           // 433
        "\uFFF2": "\\ufff2",                                                                                           // 433
        "\uFFF3": "\\ufff3",                                                                                           // 433
        "\uFFF4": "\\ufff4",                                                                                           // 433
        "\uFFF5": "\\ufff5",                                                                                           // 434
        "\uFFF6": "\\ufff6",                                                                                           // 434
        "\uFFF7": "\\ufff7",                                                                                           // 434
        "\uFFF8": "\\ufff8",                                                                                           // 434
        "\uFFF9": "\\ufff9",                                                                                           // 435
        "\uFFFA": "\\ufffa",                                                                                           // 435
        "\uFFFB": "\\ufffb",                                                                                           // 435
        "\uFFFC": "\\ufffc",                                                                                           // 435
        "\uFFFD": "\\ufffd",                                                                                           // 436
        "\uFFFE": "\\ufffe",                                                                                           // 436
        "\uFFFF": "\\uffff"                                                                                            // 436
    }; // Some extra characters that Chrome gets wrong, and substitutes with                                           // 406
    // something else on the wire.                                                                                     // 439
                                                                                                                       //
    var extra_escapable = /[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,
        extra_lookup; // JSON Quote string. Use native implementation when possible.                                   // 440
                                                                                                                       //
    var JSONQuote = JSON && JSON.stringify || function (string) {                                                      // 444
        json_escapable.lastIndex = 0;                                                                                  // 445
                                                                                                                       //
        if (json_escapable.test(string)) {                                                                             // 446
            string = string.replace(json_escapable, function (a) {                                                     // 447
                return json_lookup[a];                                                                                 // 448
            });                                                                                                        // 449
        }                                                                                                              // 450
                                                                                                                       //
        return '"' + string + '"';                                                                                     // 451
    }; // This may be quite slow, so let's delay until user actually uses bad                                          // 452
    // characters.                                                                                                     // 455
                                                                                                                       //
                                                                                                                       //
    var unroll_lookup = function (escapable) {                                                                         // 456
        var i;                                                                                                         // 457
        var unrolled = {};                                                                                             // 458
        var c = [];                                                                                                    // 459
                                                                                                                       //
        for (i = 0; i < 65536; i++) {                                                                                  // 460
            c.push(String.fromCharCode(i));                                                                            // 461
        }                                                                                                              // 462
                                                                                                                       //
        escapable.lastIndex = 0;                                                                                       // 463
        c.join('').replace(escapable, function (a) {                                                                   // 464
            unrolled[a] = "\\u" + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);                                   // 465
            return '';                                                                                                 // 466
        });                                                                                                            // 467
        escapable.lastIndex = 0;                                                                                       // 468
        return unrolled;                                                                                               // 469
    }; // Quote string, also taking care of unicode characters that browsers                                           // 470
    // often break. Especially, take care of unicode surrogates:                                                       // 473
    //    http://en.wikipedia.org/wiki/Mapping_of_Unicode_characters#Surrogates                                        // 474
                                                                                                                       //
                                                                                                                       //
    utils.quote = function (string) {                                                                                  // 475
        var quoted = JSONQuote(string); // In most cases this should be very fast and good enough.                     // 476
                                                                                                                       //
        extra_escapable.lastIndex = 0;                                                                                 // 479
                                                                                                                       //
        if (!extra_escapable.test(quoted)) {                                                                           // 480
            return quoted;                                                                                             // 481
        }                                                                                                              // 482
                                                                                                                       //
        if (!extra_lookup) extra_lookup = unroll_lookup(extra_escapable);                                              // 484
        return quoted.replace(extra_escapable, function (a) {                                                          // 486
            return extra_lookup[a];                                                                                    // 487
        });                                                                                                            // 488
    };                                                                                                                 // 489
                                                                                                                       //
    var _all_protocols = ['websocket', 'xdr-streaming', 'xhr-streaming', 'iframe-eventsource', 'iframe-htmlfile', 'xdr-polling', 'xhr-polling', 'iframe-xhr-polling', 'jsonp-polling'];
                                                                                                                       //
    utils.probeProtocols = function () {                                                                               // 501
        var probed = {};                                                                                               // 502
                                                                                                                       //
        for (var i = 0; i < _all_protocols.length; i++) {                                                              // 503
            var protocol = _all_protocols[i]; // User can have a typo in protocol name.                                // 504
                                                                                                                       //
            probed[protocol] = SockJS[protocol] && SockJS[protocol].enabled();                                         // 506
        }                                                                                                              // 508
                                                                                                                       //
        return probed;                                                                                                 // 509
    };                                                                                                                 // 510
                                                                                                                       //
    utils.detectProtocols = function (probed, protocols_whitelist, info) {                                             // 512
        var pe = {},                                                                                                   // 513
            protocols = [];                                                                                            // 513
        if (!protocols_whitelist) protocols_whitelist = _all_protocols;                                                // 515
                                                                                                                       //
        for (var i = 0; i < protocols_whitelist.length; i++) {                                                         // 516
            var protocol = protocols_whitelist[i];                                                                     // 517
            pe[protocol] = probed[protocol];                                                                           // 518
        }                                                                                                              // 519
                                                                                                                       //
        var maybe_push = function (protos) {                                                                           // 520
            var proto = protos.shift();                                                                                // 521
                                                                                                                       //
            if (pe[proto]) {                                                                                           // 522
                protocols.push(proto);                                                                                 // 523
            } else {                                                                                                   // 524
                if (protos.length > 0) {                                                                               // 525
                    maybe_push(protos);                                                                                // 526
                }                                                                                                      // 527
            }                                                                                                          // 528
        }; // 1. Websocket                                                                                             // 529
                                                                                                                       //
                                                                                                                       //
        if (info.websocket !== false) {                                                                                // 532
            maybe_push(['websocket']);                                                                                 // 533
        } // 2. Streaming                                                                                              // 534
                                                                                                                       //
                                                                                                                       //
        if (pe['xhr-streaming'] && !info.null_origin) {                                                                // 537
            protocols.push('xhr-streaming');                                                                           // 538
        } else {                                                                                                       // 539
            if (pe['xdr-streaming'] && !info.cookie_needed && !info.null_origin) {                                     // 540
                protocols.push('xdr-streaming');                                                                       // 541
            } else {                                                                                                   // 542
                maybe_push(['iframe-eventsource', 'iframe-htmlfile']);                                                 // 543
            }                                                                                                          // 545
        } // 3. Polling                                                                                                // 546
                                                                                                                       //
                                                                                                                       //
        if (pe['xhr-polling'] && !info.null_origin) {                                                                  // 549
            protocols.push('xhr-polling');                                                                             // 550
        } else {                                                                                                       // 551
            if (pe['xdr-polling'] && !info.cookie_needed && !info.null_origin) {                                       // 552
                protocols.push('xdr-polling');                                                                         // 553
            } else {                                                                                                   // 554
                maybe_push(['iframe-xhr-polling', 'jsonp-polling']);                                                   // 555
            }                                                                                                          // 557
        }                                                                                                              // 558
                                                                                                                       //
        return protocols;                                                                                              // 559
    }; //         [*] End of lib/utils.js                                                                              // 560
    //         [*] Including lib/dom.js                                                                                // 564
    /*                                                                                                                 // 565
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */ // May be used by htmlfile jsonp and transports.                                                               //
                                                                                                                       //
                                                                                                                       //
    var MPrefix = '_sockjs_global';                                                                                    // 574
                                                                                                                       //
    utils.createHook = function () {                                                                                   // 575
        var window_id = 'a' + utils.random_string(8);                                                                  // 576
                                                                                                                       //
        if (!(MPrefix in _window)) {                                                                                   // 577
            var map = {};                                                                                              // 578
                                                                                                                       //
            _window[MPrefix] = function (window_id) {                                                                  // 579
                if (!(window_id in map)) {                                                                             // 580
                    map[window_id] = {                                                                                 // 581
                        id: window_id,                                                                                 // 582
                        del: function () {                                                                             // 583
                            delete map[window_id];                                                                     // 583
                        }                                                                                              // 583
                    };                                                                                                 // 581
                }                                                                                                      // 585
                                                                                                                       //
                return map[window_id];                                                                                 // 586
            };                                                                                                         // 587
        }                                                                                                              // 588
                                                                                                                       //
        return _window[MPrefix](window_id);                                                                            // 589
    };                                                                                                                 // 590
                                                                                                                       //
    utils.attachMessage = function (listener) {                                                                        // 594
        utils.attachEvent('message', listener);                                                                        // 595
    };                                                                                                                 // 596
                                                                                                                       //
    utils.attachEvent = function (event, listener) {                                                                   // 597
        if (typeof _window.addEventListener !== 'undefined') {                                                         // 598
            _window.addEventListener(event, listener, false);                                                          // 599
        } else {                                                                                                       // 600
            // IE quirks.                                                                                              // 601
            // According to: http://stevesouders.com/misc/test-postmessage.php                                         // 602
            // the message gets delivered only to 'document', not 'window'.                                            // 603
            _document.attachEvent("on" + event, listener); // I get 'window' for ie8.                                  // 604
                                                                                                                       //
                                                                                                                       //
            _window.attachEvent("on" + event, listener);                                                               // 606
        }                                                                                                              // 607
    };                                                                                                                 // 608
                                                                                                                       //
    utils.detachMessage = function (listener) {                                                                        // 610
        utils.detachEvent('message', listener);                                                                        // 611
    };                                                                                                                 // 612
                                                                                                                       //
    utils.detachEvent = function (event, listener) {                                                                   // 613
        if (typeof _window.addEventListener !== 'undefined') {                                                         // 614
            _window.removeEventListener(event, listener, false);                                                       // 615
        } else {                                                                                                       // 616
            _document.detachEvent("on" + event, listener);                                                             // 617
                                                                                                                       //
            _window.detachEvent("on" + event, listener);                                                               // 618
        }                                                                                                              // 619
    };                                                                                                                 // 620
                                                                                                                       //
    var on_unload = {}; // Things registered after beforeunload are to be called immediately.                          // 623
                                                                                                                       //
    var after_unload = false;                                                                                          // 625
                                                                                                                       //
    var trigger_unload_callbacks = function () {                                                                       // 627
        for (var ref in meteorBabelHelpers.sanitizeForInObject(on_unload)) {                                           // 628
            on_unload[ref]();                                                                                          // 629
            delete on_unload[ref];                                                                                     // 630
        }                                                                                                              // 631
                                                                                                                       //
        ;                                                                                                              // 631
    };                                                                                                                 // 632
                                                                                                                       //
    var unload_triggered = function () {                                                                               // 634
        if (after_unload) return;                                                                                      // 635
        after_unload = true;                                                                                           // 636
        trigger_unload_callbacks();                                                                                    // 637
    }; // 'unload' alone is not reliable in opera within an iframe, but we                                             // 638
    // can't use `beforeunload` as IE fires it on javascript: links.                                                   // 641
                                                                                                                       //
                                                                                                                       //
    utils.attachEvent('unload', unload_triggered);                                                                     // 642
                                                                                                                       //
    utils.unload_add = function (listener) {                                                                           // 644
        var ref = utils.random_string(8);                                                                              // 645
        on_unload[ref] = listener;                                                                                     // 646
                                                                                                                       //
        if (after_unload) {                                                                                            // 647
            utils.delay(trigger_unload_callbacks);                                                                     // 648
        }                                                                                                              // 649
                                                                                                                       //
        return ref;                                                                                                    // 650
    };                                                                                                                 // 651
                                                                                                                       //
    utils.unload_del = function (ref) {                                                                                // 652
        if (ref in on_unload) delete on_unload[ref];                                                                   // 653
    };                                                                                                                 // 655
                                                                                                                       //
    utils.createIframe = function (iframe_url, error_callback) {                                                       // 658
        var iframe = _document.createElement('iframe');                                                                // 659
                                                                                                                       //
        var tref, unload_ref;                                                                                          // 660
                                                                                                                       //
        var unattach = function () {                                                                                   // 661
            clearTimeout(tref); // Explorer had problems with that.                                                    // 662
                                                                                                                       //
            try {                                                                                                      // 664
                iframe.onload = null;                                                                                  // 664
            } catch (x) {}                                                                                             // 664
                                                                                                                       //
            iframe.onerror = null;                                                                                     // 665
        };                                                                                                             // 666
                                                                                                                       //
        var cleanup = function () {                                                                                    // 667
            if (iframe) {                                                                                              // 668
                unattach(); // This timeout makes chrome fire onbeforeunload event                                     // 669
                // within iframe. Without the timeout it goes straight to                                              // 671
                // onunload.                                                                                           // 672
                                                                                                                       //
                setTimeout(function () {                                                                               // 673
                    if (iframe) {                                                                                      // 674
                        iframe.parentNode.removeChild(iframe);                                                         // 675
                    }                                                                                                  // 676
                                                                                                                       //
                    iframe = null;                                                                                     // 677
                }, 0);                                                                                                 // 678
                utils.unload_del(unload_ref);                                                                          // 679
            }                                                                                                          // 680
        };                                                                                                             // 681
                                                                                                                       //
        var onerror = function (r) {                                                                                   // 682
            if (iframe) {                                                                                              // 683
                cleanup();                                                                                             // 684
                error_callback(r);                                                                                     // 685
            }                                                                                                          // 686
        };                                                                                                             // 687
                                                                                                                       //
        var post = function (msg, origin) {                                                                            // 688
            try {                                                                                                      // 689
                // When the iframe is not loaded, IE raises an exception                                               // 690
                // on 'contentWindow'.                                                                                 // 691
                if (iframe && iframe.contentWindow) {                                                                  // 692
                    iframe.contentWindow.postMessage(msg, origin);                                                     // 693
                }                                                                                                      // 694
            } catch (x) {}                                                                                             // 695
                                                                                                                       //
            ;                                                                                                          // 695
        };                                                                                                             // 696
                                                                                                                       //
        iframe.src = iframe_url;                                                                                       // 698
        iframe.style.display = 'none';                                                                                 // 699
        iframe.style.position = 'absolute';                                                                            // 700
                                                                                                                       //
        iframe.onerror = function () {                                                                                 // 701
            onerror('onerror');                                                                                        // 701
        };                                                                                                             // 701
                                                                                                                       //
        iframe.onload = function () {                                                                                  // 702
            // `onload` is triggered before scripts on the iframe are                                                  // 703
            // executed. Give it few seconds to actually load stuff.                                                   // 704
            clearTimeout(tref);                                                                                        // 705
            tref = setTimeout(function () {                                                                            // 706
                onerror('onload timeout');                                                                             // 706
            }, 2000);                                                                                                  // 706
        };                                                                                                             // 707
                                                                                                                       //
        _document.body.appendChild(iframe);                                                                            // 708
                                                                                                                       //
        tref = setTimeout(function () {                                                                                // 709
            onerror('timeout');                                                                                        // 709
        }, 15000);                                                                                                     // 709
        unload_ref = utils.unload_add(cleanup);                                                                        // 710
        return {                                                                                                       // 711
            post: post,                                                                                                // 712
            cleanup: cleanup,                                                                                          // 713
            loaded: unattach                                                                                           // 714
        };                                                                                                             // 711
    };                                                                                                                 // 716
                                                                                                                       //
    utils.createHtmlfile = function (iframe_url, error_callback) {                                                     // 718
        var doc = new ActiveXObject('htmlfile');                                                                       // 719
        var tref, unload_ref;                                                                                          // 720
        var iframe;                                                                                                    // 721
                                                                                                                       //
        var unattach = function () {                                                                                   // 722
            clearTimeout(tref);                                                                                        // 723
        };                                                                                                             // 724
                                                                                                                       //
        var cleanup = function () {                                                                                    // 725
            if (doc) {                                                                                                 // 726
                unattach();                                                                                            // 727
                utils.unload_del(unload_ref);                                                                          // 728
                iframe.parentNode.removeChild(iframe);                                                                 // 729
                iframe = doc = null;                                                                                   // 730
                CollectGarbage();                                                                                      // 731
            }                                                                                                          // 732
        };                                                                                                             // 733
                                                                                                                       //
        var onerror = function (r) {                                                                                   // 734
            if (doc) {                                                                                                 // 735
                cleanup();                                                                                             // 736
                error_callback(r);                                                                                     // 737
            }                                                                                                          // 738
        };                                                                                                             // 739
                                                                                                                       //
        var post = function (msg, origin) {                                                                            // 740
            try {                                                                                                      // 741
                // When the iframe is not loaded, IE raises an exception                                               // 742
                // on 'contentWindow'.                                                                                 // 743
                if (iframe && iframe.contentWindow) {                                                                  // 744
                    iframe.contentWindow.postMessage(msg, origin);                                                     // 745
                }                                                                                                      // 746
            } catch (x) {}                                                                                             // 747
                                                                                                                       //
            ;                                                                                                          // 747
        };                                                                                                             // 748
                                                                                                                       //
        doc.open();                                                                                                    // 750
        doc.write('<html><s' + 'cript>' + 'document.domain="' + document.domain + '";' + '</s' + 'cript></html>');     // 751
        doc.close();                                                                                                   // 754
        doc.parentWindow[WPrefix] = _window[WPrefix];                                                                  // 755
        var c = doc.createElement('div');                                                                              // 756
        doc.body.appendChild(c);                                                                                       // 757
        iframe = doc.createElement('iframe');                                                                          // 758
        c.appendChild(iframe);                                                                                         // 759
        iframe.src = iframe_url;                                                                                       // 760
        tref = setTimeout(function () {                                                                                // 761
            onerror('timeout');                                                                                        // 761
        }, 15000);                                                                                                     // 761
        unload_ref = utils.unload_add(cleanup);                                                                        // 762
        return {                                                                                                       // 763
            post: post,                                                                                                // 764
            cleanup: cleanup,                                                                                          // 765
            loaded: unattach                                                                                           // 766
        };                                                                                                             // 763
    }; //         [*] End of lib/dom.js                                                                                // 768
    //         [*] Including lib/dom2.js                                                                               // 772
    /*                                                                                                                 // 773
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */                                                                                                                //
                                                                                                                       //
    var AbstractXHRObject = function () {};                                                                            // 781
                                                                                                                       //
    AbstractXHRObject.prototype = new EventEmitter(['chunk', 'finish']);                                               // 782
                                                                                                                       //
    AbstractXHRObject.prototype._start = function (method, url, payload, opts) {                                       // 784
        var that = this;                                                                                               // 785
                                                                                                                       //
        try {                                                                                                          // 787
            that.xhr = new XMLHttpRequest();                                                                           // 788
        } catch (x) {}                                                                                                 // 789
                                                                                                                       //
        ;                                                                                                              // 789
                                                                                                                       //
        if (!that.xhr) {                                                                                               // 791
            try {                                                                                                      // 792
                that.xhr = new _window.ActiveXObject('Microsoft.XMLHTTP');                                             // 793
            } catch (x) {}                                                                                             // 794
                                                                                                                       //
            ;                                                                                                          // 794
        }                                                                                                              // 795
                                                                                                                       //
        if (_window.ActiveXObject || _window.XDomainRequest) {                                                         // 796
            // IE8 caches even POSTs                                                                                   // 797
            url += (url.indexOf('?') === -1 ? '?' : '&') + 't=' + +new Date();                                         // 798
        } // Explorer tends to keep connection open, even after the                                                    // 799
        // tab gets closed: http://bugs.jquery.com/ticket/5280                                                         // 802
                                                                                                                       //
                                                                                                                       //
        that.unload_ref = utils.unload_add(function () {                                                               // 803
            that._cleanup(true);                                                                                       // 803
        });                                                                                                            // 803
                                                                                                                       //
        try {                                                                                                          // 804
            that.xhr.open(method, url, true);                                                                          // 805
        } catch (e) {                                                                                                  // 806
            // IE raises an exception on wrong port.                                                                   // 807
            that.emit('finish', 0, '');                                                                                // 808
                                                                                                                       //
            that._cleanup();                                                                                           // 809
                                                                                                                       //
            return;                                                                                                    // 810
        }                                                                                                              // 811
                                                                                                                       //
        ;                                                                                                              // 811
                                                                                                                       //
        if (!opts || !opts.no_credentials) {                                                                           // 813
            // Mozilla docs says https://developer.mozilla.org/en/XMLHttpRequest :                                     // 814
            // "This never affects same-site requests."                                                                // 815
            that.xhr.withCredentials = 'true';                                                                         // 816
        }                                                                                                              // 817
                                                                                                                       //
        if (opts && opts.headers) {                                                                                    // 818
            for (var key in meteorBabelHelpers.sanitizeForInObject(opts.headers)) {                                    // 819
                that.xhr.setRequestHeader(key, opts.headers[key]);                                                     // 820
            }                                                                                                          // 821
        }                                                                                                              // 822
                                                                                                                       //
        that.xhr.onreadystatechange = function () {                                                                    // 824
            if (that.xhr) {                                                                                            // 825
                var x = that.xhr;                                                                                      // 826
                                                                                                                       //
                switch (x.readyState) {                                                                                // 827
                    case 3:                                                                                            // 828
                        // IE doesn't like peeking into responseText or status                                         // 829
                        // on Microsoft.XMLHTTP and readystate=3                                                       // 830
                        try {                                                                                          // 831
                            var status = x.status;                                                                     // 832
                            var text = x.responseText;                                                                 // 833
                        } catch (x) {}                                                                                 // 834
                                                                                                                       //
                        ; // IE returns 1223 for 204: http://bugs.jquery.com/ticket/1450                               // 834
                                                                                                                       //
                        if (status === 1223) status = 204; // IE does return readystate == 3 for 404 answers.          // 836
                                                                                                                       //
                        if (text && text.length > 0) {                                                                 // 839
                            that.emit('chunk', status, text);                                                          // 840
                        }                                                                                              // 841
                                                                                                                       //
                        break;                                                                                         // 842
                                                                                                                       //
                    case 4:                                                                                            // 843
                        var status = x.status; // IE returns 1223 for 204: http://bugs.jquery.com/ticket/1450          // 844
                                                                                                                       //
                        if (status === 1223) status = 204;                                                             // 846
                        that.emit('finish', status, x.responseText);                                                   // 848
                                                                                                                       //
                        that._cleanup(false);                                                                          // 849
                                                                                                                       //
                        break;                                                                                         // 850
                }                                                                                                      // 827
            }                                                                                                          // 852
        };                                                                                                             // 853
                                                                                                                       //
        that.xhr.send(payload);                                                                                        // 854
    };                                                                                                                 // 855
                                                                                                                       //
    AbstractXHRObject.prototype._cleanup = function (abort) {                                                          // 857
        var that = this;                                                                                               // 858
        if (!that.xhr) return;                                                                                         // 859
        utils.unload_del(that.unload_ref); // IE needs this field to be a function                                     // 860
                                                                                                                       //
        that.xhr.onreadystatechange = function () {};                                                                  // 863
                                                                                                                       //
        if (abort) {                                                                                                   // 865
            try {                                                                                                      // 866
                that.xhr.abort();                                                                                      // 867
            } catch (x) {}                                                                                             // 868
                                                                                                                       //
            ;                                                                                                          // 868
        }                                                                                                              // 869
                                                                                                                       //
        that.unload_ref = that.xhr = null;                                                                             // 870
    };                                                                                                                 // 871
                                                                                                                       //
    AbstractXHRObject.prototype.close = function () {                                                                  // 873
        var that = this;                                                                                               // 874
        that.nuke();                                                                                                   // 875
                                                                                                                       //
        that._cleanup(true);                                                                                           // 876
    };                                                                                                                 // 877
                                                                                                                       //
    var XHRCorsObject = utils.XHRCorsObject = function () {                                                            // 879
        var that = this,                                                                                               // 880
            args = arguments;                                                                                          // 880
        utils.delay(function () {                                                                                      // 881
            that._start.apply(that, args);                                                                             // 881
        });                                                                                                            // 881
    };                                                                                                                 // 882
                                                                                                                       //
    XHRCorsObject.prototype = new AbstractXHRObject();                                                                 // 883
                                                                                                                       //
    var XHRLocalObject = utils.XHRLocalObject = function (method, url, payload) {                                      // 885
        var that = this;                                                                                               // 886
        utils.delay(function () {                                                                                      // 887
            that._start(method, url, payload, {                                                                        // 888
                no_credentials: true                                                                                   // 889
            });                                                                                                        // 888
        });                                                                                                            // 891
    };                                                                                                                 // 892
                                                                                                                       //
    XHRLocalObject.prototype = new AbstractXHRObject(); // References:                                                 // 893
    //   http://ajaxian.com/archives/100-line-ajax-wrapper                                                             // 898
    //   http://msdn.microsoft.com/en-us/library/cc288060(v=VS.85).aspx                                                // 899
                                                                                                                       //
    var XDRObject = utils.XDRObject = function (method, url, payload) {                                                // 900
        var that = this;                                                                                               // 901
        utils.delay(function () {                                                                                      // 902
            that._start(method, url, payload);                                                                         // 902
        });                                                                                                            // 902
    };                                                                                                                 // 903
                                                                                                                       //
    XDRObject.prototype = new EventEmitter(['chunk', 'finish']);                                                       // 904
                                                                                                                       //
    XDRObject.prototype._start = function (method, url, payload) {                                                     // 905
        var that = this;                                                                                               // 906
        var xdr = new XDomainRequest(); // IE caches even POSTs                                                        // 907
                                                                                                                       //
        url += (url.indexOf('?') === -1 ? '?' : '&') + 't=' + +new Date();                                             // 909
                                                                                                                       //
        var onerror = xdr.ontimeout = xdr.onerror = function () {                                                      // 911
            that.emit('finish', 0, '');                                                                                // 912
                                                                                                                       //
            that._cleanup(false);                                                                                      // 913
        };                                                                                                             // 914
                                                                                                                       //
        xdr.onprogress = function () {                                                                                 // 915
            that.emit('chunk', 200, xdr.responseText);                                                                 // 916
        };                                                                                                             // 917
                                                                                                                       //
        xdr.onload = function () {                                                                                     // 918
            that.emit('finish', 200, xdr.responseText);                                                                // 919
                                                                                                                       //
            that._cleanup(false);                                                                                      // 920
        };                                                                                                             // 921
                                                                                                                       //
        that.xdr = xdr;                                                                                                // 922
        that.unload_ref = utils.unload_add(function () {                                                               // 923
            that._cleanup(true);                                                                                       // 923
        });                                                                                                            // 923
                                                                                                                       //
        try {                                                                                                          // 924
            // Fails with AccessDenied if port number is bogus                                                         // 925
            that.xdr.open(method, url);                                                                                // 926
            that.xdr.send(payload);                                                                                    // 927
        } catch (x) {                                                                                                  // 928
            onerror();                                                                                                 // 929
        }                                                                                                              // 930
    };                                                                                                                 // 931
                                                                                                                       //
    XDRObject.prototype._cleanup = function (abort) {                                                                  // 933
        var that = this;                                                                                               // 934
        if (!that.xdr) return;                                                                                         // 935
        utils.unload_del(that.unload_ref);                                                                             // 936
        that.xdr.ontimeout = that.xdr.onerror = that.xdr.onprogress = that.xdr.onload = null;                          // 938
                                                                                                                       //
        if (abort) {                                                                                                   // 940
            try {                                                                                                      // 941
                that.xdr.abort();                                                                                      // 942
            } catch (x) {}                                                                                             // 943
                                                                                                                       //
            ;                                                                                                          // 943
        }                                                                                                              // 944
                                                                                                                       //
        that.unload_ref = that.xdr = null;                                                                             // 945
    };                                                                                                                 // 946
                                                                                                                       //
    XDRObject.prototype.close = function () {                                                                          // 948
        var that = this;                                                                                               // 949
        that.nuke();                                                                                                   // 950
                                                                                                                       //
        that._cleanup(true);                                                                                           // 951
    }; // 1. Is natively via XHR                                                                                       // 952
    // 2. Is natively via XDR                                                                                          // 955
    // 3. Nope, but postMessage is there so it should work via the Iframe.                                             // 956
    // 4. Nope, sorry.                                                                                                 // 957
                                                                                                                       //
                                                                                                                       //
    utils.isXHRCorsCapable = function () {                                                                             // 958
        if (_window.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest()) {                                     // 959
            return 1;                                                                                                  // 960
        } // XDomainRequest doesn't work if page is served from file://                                                // 961
                                                                                                                       //
                                                                                                                       //
        if (_window.XDomainRequest && _document.domain) {                                                              // 963
            return 2;                                                                                                  // 964
        }                                                                                                              // 965
                                                                                                                       //
        if (IframeTransport.enabled()) {                                                                               // 966
            return 3;                                                                                                  // 967
        }                                                                                                              // 968
                                                                                                                       //
        return 4;                                                                                                      // 969
    }; //         [*] End of lib/dom2.js                                                                               // 970
    //         [*] Including lib/sockjs.js                                                                             // 974
    /*                                                                                                                 // 975
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */                                                                                                                //
                                                                                                                       //
    var SockJS = function (url, dep_protocols_whitelist, options) {                                                    // 983
        if (!(this instanceof SockJS)) {                                                                               // 984
            // makes `new` optional                                                                                    // 985
            return new SockJS(url, dep_protocols_whitelist, options);                                                  // 986
        }                                                                                                              // 987
                                                                                                                       //
        var that = this,                                                                                               // 989
            protocols_whitelist;                                                                                       // 989
        that._options = {                                                                                              // 990
            devel: false,                                                                                              // 990
            debug: false,                                                                                              // 990
            protocols_whitelist: [],                                                                                   // 990
            info: undefined,                                                                                           // 991
            rtt: undefined                                                                                             // 991
        };                                                                                                             // 990
                                                                                                                       //
        if (options) {                                                                                                 // 992
            utils.objectExtend(that._options, options);                                                                // 993
        }                                                                                                              // 994
                                                                                                                       //
        that._base_url = utils.amendUrl(url);                                                                          // 995
        that._server = that._options.server || utils.random_number_string(1000);                                       // 996
                                                                                                                       //
        if (that._options.protocols_whitelist && that._options.protocols_whitelist.length) {                           // 997
            protocols_whitelist = that._options.protocols_whitelist;                                                   // 999
        } else {                                                                                                       // 1000
            // Deprecated API                                                                                          // 1001
            if (typeof dep_protocols_whitelist === 'string' && dep_protocols_whitelist.length > 0) {                   // 1002
                protocols_whitelist = [dep_protocols_whitelist];                                                       // 1004
            } else if (utils.isArray(dep_protocols_whitelist)) {                                                       // 1005
                protocols_whitelist = dep_protocols_whitelist;                                                         // 1006
            } else {                                                                                                   // 1007
                protocols_whitelist = null;                                                                            // 1008
            }                                                                                                          // 1009
                                                                                                                       //
            if (protocols_whitelist) {                                                                                 // 1010
                that._debug('Deprecated API: Use "protocols_whitelist" option ' + 'instead of supplying protocol list as a second ' + 'parameter to SockJS constructor.');
            }                                                                                                          // 1014
        }                                                                                                              // 1015
                                                                                                                       //
        that._protocols = [];                                                                                          // 1016
        that.protocol = null;                                                                                          // 1017
        that.readyState = SockJS.CONNECTING;                                                                           // 1018
        that._ir = createInfoReceiver(that._base_url);                                                                 // 1019
                                                                                                                       //
        that._ir.onfinish = function (info, rtt) {                                                                     // 1020
            that._ir = null;                                                                                           // 1021
                                                                                                                       //
            if (info) {                                                                                                // 1022
                if (that._options.info) {                                                                              // 1023
                    // Override if user supplies the option                                                            // 1024
                    info = utils.objectExtend(info, that._options.info);                                               // 1025
                }                                                                                                      // 1026
                                                                                                                       //
                if (that._options.rtt) {                                                                               // 1027
                    rtt = that._options.rtt;                                                                           // 1028
                }                                                                                                      // 1029
                                                                                                                       //
                that._applyInfo(info, rtt, protocols_whitelist);                                                       // 1030
                                                                                                                       //
                that._didClose();                                                                                      // 1031
            } else {                                                                                                   // 1032
                that._didClose(1002, 'Can\'t connect to server', true);                                                // 1033
            }                                                                                                          // 1034
        };                                                                                                             // 1035
    }; // Inheritance                                                                                                  // 1036
                                                                                                                       //
                                                                                                                       //
    SockJS.prototype = new REventTarget();                                                                             // 1038
    SockJS.version = "0.3.4";                                                                                          // 1040
    SockJS.CONNECTING = 0;                                                                                             // 1042
    SockJS.OPEN = 1;                                                                                                   // 1043
    SockJS.CLOSING = 2;                                                                                                // 1044
    SockJS.CLOSED = 3;                                                                                                 // 1045
                                                                                                                       //
    SockJS.prototype._debug = function () {                                                                            // 1047
        if (this._options.debug) utils.log.apply(utils, arguments);                                                    // 1048
    };                                                                                                                 // 1050
                                                                                                                       //
    SockJS.prototype._dispatchOpen = function () {                                                                     // 1052
        var that = this;                                                                                               // 1053
                                                                                                                       //
        if (that.readyState === SockJS.CONNECTING) {                                                                   // 1054
            if (that._transport_tref) {                                                                                // 1055
                clearTimeout(that._transport_tref);                                                                    // 1056
                that._transport_tref = null;                                                                           // 1057
            }                                                                                                          // 1058
                                                                                                                       //
            that.readyState = SockJS.OPEN;                                                                             // 1059
            that.dispatchEvent(new SimpleEvent("open"));                                                               // 1060
        } else {                                                                                                       // 1061
            // The server might have been restarted, and lost track of our                                             // 1062
            // connection.                                                                                             // 1063
            that._didClose(1006, "Server lost session");                                                               // 1064
        }                                                                                                              // 1065
    };                                                                                                                 // 1066
                                                                                                                       //
    SockJS.prototype._dispatchMessage = function (data) {                                                              // 1068
        var that = this;                                                                                               // 1069
        if (that.readyState !== SockJS.OPEN) return;                                                                   // 1070
        that.dispatchEvent(new SimpleEvent("message", {                                                                // 1072
            data: data                                                                                                 // 1072
        }));                                                                                                           // 1072
    };                                                                                                                 // 1073
                                                                                                                       //
    SockJS.prototype._dispatchHeartbeat = function (data) {                                                            // 1075
        var that = this;                                                                                               // 1076
        if (that.readyState !== SockJS.OPEN) return;                                                                   // 1077
        that.dispatchEvent(new SimpleEvent('heartbeat', {}));                                                          // 1079
    };                                                                                                                 // 1080
                                                                                                                       //
    SockJS.prototype._didClose = function (code, reason, force) {                                                      // 1082
        var that = this;                                                                                               // 1083
        if (that.readyState !== SockJS.CONNECTING && that.readyState !== SockJS.OPEN && that.readyState !== SockJS.CLOSING) throw new Error('INVALID_STATE_ERR');
                                                                                                                       //
        if (that._ir) {                                                                                                // 1088
            that._ir.nuke();                                                                                           // 1089
                                                                                                                       //
            that._ir = null;                                                                                           // 1090
        }                                                                                                              // 1091
                                                                                                                       //
        if (that._transport) {                                                                                         // 1093
            that._transport.doCleanup();                                                                               // 1094
                                                                                                                       //
            that._transport = null;                                                                                    // 1095
        }                                                                                                              // 1096
                                                                                                                       //
        var close_event = new SimpleEvent("close", {                                                                   // 1098
            code: code,                                                                                                // 1099
            reason: reason,                                                                                            // 1100
            wasClean: utils.userSetCode(code)                                                                          // 1101
        });                                                                                                            // 1098
                                                                                                                       //
        if (!utils.userSetCode(code) && that.readyState === SockJS.CONNECTING && !force) {                             // 1103
            if (that._try_next_protocol(close_event)) {                                                                // 1105
                return;                                                                                                // 1106
            }                                                                                                          // 1107
                                                                                                                       //
            close_event = new SimpleEvent("close", {                                                                   // 1108
                code: 2000,                                                                                            // 1108
                reason: "All transports failed",                                                                       // 1109
                wasClean: false,                                                                                       // 1110
                last_event: close_event                                                                                // 1111
            });                                                                                                        // 1108
        }                                                                                                              // 1112
                                                                                                                       //
        that.readyState = SockJS.CLOSED;                                                                               // 1113
        utils.delay(function () {                                                                                      // 1115
            that.dispatchEvent(close_event);                                                                           // 1116
        });                                                                                                            // 1117
    };                                                                                                                 // 1118
                                                                                                                       //
    SockJS.prototype._didMessage = function (data) {                                                                   // 1120
        var that = this;                                                                                               // 1121
        var type = data.slice(0, 1);                                                                                   // 1122
                                                                                                                       //
        switch (type) {                                                                                                // 1123
            case 'o':                                                                                                  // 1124
                that._dispatchOpen();                                                                                  // 1125
                                                                                                                       //
                break;                                                                                                 // 1126
                                                                                                                       //
            case 'a':                                                                                                  // 1127
                var payload = JSON.parse(data.slice(1) || '[]');                                                       // 1128
                                                                                                                       //
                for (var i = 0; i < payload.length; i++) {                                                             // 1129
                    that._dispatchMessage(payload[i]);                                                                 // 1130
                }                                                                                                      // 1131
                                                                                                                       //
                break;                                                                                                 // 1132
                                                                                                                       //
            case 'm':                                                                                                  // 1133
                var payload = JSON.parse(data.slice(1) || 'null');                                                     // 1134
                                                                                                                       //
                that._dispatchMessage(payload);                                                                        // 1135
                                                                                                                       //
                break;                                                                                                 // 1136
                                                                                                                       //
            case 'c':                                                                                                  // 1137
                var payload = JSON.parse(data.slice(1) || '[]');                                                       // 1138
                                                                                                                       //
                that._didClose(payload[0], payload[1]);                                                                // 1139
                                                                                                                       //
                break;                                                                                                 // 1140
                                                                                                                       //
            case 'h':                                                                                                  // 1141
                that._dispatchHeartbeat();                                                                             // 1142
                                                                                                                       //
                break;                                                                                                 // 1143
        }                                                                                                              // 1123
    };                                                                                                                 // 1145
                                                                                                                       //
    SockJS.prototype._try_next_protocol = function (close_event) {                                                     // 1147
        var that = this;                                                                                               // 1148
                                                                                                                       //
        if (that.protocol) {                                                                                           // 1149
            that._debug('Closed transport:', that.protocol, '' + close_event);                                         // 1150
                                                                                                                       //
            that.protocol = null;                                                                                      // 1151
        }                                                                                                              // 1152
                                                                                                                       //
        if (that._transport_tref) {                                                                                    // 1153
            clearTimeout(that._transport_tref);                                                                        // 1154
            that._transport_tref = null;                                                                               // 1155
        }                                                                                                              // 1156
                                                                                                                       //
        while (1) {                                                                                                    // 1158
            var protocol = that.protocol = that._protocols.shift();                                                    // 1159
                                                                                                                       //
            if (!protocol) {                                                                                           // 1160
                return false;                                                                                          // 1161
            } // Some protocols require access to `body`, what if were in                                              // 1162
            // the `head`?                                                                                             // 1164
                                                                                                                       //
                                                                                                                       //
            if (SockJS[protocol] && SockJS[protocol].need_body === true && (!_document.body || typeof _document.readyState !== 'undefined' && _document.readyState !== 'complete')) {
                that._protocols.unshift(protocol);                                                                     // 1170
                                                                                                                       //
                that.protocol = 'waiting-for-load';                                                                    // 1171
                utils.attachEvent('load', function () {                                                                // 1172
                    that._try_next_protocol();                                                                         // 1173
                });                                                                                                    // 1174
                return true;                                                                                           // 1175
            }                                                                                                          // 1176
                                                                                                                       //
            if (!SockJS[protocol] || !SockJS[protocol].enabled(that._options)) {                                       // 1178
                that._debug('Skipping transport:', protocol);                                                          // 1180
            } else {                                                                                                   // 1181
                var roundTrips = SockJS[protocol].roundTrips || 1;                                                     // 1182
                var to = (that._options.rto || 0) * roundTrips || 5000;                                                // 1183
                that._transport_tref = utils.delay(to, function () {                                                   // 1184
                    if (that.readyState === SockJS.CONNECTING) {                                                       // 1185
                        // I can't understand how it is possible to run                                                // 1186
                        // this timer, when the state is CLOSED, but                                                   // 1187
                        // apparently in IE everythin is possible.                                                     // 1188
                        that._didClose(2007, "Transport timeouted");                                                   // 1189
                    }                                                                                                  // 1190
                });                                                                                                    // 1191
                var connid = utils.random_string(8);                                                                   // 1193
                var trans_url = that._base_url + '/' + that._server + '/' + connid;                                    // 1194
                                                                                                                       //
                that._debug('Opening transport:', protocol, ' url:' + trans_url, ' RTO:' + that._options.rto);         // 1195
                                                                                                                       //
                that._transport = new SockJS[protocol](that, trans_url, that._base_url);                               // 1197
                return true;                                                                                           // 1199
            }                                                                                                          // 1200
        }                                                                                                              // 1201
    };                                                                                                                 // 1202
                                                                                                                       //
    SockJS.prototype.close = function (code, reason) {                                                                 // 1204
        var that = this;                                                                                               // 1205
        if (code && !utils.userSetCode(code)) throw new Error("INVALID_ACCESS_ERR");                                   // 1206
                                                                                                                       //
        if (that.readyState !== SockJS.CONNECTING && that.readyState !== SockJS.OPEN) {                                // 1208
            return false;                                                                                              // 1210
        }                                                                                                              // 1211
                                                                                                                       //
        that.readyState = SockJS.CLOSING;                                                                              // 1212
                                                                                                                       //
        that._didClose(code || 1000, reason || "Normal closure");                                                      // 1213
                                                                                                                       //
        return true;                                                                                                   // 1214
    };                                                                                                                 // 1215
                                                                                                                       //
    SockJS.prototype.send = function (data) {                                                                          // 1217
        var that = this;                                                                                               // 1218
        if (that.readyState === SockJS.CONNECTING) throw new Error('INVALID_STATE_ERR');                               // 1219
                                                                                                                       //
        if (that.readyState === SockJS.OPEN) {                                                                         // 1221
            that._transport.doSend(utils.quote('' + data));                                                            // 1222
        }                                                                                                              // 1223
                                                                                                                       //
        return true;                                                                                                   // 1224
    };                                                                                                                 // 1225
                                                                                                                       //
    SockJS.prototype._applyInfo = function (info, rtt, protocols_whitelist) {                                          // 1227
        var that = this;                                                                                               // 1228
        that._options.info = info;                                                                                     // 1229
        that._options.rtt = rtt;                                                                                       // 1230
        that._options.rto = utils.countRTO(rtt);                                                                       // 1231
        that._options.info.null_origin = !_document.domain; // Servers can override base_url, eg to provide a randomized domain name and
        // avoid browser per-domain connection limits.                                                                 // 1234
                                                                                                                       //
        if (info.base_url) // <METEOR>                                                                                 // 1235
            that._base_url = utils.amendUrl(info.base_url, that._base_url); // </METEOR>                               // 1237
                                                                                                                       //
        var probed = utils.probeProtocols();                                                                           // 1239
        that._protocols = utils.detectProtocols(probed, protocols_whitelist, info); // <METEOR>                        // 1240
        // https://github.com/sockjs/sockjs-client/issues/79                                                           // 1242
        // Hack to avoid XDR when using different protocols                                                            // 1243
        // We're on IE trying to do cross-protocol. jsonp only.                                                        // 1244
                                                                                                                       //
        if (!utils.isSameOriginScheme(that._base_url) && 2 === utils.isXHRCorsCapable()) {                             // 1245
            that._protocols = ['jsonp-polling'];                                                                       // 1247
        } // </METEOR>                                                                                                 // 1248
                                                                                                                       //
    }; //         [*] End of lib/sockjs.js                                                                             // 1250
    //         [*] Including lib/trans-websocket.js                                                                    // 1254
    /*                                                                                                                 // 1255
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */                                                                                                                //
                                                                                                                       //
    var WebSocketTransport = SockJS.websocket = function (ri, trans_url) {                                             // 1263
        var that = this;                                                                                               // 1264
        var url = trans_url + '/websocket';                                                                            // 1265
                                                                                                                       //
        if (url.slice(0, 5) === 'https') {                                                                             // 1266
            url = 'wss' + url.slice(5);                                                                                // 1267
        } else {                                                                                                       // 1268
            url = 'ws' + url.slice(4);                                                                                 // 1269
        }                                                                                                              // 1270
                                                                                                                       //
        that.ri = ri;                                                                                                  // 1271
        that.url = url;                                                                                                // 1272
        var Constructor = _window.WebSocket || _window.MozWebSocket;                                                   // 1273
        that.ws = new Constructor(that.url);                                                                           // 1275
                                                                                                                       //
        that.ws.onmessage = function (e) {                                                                             // 1276
            that.ri._didMessage(e.data);                                                                               // 1277
        }; // Firefox has an interesting bug. If a websocket connection is                                             // 1278
        // created after onunload, it stays alive even when user                                                       // 1280
        // navigates away from the page. In such situation let's lie -                                                 // 1281
        // let's not open the ws connection at all. See:                                                               // 1282
        // https://github.com/sockjs/sockjs-client/issues/28                                                           // 1283
        // https://bugzilla.mozilla.org/show_bug.cgi?id=696085                                                         // 1284
                                                                                                                       //
                                                                                                                       //
        that.unload_ref = utils.unload_add(function () {                                                               // 1285
            that.ws.close();                                                                                           // 1285
        });                                                                                                            // 1285
                                                                                                                       //
        that.ws.onclose = function () {                                                                                // 1286
            that.ri._didMessage(utils.closeFrame(1006, "WebSocket connection broken"));                                // 1287
        };                                                                                                             // 1288
    };                                                                                                                 // 1289
                                                                                                                       //
    WebSocketTransport.prototype.doSend = function (data) {                                                            // 1291
        this.ws.send('[' + data + ']');                                                                                // 1292
    };                                                                                                                 // 1293
                                                                                                                       //
    WebSocketTransport.prototype.doCleanup = function () {                                                             // 1295
        var that = this;                                                                                               // 1296
        var ws = that.ws;                                                                                              // 1297
                                                                                                                       //
        if (ws) {                                                                                                      // 1298
            ws.onmessage = ws.onclose = null;                                                                          // 1299
            ws.close();                                                                                                // 1300
            utils.unload_del(that.unload_ref);                                                                         // 1301
            that.unload_ref = that.ri = that.ws = null;                                                                // 1302
        }                                                                                                              // 1303
    };                                                                                                                 // 1304
                                                                                                                       //
    WebSocketTransport.enabled = function () {                                                                         // 1306
        return !!(_window.WebSocket || _window.MozWebSocket);                                                          // 1307
    }; // In theory, ws should require 1 round trip. But in chrome, this is                                            // 1308
    // not very stable over SSL. Most likely a ws connection requires a                                                // 1311
    // separate SSL connection, in which case 2 round trips are an                                                     // 1312
    // absolute minumum.                                                                                               // 1313
                                                                                                                       //
                                                                                                                       //
    WebSocketTransport.roundTrips = 2; //         [*] End of lib/trans-websocket.js                                    // 1314
    //         [*] Including lib/trans-sender.js                                                                       // 1318
    /*                                                                                                                 // 1319
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */                                                                                                                //
                                                                                                                       //
    var BufferedSender = function () {};                                                                               // 1327
                                                                                                                       //
    BufferedSender.prototype.send_constructor = function (sender) {                                                    // 1328
        var that = this;                                                                                               // 1329
        that.send_buffer = [];                                                                                         // 1330
        that.sender = sender;                                                                                          // 1331
    };                                                                                                                 // 1332
                                                                                                                       //
    BufferedSender.prototype.doSend = function (message) {                                                             // 1333
        var that = this;                                                                                               // 1334
        that.send_buffer.push(message);                                                                                // 1335
                                                                                                                       //
        if (!that.send_stop) {                                                                                         // 1336
            that.send_schedule();                                                                                      // 1337
        }                                                                                                              // 1338
    }; // For polling transports in a situation when in the message callback,                                          // 1339
    // new message is being send. If the sending connection was started                                                // 1342
    // before receiving one, it is possible to saturate the network and                                                // 1343
    // timeout due to the lack of receiving socket. To avoid that we delay                                             // 1344
    // sending messages by some small time, in order to let receiving                                                  // 1345
    // connection be started beforehand. This is only a halfmeasure and                                                // 1346
    // does not fix the big problem, but it does make the tests go more                                                // 1347
    // stable on slow networks.                                                                                        // 1348
                                                                                                                       //
                                                                                                                       //
    BufferedSender.prototype.send_schedule_wait = function () {                                                        // 1349
        var that = this;                                                                                               // 1350
        var tref;                                                                                                      // 1351
                                                                                                                       //
        that.send_stop = function () {                                                                                 // 1352
            that.send_stop = null;                                                                                     // 1353
            clearTimeout(tref);                                                                                        // 1354
        };                                                                                                             // 1355
                                                                                                                       //
        tref = utils.delay(25, function () {                                                                           // 1356
            that.send_stop = null;                                                                                     // 1357
            that.send_schedule();                                                                                      // 1358
        });                                                                                                            // 1359
    };                                                                                                                 // 1360
                                                                                                                       //
    BufferedSender.prototype.send_schedule = function () {                                                             // 1362
        var that = this;                                                                                               // 1363
                                                                                                                       //
        if (that.send_buffer.length > 0) {                                                                             // 1364
            var payload = '[' + that.send_buffer.join(',') + ']';                                                      // 1365
            that.send_stop = that.sender(that.trans_url, payload, function (success, abort_reason) {                   // 1366
                that.send_stop = null;                                                                                 // 1367
                                                                                                                       //
                if (success === false) {                                                                               // 1368
                    that.ri._didClose(1006, 'Sending error ' + abort_reason);                                          // 1369
                } else {                                                                                               // 1370
                    that.send_schedule_wait();                                                                         // 1371
                }                                                                                                      // 1372
            });                                                                                                        // 1373
            that.send_buffer = [];                                                                                     // 1374
        }                                                                                                              // 1375
    };                                                                                                                 // 1376
                                                                                                                       //
    BufferedSender.prototype.send_destructor = function () {                                                           // 1378
        var that = this;                                                                                               // 1379
                                                                                                                       //
        if (that._send_stop) {                                                                                         // 1380
            that._send_stop();                                                                                         // 1381
        }                                                                                                              // 1382
                                                                                                                       //
        that._send_stop = null;                                                                                        // 1383
    };                                                                                                                 // 1384
                                                                                                                       //
    var jsonPGenericSender = function (url, payload, callback) {                                                       // 1386
        var that = this;                                                                                               // 1387
                                                                                                                       //
        if (!('_send_form' in that)) {                                                                                 // 1389
            var form = that._send_form = _document.createElement('form');                                              // 1390
                                                                                                                       //
            var area = that._send_area = _document.createElement('textarea');                                          // 1391
                                                                                                                       //
            area.name = 'd';                                                                                           // 1392
            form.style.display = 'none';                                                                               // 1393
            form.style.position = 'absolute';                                                                          // 1394
            form.method = 'POST';                                                                                      // 1395
            form.enctype = 'application/x-www-form-urlencoded';                                                        // 1396
            form.acceptCharset = "UTF-8";                                                                              // 1397
            form.appendChild(area);                                                                                    // 1398
                                                                                                                       //
            _document.body.appendChild(form);                                                                          // 1399
        }                                                                                                              // 1400
                                                                                                                       //
        var form = that._send_form;                                                                                    // 1401
        var area = that._send_area;                                                                                    // 1402
        var id = 'a' + utils.random_string(8);                                                                         // 1403
        form.target = id;                                                                                              // 1404
        form.action = url + '/jsonp_send?i=' + id;                                                                     // 1405
        var iframe;                                                                                                    // 1407
                                                                                                                       //
        try {                                                                                                          // 1408
            // ie6 dynamic iframes with target="" support (thanks Chris Lambacher)                                     // 1409
            iframe = _document.createElement('<iframe name="' + id + '">');                                            // 1410
        } catch (x) {                                                                                                  // 1411
            iframe = _document.createElement('iframe');                                                                // 1412
            iframe.name = id;                                                                                          // 1413
        }                                                                                                              // 1414
                                                                                                                       //
        iframe.id = id;                                                                                                // 1415
        form.appendChild(iframe);                                                                                      // 1416
        iframe.style.display = 'none';                                                                                 // 1417
                                                                                                                       //
        try {                                                                                                          // 1419
            area.value = payload;                                                                                      // 1420
        } catch (e) {                                                                                                  // 1421
            utils.log('Your browser is seriously broken. Go home! ' + e.message);                                      // 1422
        }                                                                                                              // 1423
                                                                                                                       //
        form.submit();                                                                                                 // 1424
                                                                                                                       //
        var completed = function (e) {                                                                                 // 1426
            if (!iframe.onerror) return;                                                                               // 1427
            iframe.onreadystatechange = iframe.onerror = iframe.onload = null; // Opera mini doesn't like if we GC iframe
            // immediately, thus this timeout.                                                                         // 1430
                                                                                                                       //
            utils.delay(500, function () {                                                                             // 1431
                iframe.parentNode.removeChild(iframe);                                                                 // 1432
                iframe = null;                                                                                         // 1433
            });                                                                                                        // 1434
            area.value = ''; // It is not possible to detect if the iframe succeeded or                                // 1435
            // failed to submit our form.                                                                              // 1437
                                                                                                                       //
            callback(true);                                                                                            // 1438
        };                                                                                                             // 1439
                                                                                                                       //
        iframe.onerror = iframe.onload = completed;                                                                    // 1440
                                                                                                                       //
        iframe.onreadystatechange = function (e) {                                                                     // 1441
            if (iframe.readyState == 'complete') completed();                                                          // 1442
        };                                                                                                             // 1443
                                                                                                                       //
        return completed;                                                                                              // 1444
    };                                                                                                                 // 1445
                                                                                                                       //
    var createAjaxSender = function (AjaxObject) {                                                                     // 1447
        return function (url, payload, callback) {                                                                     // 1448
            var xo = new AjaxObject('POST', url + '/xhr_send', payload);                                               // 1449
                                                                                                                       //
            xo.onfinish = function (status, text) {                                                                    // 1450
                callback(status === 200 || status === 204, 'http status ' + status);                                   // 1451
            };                                                                                                         // 1453
                                                                                                                       //
            return function (abort_reason) {                                                                           // 1454
                callback(false, abort_reason);                                                                         // 1455
            };                                                                                                         // 1456
        };                                                                                                             // 1457
    }; //         [*] End of lib/trans-sender.js                                                                       // 1458
    //         [*] Including lib/trans-jsonp-receiver.js                                                               // 1462
    /*                                                                                                                 // 1463
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */ // Parts derived from Socket.io:                                                                               //
    //    https://github.com/LearnBoost/socket.io/blob/0.6.17/lib/socket.io/transports/jsonp-polling.js                // 1472
    // and jQuery-JSONP:                                                                                               // 1473
    //    https://code.google.com/p/jquery-jsonp/source/browse/trunk/core/jquery.jsonp.js                              // 1474
                                                                                                                       //
                                                                                                                       //
    var jsonPGenericReceiver = function (url, callback) {                                                              // 1475
        var tref;                                                                                                      // 1476
                                                                                                                       //
        var script = _document.createElement('script');                                                                // 1477
                                                                                                                       //
        var script2; // Opera synchronous load trick.                                                                  // 1478
                                                                                                                       //
        var close_script = function (frame) {                                                                          // 1479
            if (script2) {                                                                                             // 1480
                script2.parentNode.removeChild(script2);                                                               // 1481
                script2 = null;                                                                                        // 1482
            }                                                                                                          // 1483
                                                                                                                       //
            if (script) {                                                                                              // 1484
                clearTimeout(tref); // Unfortunately, you can't really abort script loading of                         // 1485
                // the script.                                                                                         // 1487
                                                                                                                       //
                script.parentNode.removeChild(script);                                                                 // 1488
                script.onreadystatechange = script.onerror = script.onload = script.onclick = null;                    // 1489
                script = null;                                                                                         // 1491
                callback(frame);                                                                                       // 1492
                callback = null;                                                                                       // 1493
            }                                                                                                          // 1494
        }; // IE9 fires 'error' event after orsc or before, in random order.                                           // 1495
                                                                                                                       //
                                                                                                                       //
        var loaded_okay = false;                                                                                       // 1498
        var error_timer = null;                                                                                        // 1499
        script.id = 'a' + utils.random_string(8);                                                                      // 1501
        script.src = url;                                                                                              // 1502
        script.type = 'text/javascript';                                                                               // 1503
        script.charset = 'UTF-8';                                                                                      // 1504
                                                                                                                       //
        script.onerror = function (e) {                                                                                // 1505
            if (!error_timer) {                                                                                        // 1506
                // Delay firing close_script.                                                                          // 1507
                error_timer = setTimeout(function () {                                                                 // 1508
                    if (!loaded_okay) {                                                                                // 1509
                        close_script(utils.closeFrame(1006, "JSONP script loaded abnormally (onerror)"));              // 1510
                    }                                                                                                  // 1513
                }, 1000);                                                                                              // 1514
            }                                                                                                          // 1515
        };                                                                                                             // 1516
                                                                                                                       //
        script.onload = function (e) {                                                                                 // 1517
            close_script(utils.closeFrame(1006, "JSONP script loaded abnormally (onload)"));                           // 1518
        };                                                                                                             // 1519
                                                                                                                       //
        script.onreadystatechange = function (e) {                                                                     // 1521
            if (/loaded|closed/.test(script.readyState)) {                                                             // 1522
                if (script && script.htmlFor && script.onclick) {                                                      // 1523
                    loaded_okay = true;                                                                                // 1524
                                                                                                                       //
                    try {                                                                                              // 1525
                        // In IE, actually execute the script.                                                         // 1526
                        script.onclick();                                                                              // 1527
                    } catch (x) {}                                                                                     // 1528
                }                                                                                                      // 1529
                                                                                                                       //
                if (script) {                                                                                          // 1530
                    close_script(utils.closeFrame(1006, "JSONP script loaded abnormally (onreadystatechange)"));       // 1531
                }                                                                                                      // 1532
            }                                                                                                          // 1533
        }; // IE: event/htmlFor/onclick trick.                                                                         // 1534
        // One can't rely on proper order for onreadystatechange. In order to                                          // 1536
        // make sure, set a 'htmlFor' and 'event' properties, so that                                                  // 1537
        // script code will be installed as 'onclick' handler for the                                                  // 1538
        // script object. Later, onreadystatechange, manually execute this                                             // 1539
        // code. FF and Chrome doesn't work with 'event' and 'htmlFor'                                                 // 1540
        // set. For reference see:                                                                                     // 1541
        //   http://jaubourg.net/2010/07/loading-script-as-onclick-handler-of.html                                     // 1542
        // Also, read on that about script ordering:                                                                   // 1543
        //   http://wiki.whatwg.org/wiki/Dynamic_Script_Execution_Order                                                // 1544
                                                                                                                       //
                                                                                                                       //
        if (typeof script.async === 'undefined' && _document.attachEvent) {                                            // 1545
            // According to mozilla docs, in recent browsers script.async defaults                                     // 1546
            // to 'true', so we may use it to detect a good browser:                                                   // 1547
            // https://developer.mozilla.org/en/HTML/Element/script                                                    // 1548
            if (!/opera/i.test(navigator.userAgent)) {                                                                 // 1549
                // Naively assume we're in IE                                                                          // 1550
                try {                                                                                                  // 1551
                    script.htmlFor = script.id;                                                                        // 1552
                    script.event = "onclick";                                                                          // 1553
                } catch (x) {}                                                                                         // 1554
                                                                                                                       //
                script.async = true;                                                                                   // 1555
            } else {                                                                                                   // 1556
                // Opera, second sync script hack                                                                      // 1557
                script2 = _document.createElement('script');                                                           // 1558
                script2.text = "try{var a = document.getElementById('" + script.id + "'); if(a)a.onerror();}catch(x){};";
                script.async = script2.async = false;                                                                  // 1560
            }                                                                                                          // 1561
        }                                                                                                              // 1562
                                                                                                                       //
        if (typeof script.async !== 'undefined') {                                                                     // 1563
            script.async = true;                                                                                       // 1564
        } // Fallback mostly for Konqueror - stupid timer, 35 seconds shall be plenty.                                 // 1565
                                                                                                                       //
                                                                                                                       //
        tref = setTimeout(function () {                                                                                // 1568
            close_script(utils.closeFrame(1006, "JSONP script loaded abnormally (timeout)"));                          // 1569
        }, 35000);                                                                                                     // 1570
                                                                                                                       //
        var head = _document.getElementsByTagName('head')[0];                                                          // 1572
                                                                                                                       //
        head.insertBefore(script, head.firstChild);                                                                    // 1573
                                                                                                                       //
        if (script2) {                                                                                                 // 1574
            head.insertBefore(script2, head.firstChild);                                                               // 1575
        }                                                                                                              // 1576
                                                                                                                       //
        return close_script;                                                                                           // 1577
    }; //         [*] End of lib/trans-jsonp-receiver.js                                                               // 1578
    //         [*] Including lib/trans-jsonp-polling.js                                                                // 1582
    /*                                                                                                                 // 1583
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */ // The simplest and most robust transport, using the well-know cross                                           //
    // domain hack - JSONP. This transport is quite inefficient - one                                                  // 1592
    // mssage could use up to one http request. But at least it works almost                                           // 1593
    // everywhere.                                                                                                     // 1594
    // Known limitations:                                                                                              // 1595
    //   o you will get a spinning cursor                                                                              // 1596
    //   o for Konqueror a dumb timer is needed to detect errors                                                       // 1597
                                                                                                                       //
                                                                                                                       //
    var JsonPTransport = SockJS['jsonp-polling'] = function (ri, trans_url) {                                          // 1600
        utils.polluteGlobalNamespace();                                                                                // 1601
        var that = this;                                                                                               // 1602
        that.ri = ri;                                                                                                  // 1603
        that.trans_url = trans_url;                                                                                    // 1604
        that.send_constructor(jsonPGenericSender);                                                                     // 1605
                                                                                                                       //
        that._schedule_recv();                                                                                         // 1606
    }; // Inheritnace                                                                                                  // 1607
                                                                                                                       //
                                                                                                                       //
    JsonPTransport.prototype = new BufferedSender();                                                                   // 1610
                                                                                                                       //
    JsonPTransport.prototype._schedule_recv = function () {                                                            // 1612
        var that = this;                                                                                               // 1613
                                                                                                                       //
        var callback = function (data) {                                                                               // 1614
            that._recv_stop = null;                                                                                    // 1615
                                                                                                                       //
            if (data) {                                                                                                // 1616
                // no data - heartbeat;                                                                                // 1617
                if (!that._is_closing) {                                                                               // 1618
                    that.ri._didMessage(data);                                                                         // 1619
                }                                                                                                      // 1620
            } // The message can be a close message, and change is_closing state.                                      // 1621
                                                                                                                       //
                                                                                                                       //
            if (!that._is_closing) {                                                                                   // 1623
                that._schedule_recv();                                                                                 // 1624
            }                                                                                                          // 1625
        };                                                                                                             // 1626
                                                                                                                       //
        that._recv_stop = jsonPReceiverWrapper(that.trans_url + '/jsonp', jsonPGenericReceiver, callback);             // 1627
    };                                                                                                                 // 1629
                                                                                                                       //
    JsonPTransport.enabled = function () {                                                                             // 1631
        return true;                                                                                                   // 1632
    };                                                                                                                 // 1633
                                                                                                                       //
    JsonPTransport.need_body = true;                                                                                   // 1635
                                                                                                                       //
    JsonPTransport.prototype.doCleanup = function () {                                                                 // 1638
        var that = this;                                                                                               // 1639
        that._is_closing = true;                                                                                       // 1640
                                                                                                                       //
        if (that._recv_stop) {                                                                                         // 1641
            that._recv_stop();                                                                                         // 1642
        }                                                                                                              // 1643
                                                                                                                       //
        that.ri = that._recv_stop = null;                                                                              // 1644
        that.send_destructor();                                                                                        // 1645
    }; // Abstract away code that handles global namespace pollution.                                                  // 1646
                                                                                                                       //
                                                                                                                       //
    var jsonPReceiverWrapper = function (url, constructReceiver, user_callback) {                                      // 1650
        var id = 'a' + utils.random_string(6);                                                                         // 1651
        var url_id = url + '?c=' + escape(WPrefix + '.' + id); // Unfortunately it is not possible to abort loading of the
        // script. We need to keep track of frake close frames.                                                        // 1655
                                                                                                                       //
        var aborting = 0; // Callback will be called exactly once.                                                     // 1656
                                                                                                                       //
        var callback = function (frame) {                                                                              // 1659
            switch (aborting) {                                                                                        // 1660
                case 0:                                                                                                // 1661
                    // Normal behaviour - delete hook _and_ emit message.                                              // 1662
                    delete _window[WPrefix][id];                                                                       // 1663
                    user_callback(frame);                                                                              // 1664
                    break;                                                                                             // 1665
                                                                                                                       //
                case 1:                                                                                                // 1666
                    // Fake close frame - emit but don't delete hook.                                                  // 1667
                    user_callback(frame);                                                                              // 1668
                    aborting = 2;                                                                                      // 1669
                    break;                                                                                             // 1670
                                                                                                                       //
                case 2:                                                                                                // 1671
                    // Got frame after connection was closed, delete hook, don't emit.                                 // 1672
                    delete _window[WPrefix][id];                                                                       // 1673
                    break;                                                                                             // 1674
            }                                                                                                          // 1660
        };                                                                                                             // 1676
                                                                                                                       //
        var close_script = constructReceiver(url_id, callback);                                                        // 1678
        _window[WPrefix][id] = close_script;                                                                           // 1679
                                                                                                                       //
        var stop = function () {                                                                                       // 1680
            if (_window[WPrefix][id]) {                                                                                // 1681
                aborting = 1;                                                                                          // 1682
                                                                                                                       //
                _window[WPrefix][id](utils.closeFrame(1000, "JSONP user aborted read"));                               // 1683
            }                                                                                                          // 1684
        };                                                                                                             // 1685
                                                                                                                       //
        return stop;                                                                                                   // 1686
    }; //         [*] End of lib/trans-jsonp-polling.js                                                                // 1687
    //         [*] Including lib/trans-xhr.js                                                                          // 1691
    /*                                                                                                                 // 1692
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */                                                                                                                //
                                                                                                                       //
    var AjaxBasedTransport = function () {};                                                                           // 1700
                                                                                                                       //
    AjaxBasedTransport.prototype = new BufferedSender();                                                               // 1701
                                                                                                                       //
    AjaxBasedTransport.prototype.run = function (ri, trans_url, url_suffix, Receiver, AjaxObject) {                    // 1703
        var that = this;                                                                                               // 1705
        that.ri = ri;                                                                                                  // 1706
        that.trans_url = trans_url;                                                                                    // 1707
        that.send_constructor(createAjaxSender(AjaxObject));                                                           // 1708
        that.poll = new Polling(ri, Receiver, trans_url + url_suffix, AjaxObject);                                     // 1709
    };                                                                                                                 // 1711
                                                                                                                       //
    AjaxBasedTransport.prototype.doCleanup = function () {                                                             // 1713
        var that = this;                                                                                               // 1714
                                                                                                                       //
        if (that.poll) {                                                                                               // 1715
            that.poll.abort();                                                                                         // 1716
            that.poll = null;                                                                                          // 1717
        }                                                                                                              // 1718
    }; // xhr-streaming                                                                                                // 1719
                                                                                                                       //
                                                                                                                       //
    var XhrStreamingTransport = SockJS['xhr-streaming'] = function (ri, trans_url) {                                   // 1722
        this.run(ri, trans_url, '/xhr_streaming', XhrReceiver, utils.XHRCorsObject);                                   // 1723
    };                                                                                                                 // 1724
                                                                                                                       //
    XhrStreamingTransport.prototype = new AjaxBasedTransport();                                                        // 1726
                                                                                                                       //
    XhrStreamingTransport.enabled = function () {                                                                      // 1728
        // Support for CORS Ajax aka Ajax2? Opera 12 claims CORS but                                                   // 1729
        // doesn't do streaming.                                                                                       // 1730
        return _window.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest() && !/opera/i.test(navigator.userAgent);
    };                                                                                                                 // 1734
                                                                                                                       //
    XhrStreamingTransport.roundTrips = 2; // preflight, ajax                                                           // 1735
    // Safari gets confused when a streaming ajax request is started                                                   // 1737
    // before onload. This causes the load indicator to spin indefinetely.                                             // 1738
                                                                                                                       //
    XhrStreamingTransport.need_body = true; // According to:                                                           // 1739
    //   http://stackoverflow.com/questions/1641507/detect-browser-support-for-cross-domain-xmlhttprequests            // 1743
    //   http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/                                         // 1744
    // xdr-streaming                                                                                                   // 1747
                                                                                                                       //
    var XdrStreamingTransport = SockJS['xdr-streaming'] = function (ri, trans_url) {                                   // 1748
        this.run(ri, trans_url, '/xhr_streaming', XhrReceiver, utils.XDRObject);                                       // 1749
    };                                                                                                                 // 1750
                                                                                                                       //
    XdrStreamingTransport.prototype = new AjaxBasedTransport();                                                        // 1752
                                                                                                                       //
    XdrStreamingTransport.enabled = function () {                                                                      // 1754
        return !!_window.XDomainRequest;                                                                               // 1755
    };                                                                                                                 // 1756
                                                                                                                       //
    XdrStreamingTransport.roundTrips = 2; // preflight, ajax                                                           // 1757
    // xhr-polling                                                                                                     // 1761
                                                                                                                       //
    var XhrPollingTransport = SockJS['xhr-polling'] = function (ri, trans_url) {                                       // 1762
        this.run(ri, trans_url, '/xhr', XhrReceiver, utils.XHRCorsObject);                                             // 1763
    };                                                                                                                 // 1764
                                                                                                                       //
    XhrPollingTransport.prototype = new AjaxBasedTransport();                                                          // 1766
    XhrPollingTransport.enabled = XhrStreamingTransport.enabled;                                                       // 1768
    XhrPollingTransport.roundTrips = 2; // preflight, ajax                                                             // 1769
    // xdr-polling                                                                                                     // 1772
                                                                                                                       //
    var XdrPollingTransport = SockJS['xdr-polling'] = function (ri, trans_url) {                                       // 1773
        this.run(ri, trans_url, '/xhr', XhrReceiver, utils.XDRObject);                                                 // 1774
    };                                                                                                                 // 1775
                                                                                                                       //
    XdrPollingTransport.prototype = new AjaxBasedTransport();                                                          // 1777
    XdrPollingTransport.enabled = XdrStreamingTransport.enabled;                                                       // 1779
    XdrPollingTransport.roundTrips = 2; // preflight, ajax                                                             // 1780
    //         [*] End of lib/trans-xhr.js                                                                             // 1781
    //         [*] Including lib/trans-iframe.js                                                                       // 1784
    /*                                                                                                                 // 1785
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */ // Few cool transports do work only for same-origin. In order to make                                          //
    // them working cross-domain we shall use iframe, served form the                                                  // 1794
    // remote domain. New browsers, have capabilities to communicate with                                              // 1795
    // cross domain iframe, using postMessage(). In IE it was implemented                                              // 1796
    // from IE 8+, but of course, IE got some details wrong:                                                           // 1797
    //    http://msdn.microsoft.com/en-us/library/cc197015(v=VS.85).aspx                                               // 1798
    //    http://stevesouders.com/misc/test-postmessage.php                                                            // 1799
                                                                                                                       //
    var IframeTransport = function () {};                                                                              // 1801
                                                                                                                       //
    IframeTransport.prototype.i_constructor = function (ri, trans_url, base_url) {                                     // 1803
        var that = this;                                                                                               // 1804
        that.ri = ri;                                                                                                  // 1805
        that.origin = utils.getOrigin(base_url);                                                                       // 1806
        that.base_url = base_url;                                                                                      // 1807
        that.trans_url = trans_url;                                                                                    // 1808
        var iframe_url = base_url + '/iframe.html';                                                                    // 1810
                                                                                                                       //
        if (that.ri._options.devel) {                                                                                  // 1811
            iframe_url += '?t=' + +new Date();                                                                         // 1812
        }                                                                                                              // 1813
                                                                                                                       //
        that.window_id = utils.random_string(8);                                                                       // 1814
        iframe_url += '#' + that.window_id;                                                                            // 1815
        that.iframeObj = utils.createIframe(iframe_url, function (r) {                                                 // 1817
            that.ri._didClose(1006, "Unable to load an iframe (" + r + ")");                                           // 1818
        });                                                                                                            // 1819
        that.onmessage_cb = utils.bind(that.onmessage, that);                                                          // 1821
        utils.attachMessage(that.onmessage_cb);                                                                        // 1822
    };                                                                                                                 // 1823
                                                                                                                       //
    IframeTransport.prototype.doCleanup = function () {                                                                // 1825
        var that = this;                                                                                               // 1826
                                                                                                                       //
        if (that.iframeObj) {                                                                                          // 1827
            utils.detachMessage(that.onmessage_cb);                                                                    // 1828
                                                                                                                       //
            try {                                                                                                      // 1829
                // When the iframe is not loaded, IE raises an exception                                               // 1830
                // on 'contentWindow'.                                                                                 // 1831
                if (that.iframeObj.iframe.contentWindow) {                                                             // 1832
                    that.postMessage('c');                                                                             // 1833
                }                                                                                                      // 1834
            } catch (x) {}                                                                                             // 1835
                                                                                                                       //
            that.iframeObj.cleanup();                                                                                  // 1836
            that.iframeObj = null;                                                                                     // 1837
            that.onmessage_cb = that.iframeObj = null;                                                                 // 1838
        }                                                                                                              // 1839
    };                                                                                                                 // 1840
                                                                                                                       //
    IframeTransport.prototype.onmessage = function (e) {                                                               // 1842
        var that = this;                                                                                               // 1843
        if (e.origin !== that.origin) return;                                                                          // 1844
        var window_id = e.data.slice(0, 8);                                                                            // 1845
        var type = e.data.slice(8, 9);                                                                                 // 1846
        var data = e.data.slice(9);                                                                                    // 1847
        if (window_id !== that.window_id) return;                                                                      // 1849
                                                                                                                       //
        switch (type) {                                                                                                // 1851
            case 's':                                                                                                  // 1852
                that.iframeObj.loaded();                                                                               // 1853
                that.postMessage('s', JSON.stringify([SockJS.version, that.protocol, that.trans_url, that.base_url]));
                break;                                                                                                 // 1855
                                                                                                                       //
            case 't':                                                                                                  // 1856
                that.ri._didMessage(data);                                                                             // 1857
                                                                                                                       //
                break;                                                                                                 // 1858
        }                                                                                                              // 1851
    };                                                                                                                 // 1860
                                                                                                                       //
    IframeTransport.prototype.postMessage = function (type, data) {                                                    // 1862
        var that = this;                                                                                               // 1863
        that.iframeObj.post(that.window_id + type + (data || ''), that.origin);                                        // 1864
    };                                                                                                                 // 1865
                                                                                                                       //
    IframeTransport.prototype.doSend = function (message) {                                                            // 1867
        this.postMessage('m', message);                                                                                // 1868
    };                                                                                                                 // 1869
                                                                                                                       //
    IframeTransport.enabled = function () {                                                                            // 1871
        // postMessage misbehaves in konqueror 4.6.5 - the messages are delivered with                                 // 1872
        // huge delay, or not at all.                                                                                  // 1873
        var konqueror = navigator && navigator.userAgent && navigator.userAgent.indexOf('Konqueror') !== -1;           // 1874
        return (typeof _window.postMessage === 'function' || (0, _typeof3.default)(_window.postMessage) === 'object') && !konqueror;
    }; //         [*] End of lib/trans-iframe.js                                                                       // 1877
    //         [*] Including lib/trans-iframe-within.js                                                                // 1881
    /*                                                                                                                 // 1882
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */                                                                                                                //
                                                                                                                       //
    var curr_window_id;                                                                                                // 1890
                                                                                                                       //
    var postMessage = function (type, data) {                                                                          // 1892
        if (parent !== _window) {                                                                                      // 1893
            parent.postMessage(curr_window_id + type + (data || ''), '*');                                             // 1894
        } else {                                                                                                       // 1895
            utils.log("Can't postMessage, no parent window.", type, data);                                             // 1896
        }                                                                                                              // 1897
    };                                                                                                                 // 1898
                                                                                                                       //
    var FacadeJS = function () {};                                                                                     // 1900
                                                                                                                       //
    FacadeJS.prototype._didClose = function (code, reason) {                                                           // 1901
        postMessage('t', utils.closeFrame(code, reason));                                                              // 1902
    };                                                                                                                 // 1903
                                                                                                                       //
    FacadeJS.prototype._didMessage = function (frame) {                                                                // 1904
        postMessage('t', frame);                                                                                       // 1905
    };                                                                                                                 // 1906
                                                                                                                       //
    FacadeJS.prototype._doSend = function (data) {                                                                     // 1907
        this._transport.doSend(data);                                                                                  // 1908
    };                                                                                                                 // 1909
                                                                                                                       //
    FacadeJS.prototype._doCleanup = function () {                                                                      // 1910
        this._transport.doCleanup();                                                                                   // 1911
    };                                                                                                                 // 1912
                                                                                                                       //
    utils.parent_origin = undefined;                                                                                   // 1914
                                                                                                                       //
    SockJS.bootstrap_iframe = function () {                                                                            // 1916
        var facade;                                                                                                    // 1917
        curr_window_id = _document.location.hash.slice(1);                                                             // 1918
                                                                                                                       //
        var onMessage = function (e) {                                                                                 // 1919
            if (e.source !== parent) return;                                                                           // 1920
            if (typeof utils.parent_origin === 'undefined') utils.parent_origin = e.origin;                            // 1921
            if (e.origin !== utils.parent_origin) return;                                                              // 1923
            var window_id = e.data.slice(0, 8);                                                                        // 1925
            var type = e.data.slice(8, 9);                                                                             // 1926
            var data = e.data.slice(9);                                                                                // 1927
            if (window_id !== curr_window_id) return;                                                                  // 1928
                                                                                                                       //
            switch (type) {                                                                                            // 1929
                case 's':                                                                                              // 1930
                    var p = JSON.parse(data);                                                                          // 1931
                    var version = p[0];                                                                                // 1932
                    var protocol = p[1];                                                                               // 1933
                    var trans_url = p[2];                                                                              // 1934
                    var base_url = p[3];                                                                               // 1935
                                                                                                                       //
                    if (version !== SockJS.version) {                                                                  // 1936
                        utils.log("Incompatibile SockJS! Main site uses:" + " \"" + version + "\", the iframe:" + " \"" + SockJS.version + "\".");
                    }                                                                                                  // 1940
                                                                                                                       //
                    if (!utils.flatUrl(trans_url) || !utils.flatUrl(base_url)) {                                       // 1941
                        utils.log("Only basic urls are supported in SockJS");                                          // 1942
                        return;                                                                                        // 1943
                    }                                                                                                  // 1944
                                                                                                                       //
                    if (!utils.isSameOriginUrl(trans_url) || !utils.isSameOriginUrl(base_url)) {                       // 1946
                        utils.log("Can't connect to different domain from within an " + "iframe. (" + JSON.stringify([_window.location.href, trans_url, base_url]) + ")");
                        return;                                                                                        // 1951
                    }                                                                                                  // 1952
                                                                                                                       //
                    facade = new FacadeJS();                                                                           // 1953
                    facade._transport = new FacadeJS[protocol](facade, trans_url, base_url);                           // 1954
                    break;                                                                                             // 1955
                                                                                                                       //
                case 'm':                                                                                              // 1956
                    facade._doSend(data);                                                                              // 1957
                                                                                                                       //
                    break;                                                                                             // 1958
                                                                                                                       //
                case 'c':                                                                                              // 1959
                    if (facade) facade._doCleanup();                                                                   // 1960
                    facade = null;                                                                                     // 1962
                    break;                                                                                             // 1963
            }                                                                                                          // 1929
        }; // alert('test ticker');                                                                                    // 1965
        // facade = new FacadeJS();                                                                                    // 1968
        // facade._transport = new FacadeJS['w-iframe-xhr-polling'](facade, 'http://host.com:9999/ticker/12/basd');    // 1969
                                                                                                                       //
                                                                                                                       //
        utils.attachMessage(onMessage); // Start                                                                       // 1971
                                                                                                                       //
        postMessage('s');                                                                                              // 1974
    }; //         [*] End of lib/trans-iframe-within.js                                                                // 1975
    //         [*] Including lib/info.js                                                                               // 1979
    /*                                                                                                                 // 1980
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */                                                                                                                //
                                                                                                                       //
    var InfoReceiver = function (base_url, AjaxObject) {                                                               // 1988
        var that = this;                                                                                               // 1989
        utils.delay(function () {                                                                                      // 1990
            that.doXhr(base_url, AjaxObject);                                                                          // 1990
        });                                                                                                            // 1990
    };                                                                                                                 // 1991
                                                                                                                       //
    InfoReceiver.prototype = new EventEmitter(['finish']);                                                             // 1993
                                                                                                                       //
    InfoReceiver.prototype.doXhr = function (base_url, AjaxObject) {                                                   // 1995
        var that = this;                                                                                               // 1996
        var t0 = new Date().getTime(); // <METEOR>                                                                     // 1997
        // https://github.com/sockjs/sockjs-client/pull/129                                                            // 2000
        // var xo = new AjaxObject('GET', base_url + '/info');                                                         // 2001
                                                                                                                       //
        var xo = new AjaxObject( // add cachebusting parameter to url to work around a chrome bug:                     // 2003
        // https://code.google.com/p/chromium/issues/detail?id=263981                                                  // 2005
        // or misbehaving proxies.                                                                                     // 2006
        'GET', base_url + '/info?cb=' + utils.random_string(10)); // </METEOR>                                         // 2007
                                                                                                                       //
        var tref = utils.delay(8000, function () {                                                                     // 2010
            xo.ontimeout();                                                                                            // 2011
        });                                                                                                            // 2011
                                                                                                                       //
        xo.onfinish = function (status, text) {                                                                        // 2013
            clearTimeout(tref);                                                                                        // 2014
            tref = null;                                                                                               // 2015
                                                                                                                       //
            if (status === 200) {                                                                                      // 2016
                var rtt = new Date().getTime() - t0;                                                                   // 2017
                var info = JSON.parse(text);                                                                           // 2018
                if ((typeof info === "undefined" ? "undefined" : (0, _typeof3.default)(info)) !== 'object') info = {};
                that.emit('finish', info, rtt);                                                                        // 2020
            } else {                                                                                                   // 2021
                that.emit('finish');                                                                                   // 2022
            }                                                                                                          // 2023
        };                                                                                                             // 2024
                                                                                                                       //
        xo.ontimeout = function () {                                                                                   // 2025
            xo.close();                                                                                                // 2026
            that.emit('finish');                                                                                       // 2027
        };                                                                                                             // 2028
    };                                                                                                                 // 2029
                                                                                                                       //
    var InfoReceiverIframe = function (base_url) {                                                                     // 2031
        var that = this;                                                                                               // 2032
                                                                                                                       //
        var go = function () {                                                                                         // 2033
            var ifr = new IframeTransport();                                                                           // 2034
            ifr.protocol = 'w-iframe-info-receiver';                                                                   // 2035
                                                                                                                       //
            var fun = function (r) {                                                                                   // 2036
                if (typeof r === 'string' && r.substr(0, 1) === 'm') {                                                 // 2037
                    var d = JSON.parse(r.substr(1));                                                                   // 2038
                    var info = d[0],                                                                                   // 2039
                        rtt = d[1];                                                                                    // 2039
                    that.emit('finish', info, rtt);                                                                    // 2040
                } else {                                                                                               // 2041
                    that.emit('finish');                                                                               // 2042
                }                                                                                                      // 2043
                                                                                                                       //
                ifr.doCleanup();                                                                                       // 2044
                ifr = null;                                                                                            // 2045
            };                                                                                                         // 2046
                                                                                                                       //
            var mock_ri = {                                                                                            // 2047
                _options: {},                                                                                          // 2048
                _didClose: fun,                                                                                        // 2049
                _didMessage: fun                                                                                       // 2050
            };                                                                                                         // 2047
            ifr.i_constructor(mock_ri, base_url, base_url);                                                            // 2052
        };                                                                                                             // 2053
                                                                                                                       //
        if (!_document.body) {                                                                                         // 2054
            utils.attachEvent('load', go);                                                                             // 2055
        } else {                                                                                                       // 2056
            go();                                                                                                      // 2057
        }                                                                                                              // 2058
    };                                                                                                                 // 2059
                                                                                                                       //
    InfoReceiverIframe.prototype = new EventEmitter(['finish']);                                                       // 2060
                                                                                                                       //
    var InfoReceiverFake = function () {                                                                               // 2063
        // It may not be possible to do cross domain AJAX to get the info                                              // 2064
        // data, for example for IE7. But we want to run JSONP, so let's                                               // 2065
        // fake the response, with rtt=2s (rto=6s).                                                                    // 2066
        var that = this;                                                                                               // 2067
        utils.delay(function () {                                                                                      // 2068
            that.emit('finish', {}, 2000);                                                                             // 2069
        });                                                                                                            // 2070
    };                                                                                                                 // 2071
                                                                                                                       //
    InfoReceiverFake.prototype = new EventEmitter(['finish']);                                                         // 2072
                                                                                                                       //
    var createInfoReceiver = function (base_url) {                                                                     // 2074
        if (utils.isSameOriginUrl(base_url)) {                                                                         // 2075
            // If, for some reason, we have SockJS locally - there's no                                                // 2076
            // need to start up the complex machinery. Just use ajax.                                                  // 2077
            return new InfoReceiver(base_url, utils.XHRLocalObject);                                                   // 2078
        }                                                                                                              // 2079
                                                                                                                       //
        switch (utils.isXHRCorsCapable()) {                                                                            // 2080
            case 1:                                                                                                    // 2081
                // XHRLocalObject -> no_credentials=true                                                               // 2082
                return new InfoReceiver(base_url, utils.XHRLocalObject);                                               // 2083
                                                                                                                       //
            case 2:                                                                                                    // 2084
                // <METEOR>                                                                                            // 2085
                // https://github.com/sockjs/sockjs-client/issues/79                                                   // 2086
                // XDR doesn't work across different schemes                                                           // 2087
                // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx
                if (utils.isSameOriginScheme(base_url)) return new InfoReceiver(base_url, utils.XDRObject);else return new InfoReceiverFake();
            // </METEOR>                                                                                               // 2093
                                                                                                                       //
            case 3:                                                                                                    // 2094
                // Opera                                                                                               // 2095
                return new InfoReceiverIframe(base_url);                                                               // 2096
                                                                                                                       //
            default:                                                                                                   // 2097
                // IE 7                                                                                                // 2098
                return new InfoReceiverFake();                                                                         // 2099
        }                                                                                                              // 2080
                                                                                                                       //
        ;                                                                                                              // 2100
    };                                                                                                                 // 2101
                                                                                                                       //
    var WInfoReceiverIframe = FacadeJS['w-iframe-info-receiver'] = function (ri, _trans_url, base_url) {               // 2104
        var ir = new InfoReceiver(base_url, utils.XHRLocalObject);                                                     // 2105
                                                                                                                       //
        ir.onfinish = function (info, rtt) {                                                                           // 2106
            ri._didMessage('m' + JSON.stringify([info, rtt]));                                                         // 2107
                                                                                                                       //
            ri._didClose();                                                                                            // 2108
        };                                                                                                             // 2109
    };                                                                                                                 // 2110
                                                                                                                       //
    WInfoReceiverIframe.prototype.doCleanup = function () {}; //         [*] End of lib/info.js                        // 2111
    //         [*] Including lib/trans-iframe-eventsource.js                                                           // 2115
    /*                                                                                                                 // 2116
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */                                                                                                                //
                                                                                                                       //
    var EventSourceIframeTransport = SockJS['iframe-eventsource'] = function () {                                      // 2124
        var that = this;                                                                                               // 2125
        that.protocol = 'w-iframe-eventsource';                                                                        // 2126
        that.i_constructor.apply(that, arguments);                                                                     // 2127
    };                                                                                                                 // 2128
                                                                                                                       //
    EventSourceIframeTransport.prototype = new IframeTransport();                                                      // 2130
                                                                                                                       //
    EventSourceIframeTransport.enabled = function () {                                                                 // 2132
        return 'EventSource' in _window && IframeTransport.enabled();                                                  // 2133
    };                                                                                                                 // 2134
                                                                                                                       //
    EventSourceIframeTransport.need_body = true;                                                                       // 2136
    EventSourceIframeTransport.roundTrips = 3; // html, javascript, eventsource                                        // 2137
    // w-iframe-eventsource                                                                                            // 2140
                                                                                                                       //
    var EventSourceTransport = FacadeJS['w-iframe-eventsource'] = function (ri, trans_url) {                           // 2141
        this.run(ri, trans_url, '/eventsource', EventSourceReceiver, utils.XHRLocalObject);                            // 2142
    };                                                                                                                 // 2143
                                                                                                                       //
    EventSourceTransport.prototype = new AjaxBasedTransport(); //         [*] End of lib/trans-iframe-eventsource.js   // 2144
    //         [*] Including lib/trans-iframe-xhr-polling.js                                                           // 2148
    /*                                                                                                                 // 2149
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */                                                                                                                //
                                                                                                                       //
    var XhrPollingIframeTransport = SockJS['iframe-xhr-polling'] = function () {                                       // 2157
        var that = this;                                                                                               // 2158
        that.protocol = 'w-iframe-xhr-polling';                                                                        // 2159
        that.i_constructor.apply(that, arguments);                                                                     // 2160
    };                                                                                                                 // 2161
                                                                                                                       //
    XhrPollingIframeTransport.prototype = new IframeTransport();                                                       // 2163
                                                                                                                       //
    XhrPollingIframeTransport.enabled = function () {                                                                  // 2165
        return _window.XMLHttpRequest && IframeTransport.enabled();                                                    // 2166
    };                                                                                                                 // 2167
                                                                                                                       //
    XhrPollingIframeTransport.need_body = true;                                                                        // 2169
    XhrPollingIframeTransport.roundTrips = 3; // html, javascript, xhr                                                 // 2170
    // w-iframe-xhr-polling                                                                                            // 2173
                                                                                                                       //
    var XhrPollingITransport = FacadeJS['w-iframe-xhr-polling'] = function (ri, trans_url) {                           // 2174
        this.run(ri, trans_url, '/xhr', XhrReceiver, utils.XHRLocalObject);                                            // 2175
    };                                                                                                                 // 2176
                                                                                                                       //
    XhrPollingITransport.prototype = new AjaxBasedTransport(); //         [*] End of lib/trans-iframe-xhr-polling.js   // 2178
    //         [*] Including lib/trans-iframe-htmlfile.js                                                              // 2182
    /*                                                                                                                 // 2183
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */ // This transport generally works in any browser, but will cause a                                             //
    // spinning cursor to appear in any browser other than IE.                                                         // 2192
    // We may test this transport in all browsers - why not, but in                                                    // 2193
    // production it should be only run in IE.                                                                         // 2194
                                                                                                                       //
    var HtmlFileIframeTransport = SockJS['iframe-htmlfile'] = function () {                                            // 2196
        var that = this;                                                                                               // 2197
        that.protocol = 'w-iframe-htmlfile';                                                                           // 2198
        that.i_constructor.apply(that, arguments);                                                                     // 2199
    }; // Inheritance.                                                                                                 // 2200
                                                                                                                       //
                                                                                                                       //
    HtmlFileIframeTransport.prototype = new IframeTransport();                                                         // 2203
                                                                                                                       //
    HtmlFileIframeTransport.enabled = function () {                                                                    // 2205
        return IframeTransport.enabled();                                                                              // 2206
    };                                                                                                                 // 2207
                                                                                                                       //
    HtmlFileIframeTransport.need_body = true;                                                                          // 2209
    HtmlFileIframeTransport.roundTrips = 3; // html, javascript, htmlfile                                              // 2210
    // w-iframe-htmlfile                                                                                               // 2213
                                                                                                                       //
    var HtmlFileTransport = FacadeJS['w-iframe-htmlfile'] = function (ri, trans_url) {                                 // 2214
        this.run(ri, trans_url, '/htmlfile', HtmlfileReceiver, utils.XHRLocalObject);                                  // 2215
    };                                                                                                                 // 2216
                                                                                                                       //
    HtmlFileTransport.prototype = new AjaxBasedTransport(); //         [*] End of lib/trans-iframe-htmlfile.js         // 2217
    //         [*] Including lib/trans-polling.js                                                                      // 2221
    /*                                                                                                                 // 2222
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */                                                                                                                //
                                                                                                                       //
    var Polling = function (ri, Receiver, recv_url, AjaxObject) {                                                      // 2230
        var that = this;                                                                                               // 2231
        that.ri = ri;                                                                                                  // 2232
        that.Receiver = Receiver;                                                                                      // 2233
        that.recv_url = recv_url;                                                                                      // 2234
        that.AjaxObject = AjaxObject;                                                                                  // 2235
                                                                                                                       //
        that._scheduleRecv();                                                                                          // 2236
    };                                                                                                                 // 2237
                                                                                                                       //
    Polling.prototype._scheduleRecv = function () {                                                                    // 2239
        var that = this;                                                                                               // 2240
        var poll = that.poll = new that.Receiver(that.recv_url, that.AjaxObject);                                      // 2241
        var msg_counter = 0;                                                                                           // 2242
                                                                                                                       //
        poll.onmessage = function (e) {                                                                                // 2243
            msg_counter += 1;                                                                                          // 2244
                                                                                                                       //
            that.ri._didMessage(e.data);                                                                               // 2245
        };                                                                                                             // 2246
                                                                                                                       //
        poll.onclose = function (e) {                                                                                  // 2247
            that.poll = poll = poll.onmessage = poll.onclose = null;                                                   // 2248
                                                                                                                       //
            if (!that.poll_is_closing) {                                                                               // 2249
                if (e.reason === 'permanent') {                                                                        // 2250
                    that.ri._didClose(1006, 'Polling error (' + e.reason + ')');                                       // 2251
                } else {                                                                                               // 2252
                    that._scheduleRecv();                                                                              // 2253
                }                                                                                                      // 2254
            }                                                                                                          // 2255
        };                                                                                                             // 2256
    };                                                                                                                 // 2257
                                                                                                                       //
    Polling.prototype.abort = function () {                                                                            // 2259
        var that = this;                                                                                               // 2260
        that.poll_is_closing = true;                                                                                   // 2261
                                                                                                                       //
        if (that.poll) {                                                                                               // 2262
            that.poll.abort();                                                                                         // 2263
        }                                                                                                              // 2264
    }; //         [*] End of lib/trans-polling.js                                                                      // 2265
    //         [*] Including lib/trans-receiver-eventsource.js                                                         // 2269
    /*                                                                                                                 // 2270
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */                                                                                                                //
                                                                                                                       //
    var EventSourceReceiver = function (url) {                                                                         // 2278
        var that = this;                                                                                               // 2279
        var es = new EventSource(url);                                                                                 // 2280
                                                                                                                       //
        es.onmessage = function (e) {                                                                                  // 2281
            that.dispatchEvent(new SimpleEvent('message', {                                                            // 2282
                'data': unescape(e.data)                                                                               // 2283
            }));                                                                                                       // 2283
        };                                                                                                             // 2284
                                                                                                                       //
        that.es_close = es.onerror = function (e, abort_reason) {                                                      // 2285
            // ES on reconnection has readyState = 0 or 1.                                                             // 2286
            // on network error it's CLOSED = 2                                                                        // 2287
            var reason = abort_reason ? 'user' : es.readyState !== 2 ? 'network' : 'permanent';                        // 2288
            that.es_close = es.onmessage = es.onerror = null; // EventSource reconnects automatically.                 // 2290
                                                                                                                       //
            es.close();                                                                                                // 2292
            es = null; // Safari and chrome < 15 crash if we close window before                                       // 2293
            // waiting for ES cleanup. See:                                                                            // 2295
            //   https://code.google.com/p/chromium/issues/detail?id=89155                                             // 2296
                                                                                                                       //
            utils.delay(200, function () {                                                                             // 2297
                that.dispatchEvent(new SimpleEvent('close', {                                                          // 2298
                    reason: reason                                                                                     // 2298
                }));                                                                                                   // 2298
            });                                                                                                        // 2299
        };                                                                                                             // 2300
    };                                                                                                                 // 2301
                                                                                                                       //
    EventSourceReceiver.prototype = new REventTarget();                                                                // 2303
                                                                                                                       //
    EventSourceReceiver.prototype.abort = function () {                                                                // 2305
        var that = this;                                                                                               // 2306
                                                                                                                       //
        if (that.es_close) {                                                                                           // 2307
            that.es_close({}, true);                                                                                   // 2308
        }                                                                                                              // 2309
    }; //         [*] End of lib/trans-receiver-eventsource.js                                                         // 2310
    //         [*] Including lib/trans-receiver-htmlfile.js                                                            // 2314
    /*                                                                                                                 // 2315
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */                                                                                                                //
                                                                                                                       //
    var _is_ie_htmlfile_capable;                                                                                       // 2323
                                                                                                                       //
    var isIeHtmlfileCapable = function () {                                                                            // 2324
        if (_is_ie_htmlfile_capable === undefined) {                                                                   // 2325
            if ('ActiveXObject' in _window) {                                                                          // 2326
                try {                                                                                                  // 2327
                    _is_ie_htmlfile_capable = !!new ActiveXObject('htmlfile');                                         // 2328
                } catch (x) {}                                                                                         // 2329
            } else {                                                                                                   // 2330
                _is_ie_htmlfile_capable = false;                                                                       // 2331
            }                                                                                                          // 2332
        }                                                                                                              // 2333
                                                                                                                       //
        return _is_ie_htmlfile_capable;                                                                                // 2334
    };                                                                                                                 // 2335
                                                                                                                       //
    var HtmlfileReceiver = function (url) {                                                                            // 2338
        var that = this;                                                                                               // 2339
        utils.polluteGlobalNamespace();                                                                                // 2340
        that.id = 'a' + utils.random_string(6, 26);                                                                    // 2342
        url += (url.indexOf('?') === -1 ? '?' : '&') + 'c=' + escape(WPrefix + '.' + that.id);                         // 2343
        var constructor = isIeHtmlfileCapable() ? utils.createHtmlfile : utils.createIframe;                           // 2346
        var iframeObj;                                                                                                 // 2349
        _window[WPrefix][that.id] = {                                                                                  // 2350
            start: function () {                                                                                       // 2351
                iframeObj.loaded();                                                                                    // 2352
            },                                                                                                         // 2353
            message: function (data) {                                                                                 // 2354
                that.dispatchEvent(new SimpleEvent('message', {                                                        // 2355
                    'data': data                                                                                       // 2355
                }));                                                                                                   // 2355
            },                                                                                                         // 2356
            stop: function () {                                                                                        // 2357
                that.iframe_close({}, 'network');                                                                      // 2358
            }                                                                                                          // 2359
        };                                                                                                             // 2350
                                                                                                                       //
        that.iframe_close = function (e, abort_reason) {                                                               // 2361
            iframeObj.cleanup();                                                                                       // 2362
            that.iframe_close = iframeObj = null;                                                                      // 2363
            delete _window[WPrefix][that.id];                                                                          // 2364
            that.dispatchEvent(new SimpleEvent('close', {                                                              // 2365
                reason: abort_reason                                                                                   // 2365
            }));                                                                                                       // 2365
        };                                                                                                             // 2366
                                                                                                                       //
        iframeObj = constructor(url, function (e) {                                                                    // 2367
            that.iframe_close({}, 'permanent');                                                                        // 2368
        });                                                                                                            // 2369
    };                                                                                                                 // 2370
                                                                                                                       //
    HtmlfileReceiver.prototype = new REventTarget();                                                                   // 2372
                                                                                                                       //
    HtmlfileReceiver.prototype.abort = function () {                                                                   // 2374
        var that = this;                                                                                               // 2375
                                                                                                                       //
        if (that.iframe_close) {                                                                                       // 2376
            that.iframe_close({}, 'user');                                                                             // 2377
        }                                                                                                              // 2378
    }; //         [*] End of lib/trans-receiver-htmlfile.js                                                            // 2379
    //         [*] Including lib/trans-receiver-xhr.js                                                                 // 2383
    /*                                                                                                                 // 2384
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */                                                                                                                //
                                                                                                                       //
    var XhrReceiver = function (url, AjaxObject) {                                                                     // 2392
        var that = this;                                                                                               // 2393
        var buf_pos = 0;                                                                                               // 2394
        that.xo = new AjaxObject('POST', url, null);                                                                   // 2396
                                                                                                                       //
        that.xo.onchunk = function (status, text) {                                                                    // 2397
            if (status !== 200) return;                                                                                // 2398
                                                                                                                       //
            while (1) {                                                                                                // 2399
                var buf = text.slice(buf_pos);                                                                         // 2400
                var p = buf.indexOf('\n');                                                                             // 2401
                if (p === -1) break;                                                                                   // 2402
                buf_pos += p + 1;                                                                                      // 2403
                var msg = buf.slice(0, p);                                                                             // 2404
                that.dispatchEvent(new SimpleEvent('message', {                                                        // 2405
                    data: msg                                                                                          // 2405
                }));                                                                                                   // 2405
            }                                                                                                          // 2406
        };                                                                                                             // 2407
                                                                                                                       //
        that.xo.onfinish = function (status, text) {                                                                   // 2408
            that.xo.onchunk(status, text);                                                                             // 2409
            that.xo = null;                                                                                            // 2410
            var reason = status === 200 ? 'network' : 'permanent';                                                     // 2411
            that.dispatchEvent(new SimpleEvent('close', {                                                              // 2412
                reason: reason                                                                                         // 2412
            }));                                                                                                       // 2412
        };                                                                                                             // 2413
    };                                                                                                                 // 2414
                                                                                                                       //
    XhrReceiver.prototype = new REventTarget();                                                                        // 2416
                                                                                                                       //
    XhrReceiver.prototype.abort = function () {                                                                        // 2418
        var that = this;                                                                                               // 2419
                                                                                                                       //
        if (that.xo) {                                                                                                 // 2420
            that.xo.close();                                                                                           // 2421
            that.dispatchEvent(new SimpleEvent('close', {                                                              // 2422
                reason: 'user'                                                                                         // 2422
            }));                                                                                                       // 2422
            that.xo = null;                                                                                            // 2423
        }                                                                                                              // 2424
    }; //         [*] End of lib/trans-receiver-xhr.js                                                                 // 2425
    //         [*] Including lib/test-hooks.js                                                                         // 2429
    /*                                                                                                                 // 2430
     * ***** BEGIN LICENSE BLOCK *****                                                                                 //
     * Copyright (c) 2011-2012 VMware, Inc.                                                                            //
     *                                                                                                                 //
     * For the license see COPYING.                                                                                    //
     * ***** END LICENSE BLOCK *****                                                                                   //
     */ // For testing                                                                                                 //
                                                                                                                       //
                                                                                                                       //
    SockJS.getUtils = function () {                                                                                    // 2439
        return utils;                                                                                                  // 2440
    };                                                                                                                 // 2441
                                                                                                                       //
    SockJS.getIframeTransport = function () {                                                                          // 2443
        return IframeTransport;                                                                                        // 2444
    }; //         [*] End of lib/test-hooks.js                                                                         // 2445
                                                                                                                       //
                                                                                                                       //
    return SockJS;                                                                                                     // 2448
}();                                                                                                                   // 2449
                                                                                                                       //
if ('_sockjs_onload' in window) setTimeout(_sockjs_onload, 1); // AMD compliance                                       // 2450
                                                                                                                       //
if (typeof define === 'function' && define.amd) {                                                                      // 2453
    define('sockjs', [], function () {                                                                                 // 2454
        return SockJS;                                                                                                 // 2454
    });                                                                                                                // 2454
} //     [*] End of lib/index.js                                                                                       // 2455
// [*] End of lib/all.js                                                                                               // 2458
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"stream_client_sockjs.js":["./namespace.js",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/ddp-client/stream_client_sockjs.js                                                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var DDP = void 0,                                                                                                      // 1
    LivedataTest = void 0;                                                                                             // 1
module.importSync("./namespace.js", {                                                                                  // 1
  DDP: function (v) {                                                                                                  // 1
    DDP = v;                                                                                                           // 1
  },                                                                                                                   // 1
  LivedataTest: function (v) {                                                                                         // 1
    LivedataTest = v;                                                                                                  // 1
  }                                                                                                                    // 1
}, 0);                                                                                                                 // 1
                                                                                                                       //
// @param url {String} URL to Meteor app                                                                               // 3
//   "http://subdomain.meteor.com/" or "/" or                                                                          // 4
//   "ddp+sockjs://foo-**.meteor.com/sockjs"                                                                           // 5
LivedataTest.ClientStream = function (url, options) {                                                                  // 6
  var self = this;                                                                                                     // 7
  self.options = _.extend({                                                                                            // 8
    retry: true                                                                                                        // 9
  }, options);                                                                                                         // 8
                                                                                                                       //
  self._initCommon(self.options); //// Constants                                                                       // 11
  // how long between hearing heartbeat from the server until we declare                                               // 16
  // the connection dead. heartbeats come every 45s (stream_server.js)                                                 // 17
  //                                                                                                                   // 18
  // NOTE: this is a older timeout mechanism. We now send heartbeats at                                                // 19
  // the DDP level (https://github.com/meteor/meteor/pull/1865), and                                                   // 20
  // expect those timeouts to kill a non-responsive connection before                                                  // 21
  // this timeout fires. This is kept around for compatibility (when                                                   // 22
  // talking to a server that doesn't support DDP heartbeats) and can be                                               // 23
  // removed later.                                                                                                    // 24
                                                                                                                       //
                                                                                                                       //
  self.HEARTBEAT_TIMEOUT = 100 * 1000;                                                                                 // 25
  self.rawUrl = url;                                                                                                   // 27
  self.socket = null;                                                                                                  // 28
  self.heartbeatTimer = null; // Listen to global 'online' event if we are running in a browser.                       // 30
  // (IE8 does not support addEventListener)                                                                           // 33
                                                                                                                       //
  if (typeof window !== 'undefined' && window.addEventListener) window.addEventListener("online", _.bind(self._online, self), false /* useCapture. make FF3.6 happy. */); //// Kickoff!
                                                                                                                       //
  self._launchConnection();                                                                                            // 39
};                                                                                                                     // 40
                                                                                                                       //
_.extend(LivedataTest.ClientStream.prototype, {                                                                        // 42
  // data is a utf8 string. Data sent while not connected is dropped on                                                // 44
  // the floor, and it is up the user of this API to retransmit lost                                                   // 45
  // messages on 'reset'                                                                                               // 46
  send: function (data) {                                                                                              // 47
    var self = this;                                                                                                   // 48
                                                                                                                       //
    if (self.currentStatus.connected) {                                                                                // 49
      self.socket.send(data);                                                                                          // 50
    }                                                                                                                  // 51
  },                                                                                                                   // 52
  // Changes where this connection points                                                                              // 54
  _changeUrl: function (url) {                                                                                         // 55
    var self = this;                                                                                                   // 56
    self.rawUrl = url;                                                                                                 // 57
  },                                                                                                                   // 58
  _connected: function () {                                                                                            // 60
    var self = this;                                                                                                   // 61
                                                                                                                       //
    if (self.connectionTimer) {                                                                                        // 63
      clearTimeout(self.connectionTimer);                                                                              // 64
      self.connectionTimer = null;                                                                                     // 65
    }                                                                                                                  // 66
                                                                                                                       //
    if (self.currentStatus.connected) {                                                                                // 68
      // already connected. do nothing. this probably shouldn't happen.                                                // 69
      return;                                                                                                          // 70
    } // update status                                                                                                 // 71
                                                                                                                       //
                                                                                                                       //
    self.currentStatus.status = "connected";                                                                           // 74
    self.currentStatus.connected = true;                                                                               // 75
    self.currentStatus.retryCount = 0;                                                                                 // 76
    self.statusChanged(); // fire resets. This must come after status change so that clients                           // 77
    // can call send from within a reset callback.                                                                     // 80
                                                                                                                       //
    _.each(self.eventCallbacks.reset, function (callback) {                                                            // 81
      callback();                                                                                                      // 81
    });                                                                                                                // 81
  },                                                                                                                   // 83
  _cleanup: function (maybeError) {                                                                                    // 85
    var self = this;                                                                                                   // 86
                                                                                                                       //
    self._clearConnectionAndHeartbeatTimers();                                                                         // 88
                                                                                                                       //
    if (self.socket) {                                                                                                 // 89
      self.socket.onmessage = self.socket.onclose = self.socket.onerror = self.socket.onheartbeat = function () {};    // 90
                                                                                                                       //
      self.socket.close();                                                                                             // 92
      self.socket = null;                                                                                              // 93
    }                                                                                                                  // 94
                                                                                                                       //
    _.each(self.eventCallbacks.disconnect, function (callback) {                                                       // 96
      callback(maybeError);                                                                                            // 97
    });                                                                                                                // 98
  },                                                                                                                   // 99
  _clearConnectionAndHeartbeatTimers: function () {                                                                    // 101
    var self = this;                                                                                                   // 102
                                                                                                                       //
    if (self.connectionTimer) {                                                                                        // 103
      clearTimeout(self.connectionTimer);                                                                              // 104
      self.connectionTimer = null;                                                                                     // 105
    }                                                                                                                  // 106
                                                                                                                       //
    if (self.heartbeatTimer) {                                                                                         // 107
      clearTimeout(self.heartbeatTimer);                                                                               // 108
      self.heartbeatTimer = null;                                                                                      // 109
    }                                                                                                                  // 110
  },                                                                                                                   // 111
  _heartbeat_timeout: function () {                                                                                    // 113
    var self = this;                                                                                                   // 114
                                                                                                                       //
    Meteor._debug("Connection timeout. No sockjs heartbeat received.");                                                // 115
                                                                                                                       //
    self._lostConnection(new DDP.ConnectionError("Heartbeat timed out"));                                              // 116
  },                                                                                                                   // 117
  _heartbeat_received: function () {                                                                                   // 119
    var self = this; // If we've already permanently shut down this stream, the timeout is                             // 120
    // already cleared, and we don't need to set it again.                                                             // 122
                                                                                                                       //
    if (self._forcedToDisconnect) return;                                                                              // 123
    if (self.heartbeatTimer) clearTimeout(self.heartbeatTimer);                                                        // 125
    self.heartbeatTimer = setTimeout(_.bind(self._heartbeat_timeout, self), self.HEARTBEAT_TIMEOUT);                   // 127
  },                                                                                                                   // 130
  _sockjsProtocolsWhitelist: function () {                                                                             // 132
    // only allow polling protocols. no streaming.  streaming                                                          // 133
    // makes safari spin.                                                                                              // 134
    var protocolsWhitelist = ['xdr-polling', 'xhr-polling', 'iframe-xhr-polling', 'jsonp-polling']; // iOS 4 and 5 and below crash when using websockets over certain
    // proxies. this seems to be resolved with iOS 6. eg                                                               // 139
    // https://github.com/LearnBoost/socket.io/issues/193#issuecomment-7308865.                                        // 140
    //                                                                                                                 // 141
    // iOS <4 doesn't support websockets at all so sockjs will just                                                    // 142
    // immediately fall back to http                                                                                   // 143
                                                                                                                       //
    var noWebsockets = navigator && /iPhone|iPad|iPod/.test(navigator.userAgent) && /OS 4_|OS 5_/.test(navigator.userAgent);
    if (!noWebsockets) protocolsWhitelist = ['websocket'].concat(protocolsWhitelist);                                  // 148
    return protocolsWhitelist;                                                                                         // 151
  },                                                                                                                   // 152
  _launchConnection: function () {                                                                                     // 154
    var self = this;                                                                                                   // 155
                                                                                                                       //
    self._cleanup(); // cleanup the old socket, if there was one.                                                      // 156
                                                                                                                       //
                                                                                                                       //
    var options = _.extend({                                                                                           // 158
      protocols_whitelist: self._sockjsProtocolsWhitelist()                                                            // 159
    }, self.options._sockjsOptions); // Convert raw URL to SockJS URL each time we open a connection, so that we       // 158
    // can connect to random hostnames and get around browser per-host                                                 // 163
    // connection limits.                                                                                              // 164
                                                                                                                       //
                                                                                                                       //
    self.socket = new SockJS(toSockjsUrl(self.rawUrl), undefined, options);                                            // 165
                                                                                                                       //
    self.socket.onopen = function (data) {                                                                             // 166
      self._connected();                                                                                               // 167
    };                                                                                                                 // 168
                                                                                                                       //
    self.socket.onmessage = function (data) {                                                                          // 169
      self._heartbeat_received();                                                                                      // 170
                                                                                                                       //
      if (self.currentStatus.connected) _.each(self.eventCallbacks.message, function (callback) {                      // 172
        callback(data.data);                                                                                           // 174
      });                                                                                                              // 175
    };                                                                                                                 // 176
                                                                                                                       //
    self.socket.onclose = function () {                                                                                // 177
      self._lostConnection();                                                                                          // 178
    };                                                                                                                 // 179
                                                                                                                       //
    self.socket.onerror = function () {                                                                                // 180
      // XXX is this ever called?                                                                                      // 181
      Meteor._debug("stream error", _.toArray(arguments), new Date().toDateString());                                  // 182
    };                                                                                                                 // 183
                                                                                                                       //
    self.socket.onheartbeat = function () {                                                                            // 185
      self._heartbeat_received();                                                                                      // 186
    };                                                                                                                 // 187
                                                                                                                       //
    if (self.connectionTimer) clearTimeout(self.connectionTimer);                                                      // 189
    self.connectionTimer = setTimeout(function () {                                                                    // 191
      self._lostConnection(new DDP.ConnectionError("DDP connection timed out"));                                       // 192
    }, self.CONNECT_TIMEOUT);                                                                                          // 194
  }                                                                                                                    // 195
});                                                                                                                    // 42
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"stream_client_common.js":["./namespace.js",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/ddp-client/stream_client_common.js                                                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var DDP = void 0,                                                                                                      // 1
    LivedataTest = void 0;                                                                                             // 1
module.importSync("./namespace.js", {                                                                                  // 1
  DDP: function (v) {                                                                                                  // 1
    DDP = v;                                                                                                           // 1
  },                                                                                                                   // 1
  LivedataTest: function (v) {                                                                                         // 1
    LivedataTest = v;                                                                                                  // 1
  }                                                                                                                    // 1
}, 0);                                                                                                                 // 1
                                                                                                                       //
// XXX from Underscore.String (http://epeli.github.com/underscore.string/)                                             // 3
var startsWith = function (str, starts) {                                                                              // 4
  return str.length >= starts.length && str.substring(0, starts.length) === starts;                                    // 5
};                                                                                                                     // 7
                                                                                                                       //
var endsWith = function (str, ends) {                                                                                  // 8
  return str.length >= ends.length && str.substring(str.length - ends.length) === ends;                                // 9
}; // @param url {String} URL to Meteor app, eg:                                                                       // 11
//   "/" or "madewith.meteor.com" or "https://foo.meteor.com"                                                          // 14
//   or "ddp+sockjs://ddp--****-foo.meteor.com/sockjs"                                                                 // 15
// @returns {String} URL to the endpoint with the specific scheme and subPath, e.g.                                    // 16
// for scheme "http" and subPath "sockjs"                                                                              // 17
//   "http://subdomain.meteor.com/sockjs" or "/sockjs"                                                                 // 18
//   or "https://ddp--1234-foo.meteor.com/sockjs"                                                                      // 19
                                                                                                                       //
                                                                                                                       //
var translateUrl = function (url, newSchemeBase, subPath) {                                                            // 20
  if (!newSchemeBase) {                                                                                                // 21
    newSchemeBase = "http";                                                                                            // 22
  }                                                                                                                    // 23
                                                                                                                       //
  var ddpUrlMatch = url.match(/^ddp(i?)\+sockjs:\/\//);                                                                // 25
  var httpUrlMatch = url.match(/^http(s?):\/\//);                                                                      // 26
  var newScheme;                                                                                                       // 27
                                                                                                                       //
  if (ddpUrlMatch) {                                                                                                   // 28
    // Remove scheme and split off the host.                                                                           // 29
    var urlAfterDDP = url.substr(ddpUrlMatch[0].length);                                                               // 30
    newScheme = ddpUrlMatch[1] === "i" ? newSchemeBase : newSchemeBase + "s";                                          // 31
    var slashPos = urlAfterDDP.indexOf('/');                                                                           // 32
    var host = slashPos === -1 ? urlAfterDDP : urlAfterDDP.substr(0, slashPos);                                        // 33
    var rest = slashPos === -1 ? '' : urlAfterDDP.substr(slashPos); // In the host (ONLY!), change '*' characters into random digits. This
    // allows different stream connections to connect to different hostnames                                           // 38
    // and avoid browser per-hostname connection limits.                                                               // 39
                                                                                                                       //
    host = host.replace(/\*/g, function () {                                                                           // 40
      return Math.floor(Random.fraction() * 10);                                                                       // 41
    });                                                                                                                // 42
    return newScheme + '://' + host + rest;                                                                            // 44
  } else if (httpUrlMatch) {                                                                                           // 45
    newScheme = !httpUrlMatch[1] ? newSchemeBase : newSchemeBase + "s";                                                // 46
    var urlAfterHttp = url.substr(httpUrlMatch[0].length);                                                             // 47
    url = newScheme + "://" + urlAfterHttp;                                                                            // 48
  } // Prefix FQDNs but not relative URLs                                                                              // 49
                                                                                                                       //
                                                                                                                       //
  if (url.indexOf("://") === -1 && !startsWith(url, "/")) {                                                            // 52
    url = newSchemeBase + "://" + url;                                                                                 // 53
  } // XXX This is not what we should be doing: if I have a site                                                       // 54
  // deployed at "/foo", then DDP.connect("/") should actually connect                                                 // 57
  // to "/", not to "/foo". "/" is an absolute path. (Contrast: if                                                     // 58
  // deployed at "/foo", it would be reasonable for DDP.connect("bar")                                                 // 59
  // to connect to "/foo/bar").                                                                                        // 60
  //                                                                                                                   // 61
  // We should make this properly honor absolute paths rather than                                                     // 62
  // forcing the path to be relative to the site root. Simultaneously,                                                 // 63
  // we should set DDP_DEFAULT_CONNECTION_URL to include the site                                                      // 64
  // root. See also client_convenience.js #RationalizingRelativeDDPURLs                                                // 65
                                                                                                                       //
                                                                                                                       //
  url = Meteor._relativeToSiteRootUrl(url);                                                                            // 66
  if (endsWith(url, "/")) return url + subPath;else return url + "/" + subPath;                                        // 68
};                                                                                                                     // 72
                                                                                                                       //
toSockjsUrl = function (url) {                                                                                         // 74
  return translateUrl(url, "http", "sockjs");                                                                          // 75
};                                                                                                                     // 76
                                                                                                                       //
toWebsocketUrl = function (url) {                                                                                      // 78
  var ret = translateUrl(url, "ws", "websocket");                                                                      // 79
  return ret;                                                                                                          // 80
};                                                                                                                     // 81
                                                                                                                       //
LivedataTest.toSockjsUrl = toSockjsUrl;                                                                                // 83
                                                                                                                       //
_.extend(LivedataTest.ClientStream.prototype, {                                                                        // 86
  // Register for callbacks.                                                                                           // 88
  on: function (name, callback) {                                                                                      // 89
    var self = this;                                                                                                   // 90
    if (name !== 'message' && name !== 'reset' && name !== 'disconnect') throw new Error("unknown event type: " + name);
    if (!self.eventCallbacks[name]) self.eventCallbacks[name] = [];                                                    // 95
    self.eventCallbacks[name].push(callback);                                                                          // 97
  },                                                                                                                   // 98
  _initCommon: function (options) {                                                                                    // 101
    var self = this;                                                                                                   // 102
    options = options || {}; //// Constants                                                                            // 103
    // how long to wait until we declare the connection attempt                                                        // 107
    // failed.                                                                                                         // 108
                                                                                                                       //
    self.CONNECT_TIMEOUT = options.connectTimeoutMs || 10000;                                                          // 109
    self.eventCallbacks = {}; // name -> [callback]                                                                    // 111
                                                                                                                       //
    self._forcedToDisconnect = false; //// Reactive status                                                             // 113
                                                                                                                       //
    self.currentStatus = {                                                                                             // 116
      status: "connecting",                                                                                            // 117
      connected: false,                                                                                                // 118
      retryCount: 0                                                                                                    // 119
    };                                                                                                                 // 116
    self.statusListeners = typeof Tracker !== 'undefined' && new Tracker.Dependency();                                 // 123
                                                                                                                       //
    self.statusChanged = function () {                                                                                 // 124
      if (self.statusListeners) self.statusListeners.changed();                                                        // 125
    }; //// Retry logic                                                                                                // 127
                                                                                                                       //
                                                                                                                       //
    self._retry = new Retry();                                                                                         // 130
    self.connectionTimer = null;                                                                                       // 131
  },                                                                                                                   // 133
  // Trigger a reconnect.                                                                                              // 135
  reconnect: function (options) {                                                                                      // 136
    var self = this;                                                                                                   // 137
    options = options || {};                                                                                           // 138
                                                                                                                       //
    if (options.url) {                                                                                                 // 140
      self._changeUrl(options.url);                                                                                    // 141
    }                                                                                                                  // 142
                                                                                                                       //
    if (options._sockjsOptions) {                                                                                      // 144
      self.options._sockjsOptions = options._sockjsOptions;                                                            // 145
    }                                                                                                                  // 146
                                                                                                                       //
    if (self.currentStatus.connected) {                                                                                // 148
      if (options._force || options.url) {                                                                             // 149
        // force reconnect.                                                                                            // 150
        self._lostConnection(new DDP.ForcedReconnectError());                                                          // 151
      } // else, noop.                                                                                                 // 152
                                                                                                                       //
                                                                                                                       //
      return;                                                                                                          // 153
    } // if we're mid-connection, stop it.                                                                             // 154
                                                                                                                       //
                                                                                                                       //
    if (self.currentStatus.status === "connecting") {                                                                  // 157
      // Pretend it's a clean close.                                                                                   // 158
      self._lostConnection();                                                                                          // 159
    }                                                                                                                  // 160
                                                                                                                       //
    self._retry.clear();                                                                                               // 162
                                                                                                                       //
    self.currentStatus.retryCount -= 1; // don't count manual retries                                                  // 163
                                                                                                                       //
    self._retryNow();                                                                                                  // 164
  },                                                                                                                   // 165
  disconnect: function (options) {                                                                                     // 167
    var self = this;                                                                                                   // 168
    options = options || {}; // Failed is permanent. If we're failed, don't let people go back                         // 169
    // online by calling 'disconnect' then 'reconnect'.                                                                // 172
                                                                                                                       //
    if (self._forcedToDisconnect) return; // If _permanent is set, permanently disconnect a stream. Once a stream      // 173
    // is forced to disconnect, it can never reconnect. This is for                                                    // 177
    // error cases such as ddp version mismatch, where trying again                                                    // 178
    // won't fix the problem.                                                                                          // 179
                                                                                                                       //
    if (options._permanent) {                                                                                          // 180
      self._forcedToDisconnect = true;                                                                                 // 181
    }                                                                                                                  // 182
                                                                                                                       //
    self._cleanup();                                                                                                   // 184
                                                                                                                       //
    self._retry.clear();                                                                                               // 185
                                                                                                                       //
    self.currentStatus = {                                                                                             // 187
      status: options._permanent ? "failed" : "offline",                                                               // 188
      connected: false,                                                                                                // 189
      retryCount: 0                                                                                                    // 190
    };                                                                                                                 // 187
    if (options._permanent && options._error) self.currentStatus.reason = options._error;                              // 193
    self.statusChanged();                                                                                              // 196
  },                                                                                                                   // 197
  // maybeError is set unless it's a clean protocol-level close.                                                       // 199
  _lostConnection: function (maybeError) {                                                                             // 200
    var self = this;                                                                                                   // 201
                                                                                                                       //
    self._cleanup(maybeError);                                                                                         // 203
                                                                                                                       //
    self._retryLater(maybeError); // sets status. no need to do it here.                                               // 204
                                                                                                                       //
  },                                                                                                                   // 205
  // fired when we detect that we've gone online. try to reconnect                                                     // 207
  // immediately.                                                                                                      // 208
  _online: function () {                                                                                               // 209
    // if we've requested to be offline by disconnecting, don't reconnect.                                             // 210
    if (this.currentStatus.status != "offline") this.reconnect();                                                      // 211
  },                                                                                                                   // 213
  _retryLater: function (maybeError) {                                                                                 // 215
    var self = this;                                                                                                   // 216
    var timeout = 0;                                                                                                   // 218
                                                                                                                       //
    if (self.options.retry || maybeError && maybeError.errorType === "DDP.ForcedReconnectError") {                     // 219
      timeout = self._retry.retryLater(self.currentStatus.retryCount, _.bind(self._retryNow, self));                   // 221
      self.currentStatus.status = "waiting";                                                                           // 225
      self.currentStatus.retryTime = new Date().getTime() + timeout;                                                   // 226
    } else {                                                                                                           // 227
      self.currentStatus.status = "failed";                                                                            // 228
      delete self.currentStatus.retryTime;                                                                             // 229
    }                                                                                                                  // 230
                                                                                                                       //
    self.currentStatus.connected = false;                                                                              // 232
    self.statusChanged();                                                                                              // 233
  },                                                                                                                   // 234
  _retryNow: function () {                                                                                             // 236
    var self = this;                                                                                                   // 237
    if (self._forcedToDisconnect) return;                                                                              // 239
    self.currentStatus.retryCount += 1;                                                                                // 242
    self.currentStatus.status = "connecting";                                                                          // 243
    self.currentStatus.connected = false;                                                                              // 244
    delete self.currentStatus.retryTime;                                                                               // 245
    self.statusChanged();                                                                                              // 246
                                                                                                                       //
    self._launchConnection();                                                                                          // 248
  },                                                                                                                   // 249
  // Get current status. Reactive.                                                                                     // 252
  status: function () {                                                                                                // 253
    var self = this;                                                                                                   // 254
    if (self.statusListeners) self.statusListeners.depend();                                                           // 255
    return self.currentStatus;                                                                                         // 257
  }                                                                                                                    // 258
});                                                                                                                    // 86
                                                                                                                       //
DDP.ConnectionError = Meteor.makeErrorType("DDP.ConnectionError", function (message) {                                 // 261
  var self = this;                                                                                                     // 263
  self.message = message;                                                                                              // 264
});                                                                                                                    // 265
DDP.ForcedReconnectError = Meteor.makeErrorType("DDP.ForcedReconnectError", function () {});                           // 267
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"livedata_common.js":["./namespace.js",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/ddp-client/livedata_common.js                                                                              //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var DDP = void 0,                                                                                                      // 1
    LivedataTest = void 0;                                                                                             // 1
module.importSync("./namespace.js", {                                                                                  // 1
  DDP: function (v) {                                                                                                  // 1
    DDP = v;                                                                                                           // 1
  },                                                                                                                   // 1
  LivedataTest: function (v) {                                                                                         // 1
    LivedataTest = v;                                                                                                  // 1
  }                                                                                                                    // 1
}, 0);                                                                                                                 // 1
LivedataTest.SUPPORTED_DDP_VERSIONS = DDPCommon.SUPPORTED_DDP_VERSIONS; // This is private but it's used in a few places. accounts-base uses
// it to get the current user. Meteor.setTimeout and friends clear                                                     // 6
// it. We can probably find a better way to factor this.                                                               // 7
                                                                                                                       //
DDP._CurrentInvocation = new Meteor.EnvironmentVariable();                                                             // 8
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"random_stream.js":["./namespace.js",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/ddp-client/random_stream.js                                                                                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var DDP = void 0;                                                                                                      // 1
module.importSync("./namespace.js", {                                                                                  // 1
  DDP: function (v) {                                                                                                  // 1
    DDP = v;                                                                                                           // 1
  }                                                                                                                    // 1
}, 0);                                                                                                                 // 1
                                                                                                                       //
// Returns the named sequence of pseudo-random values.                                                                 // 3
// The scope will be DDP._CurrentInvocation.get(), so the stream will produce                                          // 4
// consistent values for method calls on the client and server.                                                        // 5
DDP.randomStream = function (name) {                                                                                   // 6
  var scope = DDP._CurrentInvocation.get();                                                                            // 7
                                                                                                                       //
  return DDPCommon.RandomStream.get(scope, name);                                                                      // 8
};                                                                                                                     // 9
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"livedata_connection.js":["babel-runtime/helpers/typeof","./namespace.js","./id_map.js",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/ddp-client/livedata_connection.js                                                                          //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _typeof2 = require("babel-runtime/helpers/typeof");                                                                //
                                                                                                                       //
var _typeof3 = _interopRequireDefault(_typeof2);                                                                       //
                                                                                                                       //
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }                      //
                                                                                                                       //
var DDP = void 0,                                                                                                      // 1
    LivedataTest = void 0;                                                                                             // 1
module.importSync("./namespace.js", {                                                                                  // 1
  DDP: function (v) {                                                                                                  // 1
    DDP = v;                                                                                                           // 1
  },                                                                                                                   // 1
  LivedataTest: function (v) {                                                                                         // 1
    LivedataTest = v;                                                                                                  // 1
  }                                                                                                                    // 1
}, 0);                                                                                                                 // 1
var MongoIDMap = void 0;                                                                                               // 1
module.importSync("./id_map.js", {                                                                                     // 1
  MongoIDMap: function (v) {                                                                                           // 1
    MongoIDMap = v;                                                                                                    // 1
  }                                                                                                                    // 1
}, 1);                                                                                                                 // 1
                                                                                                                       //
if (Meteor.isServer) {                                                                                                 // 4
  var path = Npm.require('path');                                                                                      // 5
                                                                                                                       //
  var Fiber = Npm.require('fibers');                                                                                   // 6
                                                                                                                       //
  var Future = Npm.require(path.join('fibers', 'future'));                                                             // 7
} // @param url {String|Object} URL to Meteor app,                                                                     // 8
//   or an object as a test hook (see code)                                                                            // 11
// Options:                                                                                                            // 12
//   reloadWithOutstanding: is it OK to reload if there are outstanding methods?                                       // 13
//   headers: extra headers to send on the websockets connection, for                                                  // 14
//     server-to-server DDP only                                                                                       // 15
//   _sockjsOptions: Specifies options to pass through to the sockjs client                                            // 16
//   onDDPNegotiationVersionFailure: callback when version negotiation fails.                                          // 17
//                                                                                                                     // 18
// XXX There should be a way to destroy a DDP connection, causing all                                                  // 19
// outstanding method calls to fail.                                                                                   // 20
//                                                                                                                     // 21
// XXX Our current way of handling failure and reconnection is great                                                   // 22
// for an app (where we want to tolerate being disconnected as an                                                      // 23
// expect state, and keep trying forever to reconnect) but cumbersome                                                  // 24
// for something like a command line tool that wants to make a                                                         // 25
// connection, call a method, and print an error if connection                                                         // 26
// fails. We should have better usability in the latter case (while                                                    // 27
// still transparently reconnecting if it's just a transient failure                                                   // 28
// or the server migrating us).                                                                                        // 29
                                                                                                                       //
                                                                                                                       //
var Connection = function (url, options) {                                                                             // 30
  var self = this;                                                                                                     // 31
  options = _.extend({                                                                                                 // 32
    onConnected: function () {},                                                                                       // 33
    onDDPVersionNegotiationFailure: function (description) {                                                           // 34
      Meteor._debug(description);                                                                                      // 35
    },                                                                                                                 // 36
    heartbeatInterval: 17500,                                                                                          // 37
    heartbeatTimeout: 15000,                                                                                           // 38
    npmFayeOptions: {},                                                                                                // 39
    // These options are only for testing.                                                                             // 40
    reloadWithOutstanding: false,                                                                                      // 41
    supportedDDPVersions: DDPCommon.SUPPORTED_DDP_VERSIONS,                                                            // 42
    retry: true,                                                                                                       // 43
    respondToPings: true,                                                                                              // 44
    // When updates are coming within this ms interval, batch them together.                                           // 45
    bufferedWritesInterval: 5,                                                                                         // 46
    // Flush buffers immediately if writes are happening continuously for more than this many ms.                      // 47
    bufferedWritesMaxAge: 500                                                                                          // 48
  }, options); // If set, called when we reconnect, queuing method calls _before_ the                                  // 32
  // existing outstanding ones. This is the only data member that is part of the                                       // 52
  // public API!                                                                                                       // 53
                                                                                                                       //
  self.onReconnect = null; // as a test hook, allow passing a stream instead of a url.                                 // 54
                                                                                                                       //
  if ((typeof url === "undefined" ? "undefined" : (0, _typeof3.default)(url)) === "object") {                          // 57
    self._stream = url;                                                                                                // 58
  } else {                                                                                                             // 59
    self._stream = new LivedataTest.ClientStream(url, {                                                                // 60
      retry: options.retry,                                                                                            // 61
      headers: options.headers,                                                                                        // 62
      _sockjsOptions: options._sockjsOptions,                                                                          // 63
      // Used to keep some tests quiet, or for other cases in which                                                    // 64
      // the right thing to do with connection errors is to silently                                                   // 65
      // fail (e.g. sending package usage stats). At some point we                                                     // 66
      // should have a real API for handling client-stream-level                                                       // 67
      // errors.                                                                                                       // 68
      _dontPrintErrors: options._dontPrintErrors,                                                                      // 69
      connectTimeoutMs: options.connectTimeoutMs,                                                                      // 70
      npmFayeOptions: options.npmFayeOptions                                                                           // 71
    });                                                                                                                // 60
  }                                                                                                                    // 73
                                                                                                                       //
  self._lastSessionId = null;                                                                                          // 75
  self._versionSuggestion = null; // The last proposed DDP version.                                                    // 76
                                                                                                                       //
  self._version = null; // The DDP version agreed on by client and server.                                             // 77
                                                                                                                       //
  self._stores = {}; // name -> object with methods                                                                    // 78
                                                                                                                       //
  self._methodHandlers = {}; // name -> func                                                                           // 79
                                                                                                                       //
  self._nextMethodId = 1;                                                                                              // 80
  self._supportedDDPVersions = options.supportedDDPVersions;                                                           // 81
  self._heartbeatInterval = options.heartbeatInterval;                                                                 // 83
  self._heartbeatTimeout = options.heartbeatTimeout; // Tracks methods which the user has tried to call but which have not yet
  // called their user callback (ie, they are waiting on their result or for all                                       // 87
  // of their writes to be written to the local cache). Map from method ID to                                          // 88
  // MethodInvoker object.                                                                                             // 89
                                                                                                                       //
  self._methodInvokers = {}; // Tracks methods which the user has called but whose result messages have not            // 90
  // arrived yet.                                                                                                      // 93
  //                                                                                                                   // 94
  // _outstandingMethodBlocks is an array of blocks of methods. Each block                                             // 95
  // represents a set of methods that can run at the same time. The first block                                        // 96
  // represents the methods which are currently in flight; subsequent blocks                                           // 97
  // must wait for previous blocks to be fully finished before they can be sent                                        // 98
  // to the server.                                                                                                    // 99
  //                                                                                                                   // 100
  // Each block is an object with the following fields:                                                                // 101
  // - methods: a list of MethodInvoker objects                                                                        // 102
  // - wait: a boolean; if true, this block had a single method invoked with                                           // 103
  //         the "wait" option                                                                                         // 104
  //                                                                                                                   // 105
  // There will never be adjacent blocks with wait=false, because the only thing                                       // 106
  // that makes methods need to be serialized is a wait method.                                                        // 107
  //                                                                                                                   // 108
  // Methods are removed from the first block when their "result" is                                                   // 109
  // received. The entire first block is only removed when all of the in-flight                                        // 110
  // methods have received their results (so the "methods" list is empty) *AND*                                        // 111
  // all of the data written by those methods are visible in the local cache. So                                       // 112
  // it is possible for the first block's methods list to be empty, if we are                                          // 113
  // still waiting for some objects to quiesce.                                                                        // 114
  //                                                                                                                   // 115
  // Example:                                                                                                          // 116
  //  _outstandingMethodBlocks = [                                                                                     // 117
  //    {wait: false, methods: []},                                                                                    // 118
  //    {wait: true, methods: [<MethodInvoker for 'login'>]},                                                          // 119
  //    {wait: false, methods: [<MethodInvoker for 'foo'>,                                                             // 120
  //                            <MethodInvoker for 'bar'>]}]                                                           // 121
  // This means that there were some methods which were sent to the server and                                         // 122
  // which have returned their results, but some of the data written by                                                // 123
  // the methods may not be visible in the local cache. Once all that data is                                          // 124
  // visible, we will send a 'login' method. Once the login method has returned                                        // 125
  // and all the data is visible (including re-running subs if userId changes),                                        // 126
  // we will send the 'foo' and 'bar' methods in parallel.                                                             // 127
                                                                                                                       //
  self._outstandingMethodBlocks = []; // method ID -> array of objects with keys 'collection' and 'id', listing        // 128
  // documents written by a given method's stub. keys are associated with                                              // 131
  // methods whose stub wrote at least one document, and whose data-done message                                       // 132
  // has not yet been received.                                                                                        // 133
                                                                                                                       //
  self._documentsWrittenByStub = {}; // collection -> IdMap of "server document" object. A "server document" has:      // 134
  // - "document": the version of the document according the                                                           // 136
  //   server (ie, the snapshot before a stub wrote it, amended by any changes                                         // 137
  //   received from the server)                                                                                       // 138
  //   It is undefined if we think the document does not exist                                                         // 139
  // - "writtenByStubs": a set of method IDs whose stubs wrote to the document                                         // 140
  //   whose "data done" messages have not yet been processed                                                          // 141
                                                                                                                       //
  self._serverDocuments = {}; // Array of callbacks to be called after the next update of the local                    // 142
  // cache. Used for:                                                                                                  // 145
  //  - Calling methodInvoker.dataVisible and sub ready callbacks after                                                // 146
  //    the relevant data is flushed.                                                                                  // 147
  //  - Invoking the callbacks of "half-finished" methods after reconnect                                              // 148
  //    quiescence. Specifically, methods whose result was received over the old                                       // 149
  //    connection (so we don't re-send it) but whose data had not been made                                           // 150
  //    visible.                                                                                                       // 151
                                                                                                                       //
  self._afterUpdateCallbacks = []; // In two contexts, we buffer all incoming data messages and then process them      // 152
  // all at once in a single update:                                                                                   // 155
  //   - During reconnect, we buffer all data messages until all subs that had                                         // 156
  //     been ready before reconnect are ready again, and all methods that are                                         // 157
  //     active have returned their "data done message"; then                                                          // 158
  //   - During the execution of a "wait" method, we buffer all data messages                                          // 159
  //     until the wait method gets its "data done" message. (If the wait method                                       // 160
  //     occurs during reconnect, it doesn't get any special handling.)                                                // 161
  // all data messages are processed in one update.                                                                    // 162
  //                                                                                                                   // 163
  // The following fields are used for this "quiescence" process.                                                      // 164
  // This buffers the messages that aren't being processed yet.                                                        // 166
                                                                                                                       //
  self._messagesBufferedUntilQuiescence = []; // Map from method ID -> true. Methods are removed from this when their  // 167
  // "data done" message is received, and we will not quiesce until it is                                              // 169
  // empty.                                                                                                            // 170
                                                                                                                       //
  self._methodsBlockingQuiescence = {}; // map from sub ID -> true for subs that were ready (ie, called the sub        // 171
  // ready callback) before reconnect but haven't become ready again yet                                               // 173
                                                                                                                       //
  self._subsBeingRevived = {}; // map from sub._id -> true                                                             // 174
  // if true, the next data update should reset all stores. (set during                                                // 175
  // reconnect.)                                                                                                       // 176
                                                                                                                       //
  self._resetStores = false; // name -> array of updates for (yet to be created) collections                           // 177
                                                                                                                       //
  self._updatesForUnknownStores = {}; // if we're blocking a migration, the retry func                                 // 180
                                                                                                                       //
  self._retryMigrate = null;                                                                                           // 182
  self.__flushBufferedWrites = Meteor.bindEnvironment(self._flushBufferedWrites, "flushing DDP buffered writes", self); // Collection name -> array of messages.
                                                                                                                       //
  self._bufferedWrites = {}; // When current buffer of updates must be flushed at, in ms timestamp.                    // 187
                                                                                                                       //
  self._bufferedWritesFlushAt = null; // Timeout handle for the next processing of all pending writes                  // 189
                                                                                                                       //
  self._bufferedWritesFlushHandle = null;                                                                              // 191
  self._bufferedWritesInterval = options.bufferedWritesInterval;                                                       // 193
  self._bufferedWritesMaxAge = options.bufferedWritesMaxAge; // metadata for subscriptions.  Map from sub ID to object with keys:
  //   - id                                                                                                            // 197
  //   - name                                                                                                          // 198
  //   - params                                                                                                        // 199
  //   - inactive (if true, will be cleaned up if not reused in re-run)                                                // 200
  //   - ready (has the 'ready' message been received?)                                                                // 201
  //   - readyCallback (an optional callback to call when ready)                                                       // 202
  //   - errorCallback (an optional callback to call if the sub terminates with                                        // 203
  //                    an error, XXX COMPAT WITH 1.0.3.1)                                                             // 204
  //   - stopCallback (an optional callback to call when the sub terminates                                            // 205
  //     for any reason, with an error argument if an error triggered the stop)                                        // 206
                                                                                                                       //
  self._subscriptions = {}; // Reactive userId.                                                                        // 207
                                                                                                                       //
  self._userId = null;                                                                                                 // 210
  self._userIdDeps = new Tracker.Dependency(); // Block auto-reload while we're waiting for method responses.          // 211
                                                                                                                       //
  if (Meteor.isClient && Package.reload && !options.reloadWithOutstanding) {                                           // 214
    Package.reload.Reload._onMigrate(function (retry) {                                                                // 215
      if (!self._readyToMigrate()) {                                                                                   // 216
        if (self._retryMigrate) throw new Error("Two migrations in progress?");                                        // 217
        self._retryMigrate = retry;                                                                                    // 219
        return false;                                                                                                  // 220
      } else {                                                                                                         // 221
        return [true];                                                                                                 // 222
      }                                                                                                                // 223
    });                                                                                                                // 224
  }                                                                                                                    // 225
                                                                                                                       //
  var onMessage = function (raw_msg) {                                                                                 // 227
    try {                                                                                                              // 228
      var msg = DDPCommon.parseDDP(raw_msg);                                                                           // 229
    } catch (e) {                                                                                                      // 230
      Meteor._debug("Exception while parsing DDP", e);                                                                 // 231
                                                                                                                       //
      return;                                                                                                          // 232
    } // Any message counts as receiving a pong, as it demonstrates that                                               // 233
    // the server is still alive.                                                                                      // 236
                                                                                                                       //
                                                                                                                       //
    if (self._heartbeat) {                                                                                             // 237
      self._heartbeat.messageReceived();                                                                               // 238
    }                                                                                                                  // 239
                                                                                                                       //
    if (msg === null || !msg.msg) {                                                                                    // 241
      // XXX COMPAT WITH 0.6.6. ignore the old welcome message for back                                                // 242
      // compat.  Remove this 'if' once the server stops sending welcome                                               // 243
      // messages (stream_server.js).                                                                                  // 244
      if (!(msg && msg.server_id)) Meteor._debug("discarding invalid livedata message", msg);                          // 245
      return;                                                                                                          // 247
    }                                                                                                                  // 248
                                                                                                                       //
    if (msg.msg === 'connected') {                                                                                     // 250
      self._version = self._versionSuggestion;                                                                         // 251
                                                                                                                       //
      self._livedata_connected(msg);                                                                                   // 252
                                                                                                                       //
      options.onConnected();                                                                                           // 253
    } else if (msg.msg === 'failed') {                                                                                 // 254
      if (_.contains(self._supportedDDPVersions, msg.version)) {                                                       // 256
        self._versionSuggestion = msg.version;                                                                         // 257
                                                                                                                       //
        self._stream.reconnect({                                                                                       // 258
          _force: true                                                                                                 // 258
        });                                                                                                            // 258
      } else {                                                                                                         // 259
        var description = "DDP version negotiation failed; server requested version " + msg.version;                   // 260
                                                                                                                       //
        self._stream.disconnect({                                                                                      // 262
          _permanent: true,                                                                                            // 262
          _error: description                                                                                          // 262
        });                                                                                                            // 262
                                                                                                                       //
        options.onDDPVersionNegotiationFailure(description);                                                           // 263
      }                                                                                                                // 264
    } else if (msg.msg === 'ping' && options.respondToPings) {                                                         // 265
      self._send({                                                                                                     // 267
        msg: "pong",                                                                                                   // 267
        id: msg.id                                                                                                     // 267
      });                                                                                                              // 267
    } else if (msg.msg === 'pong') {// noop, as we assume everything's a pong                                          // 268
    } else if (_.include(['added', 'changed', 'removed', 'ready', 'updated'], msg.msg)) self._livedata_data(msg);else if (msg.msg === 'nosub') self._livedata_nosub(msg);else if (msg.msg === 'result') self._livedata_result(msg);else if (msg.msg === 'error') self._livedata_error(msg);else Meteor._debug("discarding unknown livedata message type", msg);
  };                                                                                                                   // 282
                                                                                                                       //
  var onReset = function () {                                                                                          // 284
    // Send a connect message at the beginning of the stream.                                                          // 285
    // NOTE: reset is called even on the first connection, so this is                                                  // 286
    // the only place we send this message.                                                                            // 287
    var msg = {                                                                                                        // 288
      msg: 'connect'                                                                                                   // 288
    };                                                                                                                 // 288
    if (self._lastSessionId) msg.session = self._lastSessionId;                                                        // 289
    msg.version = self._versionSuggestion || self._supportedDDPVersions[0];                                            // 291
    self._versionSuggestion = msg.version;                                                                             // 292
    msg.support = self._supportedDDPVersions;                                                                          // 293
                                                                                                                       //
    self._send(msg); // Mark non-retry calls as failed. This has to be done early as getting these methods out of the  // 294
    // current block is pretty important to making sure that quiescence is properly calculated, as                     // 297
    // well as possibly moving on to another useful block.                                                             // 298
    // Only bother testing if there is an outstandingMethodBlock (there might not be, especially if                    // 300
    // we are connecting for the first time.                                                                           // 301
                                                                                                                       //
                                                                                                                       //
    if (self._outstandingMethodBlocks.length > 0) {                                                                    // 302
      // If there is an outstanding method block, we only care about the first one as that is the                      // 303
      // one that could have already sent messages with no response, that are not allowed to retry.                    // 304
      var currentMethodBlock = self._outstandingMethodBlocks[0].methods;                                               // 305
      self._outstandingMethodBlocks[0].methods = currentMethodBlock.filter(function (methodInvoker) {                  // 306
        // Methods with 'noRetry' option set are not allowed to re-send after                                          // 308
        // recovering dropped connection.                                                                              // 309
        if (methodInvoker.sentMessage && methodInvoker.noRetry) {                                                      // 310
          // Make sure that the method is told that it failed.                                                         // 311
          methodInvoker.receiveResult(new Meteor.Error('invocation-failed', 'Method invocation might have failed due to dropped connection. ' + 'Failing because `noRetry` option was passed to Meteor.apply.'));
        } // Only keep a method if it wasn't sent or it's allowed to retry.                                            // 315
        // This may leave the block empty, but we don't move on to the next                                            // 318
        // block until the callback has been delivered, in _outstandingMethodFinished.                                 // 319
                                                                                                                       //
                                                                                                                       //
        return !(methodInvoker.sentMessage && methodInvoker.noRetry);                                                  // 320
      });                                                                                                              // 321
    } // Now, to minimize setup latency, go ahead and blast out all of                                                 // 322
    // our pending methods ands subscriptions before we've even taken                                                  // 325
    // the necessary RTT to know if we successfully reconnected. (1)                                                   // 326
    // They're supposed to be idempotent, and where they are not,                                                      // 327
    // they can block retry in apply; (2) even if we did reconnect,                                                    // 328
    // we're not sure what messages might have gotten lost                                                             // 329
    // (in either direction) since we were disconnected (TCP being                                                     // 330
    // sloppy about that.)                                                                                             // 331
    // If the current block of methods all got their results (but didn't all get                                       // 333
    // their data visible), discard the empty block now.                                                               // 334
                                                                                                                       //
                                                                                                                       //
    if (!_.isEmpty(self._outstandingMethodBlocks) && _.isEmpty(self._outstandingMethodBlocks[0].methods)) {            // 335
      self._outstandingMethodBlocks.shift();                                                                           // 337
    } // Mark all messages as unsent, they have not yet been sent on this                                              // 338
    // connection.                                                                                                     // 341
                                                                                                                       //
                                                                                                                       //
    _.each(self._methodInvokers, function (m) {                                                                        // 342
      m.sentMessage = false;                                                                                           // 343
    }); // If an `onReconnect` handler is set, call it first. Go through                                               // 344
    // some hoops to ensure that methods that are called from within                                                   // 347
    // `onReconnect` get executed _before_ ones that were originally                                                   // 348
    // outstanding (since `onReconnect` is used to re-establish auth                                                   // 349
    // certificates)                                                                                                   // 350
                                                                                                                       //
                                                                                                                       //
    if (self.onReconnect) self._callOnReconnectAndSendAppropriateOutstandingMethods();else self._sendOutstandingMethods(); // add new subscriptions at the end. this way they take effect after
    // the handlers and we don't see flicker.                                                                          // 357
                                                                                                                       //
    _.each(self._subscriptions, function (sub, id) {                                                                   // 358
      self._send({                                                                                                     // 359
        msg: 'sub',                                                                                                    // 360
        id: id,                                                                                                        // 361
        name: sub.name,                                                                                                // 362
        params: sub.params                                                                                             // 363
      });                                                                                                              // 359
    });                                                                                                                // 365
  };                                                                                                                   // 366
                                                                                                                       //
  var onDisconnect = function () {                                                                                     // 368
    if (self._heartbeat) {                                                                                             // 369
      self._heartbeat.stop();                                                                                          // 370
                                                                                                                       //
      self._heartbeat = null;                                                                                          // 371
    }                                                                                                                  // 372
  };                                                                                                                   // 373
                                                                                                                       //
  if (Meteor.isServer) {                                                                                               // 375
    self._stream.on('message', Meteor.bindEnvironment(onMessage, "handling DDP message"));                             // 376
                                                                                                                       //
    self._stream.on('reset', Meteor.bindEnvironment(onReset, "handling DDP reset"));                                   // 377
                                                                                                                       //
    self._stream.on('disconnect', Meteor.bindEnvironment(onDisconnect, "handling DDP disconnect"));                    // 378
  } else {                                                                                                             // 379
    self._stream.on('message', onMessage);                                                                             // 380
                                                                                                                       //
    self._stream.on('reset', onReset);                                                                                 // 381
                                                                                                                       //
    self._stream.on('disconnect', onDisconnect);                                                                       // 382
  }                                                                                                                    // 383
}; // A MethodInvoker manages sending a method to the server and calling the user's                                    // 384
// callbacks. On construction, it registers itself in the connection's                                                 // 387
// _methodInvokers map; it removes itself once the method is fully finished and                                        // 388
// the callback is invoked. This occurs when it has both received a result,                                            // 389
// and the data written by it is fully visible.                                                                        // 390
                                                                                                                       //
                                                                                                                       //
var MethodInvoker = function (options) {                                                                               // 391
  var self = this; // Public (within this file) fields.                                                                // 392
                                                                                                                       //
  self.methodId = options.methodId;                                                                                    // 395
  self.sentMessage = false;                                                                                            // 396
  self._callback = options.callback;                                                                                   // 398
  self._connection = options.connection;                                                                               // 399
  self._message = options.message;                                                                                     // 400
                                                                                                                       //
  self._onResultReceived = options.onResultReceived || function () {};                                                 // 401
                                                                                                                       //
  self._wait = options.wait;                                                                                           // 402
  self.noRetry = options.noRetry;                                                                                      // 403
  self._methodResult = null;                                                                                           // 404
  self._dataVisible = false; // Register with the connection.                                                          // 405
                                                                                                                       //
  self._connection._methodInvokers[self.methodId] = self;                                                              // 408
};                                                                                                                     // 409
                                                                                                                       //
_.extend(MethodInvoker.prototype, {                                                                                    // 410
  // Sends the method message to the server. May be called additional times if                                         // 411
  // we lose the connection and reconnect before receiving a result.                                                   // 412
  sendMessage: function () {                                                                                           // 413
    var self = this; // This function is called before sending a method (including resending on                        // 414
    // reconnect). We should only (re)send methods where we don't already have a                                       // 416
    // result!                                                                                                         // 417
                                                                                                                       //
    if (self.gotResult()) throw new Error("sendingMethod is called on method with result"); // If we're re-sending it, it doesn't matter if data was written the first
    // time.                                                                                                           // 423
                                                                                                                       //
    self._dataVisible = false;                                                                                         // 424
    self.sentMessage = true; // If this is a wait method, make all data messages be buffered until it is               // 425
    // done.                                                                                                           // 428
                                                                                                                       //
    if (self._wait) self._connection._methodsBlockingQuiescence[self.methodId] = true; // Actually send the message.   // 429
                                                                                                                       //
    self._connection._send(self._message);                                                                             // 433
  },                                                                                                                   // 434
  // Invoke the callback, if we have both a result and know that all data has                                          // 435
  // been written to the local cache.                                                                                  // 436
  _maybeInvokeCallback: function () {                                                                                  // 437
    var self = this;                                                                                                   // 438
                                                                                                                       //
    if (self._methodResult && self._dataVisible) {                                                                     // 439
      // Call the callback. (This won't throw: the callback was wrapped with                                           // 440
      // bindEnvironment.)                                                                                             // 441
      self._callback(self._methodResult[0], self._methodResult[1]); // Forget about this method.                       // 442
                                                                                                                       //
                                                                                                                       //
      delete self._connection._methodInvokers[self.methodId]; // Let the connection know that this method is finished, so it can try to
      // move on to the next block of methods.                                                                         // 448
                                                                                                                       //
      self._connection._outstandingMethodFinished();                                                                   // 449
    }                                                                                                                  // 450
  },                                                                                                                   // 451
  // Call with the result of the method from the server. Only may be called                                            // 452
  // once; once it is called, you should not call sendMessage again.                                                   // 453
  // If the user provided an onResultReceived callback, call it immediately.                                           // 454
  // Then invoke the main callback if data is also visible.                                                            // 455
  receiveResult: function (err, result) {                                                                              // 456
    var self = this;                                                                                                   // 457
    if (self.gotResult()) throw new Error("Methods should only receive results once");                                 // 458
    self._methodResult = [err, result];                                                                                // 460
                                                                                                                       //
    self._onResultReceived(err, result);                                                                               // 461
                                                                                                                       //
    self._maybeInvokeCallback();                                                                                       // 462
  },                                                                                                                   // 463
  // Call this when all data written by the method is visible. This means that                                         // 464
  // the method has returns its "data is done" message *AND* all server                                                // 465
  // documents that are buffered at that time have been written to the local                                           // 466
  // cache. Invokes the main callback if the result has been received.                                                 // 467
  dataVisible: function () {                                                                                           // 468
    var self = this;                                                                                                   // 469
    self._dataVisible = true;                                                                                          // 470
                                                                                                                       //
    self._maybeInvokeCallback();                                                                                       // 471
  },                                                                                                                   // 472
  // True if receiveResult has been called.                                                                            // 473
  gotResult: function () {                                                                                             // 474
    var self = this;                                                                                                   // 475
    return !!self._methodResult;                                                                                       // 476
  }                                                                                                                    // 477
});                                                                                                                    // 410
                                                                                                                       //
_.extend(Connection.prototype, {                                                                                       // 480
  // 'name' is the name of the data on the wire that should go in the                                                  // 481
  // store. 'wrappedStore' should be an object with methods beginUpdate, update,                                       // 482
  // endUpdate, saveOriginals, retrieveOriginals. see Collection for an example.                                       // 483
  registerStore: function (name, wrappedStore) {                                                                       // 484
    var self = this;                                                                                                   // 485
    if (name in self._stores) return false; // Wrap the input object in an object which makes any store method not     // 487
    // implemented by 'store' into a no-op.                                                                            // 491
                                                                                                                       //
    var store = {};                                                                                                    // 492
                                                                                                                       //
    _.each(['update', 'beginUpdate', 'endUpdate', 'saveOriginals', 'retrieveOriginals', 'getDoc', '_getCollection'], function (method) {
      store[method] = function () {                                                                                    // 496
        return wrappedStore[method] ? wrappedStore[method].apply(wrappedStore, arguments) : undefined;                 // 497
      };                                                                                                               // 500
    });                                                                                                                // 501
                                                                                                                       //
    self._stores[name] = store;                                                                                        // 503
    var queued = self._updatesForUnknownStores[name];                                                                  // 505
                                                                                                                       //
    if (queued) {                                                                                                      // 506
      store.beginUpdate(queued.length, false);                                                                         // 507
                                                                                                                       //
      _.each(queued, function (msg) {                                                                                  // 508
        store.update(msg);                                                                                             // 509
      });                                                                                                              // 510
                                                                                                                       //
      store.endUpdate();                                                                                               // 511
      delete self._updatesForUnknownStores[name];                                                                      // 512
    }                                                                                                                  // 513
                                                                                                                       //
    return true;                                                                                                       // 515
  },                                                                                                                   // 516
  /**                                                                                                                  // 518
   * @memberOf Meteor                                                                                                  //
   * @importFromPackage meteor                                                                                         //
   * @summary Subscribe to a record set.  Returns a handle that provides                                               //
   * `stop()` and `ready()` methods.                                                                                   //
   * @locus Client                                                                                                     //
   * @param {String} name Name of the subscription.  Matches the name of the                                           //
   * server's `publish()` call.                                                                                        //
   * @param {EJSONable} [arg1,arg2...] Optional arguments passed to publisher                                          //
   * function on server.                                                                                               //
   * @param {Function|Object} [callbacks] Optional. May include `onStop`                                               //
   * and `onReady` callbacks. If there is an error, it is passed as an                                                 //
   * argument to `onStop`. If a function is passed instead of an object, it                                            //
   * is interpreted as an `onReady` callback.                                                                          //
   */subscribe: function (name /* .. [arguments] .. (callback|callbacks) */) {                                         //
    var self = this;                                                                                                   // 534
    var params = Array.prototype.slice.call(arguments, 1);                                                             // 536
    var callbacks = {};                                                                                                // 537
                                                                                                                       //
    if (params.length) {                                                                                               // 538
      var lastParam = params[params.length - 1];                                                                       // 539
                                                                                                                       //
      if (_.isFunction(lastParam)) {                                                                                   // 540
        callbacks.onReady = params.pop();                                                                              // 541
      } else if (lastParam && // XXX COMPAT WITH 1.0.3.1 onError used to exist, but now we use                         // 542
      // onStop with an error callback instead.                                                                        // 544
      _.any([lastParam.onReady, lastParam.onError, lastParam.onStop], _.isFunction)) {                                 // 545
        callbacks = params.pop();                                                                                      // 547
      }                                                                                                                // 548
    } // Is there an existing sub with the same name and param, run in an                                              // 549
    // invalidated Computation? This will happen if we are rerunning an                                                // 552
    // existing computation.                                                                                           // 553
    //                                                                                                                 // 554
    // For example, consider a rerun of:                                                                               // 555
    //                                                                                                                 // 556
    //     Tracker.autorun(function () {                                                                               // 557
    //       Meteor.subscribe("foo", Session.get("foo"));                                                              // 558
    //       Meteor.subscribe("bar", Session.get("bar"));                                                              // 559
    //     });                                                                                                         // 560
    //                                                                                                                 // 561
    // If "foo" has changed but "bar" has not, we will match the "bar"                                                 // 562
    // subcribe to an existing inactive subscription in order to not                                                   // 563
    // unsub and resub the subscription unnecessarily.                                                                 // 564
    //                                                                                                                 // 565
    // We only look for one such sub; if there are N apparently-identical subs                                         // 566
    // being invalidated, we will require N matching subscribe calls to keep                                           // 567
    // them all active.                                                                                                // 568
                                                                                                                       //
                                                                                                                       //
    var existing = _.find(self._subscriptions, function (sub) {                                                        // 569
      return sub.inactive && sub.name === name && EJSON.equals(sub.params, params);                                    // 570
    });                                                                                                                // 572
                                                                                                                       //
    var id;                                                                                                            // 574
                                                                                                                       //
    if (existing) {                                                                                                    // 575
      id = existing.id;                                                                                                // 576
      existing.inactive = false; // reactivate                                                                         // 577
                                                                                                                       //
      if (callbacks.onReady) {                                                                                         // 579
        // If the sub is not already ready, replace any ready callback with the                                        // 580
        // one provided now. (It's not really clear what users would expect for                                        // 581
        // an onReady callback inside an autorun; the semantics we provide is                                          // 582
        // that at the time the sub first becomes ready, we call the last                                              // 583
        // onReady callback provided, if any.)                                                                         // 584
        if (!existing.ready) existing.readyCallback = callbacks.onReady;                                               // 585
      } // XXX COMPAT WITH 1.0.3.1 we used to have onError but now we call                                             // 587
      // onStop with an optional error argument                                                                        // 590
                                                                                                                       //
                                                                                                                       //
      if (callbacks.onError) {                                                                                         // 591
        // Replace existing callback if any, so that errors aren't                                                     // 592
        // double-reported.                                                                                            // 593
        existing.errorCallback = callbacks.onError;                                                                    // 594
      }                                                                                                                // 595
                                                                                                                       //
      if (callbacks.onStop) {                                                                                          // 597
        existing.stopCallback = callbacks.onStop;                                                                      // 598
      }                                                                                                                // 599
    } else {                                                                                                           // 600
      // New sub! Generate an id, save it locally, and send message.                                                   // 601
      id = Random.id();                                                                                                // 602
      self._subscriptions[id] = {                                                                                      // 603
        id: id,                                                                                                        // 604
        name: name,                                                                                                    // 605
        params: EJSON.clone(params),                                                                                   // 606
        inactive: false,                                                                                               // 607
        ready: false,                                                                                                  // 608
        readyDeps: new Tracker.Dependency(),                                                                           // 609
        readyCallback: callbacks.onReady,                                                                              // 610
        // XXX COMPAT WITH 1.0.3.1 #errorCallback                                                                      // 611
        errorCallback: callbacks.onError,                                                                              // 612
        stopCallback: callbacks.onStop,                                                                                // 613
        connection: self,                                                                                              // 614
        remove: function () {                                                                                          // 615
          delete this.connection._subscriptions[this.id];                                                              // 616
          this.ready && this.readyDeps.changed();                                                                      // 617
        },                                                                                                             // 618
        stop: function () {                                                                                            // 619
          this.connection._send({                                                                                      // 620
            msg: 'unsub',                                                                                              // 620
            id: id                                                                                                     // 620
          });                                                                                                          // 620
                                                                                                                       //
          this.remove();                                                                                               // 621
                                                                                                                       //
          if (callbacks.onStop) {                                                                                      // 623
            callbacks.onStop();                                                                                        // 624
          }                                                                                                            // 625
        }                                                                                                              // 626
      };                                                                                                               // 603
                                                                                                                       //
      self._send({                                                                                                     // 628
        msg: 'sub',                                                                                                    // 628
        id: id,                                                                                                        // 628
        name: name,                                                                                                    // 628
        params: params                                                                                                 // 628
      });                                                                                                              // 628
    } // return a handle to the application.                                                                           // 629
                                                                                                                       //
                                                                                                                       //
    var handle = {                                                                                                     // 632
      stop: function () {                                                                                              // 633
        if (!_.has(self._subscriptions, id)) return;                                                                   // 634
                                                                                                                       //
        self._subscriptions[id].stop();                                                                                // 637
      },                                                                                                               // 638
      ready: function () {                                                                                             // 639
        // return false if we've unsubscribed.                                                                         // 640
        if (!_.has(self._subscriptions, id)) return false;                                                             // 641
        var record = self._subscriptions[id];                                                                          // 643
        record.readyDeps.depend();                                                                                     // 644
        return record.ready;                                                                                           // 645
      },                                                                                                               // 646
      subscriptionId: id                                                                                               // 647
    };                                                                                                                 // 632
                                                                                                                       //
    if (Tracker.active) {                                                                                              // 650
      // We're in a reactive computation, so we'd like to unsubscribe when the                                         // 651
      // computation is invalidated... but not if the rerun just re-subscribes                                         // 652
      // to the same subscription!  When a rerun happens, we use onInvalidate                                          // 653
      // as a change to mark the subscription "inactive" so that it can                                                // 654
      // be reused from the rerun.  If it isn't reused, it's killed from                                               // 655
      // an afterFlush.                                                                                                // 656
      Tracker.onInvalidate(function (c) {                                                                              // 657
        if (_.has(self._subscriptions, id)) self._subscriptions[id].inactive = true;                                   // 658
        Tracker.afterFlush(function () {                                                                               // 661
          if (_.has(self._subscriptions, id) && self._subscriptions[id].inactive) handle.stop();                       // 662
        });                                                                                                            // 665
      });                                                                                                              // 666
    }                                                                                                                  // 667
                                                                                                                       //
    return handle;                                                                                                     // 669
  },                                                                                                                   // 670
  // options:                                                                                                          // 672
  // - onLateError {Function(error)} called if an error was received after the ready event.                            // 673
  //     (errors received before ready cause an error to be thrown)                                                    // 674
  _subscribeAndWait: function (name, args, options) {                                                                  // 675
    var self = this;                                                                                                   // 676
    var f = new Future();                                                                                              // 677
    var ready = false;                                                                                                 // 678
    var handle;                                                                                                        // 679
    args = args || [];                                                                                                 // 680
    args.push({                                                                                                        // 681
      onReady: function () {                                                                                           // 682
        ready = true;                                                                                                  // 683
        f['return']();                                                                                                 // 684
      },                                                                                                               // 685
      onError: function (e) {                                                                                          // 686
        if (!ready) f['throw'](e);else options && options.onLateError && options.onLateError(e);                       // 687
      }                                                                                                                // 691
    });                                                                                                                // 681
    handle = self.subscribe.apply(self, [name].concat(args));                                                          // 694
    f.wait();                                                                                                          // 695
    return handle;                                                                                                     // 696
  },                                                                                                                   // 697
  methods: function (methods) {                                                                                        // 699
    var self = this;                                                                                                   // 700
                                                                                                                       //
    _.each(methods, function (func, name) {                                                                            // 701
      if (typeof func !== 'function') throw new Error("Method '" + name + "' must be a function");                     // 702
      if (self._methodHandlers[name]) throw new Error("A method named '" + name + "' is already defined");             // 704
      self._methodHandlers[name] = func;                                                                               // 706
    });                                                                                                                // 707
  },                                                                                                                   // 708
  /**                                                                                                                  // 710
   * @memberOf Meteor                                                                                                  //
   * @importFromPackage meteor                                                                                         //
   * @summary Invokes a method passing any number of arguments.                                                        //
   * @locus Anywhere                                                                                                   //
   * @param {String} name Name of method to invoke                                                                     //
   * @param {EJSONable} [arg1,arg2...] Optional method arguments                                                       //
   * @param {Function} [asyncCallback] Optional callback, which is called asynchronously with the error or result after the method is complete. If not provided, the method runs synchronously if possible (see below).
   */call: function (name /* .. [arguments] .. callback */) {                                                          //
    // if it's a function, the last argument is the result callback,                                                   // 720
    // not a parameter to the remote method.                                                                           // 721
    var args = Array.prototype.slice.call(arguments, 1);                                                               // 722
    if (args.length && typeof args[args.length - 1] === "function") var callback = args.pop();                         // 723
    return this.apply(name, args, callback);                                                                           // 725
  },                                                                                                                   // 726
  // @param options {Optional Object}                                                                                  // 728
  //   wait: Boolean - Should we wait to call this until all current methods                                           // 729
  //                   are fully finished, and block subsequent method calls                                           // 730
  //                   until this method is fully finished?                                                            // 731
  //                   (does not affect methods called from within this method)                                        // 732
  //   onResultReceived: Function - a callback to call as soon as the method                                           // 733
  //                                result is received. the data written by                                            // 734
  //                                the method may not yet be in the cache!                                            // 735
  //   returnStubValue: Boolean - If true then in cases where we would have                                            // 736
  //                              otherwise discarded the stub's return value                                          // 737
  //                              and returned undefined, instead we go ahead                                          // 738
  //                              and return it.  Specifically, this is any                                            // 739
  //                              time other than when (a) we are already                                              // 740
  //                              inside a stub or (b) we are in Node and no                                           // 741
  //                              callback was provided.  Currently we require                                         // 742
  //                              this flag to be explicitly passed to reduce                                          // 743
  //                              the likelihood that stub return values will                                          // 744
  //                              be confused with server return values; we                                            // 745
  //                              may improve this in future.                                                          // 746
  // @param callback {Optional Function}                                                                               // 747
  /**                                                                                                                  // 749
   * @memberOf Meteor                                                                                                  //
   * @importFromPackage meteor                                                                                         //
   * @summary Invoke a method passing an array of arguments.                                                           //
   * @locus Anywhere                                                                                                   //
   * @param {String} name Name of method to invoke                                                                     //
   * @param {EJSONable[]} args Method arguments                                                                        //
   * @param {Object} [options]                                                                                         //
   * @param {Boolean} options.wait (Client only) If true, don't send this method until all previous method calls have completed, and don't send any subsequent method calls until this one is completed.
   * @param {Function} options.onResultReceived (Client only) This callback is invoked with the error or result of the method (just like `asyncCallback`) as soon as the error or result is available. The local cache may not yet reflect the writes performed by the method.
   * @param {Boolean} options.noRetry (Client only) if true, don't send this method again on reload, simply call the callback an error with the error code 'invocation-failed'.
   * @param {Boolean} options.throwStubExceptions (Client only) If true, exceptions thrown by method stubs will be thrown instead of logged, and the method will not be invoked on the server.
   * @param {Function} [asyncCallback] Optional callback; same semantics as in [`Meteor.call`](#meteor_call).          //
   */apply: function (name, args, options, callback) {                                                                 //
    var self = this; // We were passed 3 arguments. They may be either (name, args, options)                           // 764
    // or (name, args, callback)                                                                                       // 767
                                                                                                                       //
    if (!callback && typeof options === 'function') {                                                                  // 768
      callback = options;                                                                                              // 769
      options = {};                                                                                                    // 770
    }                                                                                                                  // 771
                                                                                                                       //
    options = options || {};                                                                                           // 772
                                                                                                                       //
    if (callback) {                                                                                                    // 774
      // XXX would it be better form to do the binding in stream.on,                                                   // 775
      // or caller, instead of here?                                                                                   // 776
      // XXX improve error message (and how we report it)                                                              // 777
      callback = Meteor.bindEnvironment(callback, "delivering result of invoking '" + name + "'");                     // 778
    } // Keep our args safe from mutation (eg if we don't send the message for a                                       // 782
    // while because of a wait method).                                                                                // 785
                                                                                                                       //
                                                                                                                       //
    args = EJSON.clone(args); // Lazily allocate method ID once we know that it'll be needed.                          // 786
                                                                                                                       //
    var methodId = function () {                                                                                       // 789
      var id;                                                                                                          // 790
      return function () {                                                                                             // 791
        if (id === undefined) id = '' + self._nextMethodId++;                                                          // 792
        return id;                                                                                                     // 794
      };                                                                                                               // 795
    }();                                                                                                               // 796
                                                                                                                       //
    var enclosing = DDP._CurrentInvocation.get();                                                                      // 798
                                                                                                                       //
    var alreadyInSimulation = enclosing && enclosing.isSimulation; // Lazily generate a randomSeed, only if it is requested by the stub.
    // The random streams only have utility if they're used on both the client                                         // 802
    // and the server; if the client doesn't generate any 'random' values                                              // 803
    // then we don't expect the server to generate any either.                                                         // 804
    // Less commonly, the server may perform different actions from the client,                                        // 805
    // and may in fact generate values where the client did not, but we don't                                          // 806
    // have any client-side values to match, so even here we may as well just                                          // 807
    // use a random seed on the server.  In that case, we don't pass the                                               // 808
    // randomSeed to save bandwidth, and we don't even generate it to save a                                           // 809
    // bit of CPU and to avoid consuming entropy.                                                                      // 810
                                                                                                                       //
    var randomSeed = null;                                                                                             // 811
                                                                                                                       //
    var randomSeedGenerator = function () {                                                                            // 812
      if (randomSeed === null) {                                                                                       // 813
        randomSeed = DDPCommon.makeRpcSeed(enclosing, name);                                                           // 814
      }                                                                                                                // 815
                                                                                                                       //
      return randomSeed;                                                                                               // 816
    }; // Run the stub, if we have one. The stub is supposed to make some                                              // 817
    // temporary writes to the database to give the user a smooth experience                                           // 820
    // until the actual result of executing the method comes back from the                                             // 821
    // server (whereupon the temporary writes to the database will be reversed                                         // 822
    // during the beginUpdate/endUpdate process.)                                                                      // 823
    //                                                                                                                 // 824
    // Normally, we ignore the return value of the stub (even if it is an                                              // 825
    // exception), in favor of the real return value from the server. The                                              // 826
    // exception is if the *caller* is a stub. In that case, we're not going                                           // 827
    // to do a RPC, so we use the return value of the stub as our return                                               // 828
    // value.                                                                                                          // 829
                                                                                                                       //
                                                                                                                       //
    var stub = self._methodHandlers[name];                                                                             // 831
                                                                                                                       //
    if (stub) {                                                                                                        // 832
      var setUserId = function (userId) {                                                                              // 833
        self.setUserId(userId);                                                                                        // 834
      };                                                                                                               // 835
                                                                                                                       //
      var invocation = new DDPCommon.MethodInvocation({                                                                // 837
        isSimulation: true,                                                                                            // 838
        userId: self.userId(),                                                                                         // 839
        setUserId: setUserId,                                                                                          // 840
        randomSeed: function () {                                                                                      // 841
          return randomSeedGenerator();                                                                                // 841
        }                                                                                                              // 841
      });                                                                                                              // 837
      if (!alreadyInSimulation) self._saveOriginals();                                                                 // 844
                                                                                                                       //
      try {                                                                                                            // 847
        // Note that unlike in the corresponding server code, we never audit                                           // 848
        // that stubs check() their arguments.                                                                         // 849
        var stubReturnValue = DDP._CurrentInvocation.withValue(invocation, function () {                               // 850
          if (Meteor.isServer) {                                                                                       // 851
            // Because saveOriginals and retrieveOriginals aren't reentrant,                                           // 852
            // don't allow stubs to yield.                                                                             // 853
            return Meteor._noYieldsAllowed(function () {                                                               // 854
              // re-clone, so that the stub can't affect our caller's values                                           // 855
              return stub.apply(invocation, EJSON.clone(args));                                                        // 856
            });                                                                                                        // 857
          } else {                                                                                                     // 858
            return stub.apply(invocation, EJSON.clone(args));                                                          // 859
          }                                                                                                            // 860
        });                                                                                                            // 861
      } catch (e) {                                                                                                    // 862
        var exception = e;                                                                                             // 864
      }                                                                                                                // 865
                                                                                                                       //
      if (!alreadyInSimulation) self._retrieveAndStoreOriginals(methodId());                                           // 867
    } // If we're in a simulation, stop and return the result we have,                                                 // 869
    // rather than going on to do an RPC. If there was no stub,                                                        // 872
    // we'll end up returning undefined.                                                                               // 873
                                                                                                                       //
                                                                                                                       //
    if (alreadyInSimulation) {                                                                                         // 874
      if (callback) {                                                                                                  // 875
        callback(exception, stubReturnValue);                                                                          // 876
        return undefined;                                                                                              // 877
      }                                                                                                                // 878
                                                                                                                       //
      if (exception) throw exception;                                                                                  // 879
      return stubReturnValue;                                                                                          // 881
    } // If an exception occurred in a stub, and we're ignoring it                                                     // 882
    // because we're doing an RPC and want to use what the server                                                      // 885
    // returns instead, log it so the developer knows                                                                  // 886
    // (unless they explicitly ask to see the error).                                                                  // 887
    //                                                                                                                 // 888
    // Tests can set the 'expected' flag on an exception so it won't                                                   // 889
    // go to log.                                                                                                      // 890
                                                                                                                       //
                                                                                                                       //
    if (exception) {                                                                                                   // 891
      if (options.throwStubExceptions) {                                                                               // 892
        throw exception;                                                                                               // 893
      } else if (!exception.expected) {                                                                                // 894
        Meteor._debug("Exception while simulating the effect of invoking '" + name + "'", exception, exception.stack);
      }                                                                                                                // 897
    } // At this point we're definitely doing an RPC, and we're going to                                               // 898
    // return the value of the RPC to the caller.                                                                      // 902
    // If the caller didn't give a callback, decide what to do.                                                        // 904
                                                                                                                       //
                                                                                                                       //
    if (!callback) {                                                                                                   // 905
      if (Meteor.isClient) {                                                                                           // 906
        // On the client, we don't have fibers, so we can't block. The                                                 // 907
        // only thing we can do is to return undefined and discard the                                                 // 908
        // result of the RPC. If an error occurred then print the error                                                // 909
        // to the console.                                                                                             // 910
        callback = function (err) {                                                                                    // 911
          err && Meteor._debug("Error invoking Method '" + name + "':", err.message);                                  // 912
        };                                                                                                             // 914
      } else {                                                                                                         // 915
        // On the server, make the function synchronous. Throw on                                                      // 916
        // errors, return on success.                                                                                  // 917
        var future = new Future();                                                                                     // 918
        callback = future.resolver();                                                                                  // 919
      }                                                                                                                // 920
    } // Send the RPC. Note that on the client, it is important that the                                               // 921
    // stub have finished before we send the RPC, so that we know we have                                              // 923
    // a complete list of which local documents the stub wrote.                                                        // 924
                                                                                                                       //
                                                                                                                       //
    var message = {                                                                                                    // 925
      msg: 'method',                                                                                                   // 926
      method: name,                                                                                                    // 927
      params: args,                                                                                                    // 928
      id: methodId()                                                                                                   // 929
    }; // Send the randomSeed only if we used it                                                                       // 925
                                                                                                                       //
    if (randomSeed !== null) {                                                                                         // 933
      message.randomSeed = randomSeed;                                                                                 // 934
    }                                                                                                                  // 935
                                                                                                                       //
    var methodInvoker = new MethodInvoker({                                                                            // 937
      methodId: methodId(),                                                                                            // 938
      callback: callback,                                                                                              // 939
      connection: self,                                                                                                // 940
      onResultReceived: options.onResultReceived,                                                                      // 941
      wait: !!options.wait,                                                                                            // 942
      message: message,                                                                                                // 943
      noRetry: !!options.noRetry                                                                                       // 944
    });                                                                                                                // 937
                                                                                                                       //
    if (options.wait) {                                                                                                // 947
      // It's a wait method! Wait methods go in their own block.                                                       // 948
      self._outstandingMethodBlocks.push({                                                                             // 949
        wait: true,                                                                                                    // 950
        methods: [methodInvoker]                                                                                       // 950
      });                                                                                                              // 950
    } else {                                                                                                           // 951
      // Not a wait method. Start a new block if the previous block was a wait                                         // 952
      // block, and add it to the last block of methods.                                                               // 953
      if (_.isEmpty(self._outstandingMethodBlocks) || _.last(self._outstandingMethodBlocks).wait) self._outstandingMethodBlocks.push({
        wait: false,                                                                                                   // 956
        methods: []                                                                                                    // 956
      });                                                                                                              // 956
                                                                                                                       //
      _.last(self._outstandingMethodBlocks).methods.push(methodInvoker);                                               // 957
    } // If we added it to the first block, send it out now.                                                           // 958
                                                                                                                       //
                                                                                                                       //
    if (self._outstandingMethodBlocks.length === 1) methodInvoker.sendMessage(); // If we're using the default callback on the server,
    // block waiting for the result.                                                                                   // 965
                                                                                                                       //
    if (future) {                                                                                                      // 966
      return future.wait();                                                                                            // 967
    }                                                                                                                  // 968
                                                                                                                       //
    return options.returnStubValue ? stubReturnValue : undefined;                                                      // 969
  },                                                                                                                   // 970
  // Before calling a method stub, prepare all stores to track changes and allow                                       // 972
  // _retrieveAndStoreOriginals to get the original versions of changed                                                // 973
  // documents.                                                                                                        // 974
  _saveOriginals: function () {                                                                                        // 975
    var self = this;                                                                                                   // 976
    if (!self._waitingForQuiescence()) self._flushBufferedWrites();                                                    // 977
                                                                                                                       //
    _.each(self._stores, function (s) {                                                                                // 979
      s.saveOriginals();                                                                                               // 980
    });                                                                                                                // 981
  },                                                                                                                   // 982
  // Retrieves the original versions of all documents modified by the stub for                                         // 983
  // method 'methodId' from all stores and saves them to _serverDocuments (keyed                                       // 984
  // by document) and _documentsWrittenByStub (keyed by method ID).                                                    // 985
  _retrieveAndStoreOriginals: function (methodId) {                                                                    // 986
    var self = this;                                                                                                   // 987
    if (self._documentsWrittenByStub[methodId]) throw new Error("Duplicate methodId in _retrieveAndStoreOriginals");   // 988
    var docsWritten = [];                                                                                              // 991
                                                                                                                       //
    _.each(self._stores, function (s, collection) {                                                                    // 992
      var originals = s.retrieveOriginals(); // not all stores define retrieveOriginals                                // 993
                                                                                                                       //
      if (!originals) return;                                                                                          // 995
      originals.forEach(function (doc, id) {                                                                           // 997
        docsWritten.push({                                                                                             // 998
          collection: collection,                                                                                      // 998
          id: id                                                                                                       // 998
        });                                                                                                            // 998
        if (!_.has(self._serverDocuments, collection)) self._serverDocuments[collection] = new MongoIDMap();           // 999
                                                                                                                       //
        var serverDoc = self._serverDocuments[collection].setDefault(id, {});                                          // 1001
                                                                                                                       //
        if (serverDoc.writtenByStubs) {                                                                                // 1002
          // We're not the first stub to write this doc. Just add our method ID                                        // 1003
          // to the record.                                                                                            // 1004
          serverDoc.writtenByStubs[methodId] = true;                                                                   // 1005
        } else {                                                                                                       // 1006
          // First stub! Save the original value and our method ID.                                                    // 1007
          serverDoc.document = doc;                                                                                    // 1008
          serverDoc.flushCallbacks = [];                                                                               // 1009
          serverDoc.writtenByStubs = {};                                                                               // 1010
          serverDoc.writtenByStubs[methodId] = true;                                                                   // 1011
        }                                                                                                              // 1012
      });                                                                                                              // 1013
    });                                                                                                                // 1014
                                                                                                                       //
    if (!_.isEmpty(docsWritten)) {                                                                                     // 1015
      self._documentsWrittenByStub[methodId] = docsWritten;                                                            // 1016
    }                                                                                                                  // 1017
  },                                                                                                                   // 1018
  // This is very much a private function we use to make the tests                                                     // 1020
  // take up fewer server resources after they complete.                                                               // 1021
  _unsubscribeAll: function () {                                                                                       // 1022
    var self = this;                                                                                                   // 1023
                                                                                                                       //
    _.each(_.clone(self._subscriptions), function (sub, id) {                                                          // 1024
      // Avoid killing the autoupdate subscription so that developers                                                  // 1025
      // still get hot code pushes when writing tests.                                                                 // 1026
      //                                                                                                               // 1027
      // XXX it's a hack to encode knowledge about autoupdate here,                                                    // 1028
      // but it doesn't seem worth it yet to have a special API for                                                    // 1029
      // subscriptions to preserve after unit tests.                                                                   // 1030
      if (sub.name !== 'meteor_autoupdate_clientVersions') {                                                           // 1031
        self._subscriptions[id].stop();                                                                                // 1032
      }                                                                                                                // 1033
    });                                                                                                                // 1034
  },                                                                                                                   // 1035
  // Sends the DDP stringification of the given message object                                                         // 1037
  _send: function (obj) {                                                                                              // 1038
    var self = this;                                                                                                   // 1039
                                                                                                                       //
    self._stream.send(DDPCommon.stringifyDDP(obj));                                                                    // 1040
  },                                                                                                                   // 1041
  // We detected via DDP-level heartbeats that we've lost the                                                          // 1043
  // connection.  Unlike `disconnect` or `close`, a lost connection                                                    // 1044
  // will be automatically retried.                                                                                    // 1045
  _lostConnection: function (error) {                                                                                  // 1046
    var self = this;                                                                                                   // 1047
                                                                                                                       //
    self._stream._lostConnection(error);                                                                               // 1048
  },                                                                                                                   // 1049
  /**                                                                                                                  // 1051
   * @summary Get the current connection status. A reactive data source.                                               //
   * @locus Client                                                                                                     //
   * @memberOf Meteor                                                                                                  //
   * @importFromPackage meteor                                                                                         //
   */status: function () /*passthrough args*/{                                                                         //
    var self = this;                                                                                                   // 1058
    return self._stream.status.apply(self._stream, arguments);                                                         // 1059
  },                                                                                                                   // 1060
  /**                                                                                                                  // 1062
   * @summary Force an immediate reconnection attempt if the client is not connected to the server.                    //
   This method does nothing if the client is already connected.                                                        //
   * @locus Client                                                                                                     //
   * @memberOf Meteor                                                                                                  //
   * @importFromPackage meteor                                                                                         //
   */reconnect: function () /*passthrough args*/{                                                                      //
    var self = this;                                                                                                   // 1071
    return self._stream.reconnect.apply(self._stream, arguments);                                                      // 1072
  },                                                                                                                   // 1073
  /**                                                                                                                  // 1075
   * @summary Disconnect the client from the server.                                                                   //
   * @locus Client                                                                                                     //
   * @memberOf Meteor                                                                                                  //
   * @importFromPackage meteor                                                                                         //
   */disconnect: function () /*passthrough args*/{                                                                     //
    var self = this;                                                                                                   // 1082
    return self._stream.disconnect.apply(self._stream, arguments);                                                     // 1083
  },                                                                                                                   // 1084
  close: function () {                                                                                                 // 1086
    var self = this;                                                                                                   // 1087
    return self._stream.disconnect({                                                                                   // 1088
      _permanent: true                                                                                                 // 1088
    });                                                                                                                // 1088
  },                                                                                                                   // 1089
  ///                                                                                                                  // 1091
  /// Reactive user system                                                                                             // 1092
  ///                                                                                                                  // 1093
  userId: function () {                                                                                                // 1094
    var self = this;                                                                                                   // 1095
    if (self._userIdDeps) self._userIdDeps.depend();                                                                   // 1096
    return self._userId;                                                                                               // 1098
  },                                                                                                                   // 1099
  setUserId: function (userId) {                                                                                       // 1101
    var self = this; // Avoid invalidating dependents if setUserId is called with current value.                       // 1102
                                                                                                                       //
    if (self._userId === userId) return;                                                                               // 1104
    self._userId = userId;                                                                                             // 1106
    if (self._userIdDeps) self._userIdDeps.changed();                                                                  // 1107
  },                                                                                                                   // 1109
  // Returns true if we are in a state after reconnect of waiting for subs to be                                       // 1111
  // revived or early methods to finish their data, or we are waiting for a                                            // 1112
  // "wait" method to finish.                                                                                          // 1113
  _waitingForQuiescence: function () {                                                                                 // 1114
    var self = this;                                                                                                   // 1115
    return !_.isEmpty(self._subsBeingRevived) || !_.isEmpty(self._methodsBlockingQuiescence);                          // 1116
  },                                                                                                                   // 1118
  // Returns true if any method whose message has been sent to the server has                                          // 1120
  // not yet invoked its user callback.                                                                                // 1121
  _anyMethodsAreOutstanding: function () {                                                                             // 1122
    var self = this;                                                                                                   // 1123
    return _.any(_.pluck(self._methodInvokers, 'sentMessage'));                                                        // 1124
  },                                                                                                                   // 1125
  _livedata_connected: function (msg) {                                                                                // 1127
    var self = this;                                                                                                   // 1128
                                                                                                                       //
    if (self._version !== 'pre1' && self._heartbeatInterval !== 0) {                                                   // 1130
      self._heartbeat = new DDPCommon.Heartbeat({                                                                      // 1131
        heartbeatInterval: self._heartbeatInterval,                                                                    // 1132
        heartbeatTimeout: self._heartbeatTimeout,                                                                      // 1133
        onTimeout: function () {                                                                                       // 1134
          self._lostConnection(new DDP.ConnectionError("DDP heartbeat timed out"));                                    // 1135
        },                                                                                                             // 1137
        sendPing: function () {                                                                                        // 1138
          self._send({                                                                                                 // 1139
            msg: 'ping'                                                                                                // 1139
          });                                                                                                          // 1139
        }                                                                                                              // 1140
      });                                                                                                              // 1131
                                                                                                                       //
      self._heartbeat.start();                                                                                         // 1142
    } // If this is a reconnect, we'll have to reset all stores.                                                       // 1143
                                                                                                                       //
                                                                                                                       //
    if (self._lastSessionId) self._resetStores = true;                                                                 // 1146
                                                                                                                       //
    if (typeof msg.session === "string") {                                                                             // 1149
      var reconnectedToPreviousSession = self._lastSessionId === msg.session;                                          // 1150
      self._lastSessionId = msg.session;                                                                               // 1151
    }                                                                                                                  // 1152
                                                                                                                       //
    if (reconnectedToPreviousSession) {                                                                                // 1154
      // Successful reconnection -- pick up where we left off.  Note that right                                        // 1155
      // now, this never happens: the server never connects us to a previous                                           // 1156
      // session, because DDP doesn't provide enough data for the server to know                                       // 1157
      // what messages the client has processed. We need to improve DDP to make                                        // 1158
      // this possible, at which point we'll probably need more code here.                                             // 1159
      return;                                                                                                          // 1160
    } // Server doesn't have our data any more. Re-sync a new session.                                                 // 1161
    // Forget about messages we were buffering for unknown collections. They'll                                        // 1165
    // be resent if still relevant.                                                                                    // 1166
                                                                                                                       //
                                                                                                                       //
    self._updatesForUnknownStores = {};                                                                                // 1167
                                                                                                                       //
    if (self._resetStores) {                                                                                           // 1169
      // Forget about the effects of stubs. We'll be resetting all collections                                         // 1170
      // anyway.                                                                                                       // 1171
      self._documentsWrittenByStub = {};                                                                               // 1172
      self._serverDocuments = {};                                                                                      // 1173
    } // Clear _afterUpdateCallbacks.                                                                                  // 1174
                                                                                                                       //
                                                                                                                       //
    self._afterUpdateCallbacks = []; // Mark all named subscriptions which are ready (ie, we already called the        // 1177
    // ready callback) as needing to be revived.                                                                       // 1180
    // XXX We should also block reconnect quiescence until unnamed subscriptions                                       // 1181
    //     (eg, autopublish) are done re-publishing to avoid flicker!                                                  // 1182
                                                                                                                       //
    self._subsBeingRevived = {};                                                                                       // 1183
                                                                                                                       //
    _.each(self._subscriptions, function (sub, id) {                                                                   // 1184
      if (sub.ready) self._subsBeingRevived[id] = true;                                                                // 1185
    }); // Arrange for "half-finished" methods to have their callbacks run, and                                        // 1187
    // track methods that were sent on this connection so that we don't                                                // 1190
    // quiesce until they are all done.                                                                                // 1191
    //                                                                                                                 // 1192
    // Start by clearing _methodsBlockingQuiescence: methods sent before                                               // 1193
    // reconnect don't matter, and any "wait" methods sent on the new connection                                       // 1194
    // that we drop here will be restored by the loop below.                                                           // 1195
                                                                                                                       //
                                                                                                                       //
    self._methodsBlockingQuiescence = {};                                                                              // 1196
                                                                                                                       //
    if (self._resetStores) {                                                                                           // 1197
      _.each(self._methodInvokers, function (invoker) {                                                                // 1198
        if (invoker.gotResult()) {                                                                                     // 1199
          // This method already got its result, but it didn't call its callback                                       // 1200
          // because its data didn't become visible. We did not resend the                                             // 1201
          // method RPC. We'll call its callback when we get a full quiesce,                                           // 1202
          // since that's as close as we'll get to "data must be visible".                                             // 1203
          self._afterUpdateCallbacks.push(_.bind(invoker.dataVisible, invoker));                                       // 1204
        } else if (invoker.sentMessage) {                                                                              // 1205
          // This method has been sent on this connection (maybe as a resend                                           // 1206
          // from the last connection, maybe from onReconnect, maybe just very                                         // 1207
          // quickly before processing the connected message).                                                         // 1208
          //                                                                                                           // 1209
          // We don't need to do anything special to ensure its callbacks get                                          // 1210
          // called, but we'll count it as a method which is preventing                                                // 1211
          // reconnect quiescence. (eg, it might be a login method that was run                                        // 1212
          // from onReconnect, and we don't want to see flicker by seeing a                                            // 1213
          // logged-out state.)                                                                                        // 1214
          self._methodsBlockingQuiescence[invoker.methodId] = true;                                                    // 1215
        }                                                                                                              // 1216
      });                                                                                                              // 1217
    }                                                                                                                  // 1218
                                                                                                                       //
    self._messagesBufferedUntilQuiescence = []; // If we're not waiting on any methods or subs, we can reset the stores and
    // call the callbacks immediately.                                                                                 // 1223
                                                                                                                       //
    if (!self._waitingForQuiescence()) {                                                                               // 1224
      if (self._resetStores) {                                                                                         // 1225
        _.each(self._stores, function (s) {                                                                            // 1226
          s.beginUpdate(0, true);                                                                                      // 1227
          s.endUpdate();                                                                                               // 1228
        });                                                                                                            // 1229
                                                                                                                       //
        self._resetStores = false;                                                                                     // 1230
      }                                                                                                                // 1231
                                                                                                                       //
      self._runAfterUpdateCallbacks();                                                                                 // 1232
    }                                                                                                                  // 1233
  },                                                                                                                   // 1234
  _processOneDataMessage: function (msg, updates) {                                                                    // 1237
    var self = this; // Using underscore here so as not to need to capitalize.                                         // 1238
                                                                                                                       //
    self['_process_' + msg.msg](msg, updates);                                                                         // 1240
  },                                                                                                                   // 1241
  _livedata_data: function (msg) {                                                                                     // 1244
    var self = this;                                                                                                   // 1245
                                                                                                                       //
    if (self._waitingForQuiescence()) {                                                                                // 1247
      self._messagesBufferedUntilQuiescence.push(msg);                                                                 // 1248
                                                                                                                       //
      if (msg.msg === "nosub") delete self._subsBeingRevived[msg.id];                                                  // 1250
                                                                                                                       //
      _.each(msg.subs || [], function (subId) {                                                                        // 1253
        delete self._subsBeingRevived[subId];                                                                          // 1254
      });                                                                                                              // 1255
                                                                                                                       //
      _.each(msg.methods || [], function (methodId) {                                                                  // 1256
        delete self._methodsBlockingQuiescence[methodId];                                                              // 1257
      });                                                                                                              // 1258
                                                                                                                       //
      if (self._waitingForQuiescence()) return; // No methods or subs are blocking quiescence!                         // 1260
      // We'll now process and all of our buffered messages, reset all stores,                                         // 1264
      // and apply them all at once.                                                                                   // 1265
                                                                                                                       //
      _.each(self._messagesBufferedUntilQuiescence, function (bufferedMsg) {                                           // 1266
        self._processOneDataMessage(bufferedMsg, self._bufferedWrites);                                                // 1267
      });                                                                                                              // 1268
                                                                                                                       //
      self._messagesBufferedUntilQuiescence = [];                                                                      // 1269
    } else {                                                                                                           // 1270
      self._processOneDataMessage(msg, self._bufferedWrites);                                                          // 1271
    } // Immediately flush writes when:                                                                                // 1272
    //  1. Buffering is disabled. Or;                                                                                  // 1275
    //  2. any non-(added/changed/removed) message arrives.                                                            // 1276
                                                                                                                       //
                                                                                                                       //
    var standardWrite = _.include(['added', 'changed', 'removed'], msg.msg);                                           // 1277
                                                                                                                       //
    if (self._bufferedWritesInterval === 0 || !standardWrite) {                                                        // 1278
      self._flushBufferedWrites();                                                                                     // 1279
                                                                                                                       //
      return;                                                                                                          // 1280
    }                                                                                                                  // 1281
                                                                                                                       //
    if (self._bufferedWritesFlushAt === null) {                                                                        // 1283
      self._bufferedWritesFlushAt = new Date().valueOf() + self._bufferedWritesMaxAge;                                 // 1284
    } else if (self._bufferedWritesFlushAt < new Date().valueOf()) {                                                   // 1285
      self._flushBufferedWrites();                                                                                     // 1287
                                                                                                                       //
      return;                                                                                                          // 1288
    }                                                                                                                  // 1289
                                                                                                                       //
    if (self._bufferedWritesFlushHandle) {                                                                             // 1291
      clearTimeout(self._bufferedWritesFlushHandle);                                                                   // 1292
    }                                                                                                                  // 1293
                                                                                                                       //
    self._bufferedWritesFlushHandle = setTimeout(self.__flushBufferedWrites, self._bufferedWritesInterval);            // 1294
  },                                                                                                                   // 1296
  _flushBufferedWrites: function () {                                                                                  // 1298
    var self = this;                                                                                                   // 1299
                                                                                                                       //
    if (self._bufferedWritesFlushHandle) {                                                                             // 1300
      clearTimeout(self._bufferedWritesFlushHandle);                                                                   // 1301
      self._bufferedWritesFlushHandle = null;                                                                          // 1302
    }                                                                                                                  // 1303
                                                                                                                       //
    self._bufferedWritesFlushAt = null; // We need to clear the buffer before passing it to                            // 1305
    //  performWrites. As there's no guarantee that it                                                                 // 1307
    //  will exit cleanly.                                                                                             // 1308
                                                                                                                       //
    var writes = self._bufferedWrites;                                                                                 // 1309
    self._bufferedWrites = {};                                                                                         // 1310
                                                                                                                       //
    self._performWrites(writes);                                                                                       // 1311
  },                                                                                                                   // 1312
  _performWrites: function (updates) {                                                                                 // 1314
    var self = this;                                                                                                   // 1315
                                                                                                                       //
    if (self._resetStores || !_.isEmpty(updates)) {                                                                    // 1317
      // Begin a transactional update of each store.                                                                   // 1318
      _.each(self._stores, function (s, storeName) {                                                                   // 1319
        s.beginUpdate(_.has(updates, storeName) ? updates[storeName].length : 0, self._resetStores);                   // 1320
      });                                                                                                              // 1322
                                                                                                                       //
      self._resetStores = false;                                                                                       // 1323
                                                                                                                       //
      _.each(updates, function (updateMessages, storeName) {                                                           // 1325
        var store = self._stores[storeName];                                                                           // 1326
                                                                                                                       //
        if (store) {                                                                                                   // 1327
          _.each(updateMessages, function (updateMessage) {                                                            // 1328
            store.update(updateMessage);                                                                               // 1329
          });                                                                                                          // 1330
        } else {                                                                                                       // 1331
          // Nobody's listening for this data. Queue it up until                                                       // 1332
          // someone wants it.                                                                                         // 1333
          // XXX memory use will grow without bound if you forget to                                                   // 1334
          // create a collection or just don't care about it... going                                                  // 1335
          // to have to do something about that.                                                                       // 1336
          if (!_.has(self._updatesForUnknownStores, storeName)) self._updatesForUnknownStores[storeName] = [];         // 1337
          Array.prototype.push.apply(self._updatesForUnknownStores[storeName], updateMessages);                        // 1339
        }                                                                                                              // 1341
      }); // End update transaction.                                                                                   // 1342
                                                                                                                       //
                                                                                                                       //
      _.each(self._stores, function (s) {                                                                              // 1345
        s.endUpdate();                                                                                                 // 1345
      });                                                                                                              // 1345
    }                                                                                                                  // 1346
                                                                                                                       //
    self._runAfterUpdateCallbacks();                                                                                   // 1348
  },                                                                                                                   // 1349
  // Call any callbacks deferred with _runWhenAllServerDocsAreFlushed whose                                            // 1351
  // relevant docs have been flushed, as well as dataVisible callbacks at                                              // 1352
  // reconnect-quiescence time.                                                                                        // 1353
  _runAfterUpdateCallbacks: function () {                                                                              // 1354
    var self = this;                                                                                                   // 1355
    var callbacks = self._afterUpdateCallbacks;                                                                        // 1356
    self._afterUpdateCallbacks = [];                                                                                   // 1357
                                                                                                                       //
    _.each(callbacks, function (c) {                                                                                   // 1358
      c();                                                                                                             // 1359
    });                                                                                                                // 1360
  },                                                                                                                   // 1361
  _pushUpdate: function (updates, collection, msg) {                                                                   // 1363
    var self = this;                                                                                                   // 1364
                                                                                                                       //
    if (!_.has(updates, collection)) {                                                                                 // 1365
      updates[collection] = [];                                                                                        // 1366
    }                                                                                                                  // 1367
                                                                                                                       //
    updates[collection].push(msg);                                                                                     // 1368
  },                                                                                                                   // 1369
  _getServerDoc: function (collection, id) {                                                                           // 1371
    var self = this;                                                                                                   // 1372
    if (!_.has(self._serverDocuments, collection)) return null;                                                        // 1373
    var serverDocsForCollection = self._serverDocuments[collection];                                                   // 1375
    return serverDocsForCollection.get(id) || null;                                                                    // 1376
  },                                                                                                                   // 1377
  _process_added: function (msg, updates) {                                                                            // 1379
    var self = this;                                                                                                   // 1380
    var id = MongoID.idParse(msg.id);                                                                                  // 1381
                                                                                                                       //
    var serverDoc = self._getServerDoc(msg.collection, id);                                                            // 1382
                                                                                                                       //
    if (serverDoc) {                                                                                                   // 1383
      // Some outstanding stub wrote here.                                                                             // 1384
      var isExisting = serverDoc.document !== undefined;                                                               // 1385
      serverDoc.document = msg.fields || {};                                                                           // 1387
      serverDoc.document._id = id;                                                                                     // 1388
                                                                                                                       //
      if (self._resetStores) {                                                                                         // 1390
        // During reconnect the server is sending adds for existing ids.                                               // 1391
        // Always push an update so that document stays in the store after                                             // 1392
        // reset. Use current version of the document for this update, so                                              // 1393
        // that stub-written values are preserved.                                                                     // 1394
        var currentDoc = self._stores[msg.collection].getDoc(msg.id);                                                  // 1395
                                                                                                                       //
        if (currentDoc !== undefined) msg.fields = currentDoc;                                                         // 1396
                                                                                                                       //
        self._pushUpdate(updates, msg.collection, msg);                                                                // 1399
      } else if (isExisting) {                                                                                         // 1400
        throw new Error("Server sent add for existing id: " + msg.id);                                                 // 1401
      }                                                                                                                // 1402
    } else {                                                                                                           // 1403
      self._pushUpdate(updates, msg.collection, msg);                                                                  // 1404
    }                                                                                                                  // 1405
  },                                                                                                                   // 1406
  _process_changed: function (msg, updates) {                                                                          // 1408
    var self = this;                                                                                                   // 1409
                                                                                                                       //
    var serverDoc = self._getServerDoc(msg.collection, MongoID.idParse(msg.id));                                       // 1410
                                                                                                                       //
    if (serverDoc) {                                                                                                   // 1412
      if (serverDoc.document === undefined) throw new Error("Server sent changed for nonexisting id: " + msg.id);      // 1413
      DiffSequence.applyChanges(serverDoc.document, msg.fields);                                                       // 1415
    } else {                                                                                                           // 1416
      self._pushUpdate(updates, msg.collection, msg);                                                                  // 1417
    }                                                                                                                  // 1418
  },                                                                                                                   // 1419
  _process_removed: function (msg, updates) {                                                                          // 1421
    var self = this;                                                                                                   // 1422
                                                                                                                       //
    var serverDoc = self._getServerDoc(msg.collection, MongoID.idParse(msg.id));                                       // 1423
                                                                                                                       //
    if (serverDoc) {                                                                                                   // 1425
      // Some outstanding stub wrote here.                                                                             // 1426
      if (serverDoc.document === undefined) throw new Error("Server sent removed for nonexisting id:" + msg.id);       // 1427
      serverDoc.document = undefined;                                                                                  // 1429
    } else {                                                                                                           // 1430
      self._pushUpdate(updates, msg.collection, {                                                                      // 1431
        msg: 'removed',                                                                                                // 1432
        collection: msg.collection,                                                                                    // 1433
        id: msg.id                                                                                                     // 1434
      });                                                                                                              // 1431
    }                                                                                                                  // 1436
  },                                                                                                                   // 1437
  _process_updated: function (msg, updates) {                                                                          // 1439
    var self = this; // Process "method done" messages.                                                                // 1440
                                                                                                                       //
    _.each(msg.methods, function (methodId) {                                                                          // 1442
      _.each(self._documentsWrittenByStub[methodId], function (written) {                                              // 1443
        var serverDoc = self._getServerDoc(written.collection, written.id);                                            // 1444
                                                                                                                       //
        if (!serverDoc) throw new Error("Lost serverDoc for " + JSON.stringify(written));                              // 1445
        if (!serverDoc.writtenByStubs[methodId]) throw new Error("Doc " + JSON.stringify(written) + " not written by  method " + methodId);
        delete serverDoc.writtenByStubs[methodId];                                                                     // 1450
                                                                                                                       //
        if (_.isEmpty(serverDoc.writtenByStubs)) {                                                                     // 1451
          // All methods whose stubs wrote this method have completed! We can                                          // 1452
          // now copy the saved document to the database (reverting the stub's                                         // 1453
          // change if the server did not write to this object, or applying the                                        // 1454
          // server's writes if it did).                                                                               // 1455
          // This is a fake ddp 'replace' message.  It's just for talking                                              // 1457
          // between livedata connections and minimongo.  (We have to stringify                                        // 1458
          // the ID because it's supposed to look like a wire message.)                                                // 1459
          self._pushUpdate(updates, written.collection, {                                                              // 1460
            msg: 'replace',                                                                                            // 1461
            id: MongoID.idStringify(written.id),                                                                       // 1462
            replace: serverDoc.document                                                                                // 1463
          }); // Call all flush callbacks.                                                                             // 1460
                                                                                                                       //
                                                                                                                       //
          _.each(serverDoc.flushCallbacks, function (c) {                                                              // 1466
            c();                                                                                                       // 1467
          }); // Delete this completed serverDocument. Don't bother to GC empty                                        // 1468
          // IdMaps inside self._serverDocuments, since there probably aren't                                          // 1471
          // many collections and they'll be written repeatedly.                                                       // 1472
                                                                                                                       //
                                                                                                                       //
          self._serverDocuments[written.collection].remove(written.id);                                                // 1473
        }                                                                                                              // 1474
      });                                                                                                              // 1475
                                                                                                                       //
      delete self._documentsWrittenByStub[methodId]; // We want to call the data-written callback, but we can't do so until all
      // currently buffered messages are flushed.                                                                      // 1479
                                                                                                                       //
      var callbackInvoker = self._methodInvokers[methodId];                                                            // 1480
      if (!callbackInvoker) throw new Error("No callback invoker for method " + methodId);                             // 1481
                                                                                                                       //
      self._runWhenAllServerDocsAreFlushed(_.bind(callbackInvoker.dataVisible, callbackInvoker));                      // 1483
    });                                                                                                                // 1485
  },                                                                                                                   // 1486
  _process_ready: function (msg, updates) {                                                                            // 1488
    var self = this; // Process "sub ready" messages. "sub ready" messages don't take effect                           // 1489
    // until all current server documents have been flushed to the local                                               // 1491
    // database. We can use a write fence to implement this.                                                           // 1492
                                                                                                                       //
    _.each(msg.subs, function (subId) {                                                                                // 1493
      self._runWhenAllServerDocsAreFlushed(function () {                                                               // 1494
        var subRecord = self._subscriptions[subId]; // Did we already unsubscribe?                                     // 1495
                                                                                                                       //
        if (!subRecord) return; // Did we already receive a ready message? (Oops!)                                     // 1497
                                                                                                                       //
        if (subRecord.ready) return;                                                                                   // 1500
        subRecord.ready = true;                                                                                        // 1502
        subRecord.readyCallback && subRecord.readyCallback();                                                          // 1503
        subRecord.readyDeps.changed();                                                                                 // 1504
      });                                                                                                              // 1505
    });                                                                                                                // 1506
  },                                                                                                                   // 1507
  // Ensures that "f" will be called after all documents currently in                                                  // 1509
  // _serverDocuments have been written to the local cache. f will not be called                                       // 1510
  // if the connection is lost before then!                                                                            // 1511
  _runWhenAllServerDocsAreFlushed: function (f) {                                                                      // 1512
    var self = this;                                                                                                   // 1513
                                                                                                                       //
    var runFAfterUpdates = function () {                                                                               // 1514
      self._afterUpdateCallbacks.push(f);                                                                              // 1515
    };                                                                                                                 // 1516
                                                                                                                       //
    var unflushedServerDocCount = 0;                                                                                   // 1517
                                                                                                                       //
    var onServerDocFlush = function () {                                                                               // 1518
      --unflushedServerDocCount;                                                                                       // 1519
                                                                                                                       //
      if (unflushedServerDocCount === 0) {                                                                             // 1520
        // This was the last doc to flush! Arrange to run f after the updates                                          // 1521
        // have been applied.                                                                                          // 1522
        runFAfterUpdates();                                                                                            // 1523
      }                                                                                                                // 1524
    };                                                                                                                 // 1525
                                                                                                                       //
    _.each(self._serverDocuments, function (collectionDocs) {                                                          // 1526
      collectionDocs.forEach(function (serverDoc) {                                                                    // 1527
        var writtenByStubForAMethodWithSentMessage = _.any(serverDoc.writtenByStubs, function (dummy, methodId) {      // 1528
          var invoker = self._methodInvokers[methodId];                                                                // 1530
          return invoker && invoker.sentMessage;                                                                       // 1531
        });                                                                                                            // 1532
                                                                                                                       //
        if (writtenByStubForAMethodWithSentMessage) {                                                                  // 1533
          ++unflushedServerDocCount;                                                                                   // 1534
          serverDoc.flushCallbacks.push(onServerDocFlush);                                                             // 1535
        }                                                                                                              // 1536
      });                                                                                                              // 1537
    });                                                                                                                // 1538
                                                                                                                       //
    if (unflushedServerDocCount === 0) {                                                                               // 1539
      // There aren't any buffered docs --- we can call f as soon as the current                                       // 1540
      // round of updates is applied!                                                                                  // 1541
      runFAfterUpdates();                                                                                              // 1542
    }                                                                                                                  // 1543
  },                                                                                                                   // 1544
  _livedata_nosub: function (msg) {                                                                                    // 1546
    var self = this; // First pass it through _livedata_data, which only uses it to help get                           // 1547
    // towards quiescence.                                                                                             // 1550
                                                                                                                       //
    self._livedata_data(msg); // Do the rest of our processing immediately, with no                                    // 1551
    // buffering-until-quiescence.                                                                                     // 1554
    // we weren't subbed anyway, or we initiated the unsub.                                                            // 1556
                                                                                                                       //
                                                                                                                       //
    if (!_.has(self._subscriptions, msg.id)) return; // XXX COMPAT WITH 1.0.3.1 #errorCallback                         // 1557
                                                                                                                       //
    var errorCallback = self._subscriptions[msg.id].errorCallback;                                                     // 1561
    var stopCallback = self._subscriptions[msg.id].stopCallback;                                                       // 1562
                                                                                                                       //
    self._subscriptions[msg.id].remove();                                                                              // 1564
                                                                                                                       //
    var meteorErrorFromMsg = function (msgArg) {                                                                       // 1566
      return msgArg && msgArg.error && new Meteor.Error(msgArg.error.error, msgArg.error.reason, msgArg.error.details);
    }; // XXX COMPAT WITH 1.0.3.1 #errorCallback                                                                       // 1569
                                                                                                                       //
                                                                                                                       //
    if (errorCallback && msg.error) {                                                                                  // 1572
      errorCallback(meteorErrorFromMsg(msg));                                                                          // 1573
    }                                                                                                                  // 1574
                                                                                                                       //
    if (stopCallback) {                                                                                                // 1576
      stopCallback(meteorErrorFromMsg(msg));                                                                           // 1577
    }                                                                                                                  // 1578
  },                                                                                                                   // 1579
  _process_nosub: function () {// This is called as part of the "buffer until quiescence" process, but                 // 1581
    // nosub's effect is always immediate. It only goes in the buffer at all                                           // 1583
    // because it's possible for a nosub to be the thing that triggers                                                 // 1584
    // quiescence, if we were waiting for a sub to be revived and it dies                                              // 1585
    // instead.                                                                                                        // 1586
  },                                                                                                                   // 1587
  _livedata_result: function (msg) {                                                                                   // 1589
    // id, result or error. error has error (code), reason, details                                                    // 1590
    var self = this; // Lets make sure there are no buffered writes before returning result.                           // 1592
                                                                                                                       //
    if (!_.isEmpty(self._bufferedWrites)) {                                                                            // 1595
      self._flushBufferedWrites();                                                                                     // 1596
    } // find the outstanding request                                                                                  // 1597
    // should be O(1) in nearly all realistic use cases                                                                // 1600
                                                                                                                       //
                                                                                                                       //
    if (_.isEmpty(self._outstandingMethodBlocks)) {                                                                    // 1601
      Meteor._debug("Received method result but no methods outstanding");                                              // 1602
                                                                                                                       //
      return;                                                                                                          // 1603
    }                                                                                                                  // 1604
                                                                                                                       //
    var currentMethodBlock = self._outstandingMethodBlocks[0].methods;                                                 // 1605
    var m;                                                                                                             // 1606
                                                                                                                       //
    for (var i = 0; i < currentMethodBlock.length; i++) {                                                              // 1607
      m = currentMethodBlock[i];                                                                                       // 1608
      if (m.methodId === msg.id) break;                                                                                // 1609
    }                                                                                                                  // 1611
                                                                                                                       //
    if (!m) {                                                                                                          // 1613
      Meteor._debug("Can't match method response to original method call", msg);                                       // 1614
                                                                                                                       //
      return;                                                                                                          // 1615
    } // Remove from current method block. This may leave the block empty, but we                                      // 1616
    // don't move on to the next block until the callback has been delivered, in                                       // 1619
    // _outstandingMethodFinished.                                                                                     // 1620
                                                                                                                       //
                                                                                                                       //
    currentMethodBlock.splice(i, 1);                                                                                   // 1621
                                                                                                                       //
    if (_.has(msg, 'error')) {                                                                                         // 1623
      m.receiveResult(new Meteor.Error(msg.error.error, msg.error.reason, msg.error.details));                         // 1624
    } else {                                                                                                           // 1627
      // msg.result may be undefined if the method didn't return a                                                     // 1628
      // value                                                                                                         // 1629
      m.receiveResult(undefined, msg.result);                                                                          // 1630
    }                                                                                                                  // 1631
  },                                                                                                                   // 1632
  // Called by MethodInvoker after a method's callback is invoked.  If this was                                        // 1634
  // the last outstanding method in the current block, runs the next block. If                                         // 1635
  // there are no more methods, consider accepting a hot code push.                                                    // 1636
  _outstandingMethodFinished: function () {                                                                            // 1637
    var self = this;                                                                                                   // 1638
    if (self._anyMethodsAreOutstanding()) return; // No methods are outstanding. This should mean that the first block of
    // methods is empty. (Or it might not exist, if this was a method that                                             // 1643
    // half-finished before disconnect/reconnect.)                                                                     // 1644
                                                                                                                       //
    if (!_.isEmpty(self._outstandingMethodBlocks)) {                                                                   // 1645
      var firstBlock = self._outstandingMethodBlocks.shift();                                                          // 1646
                                                                                                                       //
      if (!_.isEmpty(firstBlock.methods)) throw new Error("No methods outstanding but nonempty block: " + JSON.stringify(firstBlock)); // Send the outstanding methods now in the first block.
                                                                                                                       //
      if (!_.isEmpty(self._outstandingMethodBlocks)) self._sendOutstandingMethods();                                   // 1652
    } // Maybe accept a hot code push.                                                                                 // 1654
                                                                                                                       //
                                                                                                                       //
    self._maybeMigrate();                                                                                              // 1657
  },                                                                                                                   // 1658
  // Sends messages for all the methods in the first block in                                                          // 1660
  // _outstandingMethodBlocks.                                                                                         // 1661
  _sendOutstandingMethods: function () {                                                                               // 1662
    var self = this;                                                                                                   // 1663
    if (_.isEmpty(self._outstandingMethodBlocks)) return;                                                              // 1664
                                                                                                                       //
    _.each(self._outstandingMethodBlocks[0].methods, function (m) {                                                    // 1666
      m.sendMessage();                                                                                                 // 1667
    });                                                                                                                // 1668
  },                                                                                                                   // 1669
  _livedata_error: function (msg) {                                                                                    // 1671
    Meteor._debug("Received error from server: ", msg.reason);                                                         // 1672
                                                                                                                       //
    if (msg.offendingMessage) Meteor._debug("For: ", msg.offendingMessage);                                            // 1673
  },                                                                                                                   // 1675
  _callOnReconnectAndSendAppropriateOutstandingMethods: function () {                                                  // 1677
    var self = this;                                                                                                   // 1678
    var oldOutstandingMethodBlocks = self._outstandingMethodBlocks;                                                    // 1679
    self._outstandingMethodBlocks = [];                                                                                // 1680
    self.onReconnect();                                                                                                // 1682
    if (_.isEmpty(oldOutstandingMethodBlocks)) return; // We have at least one block worth of old outstanding methods to try
    // again. First: did onReconnect actually send anything? If not, we just                                           // 1688
    // restore all outstanding methods and run the first block.                                                        // 1689
                                                                                                                       //
    if (_.isEmpty(self._outstandingMethodBlocks)) {                                                                    // 1690
      self._outstandingMethodBlocks = oldOutstandingMethodBlocks;                                                      // 1691
                                                                                                                       //
      self._sendOutstandingMethods();                                                                                  // 1692
                                                                                                                       //
      return;                                                                                                          // 1693
    } // OK, there are blocks on both sides. Special case: merge the last block of                                     // 1694
    // the reconnect methods with the first block of the original methods, if                                          // 1697
    // neither of them are "wait" blocks.                                                                              // 1698
                                                                                                                       //
                                                                                                                       //
    if (!_.last(self._outstandingMethodBlocks).wait && !oldOutstandingMethodBlocks[0].wait) {                          // 1699
      _.each(oldOutstandingMethodBlocks[0].methods, function (m) {                                                     // 1701
        _.last(self._outstandingMethodBlocks).methods.push(m); // If this "last block" is also the first block, send the message.
                                                                                                                       //
                                                                                                                       //
        if (self._outstandingMethodBlocks.length === 1) m.sendMessage();                                               // 1705
      });                                                                                                              // 1707
                                                                                                                       //
      oldOutstandingMethodBlocks.shift();                                                                              // 1709
    } // Now add the rest of the original blocks on.                                                                   // 1710
                                                                                                                       //
                                                                                                                       //
    _.each(oldOutstandingMethodBlocks, function (block) {                                                              // 1713
      self._outstandingMethodBlocks.push(block);                                                                       // 1714
    });                                                                                                                // 1715
  },                                                                                                                   // 1716
  // We can accept a hot code push if there are no methods in flight.                                                  // 1718
  _readyToMigrate: function () {                                                                                       // 1719
    var self = this;                                                                                                   // 1720
    return _.isEmpty(self._methodInvokers);                                                                            // 1721
  },                                                                                                                   // 1722
  // If we were blocking a migration, see if it's now possible to continue.                                            // 1724
  // Call whenever the set of outstanding/blocked methods shrinks.                                                     // 1725
  _maybeMigrate: function () {                                                                                         // 1726
    var self = this;                                                                                                   // 1727
                                                                                                                       //
    if (self._retryMigrate && self._readyToMigrate()) {                                                                // 1728
      self._retryMigrate();                                                                                            // 1729
                                                                                                                       //
      self._retryMigrate = null;                                                                                       // 1730
    }                                                                                                                  // 1731
  }                                                                                                                    // 1732
});                                                                                                                    // 480
                                                                                                                       //
LivedataTest.Connection = Connection; // @param url {String} URL to Meteor app,                                        // 1735
//     e.g.:                                                                                                           // 1738
//     "subdomain.meteor.com",                                                                                         // 1739
//     "http://subdomain.meteor.com",                                                                                  // 1740
//     "/",                                                                                                            // 1741
//     "ddp+sockjs://ddp--****-foo.meteor.com/sockjs"                                                                  // 1742
/**                                                                                                                    // 1744
 * @summary Connect to the server of a different Meteor application to subscribe to its document sets and invoke its remote methods.
 * @locus Anywhere                                                                                                     //
 * @param {String} url The URL of another Meteor application.                                                          //
 */                                                                                                                    //
                                                                                                                       //
DDP.connect = function (url, options) {                                                                                // 1749
  var ret = new Connection(url, options);                                                                              // 1750
  allConnections.push(ret); // hack. see below.                                                                        // 1751
                                                                                                                       //
  return ret;                                                                                                          // 1752
}; // Hack for `spiderable` package: a way to see if the page is done                                                  // 1753
// loading all the data it needs.                                                                                      // 1756
//                                                                                                                     // 1757
                                                                                                                       //
                                                                                                                       //
allConnections = [];                                                                                                   // 1758
                                                                                                                       //
DDP._allSubscriptionsReady = function () {                                                                             // 1759
  return _.all(allConnections, function (conn) {                                                                       // 1760
    return _.all(conn._subscriptions, function (sub) {                                                                 // 1761
      return sub.ready;                                                                                                // 1762
    });                                                                                                                // 1763
  });                                                                                                                  // 1764
};                                                                                                                     // 1765
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"client_convenience.js":["./namespace.js",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/ddp-client/client_convenience.js                                                                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var DDP = void 0;                                                                                                      // 1
module.importSync("./namespace.js", {                                                                                  // 1
  DDP: function (v) {                                                                                                  // 1
    DDP = v;                                                                                                           // 1
  }                                                                                                                    // 1
}, 0);                                                                                                                 // 1
                                                                                                                       //
// Meteor.refresh can be called on the client (if you're in common code) but it                                        // 3
// only has an effect on the server.                                                                                   // 4
Meteor.refresh = function (notification) {};                                                                           // 5
                                                                                                                       //
if (Meteor.isClient) {                                                                                                 // 8
  // By default, try to connect back to the same endpoint as the page                                                  // 9
  // was served from.                                                                                                  // 10
  //                                                                                                                   // 11
  // XXX We should be doing this a different way. Right now we don't                                                   // 12
  // include ROOT_URL_PATH_PREFIX when computing ddpUrl. (We don't                                                     // 13
  // include it on the server when computing                                                                           // 14
  // DDP_DEFAULT_CONNECTION_URL, and we don't include it in our                                                        // 15
  // default, '/'.) We get by with this because DDP.connect then                                                       // 16
  // forces the URL passed to it to be interpreted relative to the                                                     // 17
  // app's deploy path, even if it is absolute. Instead, we should                                                     // 18
  // make DDP_DEFAULT_CONNECTION_URL, if set, include the path prefix;                                                 // 19
  // make the default ddpUrl be '' rather that '/'; and make                                                           // 20
  // _translateUrl in stream_client_common.js not force absolute paths                                                 // 21
  // to be treated like relative paths. See also                                                                       // 22
  // stream_client_common.js #RationalizingRelativeDDPURLs                                                             // 23
  var ddpUrl = '/';                                                                                                    // 24
                                                                                                                       //
  if (typeof __meteor_runtime_config__ !== "undefined") {                                                              // 25
    if (__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL) ddpUrl = __meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL;
  }                                                                                                                    // 28
                                                                                                                       //
  var retry = new Retry();                                                                                             // 30
                                                                                                                       //
  var onDDPVersionNegotiationFailure = function (description) {                                                        // 32
    Meteor._debug(description);                                                                                        // 33
                                                                                                                       //
    if (Package.reload) {                                                                                              // 34
      var migrationData = Package.reload.Reload._migrationData('livedata') || {};                                      // 35
      var failures = migrationData.DDPVersionNegotiationFailures || 0;                                                 // 36
      ++failures;                                                                                                      // 37
                                                                                                                       //
      Package.reload.Reload._onMigrate('livedata', function () {                                                       // 38
        return [true, {                                                                                                // 39
          DDPVersionNegotiationFailures: failures                                                                      // 39
        }];                                                                                                            // 39
      });                                                                                                              // 40
                                                                                                                       //
      retry.retryLater(failures, function () {                                                                         // 41
        Package.reload.Reload._reload();                                                                               // 42
      });                                                                                                              // 43
    }                                                                                                                  // 44
  };                                                                                                                   // 45
                                                                                                                       //
  Meteor.connection = DDP.connect(ddpUrl, {                                                                            // 47
    onDDPVersionNegotiationFailure: onDDPVersionNegotiationFailure                                                     // 49
  }); // Proxy the public methods of Meteor.connection so they can                                                     // 48
  // be called directly on Meteor.                                                                                     // 53
                                                                                                                       //
  _.each(['subscribe', 'methods', 'call', 'apply', 'status', 'reconnect', 'disconnect'], function (name) {             // 54
    Meteor[name] = _.bind(Meteor.connection[name], Meteor.connection);                                                 // 57
  });                                                                                                                  // 58
} else {                                                                                                               // 59
  // Never set up a default connection on the server. Don't even map                                                   // 60
  // subscribe/call/etc onto Meteor.                                                                                   // 61
  Meteor.connection = null;                                                                                            // 62
} // Meteor.connection used to be called                                                                               // 63
// Meteor.default_connection. Provide backcompat as a courtesy even                                                    // 66
// though it was never documented.                                                                                     // 67
// XXX COMPAT WITH 0.6.4                                                                                               // 68
                                                                                                                       //
                                                                                                                       //
Meteor.default_connection = Meteor.connection; // We should transition from Meteor.connect to DDP.connect.             // 69
// XXX COMPAT WITH 0.6.4                                                                                               // 72
                                                                                                                       //
Meteor.connect = DDP.connect;                                                                                          // 73
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"namespace.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/ddp-client/namespace.js                                                                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
module.export({                                                                                                        // 1
  DDP: function () {                                                                                                   // 1
    return DDP;                                                                                                        // 1
  },                                                                                                                   // 1
  LivedataTest: function () {                                                                                          // 1
    return LivedataTest;                                                                                               // 1
  }                                                                                                                    // 1
});                                                                                                                    // 1
var DDP = {};                                                                                                          // 5
var LivedataTest = {};                                                                                                 // 6
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"id_map.js":["babel-runtime/helpers/classCallCheck","babel-runtime/helpers/possibleConstructorReturn","babel-runtime/helpers/inherits",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/ddp-client/id_map.js                                                                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _classCallCheck2 = require("babel-runtime/helpers/classCallCheck");                                                //
                                                                                                                       //
var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);                                                       //
                                                                                                                       //
var _possibleConstructorReturn2 = require("babel-runtime/helpers/possibleConstructorReturn");                          //
                                                                                                                       //
var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);                                 //
                                                                                                                       //
var _inherits2 = require("babel-runtime/helpers/inherits");                                                            //
                                                                                                                       //
var _inherits3 = _interopRequireDefault(_inherits2);                                                                   //
                                                                                                                       //
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }                      //
                                                                                                                       //
module.export({                                                                                                        // 1
  MongoIDMap: function () {                                                                                            // 1
    return MongoIDMap;                                                                                                 // 1
  }                                                                                                                    // 1
});                                                                                                                    // 1
                                                                                                                       //
var MongoIDMap = function (_IdMap) {                                                                                   //
  (0, _inherits3.default)(MongoIDMap, _IdMap);                                                                         //
                                                                                                                       //
  function MongoIDMap() {                                                                                              // 2
    (0, _classCallCheck3.default)(this, MongoIDMap);                                                                   // 2
    return (0, _possibleConstructorReturn3.default)(this, _IdMap.call(this, MongoID.idStringify, MongoID.idParse));    // 2
  }                                                                                                                    // 7
                                                                                                                       //
  return MongoIDMap;                                                                                                   //
}(IdMap);                                                                                                              //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]}}}},{"extensions":[".js",".json"]});
require("./node_modules/meteor/ddp-client/sockjs-0.3.4.js");
require("./node_modules/meteor/ddp-client/stream_client_sockjs.js");
require("./node_modules/meteor/ddp-client/stream_client_common.js");
require("./node_modules/meteor/ddp-client/livedata_common.js");
require("./node_modules/meteor/ddp-client/random_stream.js");
require("./node_modules/meteor/ddp-client/livedata_connection.js");
require("./node_modules/meteor/ddp-client/client_convenience.js");
var exports = require("./node_modules/meteor/ddp-client/namespace.js");

/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package['ddp-client'] = exports, {
  DDP: DDP
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var DDP = Package['ddp-client'].DDP;



/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package.ddp = {}, {
  DDP: DDP
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {



/* Exports */
if (typeof Package === 'undefined') Package = {};
Package['ddp-server'] = {};

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var DDP = Package['ddp-client'].DDP;

/* Package-scope variables */
var LivedataTest;



/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package.livedata = {}, {
  DDP: DDP,
  LivedataTest: LivedataTest
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {



/* Exports */
if (typeof Package === 'undefined') Package = {};
Package['hot-code-push'] = {};

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var _ = Package.underscore._;

/* Package-scope variables */
var OrderedDict;

(function(){

///////////////////////////////////////////////////////////////////////////////////
//                                                                               //
// packages/ordered-dict/ordered_dict.js                                         //
//                                                                               //
///////////////////////////////////////////////////////////////////////////////////
                                                                                 //
// This file defines an ordered dictionary abstraction that is useful for        // 1
// maintaining a dataset backed by observeChanges.  It supports ordering items   // 2
// by specifying the item they now come before.                                  // 3
                                                                                 // 4
// The implementation is a dictionary that contains nodes of a doubly-linked     // 5
// list as its values.                                                           // 6
                                                                                 // 7
// constructs a new element struct                                               // 8
// next and prev are whole elements, not keys.                                   // 9
var element = function (key, value, next, prev) {                                // 10
  return {                                                                       // 11
    key: key,                                                                    // 12
    value: value,                                                                // 13
    next: next,                                                                  // 14
    prev: prev                                                                   // 15
  };                                                                             // 16
};                                                                               // 17
OrderedDict = function (/* ... */) {                                             // 18
  var self = this;                                                               // 19
  self._dict = {};                                                               // 20
  self._first = null;                                                            // 21
  self._last = null;                                                             // 22
  self._size = 0;                                                                // 23
  var args = _.toArray(arguments);                                               // 24
  self._stringify = function (x) { return x; };                                  // 25
  if (typeof args[0] === 'function')                                             // 26
    self._stringify = args.shift();                                              // 27
  _.each(args, function (kv) {                                                   // 28
    self.putBefore(kv[0], kv[1], null);                                          // 29
  });                                                                            // 30
};                                                                               // 31
                                                                                 // 32
_.extend(OrderedDict.prototype, {                                                // 33
  // the "prefix keys with a space" thing comes from here                        // 34
  // https://github.com/documentcloud/underscore/issues/376#issuecomment-2815649
  _k: function (key) { return " " + this._stringify(key); },                     // 36
                                                                                 // 37
  empty: function () {                                                           // 38
    var self = this;                                                             // 39
    return !self._first;                                                         // 40
  },                                                                             // 41
  size: function () {                                                            // 42
    var self = this;                                                             // 43
    return self._size;                                                           // 44
  },                                                                             // 45
  _linkEltIn: function (elt) {                                                   // 46
    var self = this;                                                             // 47
    if (!elt.next) {                                                             // 48
      elt.prev = self._last;                                                     // 49
      if (self._last)                                                            // 50
        self._last.next = elt;                                                   // 51
      self._last = elt;                                                          // 52
    } else {                                                                     // 53
      elt.prev = elt.next.prev;                                                  // 54
      elt.next.prev = elt;                                                       // 55
      if (elt.prev)                                                              // 56
        elt.prev.next = elt;                                                     // 57
    }                                                                            // 58
    if (self._first === null || self._first === elt.next)                        // 59
      self._first = elt;                                                         // 60
  },                                                                             // 61
  _linkEltOut: function (elt) {                                                  // 62
    var self = this;                                                             // 63
    if (elt.next)                                                                // 64
      elt.next.prev = elt.prev;                                                  // 65
    if (elt.prev)                                                                // 66
      elt.prev.next = elt.next;                                                  // 67
    if (elt === self._last)                                                      // 68
      self._last = elt.prev;                                                     // 69
    if (elt === self._first)                                                     // 70
      self._first = elt.next;                                                    // 71
  },                                                                             // 72
  putBefore: function (key, item, before) {                                      // 73
    var self = this;                                                             // 74
    if (self._dict[self._k(key)])                                                // 75
      throw new Error("Item " + key + " already present in OrderedDict");        // 76
    var elt = before ?                                                           // 77
          element(key, item, self._dict[self._k(before)]) :                      // 78
          element(key, item, null);                                              // 79
    if (elt.next === undefined)                                                  // 80
      throw new Error("could not find item to put this one before");             // 81
    self._linkEltIn(elt);                                                        // 82
    self._dict[self._k(key)] = elt;                                              // 83
    self._size++;                                                                // 84
  },                                                                             // 85
  append: function (key, item) {                                                 // 86
    var self = this;                                                             // 87
    self.putBefore(key, item, null);                                             // 88
  },                                                                             // 89
  remove: function (key) {                                                       // 90
    var self = this;                                                             // 91
    var elt = self._dict[self._k(key)];                                          // 92
    if (elt === undefined)                                                       // 93
      throw new Error("Item " + key + " not present in OrderedDict");            // 94
    self._linkEltOut(elt);                                                       // 95
    self._size--;                                                                // 96
    delete self._dict[self._k(key)];                                             // 97
    return elt.value;                                                            // 98
  },                                                                             // 99
  get: function (key) {                                                          // 100
    var self = this;                                                             // 101
    if (self.has(key))                                                           // 102
        return self._dict[self._k(key)].value;                                   // 103
    return undefined;                                                            // 104
  },                                                                             // 105
  has: function (key) {                                                          // 106
    var self = this;                                                             // 107
    return _.has(self._dict, self._k(key));                                      // 108
  },                                                                             // 109
  // Iterate through the items in this dictionary in order, calling              // 110
  // iter(value, key, index) on each one.                                        // 111
                                                                                 // 112
  // Stops whenever iter returns OrderedDict.BREAK, or after the last element.   // 113
  forEach: function (iter) {                                                     // 114
    var self = this;                                                             // 115
    var i = 0;                                                                   // 116
    var elt = self._first;                                                       // 117
    while (elt !== null) {                                                       // 118
      var b = iter(elt.value, elt.key, i);                                       // 119
      if (b === OrderedDict.BREAK)                                               // 120
        return;                                                                  // 121
      elt = elt.next;                                                            // 122
      i++;                                                                       // 123
    }                                                                            // 124
  },                                                                             // 125
  first: function () {                                                           // 126
    var self = this;                                                             // 127
    if (self.empty())                                                            // 128
      return undefined;                                                          // 129
    return self._first.key;                                                      // 130
  },                                                                             // 131
  firstValue: function () {                                                      // 132
    var self = this;                                                             // 133
    if (self.empty())                                                            // 134
      return undefined;                                                          // 135
    return self._first.value;                                                    // 136
  },                                                                             // 137
  last: function () {                                                            // 138
    var self = this;                                                             // 139
    if (self.empty())                                                            // 140
      return undefined;                                                          // 141
    return self._last.key;                                                       // 142
  },                                                                             // 143
  lastValue: function () {                                                       // 144
    var self = this;                                                             // 145
    if (self.empty())                                                            // 146
      return undefined;                                                          // 147
    return self._last.value;                                                     // 148
  },                                                                             // 149
  prev: function (key) {                                                         // 150
    var self = this;                                                             // 151
    if (self.has(key)) {                                                         // 152
      var elt = self._dict[self._k(key)];                                        // 153
      if (elt.prev)                                                              // 154
        return elt.prev.key;                                                     // 155
    }                                                                            // 156
    return null;                                                                 // 157
  },                                                                             // 158
  next: function (key) {                                                         // 159
    var self = this;                                                             // 160
    if (self.has(key)) {                                                         // 161
      var elt = self._dict[self._k(key)];                                        // 162
      if (elt.next)                                                              // 163
        return elt.next.key;                                                     // 164
    }                                                                            // 165
    return null;                                                                 // 166
  },                                                                             // 167
  moveBefore: function (key, before) {                                           // 168
    var self = this;                                                             // 169
    var elt = self._dict[self._k(key)];                                          // 170
    var eltBefore = before ? self._dict[self._k(before)] : null;                 // 171
    if (elt === undefined)                                                       // 172
      throw new Error("Item to move is not present");                            // 173
    if (eltBefore === undefined) {                                               // 174
      throw new Error("Could not find element to move this one before");         // 175
    }                                                                            // 176
    if (eltBefore === elt.next) // no moving necessary                           // 177
      return;                                                                    // 178
    // remove from its old place                                                 // 179
    self._linkEltOut(elt);                                                       // 180
    // patch into its new place                                                  // 181
    elt.next = eltBefore;                                                        // 182
    self._linkEltIn(elt);                                                        // 183
  },                                                                             // 184
  // Linear, sadly.                                                              // 185
  indexOf: function (key) {                                                      // 186
    var self = this;                                                             // 187
    var ret = null;                                                              // 188
    self.forEach(function (v, k, i) {                                            // 189
      if (self._k(k) === self._k(key)) {                                         // 190
        ret = i;                                                                 // 191
        return OrderedDict.BREAK;                                                // 192
      }                                                                          // 193
      return undefined;                                                          // 194
    });                                                                          // 195
    return ret;                                                                  // 196
  },                                                                             // 197
  _checkRep: function () {                                                       // 198
    var self = this;                                                             // 199
    _.each(self._dict, function (k, v) {                                         // 200
      if (v.next === v)                                                          // 201
        throw new Error("Next is a loop");                                       // 202
      if (v.prev === v)                                                          // 203
        throw new Error("Prev is a loop");                                       // 204
    });                                                                          // 205
  }                                                                              // 206
                                                                                 // 207
});                                                                              // 208
OrderedDict.BREAK = {"break": true};                                             // 209
                                                                                 // 210
///////////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package['ordered-dict'] = {}, {
  OrderedDict: OrderedDict
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var meteorInstall = Package.modules.meteorInstall;
var Buffer = Package.modules.Buffer;
var process = Package.modules.process;

/* Package-scope variables */
var GeoJSON;

var require = meteorInstall({"node_modules":{"meteor":{"geojson-utils":{"main.js":["./geojson-utils.js",function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                         //
// packages/geojson-utils/main.js                                                                          //
//                                                                                                         //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                           //
exports.GeoJSON = require("./geojson-utils.js");                                                           // 1
                                                                                                           // 2
/////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"geojson-utils.js":function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                         //
// packages/geojson-utils/geojson-utils.js                                                                 //
//                                                                                                         //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                           //
(function () {                                                                                             // 1
  var gju = {};                                                                                            // 2
                                                                                                           // 3
  // Export the geojson object for **CommonJS**                                                            // 4
  if (typeof module !== 'undefined' && module.exports) {                                                   // 5
    module.exports = gju;                                                                                  // 6
  }                                                                                                        // 7
                                                                                                           // 8
  // adapted from http://www.kevlindev.com/gui/math/intersection/Intersection.js                           // 9
  gju.lineStringsIntersect = function (l1, l2) {                                                           // 10
    var intersects = [];                                                                                   // 11
    for (var i = 0; i <= l1.coordinates.length - 2; ++i) {                                                 // 12
      for (var j = 0; j <= l2.coordinates.length - 2; ++j) {                                               // 13
        var a1 = {                                                                                         // 14
          x: l1.coordinates[i][1],                                                                         // 15
          y: l1.coordinates[i][0]                                                                          // 16
        },                                                                                                 // 17
          a2 = {                                                                                           // 18
            x: l1.coordinates[i + 1][1],                                                                   // 19
            y: l1.coordinates[i + 1][0]                                                                    // 20
          },                                                                                               // 21
          b1 = {                                                                                           // 22
            x: l2.coordinates[j][1],                                                                       // 23
            y: l2.coordinates[j][0]                                                                        // 24
          },                                                                                               // 25
          b2 = {                                                                                           // 26
            x: l2.coordinates[j + 1][1],                                                                   // 27
            y: l2.coordinates[j + 1][0]                                                                    // 28
          },                                                                                               // 29
          ua_t = (b2.x - b1.x) * (a1.y - b1.y) - (b2.y - b1.y) * (a1.x - b1.x),                            // 30
          ub_t = (a2.x - a1.x) * (a1.y - b1.y) - (a2.y - a1.y) * (a1.x - b1.x),                            // 31
          u_b = (b2.y - b1.y) * (a2.x - a1.x) - (b2.x - b1.x) * (a2.y - a1.y);                             // 32
        if (u_b != 0) {                                                                                    // 33
          var ua = ua_t / u_b,                                                                             // 34
            ub = ub_t / u_b;                                                                               // 35
          if (0 <= ua && ua <= 1 && 0 <= ub && ub <= 1) {                                                  // 36
            intersects.push({                                                                              // 37
              'type': 'Point',                                                                             // 38
              'coordinates': [a1.x + ua * (a2.x - a1.x), a1.y + ua * (a2.y - a1.y)]                        // 39
            });                                                                                            // 40
          }                                                                                                // 41
        }                                                                                                  // 42
      }                                                                                                    // 43
    }                                                                                                      // 44
    if (intersects.length == 0) intersects = false;                                                        // 45
    return intersects;                                                                                     // 46
  }                                                                                                        // 47
                                                                                                           // 48
  // Bounding Box                                                                                          // 49
                                                                                                           // 50
  function boundingBoxAroundPolyCoords (coords) {                                                          // 51
    var xAll = [], yAll = []                                                                               // 52
                                                                                                           // 53
    for (var i = 0; i < coords[0].length; i++) {                                                           // 54
      xAll.push(coords[0][i][1])                                                                           // 55
      yAll.push(coords[0][i][0])                                                                           // 56
    }                                                                                                      // 57
                                                                                                           // 58
    xAll = xAll.sort(function (a,b) { return a - b })                                                      // 59
    yAll = yAll.sort(function (a,b) { return a - b })                                                      // 60
                                                                                                           // 61
    return [ [xAll[0], yAll[0]], [xAll[xAll.length - 1], yAll[yAll.length - 1]] ]                          // 62
  }                                                                                                        // 63
                                                                                                           // 64
  gju.pointInBoundingBox = function (point, bounds) {                                                      // 65
    return !(point.coordinates[1] < bounds[0][0] || point.coordinates[1] > bounds[1][0] || point.coordinates[0] < bounds[0][1] || point.coordinates[0] > bounds[1][1]) 
  }                                                                                                        // 67
                                                                                                           // 68
  // Point in Polygon                                                                                      // 69
  // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html#Listing the Vertices           // 70
                                                                                                           // 71
  function pnpoly (x,y,coords) {                                                                           // 72
    var vert = [ [0,0] ]                                                                                   // 73
                                                                                                           // 74
    for (var i = 0; i < coords.length; i++) {                                                              // 75
      for (var j = 0; j < coords[i].length; j++) {                                                         // 76
        vert.push(coords[i][j])                                                                            // 77
      }                                                                                                    // 78
      vert.push([0,0])                                                                                     // 79
    }                                                                                                      // 80
                                                                                                           // 81
    var inside = false                                                                                     // 82
    for (var i = 0, j = vert.length - 1; i < vert.length; j = i++) {                                       // 83
      if (((vert[i][0] > y) != (vert[j][0] > y)) && (x < (vert[j][1] - vert[i][1]) * (y - vert[i][0]) / (vert[j][0] - vert[i][0]) + vert[i][1])) inside = !inside
    }                                                                                                      // 85
                                                                                                           // 86
    return inside                                                                                          // 87
  }                                                                                                        // 88
                                                                                                           // 89
  gju.pointInPolygon = function (p, poly) {                                                                // 90
    var coords = (poly.type == "Polygon") ? [ poly.coordinates ] : poly.coordinates                        // 91
                                                                                                           // 92
    var insideBox = false                                                                                  // 93
    for (var i = 0; i < coords.length; i++) {                                                              // 94
      if (gju.pointInBoundingBox(p, boundingBoxAroundPolyCoords(coords[i]))) insideBox = true              // 95
    }                                                                                                      // 96
    if (!insideBox) return false                                                                           // 97
                                                                                                           // 98
    var insidePoly = false                                                                                 // 99
    for (var i = 0; i < coords.length; i++) {                                                              // 100
      if (pnpoly(p.coordinates[1], p.coordinates[0], coords[i])) insidePoly = true                         // 101
    }                                                                                                      // 102
                                                                                                           // 103
    return insidePoly                                                                                      // 104
  }                                                                                                        // 105
                                                                                                           // 106
  gju.numberToRadius = function (number) {                                                                 // 107
    return number * Math.PI / 180;                                                                         // 108
  }                                                                                                        // 109
                                                                                                           // 110
  gju.numberToDegree = function (number) {                                                                 // 111
    return number * 180 / Math.PI;                                                                         // 112
  }                                                                                                        // 113
                                                                                                           // 114
  // written with help from @tautologe                                                                     // 115
  gju.drawCircle = function (radiusInMeters, centerPoint, steps) {                                         // 116
    var center = [centerPoint.coordinates[1], centerPoint.coordinates[0]],                                 // 117
      dist = (radiusInMeters / 1000) / 6371,                                                               // 118
      // convert meters to radiant                                                                         // 119
      radCenter = [gju.numberToRadius(center[0]), gju.numberToRadius(center[1])],                          // 120
      steps = steps || 15,                                                                                 // 121
      // 15 sided circle                                                                                   // 122
      poly = [[center[0], center[1]]];                                                                     // 123
    for (var i = 0; i < steps; i++) {                                                                      // 124
      var brng = 2 * Math.PI * i / steps;                                                                  // 125
      var lat = Math.asin(Math.sin(radCenter[0]) * Math.cos(dist)                                          // 126
              + Math.cos(radCenter[0]) * Math.sin(dist) * Math.cos(brng));                                 // 127
      var lng = radCenter[1] + Math.atan2(Math.sin(brng) * Math.sin(dist) * Math.cos(radCenter[0]),        // 128
                                          Math.cos(dist) - Math.sin(radCenter[0]) * Math.sin(lat));        // 129
      poly[i] = [];                                                                                        // 130
      poly[i][1] = gju.numberToDegree(lat);                                                                // 131
      poly[i][0] = gju.numberToDegree(lng);                                                                // 132
    }                                                                                                      // 133
    return {                                                                                               // 134
      "type": "Polygon",                                                                                   // 135
      "coordinates": [poly]                                                                                // 136
    };                                                                                                     // 137
  }                                                                                                        // 138
                                                                                                           // 139
  // assumes rectangle starts at lower left point                                                          // 140
  gju.rectangleCentroid = function (rectangle) {                                                           // 141
    var bbox = rectangle.coordinates[0];                                                                   // 142
    var xmin = bbox[0][0],                                                                                 // 143
      ymin = bbox[0][1],                                                                                   // 144
      xmax = bbox[2][0],                                                                                   // 145
      ymax = bbox[2][1];                                                                                   // 146
    var xwidth = xmax - xmin;                                                                              // 147
    var ywidth = ymax - ymin;                                                                              // 148
    return {                                                                                               // 149
      'type': 'Point',                                                                                     // 150
      'coordinates': [xmin + xwidth / 2, ymin + ywidth / 2]                                                // 151
    };                                                                                                     // 152
  }                                                                                                        // 153
                                                                                                           // 154
  // from http://www.movable-type.co.uk/scripts/latlong.html                                               // 155
  gju.pointDistance = function (pt1, pt2) {                                                                // 156
    var lon1 = pt1.coordinates[0],                                                                         // 157
      lat1 = pt1.coordinates[1],                                                                           // 158
      lon2 = pt2.coordinates[0],                                                                           // 159
      lat2 = pt2.coordinates[1],                                                                           // 160
      dLat = gju.numberToRadius(lat2 - lat1),                                                              // 161
      dLon = gju.numberToRadius(lon2 - lon1),                                                              // 162
      a = Math.pow(Math.sin(dLat / 2), 2) + Math.cos(gju.numberToRadius(lat1))                             // 163
        * Math.cos(gju.numberToRadius(lat2)) * Math.pow(Math.sin(dLon / 2), 2),                            // 164
      c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));                                                  // 165
    // Earth radius is 6371 km                                                                             // 166
    return (6371 * c) * 1000; // returns meters                                                            // 167
  },                                                                                                       // 168
                                                                                                           // 169
  // checks if geometry lies entirely within a circle                                                      // 170
  // works with Point, LineString, Polygon                                                                 // 171
  gju.geometryWithinRadius = function (geometry, center, radius) {                                         // 172
    if (geometry.type == 'Point') {                                                                        // 173
      return gju.pointDistance(geometry, center) <= radius;                                                // 174
    } else if (geometry.type == 'LineString' || geometry.type == 'Polygon') {                              // 175
      var point = {};                                                                                      // 176
      var coordinates;                                                                                     // 177
      if (geometry.type == 'Polygon') {                                                                    // 178
        // it's enough to check the exterior ring of the Polygon                                           // 179
        coordinates = geometry.coordinates[0];                                                             // 180
      } else {                                                                                             // 181
        coordinates = geometry.coordinates;                                                                // 182
      }                                                                                                    // 183
      for (var i in coordinates) {                                                                         // 184
        point.coordinates = coordinates[i];                                                                // 185
        if (gju.pointDistance(point, center) > radius) {                                                   // 186
          return false;                                                                                    // 187
        }                                                                                                  // 188
      }                                                                                                    // 189
    }                                                                                                      // 190
    return true;                                                                                           // 191
  }                                                                                                        // 192
                                                                                                           // 193
  // adapted from http://paulbourke.net/geometry/polyarea/javascript.txt                                   // 194
  gju.area = function (polygon) {                                                                          // 195
    var area = 0;                                                                                          // 196
    // TODO: polygon holes at coordinates[1]                                                               // 197
    var points = polygon.coordinates[0];                                                                   // 198
    var j = points.length - 1;                                                                             // 199
    var p1, p2;                                                                                            // 200
                                                                                                           // 201
    for (var i = 0; i < points.length; j = i++) {                                                          // 202
      var p1 = {                                                                                           // 203
        x: points[i][1],                                                                                   // 204
        y: points[i][0]                                                                                    // 205
      };                                                                                                   // 206
      var p2 = {                                                                                           // 207
        x: points[j][1],                                                                                   // 208
        y: points[j][0]                                                                                    // 209
      };                                                                                                   // 210
      area += p1.x * p2.y;                                                                                 // 211
      area -= p1.y * p2.x;                                                                                 // 212
    }                                                                                                      // 213
                                                                                                           // 214
    area /= 2;                                                                                             // 215
    return area;                                                                                           // 216
  },                                                                                                       // 217
                                                                                                           // 218
  // adapted from http://paulbourke.net/geometry/polyarea/javascript.txt                                   // 219
  gju.centroid = function (polygon) {                                                                      // 220
    var f, x = 0,                                                                                          // 221
      y = 0;                                                                                               // 222
    // TODO: polygon holes at coordinates[1]                                                               // 223
    var points = polygon.coordinates[0];                                                                   // 224
    var j = points.length - 1;                                                                             // 225
    var p1, p2;                                                                                            // 226
                                                                                                           // 227
    for (var i = 0; i < points.length; j = i++) {                                                          // 228
      var p1 = {                                                                                           // 229
        x: points[i][1],                                                                                   // 230
        y: points[i][0]                                                                                    // 231
      };                                                                                                   // 232
      var p2 = {                                                                                           // 233
        x: points[j][1],                                                                                   // 234
        y: points[j][0]                                                                                    // 235
      };                                                                                                   // 236
      f = p1.x * p2.y - p2.x * p1.y;                                                                       // 237
      x += (p1.x + p2.x) * f;                                                                              // 238
      y += (p1.y + p2.y) * f;                                                                              // 239
    }                                                                                                      // 240
                                                                                                           // 241
    f = gju.area(polygon) * 6;                                                                             // 242
    return {                                                                                               // 243
      'type': 'Point',                                                                                     // 244
      'coordinates': [y / f, x / f]                                                                        // 245
    };                                                                                                     // 246
  },                                                                                                       // 247
                                                                                                           // 248
  gju.simplify = function (source, kink) { /* source[] array of geojson points */                          // 249
    /* kink	in metres, kinks above this depth kept  */                                                     // 250
    /* kink depth is the height of the triangle abc where a-b and b-c are two consecutive line segments */
    kink = kink || 20;                                                                                     // 252
    source = source.map(function (o) {                                                                     // 253
      return {                                                                                             // 254
        lng: o.coordinates[0],                                                                             // 255
        lat: o.coordinates[1]                                                                              // 256
      }                                                                                                    // 257
    });                                                                                                    // 258
                                                                                                           // 259
    var n_source, n_stack, n_dest, start, end, i, sig;                                                     // 260
    var dev_sqr, max_dev_sqr, band_sqr;                                                                    // 261
    var x12, y12, d12, x13, y13, d13, x23, y23, d23;                                                       // 262
    var F = (Math.PI / 180.0) * 0.5;                                                                       // 263
    var index = new Array(); /* aray of indexes of source points to include in the reduced line */         // 264
    var sig_start = new Array(); /* indices of start & end of working section */                           // 265
    var sig_end = new Array();                                                                             // 266
                                                                                                           // 267
    /* check for simple cases */                                                                           // 268
                                                                                                           // 269
    if (source.length < 3) return (source); /* one or two points */                                        // 270
                                                                                                           // 271
    /* more complex case. initialize stack */                                                              // 272
                                                                                                           // 273
    n_source = source.length;                                                                              // 274
    band_sqr = kink * 360.0 / (2.0 * Math.PI * 6378137.0); /* Now in degrees */                            // 275
    band_sqr *= band_sqr;                                                                                  // 276
    n_dest = 0;                                                                                            // 277
    sig_start[0] = 0;                                                                                      // 278
    sig_end[0] = n_source - 1;                                                                             // 279
    n_stack = 1;                                                                                           // 280
                                                                                                           // 281
    /* while the stack is not empty  ... */                                                                // 282
    while (n_stack > 0) {                                                                                  // 283
                                                                                                           // 284
      /* ... pop the top-most entries off the stacks */                                                    // 285
                                                                                                           // 286
      start = sig_start[n_stack - 1];                                                                      // 287
      end = sig_end[n_stack - 1];                                                                          // 288
      n_stack--;                                                                                           // 289
                                                                                                           // 290
      if ((end - start) > 1) { /* any intermediate points ? */                                             // 291
                                                                                                           // 292
        /* ... yes, so find most deviant intermediate point to                                             // 293
        either side of line joining start & end points */                                                  // 294
                                                                                                           // 295
        x12 = (source[end].lng() - source[start].lng());                                                   // 296
        y12 = (source[end].lat() - source[start].lat());                                                   // 297
        if (Math.abs(x12) > 180.0) x12 = 360.0 - Math.abs(x12);                                            // 298
        x12 *= Math.cos(F * (source[end].lat() + source[start].lat())); /* use avg lat to reduce lng */    // 299
        d12 = (x12 * x12) + (y12 * y12);                                                                   // 300
                                                                                                           // 301
        for (i = start + 1, sig = start, max_dev_sqr = -1.0; i < end; i++) {                               // 302
                                                                                                           // 303
          x13 = source[i].lng() - source[start].lng();                                                     // 304
          y13 = source[i].lat() - source[start].lat();                                                     // 305
          if (Math.abs(x13) > 180.0) x13 = 360.0 - Math.abs(x13);                                          // 306
          x13 *= Math.cos(F * (source[i].lat() + source[start].lat()));                                    // 307
          d13 = (x13 * x13) + (y13 * y13);                                                                 // 308
                                                                                                           // 309
          x23 = source[i].lng() - source[end].lng();                                                       // 310
          y23 = source[i].lat() - source[end].lat();                                                       // 311
          if (Math.abs(x23) > 180.0) x23 = 360.0 - Math.abs(x23);                                          // 312
          x23 *= Math.cos(F * (source[i].lat() + source[end].lat()));                                      // 313
          d23 = (x23 * x23) + (y23 * y23);                                                                 // 314
                                                                                                           // 315
          if (d13 >= (d12 + d23)) dev_sqr = d23;                                                           // 316
          else if (d23 >= (d12 + d13)) dev_sqr = d13;                                                      // 317
          else dev_sqr = (x13 * y12 - y13 * x12) * (x13 * y12 - y13 * x12) / d12; // solve triangle        // 318
          if (dev_sqr > max_dev_sqr) {                                                                     // 319
            sig = i;                                                                                       // 320
            max_dev_sqr = dev_sqr;                                                                         // 321
          }                                                                                                // 322
        }                                                                                                  // 323
                                                                                                           // 324
        if (max_dev_sqr < band_sqr) { /* is there a sig. intermediate point ? */                           // 325
          /* ... no, so transfer current start point */                                                    // 326
          index[n_dest] = start;                                                                           // 327
          n_dest++;                                                                                        // 328
        } else { /* ... yes, so push two sub-sections on stack for further processing */                   // 329
          n_stack++;                                                                                       // 330
          sig_start[n_stack - 1] = sig;                                                                    // 331
          sig_end[n_stack - 1] = end;                                                                      // 332
          n_stack++;                                                                                       // 333
          sig_start[n_stack - 1] = start;                                                                  // 334
          sig_end[n_stack - 1] = sig;                                                                      // 335
        }                                                                                                  // 336
      } else { /* ... no intermediate points, so transfer current start point */                           // 337
        index[n_dest] = start;                                                                             // 338
        n_dest++;                                                                                          // 339
      }                                                                                                    // 340
    }                                                                                                      // 341
                                                                                                           // 342
    /* transfer last point */                                                                              // 343
    index[n_dest] = n_source - 1;                                                                          // 344
    n_dest++;                                                                                              // 345
                                                                                                           // 346
    /* make return array */                                                                                // 347
    var r = new Array();                                                                                   // 348
    for (var i = 0; i < n_dest; i++)                                                                       // 349
      r.push(source[index[i]]);                                                                            // 350
                                                                                                           // 351
    return r.map(function (o) {                                                                            // 352
      return {                                                                                             // 353
        type: "Point",                                                                                     // 354
        coordinates: [o.lng, o.lat]                                                                        // 355
      }                                                                                                    // 356
    });                                                                                                    // 357
  }                                                                                                        // 358
                                                                                                           // 359
  // http://www.movable-type.co.uk/scripts/latlong.html#destPoint                                          // 360
  gju.destinationPoint = function (pt, brng, dist) {                                                       // 361
    dist = dist/6371;  // convert dist to angular distance in radians                                      // 362
    brng = gju.numberToRadius(brng);                                                                       // 363
                                                                                                           // 364
    var lat1 = gju.numberToRadius(pt.coordinates[0]);                                                      // 365
    var lon1 = gju.numberToRadius(pt.coordinates[1]);                                                      // 366
                                                                                                           // 367
    var lat2 = Math.asin( Math.sin(lat1)*Math.cos(dist) +                                                  // 368
                          Math.cos(lat1)*Math.sin(dist)*Math.cos(brng) );                                  // 369
    var lon2 = lon1 + Math.atan2(Math.sin(brng)*Math.sin(dist)*Math.cos(lat1),                             // 370
                                 Math.cos(dist)-Math.sin(lat1)*Math.sin(lat2));                            // 371
    lon2 = (lon2+3*Math.PI) % (2*Math.PI) - Math.PI;  // normalise to -180..+180º                          // 372
                                                                                                           // 373
    return {                                                                                               // 374
      'type': 'Point',                                                                                     // 375
      'coordinates': [gju.numberToDegree(lat2), gju.numberToDegree(lon2)]                                  // 376
    };                                                                                                     // 377
  };                                                                                                       // 378
                                                                                                           // 379
})();                                                                                                      // 380
                                                                                                           // 381
/////////////////////////////////////////////////////////////////////////////////////////////////////////////

}}}}},{"extensions":[".js",".json"]});
var exports = require("./node_modules/meteor/geojson-utils/main.js");

/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package['geojson-utils'] = exports, {
  GeoJSON: GeoJSON
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var _ = Package.underscore._;
var EJSON = Package.ejson.EJSON;
var IdMap = Package['id-map'].IdMap;
var OrderedDict = Package['ordered-dict'].OrderedDict;
var Tracker = Package.tracker.Tracker;
var Deps = Package.tracker.Deps;
var MongoID = Package['mongo-id'].MongoID;
var Random = Package.random.Random;
var DiffSequence = Package['diff-sequence'].DiffSequence;
var GeoJSON = Package['geojson-utils'].GeoJSON;
var meteorInstall = Package.modules.meteorInstall;
var Buffer = Package.modules.Buffer;
var process = Package.modules.process;
var Symbol = Package['ecmascript-runtime'].Symbol;
var Map = Package['ecmascript-runtime'].Map;
var Set = Package['ecmascript-runtime'].Set;
var meteorBabelHelpers = Package['babel-runtime'].meteorBabelHelpers;
var Promise = Package.promise.Promise;

/* Package-scope variables */
var LocalCollection, Minimongo, MinimongoTest, MinimongoError, isArray, isPlainObject, isIndexable, isOperatorObject, isNumericKey, regexpElementMatcher, equalityElementMatcher, ELEMENT_OPERATORS, makeLookupFunction, expandArraysInBranches, projectionDetails, pathsToTree;

var require = meteorInstall({"node_modules":{"meteor":{"minimongo":{"minimongo.js":["./validation.js",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/minimongo/minimongo.js                                                                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var assertHasValidFieldNames = void 0;                                                                                 // 1
module.importSync("./validation.js", {                                                                                 // 1
  assertHasValidFieldNames: function (v) {                                                                             // 1
    assertHasValidFieldNames = v;                                                                                      // 1
  }                                                                                                                    // 1
}, 0);                                                                                                                 // 1
                                                                                                                       //
// XXX type checking on selectors (graceful error if malformed)                                                        // 3
// LocalCollection: a set of documents that supports queries and modifiers.                                            // 5
// Cursor: a specification for a particular subset of documents, w/                                                    // 7
// a defined order, limit, and offset.  creating a Cursor with LocalCollection.find(),                                 // 8
// ObserveHandle: the return value of a live query.                                                                    // 10
LocalCollection = function (name) {                                                                                    // 12
  var self = this;                                                                                                     // 13
  self.name = name; // _id -> document (also containing id)                                                            // 14
                                                                                                                       //
  self._docs = new LocalCollection._IdMap();                                                                           // 16
  self._observeQueue = new Meteor._SynchronousQueue();                                                                 // 18
  self.next_qid = 1; // live query id generator                                                                        // 20
  // qid -> live query object. keys:                                                                                   // 22
  //  ordered: bool. ordered queries have addedBefore/movedBefore callbacks.                                           // 23
  //  results: array (ordered) or object (unordered) of current results                                                // 24
  //    (aliased with self._docs!)                                                                                     // 25
  //  resultsSnapshot: snapshot of results. null if not paused.                                                        // 26
  //  cursor: Cursor object for the query.                                                                             // 27
  //  selector, sorter, (callbacks): functions                                                                         // 28
                                                                                                                       //
  self.queries = {}; // null if not saving originals; an IdMap from id to original document value if                   // 29
  // saving originals. See comments before saveOriginals().                                                            // 32
                                                                                                                       //
  self._savedOriginals = null; // True when observers are paused and we should not send callbacks.                     // 33
                                                                                                                       //
  self.paused = false;                                                                                                 // 36
};                                                                                                                     // 37
                                                                                                                       //
Minimongo = {}; // Object exported only for unit testing.                                                              // 39
// Use it to export private functions to test in Tinytest.                                                             // 42
                                                                                                                       //
MinimongoTest = {};                                                                                                    // 43
                                                                                                                       //
MinimongoError = function (message) {                                                                                  // 45
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};                                // 45
                                                                                                                       //
  if (typeof message === "string" && options.field) {                                                                  // 46
    message += " for field '" + options.field + "'";                                                                   // 47
  }                                                                                                                    // 48
                                                                                                                       //
  var e = new Error(message);                                                                                          // 50
  e.name = "MinimongoError";                                                                                           // 51
  return e;                                                                                                            // 52
}; // options may include sort, skip, limit, reactive                                                                  // 53
// sort may be any of these forms:                                                                                     // 57
//     {a: 1, b: -1}                                                                                                   // 58
//     [["a", "asc"], ["b", "desc"]]                                                                                   // 59
//     ["a", ["b", "desc"]]                                                                                            // 60
//   (in the first form you're beholden to key enumeration order in                                                    // 61
//   your javascript VM)                                                                                               // 62
//                                                                                                                     // 63
// reactive: if given, and false, don't register with Tracker (default                                                 // 64
// is true)                                                                                                            // 65
//                                                                                                                     // 66
// XXX possibly should support retrieving a subset of fields? and                                                      // 67
// have it be a hint (ignored on the client, when not copying the                                                      // 68
// doc?)                                                                                                               // 69
//                                                                                                                     // 70
// XXX sort does not yet support subkeys ('a.b') .. fix that!                                                          // 71
// XXX add one more sort form: "key"                                                                                   // 72
// XXX tests                                                                                                           // 73
                                                                                                                       //
                                                                                                                       //
LocalCollection.prototype.find = function (selector, options) {                                                        // 74
  // default syntax for everything is to omit the selector argument.                                                   // 75
  // but if selector is explicitly passed in as false or undefined, we                                                 // 76
  // want a selector that matches nothing.                                                                             // 77
  if (arguments.length === 0) selector = {};                                                                           // 78
  return new LocalCollection.Cursor(this, selector, options);                                                          // 81
}; // don't call this ctor directly.  use LocalCollection.find().                                                      // 82
                                                                                                                       //
                                                                                                                       //
LocalCollection.Cursor = function (collection, selector, options) {                                                    // 86
  var self = this;                                                                                                     // 87
  if (!options) options = {};                                                                                          // 88
  self.collection = collection;                                                                                        // 90
  self.sorter = null;                                                                                                  // 91
  self.matcher = new Minimongo.Matcher(selector);                                                                      // 92
                                                                                                                       //
  if (LocalCollection._selectorIsId(selector)) {                                                                       // 94
    // stash for fast path                                                                                             // 95
    self._selectorId = selector;                                                                                       // 96
  } else if (LocalCollection._selectorIsIdPerhapsAsObject(selector)) {                                                 // 97
    // also do the fast path for { _id: idString }                                                                     // 98
    self._selectorId = selector._id;                                                                                   // 99
  } else {                                                                                                             // 100
    self._selectorId = undefined;                                                                                      // 101
                                                                                                                       //
    if (self.matcher.hasGeoQuery() || options.sort) {                                                                  // 102
      self.sorter = new Minimongo.Sorter(options.sort || [], {                                                         // 103
        matcher: self.matcher                                                                                          // 104
      });                                                                                                              // 104
    }                                                                                                                  // 105
  }                                                                                                                    // 106
                                                                                                                       //
  self.skip = options.skip;                                                                                            // 108
  self.limit = options.limit;                                                                                          // 109
  self.fields = options.fields;                                                                                        // 110
  self._projectionFn = LocalCollection._compileProjection(self.fields || {});                                          // 112
  self._transform = LocalCollection.wrapTransform(options.transform); // by default, queries register w/ Tracker when it is available.
                                                                                                                       //
  if (typeof Tracker !== "undefined") self.reactive = options.reactive === undefined ? true : options.reactive;        // 117
}; // Since we don't actually have a "nextObject" interface, there's really no                                         // 119
// reason to have a "rewind" interface.  All it did was make multiple calls                                            // 122
// to fetch/map/forEach return nothing the second time.                                                                // 123
// XXX COMPAT WITH 0.8.1                                                                                               // 124
                                                                                                                       //
                                                                                                                       //
LocalCollection.Cursor.prototype.rewind = function () {};                                                              // 125
                                                                                                                       //
LocalCollection.prototype.findOne = function (selector, options) {                                                     // 128
  if (arguments.length === 0) selector = {}; // NOTE: by setting limit 1 here, we end up using very inefficient        // 129
  // code that recomputes the whole query on each update. The upside is                                                // 133
  // that when you reactively depend on a findOne you only get                                                         // 134
  // invalidated when the found object changes, not any object in the                                                  // 135
  // collection. Most findOne will be by id, which has a fast path, so                                                 // 136
  // this might not be a big deal. In most cases, invalidation causes                                                  // 137
  // the called to re-query anyway, so this should be a net performance                                                // 138
  // improvement.                                                                                                      // 139
                                                                                                                       //
  options = options || {};                                                                                             // 140
  options.limit = 1;                                                                                                   // 141
  return this.find(selector, options).fetch()[0];                                                                      // 143
}; /**                                                                                                                 // 144
    * @callback IterationCallback                                                                                      //
    * @param {Object} doc                                                                                              //
    * @param {Number} index                                                                                            //
    */ /**                                                                                                             //
        * @summary Call `callback` once for each matching document, sequentially and synchronously.                    //
        * @locus Anywhere                                                                                              //
        * @method  forEach                                                                                             //
        * @instance                                                                                                    //
        * @memberOf Mongo.Cursor                                                                                       //
        * @param {IterationCallback} callback Function to call. It will be called with three arguments: the document, a 0-based index, and <em>cursor</em> itself.
        * @param {Any} [thisArg] An object which will be the value of `this` inside `callback`.                        //
        */                                                                                                             //
                                                                                                                       //
LocalCollection.Cursor.prototype.forEach = function (callback, thisArg) {                                              // 160
  var self = this;                                                                                                     // 161
                                                                                                                       //
  var objects = self._getRawObjects({                                                                                  // 163
    ordered: true                                                                                                      // 163
  });                                                                                                                  // 163
                                                                                                                       //
  if (self.reactive) {                                                                                                 // 165
    self._depend({                                                                                                     // 166
      addedBefore: true,                                                                                               // 167
      removed: true,                                                                                                   // 168
      changed: true,                                                                                                   // 169
      movedBefore: true                                                                                                // 170
    });                                                                                                                // 166
  }                                                                                                                    // 171
                                                                                                                       //
  _.each(objects, function (elt, i) {                                                                                  // 173
    // This doubles as a clone operation.                                                                              // 174
    elt = self._projectionFn(elt);                                                                                     // 175
    if (self._transform) elt = self._transform(elt);                                                                   // 177
    callback.call(thisArg, elt, i, self);                                                                              // 179
  });                                                                                                                  // 180
};                                                                                                                     // 181
                                                                                                                       //
LocalCollection.Cursor.prototype.getTransform = function () {                                                          // 183
  return this._transform;                                                                                              // 184
}; /**                                                                                                                 // 185
    * @summary Map callback over all matching documents.  Returns an Array.                                            //
    * @locus Anywhere                                                                                                  //
    * @method map                                                                                                      //
    * @instance                                                                                                        //
    * @memberOf Mongo.Cursor                                                                                           //
    * @param {IterationCallback} callback Function to call. It will be called with three arguments: the document, a 0-based index, and <em>cursor</em> itself.
    * @param {Any} [thisArg] An object which will be the value of `this` inside `callback`.                            //
    */                                                                                                                 //
                                                                                                                       //
LocalCollection.Cursor.prototype.map = function (callback, thisArg) {                                                  // 196
  var self = this;                                                                                                     // 197
  var res = [];                                                                                                        // 198
  self.forEach(function (doc, index) {                                                                                 // 199
    res.push(callback.call(thisArg, doc, index, self));                                                                // 200
  });                                                                                                                  // 201
  return res;                                                                                                          // 202
}; /**                                                                                                                 // 203
    * @summary Return all matching documents as an Array.                                                              //
    * @memberOf Mongo.Cursor                                                                                           //
    * @method  fetch                                                                                                   //
    * @instance                                                                                                        //
    * @locus Anywhere                                                                                                  //
    * @returns {Object[]}                                                                                              //
    */                                                                                                                 //
                                                                                                                       //
LocalCollection.Cursor.prototype.fetch = function () {                                                                 // 213
  var self = this;                                                                                                     // 214
  var res = [];                                                                                                        // 215
  self.forEach(function (doc) {                                                                                        // 216
    res.push(doc);                                                                                                     // 217
  });                                                                                                                  // 218
  return res;                                                                                                          // 219
}; /**                                                                                                                 // 220
    * @summary Returns the number of documents that match a query.                                                     //
    * @memberOf Mongo.Cursor                                                                                           //
    * @method  count                                                                                                   //
    * @instance                                                                                                        //
    * @locus Anywhere                                                                                                  //
    * @returns {Number}                                                                                                //
    */                                                                                                                 //
                                                                                                                       //
LocalCollection.Cursor.prototype.count = function () {                                                                 // 230
  var self = this;                                                                                                     // 231
  if (self.reactive) self._depend({                                                                                    // 233
    added: true,                                                                                                       // 234
    removed: true                                                                                                      // 234
  }, true /* allow the observe to be unordered */);                                                                    // 234
  return self._getRawObjects({                                                                                         // 237
    ordered: true                                                                                                      // 237
  }).length;                                                                                                           // 237
};                                                                                                                     // 238
                                                                                                                       //
LocalCollection.Cursor.prototype._publishCursor = function (sub) {                                                     // 240
  var self = this;                                                                                                     // 241
  if (!self.collection.name) throw new Error("Can't publish a cursor from a collection without a name.");              // 242
  var collection = self.collection.name; // XXX minimongo should not depend on mongo-livedata!                         // 244
                                                                                                                       //
  if (!Package.mongo) {                                                                                                // 247
    throw new Error("Can't publish from Minimongo without the `mongo` package.");                                      // 248
  }                                                                                                                    // 249
                                                                                                                       //
  return Package.mongo.Mongo.Collection._publishCursor(self, sub, collection);                                         // 251
};                                                                                                                     // 252
                                                                                                                       //
LocalCollection.Cursor.prototype._getCollectionName = function () {                                                    // 254
  var self = this;                                                                                                     // 255
  return self.collection.name;                                                                                         // 256
};                                                                                                                     // 257
                                                                                                                       //
LocalCollection._observeChangesCallbacksAreOrdered = function (callbacks) {                                            // 259
  if (callbacks.added && callbacks.addedBefore) throw new Error("Please specify only one of added() and addedBefore()");
  return !!(callbacks.addedBefore || callbacks.movedBefore);                                                           // 262
};                                                                                                                     // 263
                                                                                                                       //
LocalCollection._observeCallbacksAreOrdered = function (callbacks) {                                                   // 265
  if (callbacks.addedAt && callbacks.added) throw new Error("Please specify only one of added() and addedAt()");       // 266
  if (callbacks.changedAt && callbacks.changed) throw new Error("Please specify only one of changed() and changedAt()");
  if (callbacks.removed && callbacks.removedAt) throw new Error("Please specify only one of removed() and removedAt()");
  return !!(callbacks.addedAt || callbacks.movedTo || callbacks.changedAt || callbacks.removedAt);                     // 273
}; // the handle that comes back from observe.                                                                         // 275
                                                                                                                       //
                                                                                                                       //
LocalCollection.ObserveHandle = function () {}; // options to contain:                                                 // 278
//  * callbacks for observe():                                                                                         // 281
//    - addedAt (document, atIndex)                                                                                    // 282
//    - added (document)                                                                                               // 283
//    - changedAt (newDocument, oldDocument, atIndex)                                                                  // 284
//    - changed (newDocument, oldDocument)                                                                             // 285
//    - removedAt (document, atIndex)                                                                                  // 286
//    - removed (document)                                                                                             // 287
//    - movedTo (document, oldIndex, newIndex)                                                                         // 288
//                                                                                                                     // 289
// attributes available on returned query handle:                                                                      // 290
//  * stop(): end updates                                                                                              // 291
//  * collection: the collection this query is querying                                                                // 292
//                                                                                                                     // 293
// iff x is a returned query handle, (x instanceof                                                                     // 294
// LocalCollection.ObserveHandle) is true                                                                              // 295
//                                                                                                                     // 296
// initial results delivered through added callback                                                                    // 297
// XXX maybe callbacks should take a list of objects, to expose transactions?                                          // 298
// XXX maybe support field limiting (to limit what you're notified on)                                                 // 299
                                                                                                                       //
                                                                                                                       //
_.extend(LocalCollection.Cursor.prototype, {                                                                           // 301
  /**                                                                                                                  // 302
   * @summary Watch a query.  Receive callbacks as the result set changes.                                             //
   * @locus Anywhere                                                                                                   //
   * @memberOf Mongo.Cursor                                                                                            //
   * @instance                                                                                                         //
   * @param {Object} callbacks Functions to call to deliver the result set as it changes                               //
   */observe: function (options) {                                                                                     //
    var self = this;                                                                                                   // 310
    return LocalCollection._observeFromObserveChanges(self, options);                                                  // 311
  },                                                                                                                   // 312
  /**                                                                                                                  // 314
   * @summary Watch a query.  Receive callbacks as the result set changes.  Only the differences between the old and new documents are passed to the callbacks.
   * @locus Anywhere                                                                                                   //
   * @memberOf Mongo.Cursor                                                                                            //
   * @instance                                                                                                         //
   * @param {Object} callbacks Functions to call to deliver the result set as it changes                               //
   */observeChanges: function (options) {                                                                              //
    var self = this;                                                                                                   // 322
                                                                                                                       //
    var ordered = LocalCollection._observeChangesCallbacksAreOrdered(options); // there are several places that assume you aren't combining skip/limit with
    // unordered observe.  eg, update's EJSON.clone, and the "there are several"                                       // 327
    // comment in _modifyAndNotify                                                                                     // 328
    // XXX allow skip/limit with unordered observe                                                                     // 329
                                                                                                                       //
                                                                                                                       //
    if (!options._allow_unordered && !ordered && (self.skip || self.limit)) throw new Error("must use ordered observe (ie, 'addedBefore' instead of 'added') with skip or limit");
    if (self.fields && (self.fields._id === 0 || self.fields._id === false)) throw Error("You may not observe a cursor with {fields: {_id: 0}}");
    var query = {                                                                                                      // 336
      dirty: false,                                                                                                    // 337
      matcher: self.matcher,                                                                                           // 338
      // not fast pathed                                                                                               // 338
      sorter: ordered && self.sorter,                                                                                  // 339
      distances: self.matcher.hasGeoQuery() && ordered && new LocalCollection._IdMap(),                                // 340
      resultsSnapshot: null,                                                                                           // 342
      ordered: ordered,                                                                                                // 343
      cursor: self,                                                                                                    // 344
      projectionFn: self._projectionFn                                                                                 // 345
    };                                                                                                                 // 336
    var qid; // Non-reactive queries call added[Before] and then never call anything                                   // 347
    // else.                                                                                                           // 350
                                                                                                                       //
    if (self.reactive) {                                                                                               // 351
      qid = self.collection.next_qid++;                                                                                // 352
      self.collection.queries[qid] = query;                                                                            // 353
    }                                                                                                                  // 354
                                                                                                                       //
    query.results = self._getRawObjects({                                                                              // 355
      ordered: ordered,                                                                                                // 356
      distances: query.distances                                                                                       // 356
    });                                                                                                                // 355
    if (self.collection.paused) query.resultsSnapshot = ordered ? [] : new LocalCollection._IdMap(); // wrap callbacks we were passed. callbacks only fire when not paused and
    // are never undefined                                                                                             // 361
    // Filters out blacklisted fields according to cursor's projection.                                                // 362
    // XXX wrong place for this?                                                                                       // 363
    // furthermore, callbacks enqueue until the operation we're working on is                                          // 365
    // done.                                                                                                           // 366
                                                                                                                       //
    var wrapCallback = function (f) {                                                                                  // 367
      if (!f) return function () {};                                                                                   // 368
      return function () /*args*/{                                                                                     // 370
        var context = this;                                                                                            // 371
        var args = arguments;                                                                                          // 372
        if (self.collection.paused) return;                                                                            // 374
                                                                                                                       //
        self.collection._observeQueue.queueTask(function () {                                                          // 377
          f.apply(context, args);                                                                                      // 378
        });                                                                                                            // 379
      };                                                                                                               // 380
    };                                                                                                                 // 381
                                                                                                                       //
    query.added = wrapCallback(options.added);                                                                         // 382
    query.changed = wrapCallback(options.changed);                                                                     // 383
    query.removed = wrapCallback(options.removed);                                                                     // 384
                                                                                                                       //
    if (ordered) {                                                                                                     // 385
      query.addedBefore = wrapCallback(options.addedBefore);                                                           // 386
      query.movedBefore = wrapCallback(options.movedBefore);                                                           // 387
    }                                                                                                                  // 388
                                                                                                                       //
    if (!options._suppress_initial && !self.collection.paused) {                                                       // 390
      // XXX unify ordered and unordered interface                                                                     // 391
      var each = ordered ? _.bind(_.each, null, query.results) : _.bind(query.results.forEach, query.results);         // 392
      each(function (doc) {                                                                                            // 395
        var fields = EJSON.clone(doc);                                                                                 // 396
        delete fields._id;                                                                                             // 398
        if (ordered) query.addedBefore(doc._id, self._projectionFn(fields), null);                                     // 399
        query.added(doc._id, self._projectionFn(fields));                                                              // 401
      });                                                                                                              // 402
    }                                                                                                                  // 403
                                                                                                                       //
    var handle = new LocalCollection.ObserveHandle();                                                                  // 405
                                                                                                                       //
    _.extend(handle, {                                                                                                 // 406
      collection: self.collection,                                                                                     // 407
      stop: function () {                                                                                              // 408
        if (self.reactive) delete self.collection.queries[qid];                                                        // 409
      }                                                                                                                // 411
    });                                                                                                                // 406
                                                                                                                       //
    if (self.reactive && Tracker.active) {                                                                             // 414
      // XXX in many cases, the same observe will be recreated when                                                    // 415
      // the current autorun is rerun.  we could save work by                                                          // 416
      // letting it linger across rerun and potentially get                                                            // 417
      // repurposed if the same observe is performed, using logic                                                      // 418
      // similar to that of Meteor.subscribe.                                                                          // 419
      Tracker.onInvalidate(function () {                                                                               // 420
        handle.stop();                                                                                                 // 421
      });                                                                                                              // 422
    } // run the observe callbacks resulting from the initial contents                                                 // 423
    // before we leave the observe.                                                                                    // 425
                                                                                                                       //
                                                                                                                       //
    self.collection._observeQueue.drain();                                                                             // 426
                                                                                                                       //
    return handle;                                                                                                     // 428
  }                                                                                                                    // 429
}); // Returns a collection of matching objects, but doesn't deep copy them.                                           // 301
//                                                                                                                     // 433
// If ordered is set, returns a sorted array, respecting sorter, skip, and limit                                       // 434
// properties of the query.  if sorter is falsey, no sort -- you get the natural                                       // 435
// order.                                                                                                              // 436
//                                                                                                                     // 437
// If ordered is not set, returns an object mapping from ID to doc (sorter, skip                                       // 438
// and limit should not be set).                                                                                       // 439
//                                                                                                                     // 440
// If ordered is set and this cursor is a $near geoquery, then this function                                           // 441
// will use an _IdMap to track each distance from the $near argument point in                                          // 442
// order to use it as a sort key. If an _IdMap is passed in the 'distances'                                            // 443
// argument, this function will clear it and use it for this purpose (otherwise                                        // 444
// it will just create its own _IdMap). The observeChanges implementation uses                                         // 445
// this to remember the distances after this function returns.                                                         // 446
                                                                                                                       //
                                                                                                                       //
LocalCollection.Cursor.prototype._getRawObjects = function (options) {                                                 // 447
  var self = this;                                                                                                     // 448
  options = options || {}; // XXX use OrderedDict instead of array, and make IdMap and OrderedDict                     // 449
  // compatible                                                                                                        // 452
                                                                                                                       //
  var results = options.ordered ? [] : new LocalCollection._IdMap(); // fast path for single ID value                  // 453
                                                                                                                       //
  if (self._selectorId !== undefined) {                                                                                // 456
    // If you have non-zero skip and ask for a single id, you get                                                      // 457
    // nothing. This is so it matches the behavior of the '{_id: foo}'                                                 // 458
    // path.                                                                                                           // 459
    if (self.skip) return results;                                                                                     // 460
                                                                                                                       //
    var selectedDoc = self.collection._docs.get(self._selectorId);                                                     // 463
                                                                                                                       //
    if (selectedDoc) {                                                                                                 // 464
      if (options.ordered) results.push(selectedDoc);else results.set(self._selectorId, selectedDoc);                  // 465
    }                                                                                                                  // 469
                                                                                                                       //
    return results;                                                                                                    // 470
  } // slow path for arbitrary selector, sort, skip, limit                                                             // 471
  // in the observeChanges case, distances is actually part of the "query" (ie,                                        // 475
  // live results set) object.  in other cases, distances is only used inside                                          // 476
  // this function.                                                                                                    // 477
                                                                                                                       //
                                                                                                                       //
  var distances;                                                                                                       // 478
                                                                                                                       //
  if (self.matcher.hasGeoQuery() && options.ordered) {                                                                 // 479
    if (options.distances) {                                                                                           // 480
      distances = options.distances;                                                                                   // 481
      distances.clear();                                                                                               // 482
    } else {                                                                                                           // 483
      distances = new LocalCollection._IdMap();                                                                        // 484
    }                                                                                                                  // 485
  }                                                                                                                    // 486
                                                                                                                       //
  self.collection._docs.forEach(function (doc, id) {                                                                   // 488
    var matchResult = self.matcher.documentMatches(doc);                                                               // 489
                                                                                                                       //
    if (matchResult.result) {                                                                                          // 490
      if (options.ordered) {                                                                                           // 491
        results.push(doc);                                                                                             // 492
        if (distances && matchResult.distance !== undefined) distances.set(id, matchResult.distance);                  // 493
      } else {                                                                                                         // 495
        results.set(id, doc);                                                                                          // 496
      }                                                                                                                // 497
    } // Fast path for limited unsorted queries.                                                                       // 498
    // XXX 'length' check here seems wrong for ordered                                                                 // 500
                                                                                                                       //
                                                                                                                       //
    if (self.limit && !self.skip && !self.sorter && results.length === self.limit) return false; // break              // 501
                                                                                                                       //
    return true; // continue                                                                                           // 504
  });                                                                                                                  // 505
                                                                                                                       //
  if (!options.ordered) return results;                                                                                // 507
                                                                                                                       //
  if (self.sorter) {                                                                                                   // 510
    var comparator = self.sorter.getComparator({                                                                       // 511
      distances: distances                                                                                             // 511
    });                                                                                                                // 511
    results.sort(comparator);                                                                                          // 512
  }                                                                                                                    // 513
                                                                                                                       //
  var idx_start = self.skip || 0;                                                                                      // 515
  var idx_end = self.limit ? self.limit + idx_start : results.length;                                                  // 516
  return results.slice(idx_start, idx_end);                                                                            // 517
}; // XXX Maybe we need a version of observe that just calls a callback if                                             // 518
// anything changed.                                                                                                   // 521
                                                                                                                       //
                                                                                                                       //
LocalCollection.Cursor.prototype._depend = function (changers, _allow_unordered) {                                     // 522
  var self = this;                                                                                                     // 523
                                                                                                                       //
  if (Tracker.active) {                                                                                                // 525
    var v = new Tracker.Dependency();                                                                                  // 526
    v.depend();                                                                                                        // 527
                                                                                                                       //
    var notifyChange = _.bind(v.changed, v);                                                                           // 528
                                                                                                                       //
    var options = {                                                                                                    // 530
      _suppress_initial: true,                                                                                         // 531
      _allow_unordered: _allow_unordered                                                                               // 532
    };                                                                                                                 // 530
                                                                                                                       //
    _.each(['added', 'changed', 'removed', 'addedBefore', 'movedBefore'], function (fnName) {                          // 534
      if (changers[fnName]) options[fnName] = notifyChange;                                                            // 536
    }); // observeChanges will stop() when this computation is invalidated                                             // 538
                                                                                                                       //
                                                                                                                       //
    self.observeChanges(options);                                                                                      // 541
  }                                                                                                                    // 542
}; // XXX possibly enforce that 'undefined' does not appear (we assume                                                 // 543
// this in our handling of null and $exists)                                                                           // 546
                                                                                                                       //
                                                                                                                       //
LocalCollection.prototype.insert = function (doc, callback) {                                                          // 547
  var self = this;                                                                                                     // 548
  doc = EJSON.clone(doc);                                                                                              // 549
  assertHasValidFieldNames(doc);                                                                                       // 551
                                                                                                                       //
  if (!_.has(doc, '_id')) {                                                                                            // 553
    // if you really want to use ObjectIDs, set this global.                                                           // 554
    // Mongo.Collection specifies its own ids and does not use this code.                                              // 555
    doc._id = LocalCollection._useOID ? new MongoID.ObjectID() : Random.id();                                          // 556
  }                                                                                                                    // 558
                                                                                                                       //
  var id = doc._id;                                                                                                    // 559
  if (self._docs.has(id)) throw MinimongoError("Duplicate _id '" + id + "'");                                          // 561
                                                                                                                       //
  self._saveOriginal(id, undefined);                                                                                   // 564
                                                                                                                       //
  self._docs.set(id, doc);                                                                                             // 565
                                                                                                                       //
  var queriesToRecompute = []; // trigger live queries that match                                                      // 567
                                                                                                                       //
  for (var qid in meteorBabelHelpers.sanitizeForInObject(self.queries)) {                                              // 569
    var query = self.queries[qid];                                                                                     // 570
    if (query.dirty) continue;                                                                                         // 571
    var matchResult = query.matcher.documentMatches(doc);                                                              // 572
                                                                                                                       //
    if (matchResult.result) {                                                                                          // 573
      if (query.distances && matchResult.distance !== undefined) query.distances.set(id, matchResult.distance);        // 574
      if (query.cursor.skip || query.cursor.limit) queriesToRecompute.push(qid);else LocalCollection._insertInResults(query, doc);
    }                                                                                                                  // 580
  }                                                                                                                    // 581
                                                                                                                       //
  _.each(queriesToRecompute, function (qid) {                                                                          // 583
    if (self.queries[qid]) self._recomputeResults(self.queries[qid]);                                                  // 584
  });                                                                                                                  // 586
                                                                                                                       //
  self._observeQueue.drain(); // Defer because the caller likely doesn't expect the callback to be run                 // 587
  // immediately.                                                                                                      // 590
                                                                                                                       //
                                                                                                                       //
  if (callback) Meteor.defer(function () {                                                                             // 591
    callback(null, id);                                                                                                // 593
  });                                                                                                                  // 594
  return id;                                                                                                           // 595
}; // Iterates over a subset of documents that could match selector; calls                                             // 596
// f(doc, id) on each of them.  Specifically, if selector specifies                                                    // 599
// specific _id's, it only looks at those.  doc is *not* cloned: it is the                                             // 600
// same object that is in _docs.                                                                                       // 601
                                                                                                                       //
                                                                                                                       //
LocalCollection.prototype._eachPossiblyMatchingDoc = function (selector, f) {                                          // 602
  var self = this;                                                                                                     // 603
                                                                                                                       //
  var specificIds = LocalCollection._idsMatchedBySelector(selector);                                                   // 604
                                                                                                                       //
  if (specificIds) {                                                                                                   // 605
    for (var i = 0; i < specificIds.length; ++i) {                                                                     // 606
      var id = specificIds[i];                                                                                         // 607
                                                                                                                       //
      var doc = self._docs.get(id);                                                                                    // 608
                                                                                                                       //
      if (doc) {                                                                                                       // 609
        var breakIfFalse = f(doc, id);                                                                                 // 610
        if (breakIfFalse === false) break;                                                                             // 611
      }                                                                                                                // 613
    }                                                                                                                  // 614
  } else {                                                                                                             // 615
    self._docs.forEach(f);                                                                                             // 616
  }                                                                                                                    // 617
};                                                                                                                     // 618
                                                                                                                       //
LocalCollection.prototype.remove = function (selector, callback) {                                                     // 620
  var self = this; // Easy special case: if we're not calling observeChanges callbacks and we're                       // 621
  // not saving originals and we got asked to remove everything, then just empty                                       // 624
  // everything directly.                                                                                              // 625
                                                                                                                       //
  if (self.paused && !self._savedOriginals && EJSON.equals(selector, {})) {                                            // 626
    var result = self._docs.size();                                                                                    // 627
                                                                                                                       //
    self._docs.clear();                                                                                                // 628
                                                                                                                       //
    _.each(self.queries, function (query) {                                                                            // 629
      if (query.ordered) {                                                                                             // 630
        query.results = [];                                                                                            // 631
      } else {                                                                                                         // 632
        query.results.clear();                                                                                         // 633
      }                                                                                                                // 634
    });                                                                                                                // 635
                                                                                                                       //
    if (callback) {                                                                                                    // 636
      Meteor.defer(function () {                                                                                       // 637
        callback(null, result);                                                                                        // 638
      });                                                                                                              // 639
    }                                                                                                                  // 640
                                                                                                                       //
    return result;                                                                                                     // 641
  }                                                                                                                    // 642
                                                                                                                       //
  var matcher = new Minimongo.Matcher(selector);                                                                       // 644
  var remove = [];                                                                                                     // 645
                                                                                                                       //
  self._eachPossiblyMatchingDoc(selector, function (doc, id) {                                                         // 646
    if (matcher.documentMatches(doc).result) remove.push(id);                                                          // 647
  });                                                                                                                  // 649
                                                                                                                       //
  var queriesToRecompute = [];                                                                                         // 651
  var queryRemove = [];                                                                                                // 652
                                                                                                                       //
  for (var i = 0; i < remove.length; i++) {                                                                            // 653
    var removeId = remove[i];                                                                                          // 654
                                                                                                                       //
    var removeDoc = self._docs.get(removeId);                                                                          // 655
                                                                                                                       //
    _.each(self.queries, function (query, qid) {                                                                       // 656
      if (query.dirty) return;                                                                                         // 657
                                                                                                                       //
      if (query.matcher.documentMatches(removeDoc).result) {                                                           // 659
        if (query.cursor.skip || query.cursor.limit) queriesToRecompute.push(qid);else queryRemove.push({              // 660
          qid: qid,                                                                                                    // 663
          doc: removeDoc                                                                                               // 663
        });                                                                                                            // 663
      }                                                                                                                // 664
    });                                                                                                                // 665
                                                                                                                       //
    self._saveOriginal(removeId, removeDoc);                                                                           // 666
                                                                                                                       //
    self._docs.remove(removeId);                                                                                       // 667
  } // run live query callbacks _after_ we've removed the documents.                                                   // 668
                                                                                                                       //
                                                                                                                       //
  _.each(queryRemove, function (remove) {                                                                              // 671
    var query = self.queries[remove.qid];                                                                              // 672
                                                                                                                       //
    if (query) {                                                                                                       // 673
      query.distances && query.distances.remove(remove.doc._id);                                                       // 674
                                                                                                                       //
      LocalCollection._removeFromResults(query, remove.doc);                                                           // 675
    }                                                                                                                  // 676
  });                                                                                                                  // 677
                                                                                                                       //
  _.each(queriesToRecompute, function (qid) {                                                                          // 678
    var query = self.queries[qid];                                                                                     // 679
    if (query) self._recomputeResults(query);                                                                          // 680
  });                                                                                                                  // 682
                                                                                                                       //
  self._observeQueue.drain();                                                                                          // 683
                                                                                                                       //
  result = remove.length;                                                                                              // 684
  if (callback) Meteor.defer(function () {                                                                             // 685
    callback(null, result);                                                                                            // 687
  });                                                                                                                  // 688
  return result;                                                                                                       // 689
}; // XXX atomicity: if multi is true, and one modification fails, do                                                  // 690
// we rollback the whole operation, or what?                                                                           // 693
                                                                                                                       //
                                                                                                                       //
LocalCollection.prototype.update = function (selector, mod, options, callback) {                                       // 694
  var self = this;                                                                                                     // 695
                                                                                                                       //
  if (!callback && options instanceof Function) {                                                                      // 696
    callback = options;                                                                                                // 697
    options = null;                                                                                                    // 698
  }                                                                                                                    // 699
                                                                                                                       //
  if (!options) options = {};                                                                                          // 700
  var matcher = new Minimongo.Matcher(selector); // Save the original results of any query that we might need to       // 702
  // _recomputeResults on, because _modifyAndNotify will mutate the objects in                                         // 705
  // it. (We don't need to save the original results of paused queries because                                         // 706
  // they already have a resultsSnapshot and we won't be diffing in                                                    // 707
  // _recomputeResults.)                                                                                               // 708
                                                                                                                       //
  var qidToOriginalResults = {}; // We should only clone each document once, even if it appears in multiple queries    // 709
                                                                                                                       //
  var docMap = new LocalCollection._IdMap();                                                                           // 711
                                                                                                                       //
  var idsMatchedBySelector = LocalCollection._idsMatchedBySelector(selector);                                          // 712
                                                                                                                       //
  _.each(self.queries, function (query, qid) {                                                                         // 714
    if ((query.cursor.skip || query.cursor.limit) && !self.paused) {                                                   // 715
      // Catch the case of a reactive `count()` on a cursor with skip                                                  // 716
      // or limit, which registers an unordered observe. This is a                                                     // 717
      // pretty rare case, so we just clone the entire result set with                                                 // 718
      // no optimizations for documents that appear in these result                                                    // 719
      // sets and other queries.                                                                                       // 720
      if (query.results instanceof LocalCollection._IdMap) {                                                           // 721
        qidToOriginalResults[qid] = query.results.clone();                                                             // 722
        return;                                                                                                        // 723
      }                                                                                                                // 724
                                                                                                                       //
      if (!(query.results instanceof Array)) {                                                                         // 726
        throw new Error("Assertion failed: query.results not an array");                                               // 727
      } // Clones a document to be stored in `qidToOriginalResults`                                                    // 728
      // because it may be modified before the new and old result sets                                                 // 731
      // are diffed. But if we know exactly which document IDs we're                                                   // 732
      // going to modify, then we only need to clone those.                                                            // 733
                                                                                                                       //
                                                                                                                       //
      var memoizedCloneIfNeeded = function (doc) {                                                                     // 734
        if (docMap.has(doc._id)) {                                                                                     // 735
          return docMap.get(doc._id);                                                                                  // 736
        } else {                                                                                                       // 737
          var docToMemoize;                                                                                            // 738
                                                                                                                       //
          if (idsMatchedBySelector && !_.any(idsMatchedBySelector, function (id) {                                     // 740
            return EJSON.equals(id, doc._id);                                                                          // 741
          })) {                                                                                                        // 742
            docToMemoize = doc;                                                                                        // 743
          } else {                                                                                                     // 744
            docToMemoize = EJSON.clone(doc);                                                                           // 745
          }                                                                                                            // 746
                                                                                                                       //
          docMap.set(doc._id, docToMemoize);                                                                           // 748
          return docToMemoize;                                                                                         // 749
        }                                                                                                              // 750
      };                                                                                                               // 751
                                                                                                                       //
      qidToOriginalResults[qid] = query.results.map(memoizedCloneIfNeeded);                                            // 753
    }                                                                                                                  // 754
  });                                                                                                                  // 755
                                                                                                                       //
  var recomputeQids = {};                                                                                              // 756
  var updateCount = 0;                                                                                                 // 758
                                                                                                                       //
  self._eachPossiblyMatchingDoc(selector, function (doc, id) {                                                         // 760
    var queryResult = matcher.documentMatches(doc);                                                                    // 761
                                                                                                                       //
    if (queryResult.result) {                                                                                          // 762
      // XXX Should we save the original even if mod ends up being a no-op?                                            // 763
      self._saveOriginal(id, doc);                                                                                     // 764
                                                                                                                       //
      self._modifyAndNotify(doc, mod, recomputeQids, queryResult.arrayIndices);                                        // 765
                                                                                                                       //
      ++updateCount;                                                                                                   // 766
      if (!options.multi) return false; // break                                                                       // 767
    }                                                                                                                  // 769
                                                                                                                       //
    return true;                                                                                                       // 770
  });                                                                                                                  // 771
                                                                                                                       //
  _.each(recomputeQids, function (dummy, qid) {                                                                        // 773
    var query = self.queries[qid];                                                                                     // 774
    if (query) self._recomputeResults(query, qidToOriginalResults[qid]);                                               // 775
  });                                                                                                                  // 777
                                                                                                                       //
  self._observeQueue.drain(); // If we are doing an upsert, and we didn't modify any documents yet, then               // 778
  // it's time to do an insert. Figure out what document we are inserting, and                                         // 781
  // generate an id for it.                                                                                            // 782
                                                                                                                       //
                                                                                                                       //
  var insertedId;                                                                                                      // 783
                                                                                                                       //
  if (updateCount === 0 && options.upsert) {                                                                           // 784
    var newDoc = LocalCollection._removeDollarOperators(selector);                                                     // 785
                                                                                                                       //
    LocalCollection._modify(newDoc, mod, {                                                                             // 786
      isInsert: true                                                                                                   // 786
    });                                                                                                                // 786
                                                                                                                       //
    if (!newDoc._id && options.insertedId) newDoc._id = options.insertedId;                                            // 787
    insertedId = self.insert(newDoc);                                                                                  // 789
    updateCount = 1;                                                                                                   // 790
  } // Return the number of affected documents, or in the upsert case, an object                                       // 791
  // containing the number of affected docs and the id of the doc that was                                             // 794
  // inserted, if any.                                                                                                 // 795
                                                                                                                       //
                                                                                                                       //
  var result;                                                                                                          // 796
                                                                                                                       //
  if (options._returnObject) {                                                                                         // 797
    result = {                                                                                                         // 798
      numberAffected: updateCount                                                                                      // 799
    };                                                                                                                 // 798
    if (insertedId !== undefined) result.insertedId = insertedId;                                                      // 801
  } else {                                                                                                             // 803
    result = updateCount;                                                                                              // 804
  }                                                                                                                    // 805
                                                                                                                       //
  if (callback) Meteor.defer(function () {                                                                             // 807
    callback(null, result);                                                                                            // 809
  });                                                                                                                  // 810
  return result;                                                                                                       // 811
}; // A convenience wrapper on update. LocalCollection.upsert(sel, mod) is                                             // 812
// equivalent to LocalCollection.update(sel, mod, { upsert: true, _returnObject:                                       // 815
// true }).                                                                                                            // 816
                                                                                                                       //
                                                                                                                       //
LocalCollection.prototype.upsert = function (selector, mod, options, callback) {                                       // 817
  var self = this;                                                                                                     // 818
                                                                                                                       //
  if (!callback && typeof options === "function") {                                                                    // 819
    callback = options;                                                                                                // 820
    options = {};                                                                                                      // 821
  }                                                                                                                    // 822
                                                                                                                       //
  return self.update(selector, mod, _.extend({}, options, {                                                            // 823
    upsert: true,                                                                                                      // 824
    _returnObject: true                                                                                                // 825
  }), callback);                                                                                                       // 823
};                                                                                                                     // 827
                                                                                                                       //
LocalCollection.prototype._modifyAndNotify = function (doc, mod, recomputeQids, arrayIndices) {                        // 829
  var self = this;                                                                                                     // 831
  var matched_before = {};                                                                                             // 833
                                                                                                                       //
  for (var qid in meteorBabelHelpers.sanitizeForInObject(self.queries)) {                                              // 834
    var query = self.queries[qid];                                                                                     // 835
    if (query.dirty) continue;                                                                                         // 836
                                                                                                                       //
    if (query.ordered) {                                                                                               // 838
      matched_before[qid] = query.matcher.documentMatches(doc).result;                                                 // 839
    } else {                                                                                                           // 840
      // Because we don't support skip or limit (yet) in unordered queries, we                                         // 841
      // can just do a direct lookup.                                                                                  // 842
      matched_before[qid] = query.results.has(doc._id);                                                                // 843
    }                                                                                                                  // 844
  }                                                                                                                    // 845
                                                                                                                       //
  var old_doc = EJSON.clone(doc);                                                                                      // 847
                                                                                                                       //
  LocalCollection._modify(doc, mod, {                                                                                  // 849
    arrayIndices: arrayIndices                                                                                         // 849
  });                                                                                                                  // 849
                                                                                                                       //
  for (qid in meteorBabelHelpers.sanitizeForInObject(self.queries)) {                                                  // 851
    query = self.queries[qid];                                                                                         // 852
    if (query.dirty) continue;                                                                                         // 853
    var before = matched_before[qid];                                                                                  // 855
    var afterMatch = query.matcher.documentMatches(doc);                                                               // 856
    var after = afterMatch.result;                                                                                     // 857
    if (after && query.distances && afterMatch.distance !== undefined) query.distances.set(doc._id, afterMatch.distance);
                                                                                                                       //
    if (query.cursor.skip || query.cursor.limit) {                                                                     // 861
      // We need to recompute any query where the doc may have been in the                                             // 862
      // cursor's window either before or after the update. (Note that if skip                                         // 863
      // or limit is set, "before" and "after" being true do not necessarily                                           // 864
      // mean that the document is in the cursor's output after skip/limit is                                          // 865
      // applied... but if they are false, then the document definitely is NOT                                         // 866
      // in the output. So it's safe to skip recompute if neither before or                                            // 867
      // after are true.)                                                                                              // 868
      if (before || after) recomputeQids[qid] = true;                                                                  // 869
    } else if (before && !after) {                                                                                     // 871
      LocalCollection._removeFromResults(query, doc);                                                                  // 872
    } else if (!before && after) {                                                                                     // 873
      LocalCollection._insertInResults(query, doc);                                                                    // 874
    } else if (before && after) {                                                                                      // 875
      LocalCollection._updateInResults(query, doc, old_doc);                                                           // 876
    }                                                                                                                  // 877
  }                                                                                                                    // 878
}; // XXX the sorted-query logic below is laughably inefficient. we'll                                                 // 879
// need to come up with a better datastructure for this.                                                               // 882
//                                                                                                                     // 883
// XXX the logic for observing with a skip or a limit is even more                                                     // 884
// laughably inefficient. we recompute the whole results every time!                                                   // 885
                                                                                                                       //
                                                                                                                       //
LocalCollection._insertInResults = function (query, doc) {                                                             // 887
  var fields = EJSON.clone(doc);                                                                                       // 888
  delete fields._id;                                                                                                   // 889
                                                                                                                       //
  if (query.ordered) {                                                                                                 // 890
    if (!query.sorter) {                                                                                               // 891
      query.addedBefore(doc._id, query.projectionFn(fields), null);                                                    // 892
      query.results.push(doc);                                                                                         // 893
    } else {                                                                                                           // 894
      var i = LocalCollection._insertInSortedList(query.sorter.getComparator({                                         // 895
        distances: query.distances                                                                                     // 896
      }), query.results, doc);                                                                                         // 896
                                                                                                                       //
      var next = query.results[i + 1];                                                                                 // 898
      if (next) next = next._id;else next = null;                                                                      // 899
      query.addedBefore(doc._id, query.projectionFn(fields), next);                                                    // 903
    }                                                                                                                  // 904
                                                                                                                       //
    query.added(doc._id, query.projectionFn(fields));                                                                  // 905
  } else {                                                                                                             // 906
    query.added(doc._id, query.projectionFn(fields));                                                                  // 907
    query.results.set(doc._id, doc);                                                                                   // 908
  }                                                                                                                    // 909
};                                                                                                                     // 910
                                                                                                                       //
LocalCollection._removeFromResults = function (query, doc) {                                                           // 912
  if (query.ordered) {                                                                                                 // 913
    var i = LocalCollection._findInOrderedResults(query, doc);                                                         // 914
                                                                                                                       //
    query.removed(doc._id);                                                                                            // 915
    query.results.splice(i, 1);                                                                                        // 916
  } else {                                                                                                             // 917
    var id = doc._id; // in case callback mutates doc                                                                  // 918
                                                                                                                       //
    query.removed(doc._id);                                                                                            // 919
    query.results.remove(id);                                                                                          // 920
  }                                                                                                                    // 921
};                                                                                                                     // 922
                                                                                                                       //
LocalCollection._updateInResults = function (query, doc, old_doc) {                                                    // 924
  if (!EJSON.equals(doc._id, old_doc._id)) throw new Error("Can't change a doc's _id while updating");                 // 925
  var projectionFn = query.projectionFn;                                                                               // 927
  var changedFields = DiffSequence.makeChangedFields(projectionFn(doc), projectionFn(old_doc));                        // 928
                                                                                                                       //
  if (!query.ordered) {                                                                                                // 931
    if (!_.isEmpty(changedFields)) {                                                                                   // 932
      query.changed(doc._id, changedFields);                                                                           // 933
      query.results.set(doc._id, doc);                                                                                 // 934
    }                                                                                                                  // 935
                                                                                                                       //
    return;                                                                                                            // 936
  }                                                                                                                    // 937
                                                                                                                       //
  var orig_idx = LocalCollection._findInOrderedResults(query, doc);                                                    // 939
                                                                                                                       //
  if (!_.isEmpty(changedFields)) query.changed(doc._id, changedFields);                                                // 941
  if (!query.sorter) return; // just take it out and put it back in again, and see if the index                        // 943
  // changes                                                                                                           // 947
                                                                                                                       //
  query.results.splice(orig_idx, 1);                                                                                   // 948
                                                                                                                       //
  var new_idx = LocalCollection._insertInSortedList(query.sorter.getComparator({                                       // 949
    distances: query.distances                                                                                         // 950
  }), query.results, doc);                                                                                             // 950
                                                                                                                       //
  if (orig_idx !== new_idx) {                                                                                          // 952
    var next = query.results[new_idx + 1];                                                                             // 953
    if (next) next = next._id;else next = null;                                                                        // 954
    query.movedBefore && query.movedBefore(doc._id, next);                                                             // 958
  }                                                                                                                    // 959
}; // Recomputes the results of a query and runs observe callbacks for the                                             // 960
// difference between the previous results and the current results (unless                                             // 963
// paused). Used for skip/limit queries.                                                                               // 964
//                                                                                                                     // 965
// When this is used by insert or remove, it can just use query.results for the                                        // 966
// old results (and there's no need to pass in oldResults), because these                                              // 967
// operations don't mutate the documents in the collection. Update needs to pass                                       // 968
// in an oldResults which was deep-copied before the modifier was applied.                                             // 969
//                                                                                                                     // 970
// oldResults is guaranteed to be ignored if the query is not paused.                                                  // 971
                                                                                                                       //
                                                                                                                       //
LocalCollection.prototype._recomputeResults = function (query, oldResults) {                                           // 972
  var self = this;                                                                                                     // 973
                                                                                                                       //
  if (self.paused) {                                                                                                   // 974
    // There's no reason to recompute the results now as we're still paused.                                           // 975
    // By flagging the query as "dirty", the recompute will be performed                                               // 976
    // when resumeObservers is called.                                                                                 // 977
    query.dirty = true;                                                                                                // 978
    return;                                                                                                            // 979
  }                                                                                                                    // 980
                                                                                                                       //
  if (!self.paused && !oldResults) oldResults = query.results;                                                         // 982
  if (query.distances) query.distances.clear();                                                                        // 984
  query.results = query.cursor._getRawObjects({                                                                        // 986
    ordered: query.ordered,                                                                                            // 987
    distances: query.distances                                                                                         // 987
  });                                                                                                                  // 986
                                                                                                                       //
  if (!self.paused) {                                                                                                  // 989
    LocalCollection._diffQueryChanges(query.ordered, oldResults, query.results, query, {                               // 990
      projectionFn: query.projectionFn                                                                                 // 992
    });                                                                                                                // 992
  }                                                                                                                    // 993
};                                                                                                                     // 994
                                                                                                                       //
LocalCollection._findInOrderedResults = function (query, doc) {                                                        // 997
  if (!query.ordered) throw new Error("Can't call _findInOrderedResults on unordered query");                          // 998
                                                                                                                       //
  for (var i = 0; i < query.results.length; i++) {                                                                     // 1000
    if (query.results[i] === doc) return i;                                                                            // 1001
  }                                                                                                                    // 1000
                                                                                                                       //
  throw Error("object missing from query");                                                                            // 1003
}; // This binary search puts a value between any equal values, and the first                                          // 1004
// lesser value.                                                                                                       // 1007
                                                                                                                       //
                                                                                                                       //
LocalCollection._binarySearch = function (cmp, array, value) {                                                         // 1008
  var first = 0,                                                                                                       // 1009
      rangeLength = array.length;                                                                                      // 1009
                                                                                                                       //
  while (rangeLength > 0) {                                                                                            // 1011
    var halfRange = Math.floor(rangeLength / 2);                                                                       // 1012
                                                                                                                       //
    if (cmp(value, array[first + halfRange]) >= 0) {                                                                   // 1013
      first += halfRange + 1;                                                                                          // 1014
      rangeLength -= halfRange + 1;                                                                                    // 1015
    } else {                                                                                                           // 1016
      rangeLength = halfRange;                                                                                         // 1017
    }                                                                                                                  // 1018
  }                                                                                                                    // 1019
                                                                                                                       //
  return first;                                                                                                        // 1020
};                                                                                                                     // 1021
                                                                                                                       //
LocalCollection._insertInSortedList = function (cmp, array, value) {                                                   // 1023
  if (array.length === 0) {                                                                                            // 1024
    array.push(value);                                                                                                 // 1025
    return 0;                                                                                                          // 1026
  }                                                                                                                    // 1027
                                                                                                                       //
  var idx = LocalCollection._binarySearch(cmp, array, value);                                                          // 1029
                                                                                                                       //
  array.splice(idx, 0, value);                                                                                         // 1030
  return idx;                                                                                                          // 1031
}; // To track what documents are affected by a piece of code, call saveOriginals()                                    // 1032
// before it and retrieveOriginals() after it. retrieveOriginals returns an                                            // 1035
// object whose keys are the ids of the documents that were affected since the                                         // 1036
// call to saveOriginals(), and the values are equal to the document's contents                                        // 1037
// at the time of saveOriginals. (In the case of an inserted document, undefined                                       // 1038
// is the value.) You must alternate between calls to saveOriginals() and                                              // 1039
// retrieveOriginals().                                                                                                // 1040
                                                                                                                       //
                                                                                                                       //
LocalCollection.prototype.saveOriginals = function () {                                                                // 1041
  var self = this;                                                                                                     // 1042
  if (self._savedOriginals) throw new Error("Called saveOriginals twice without retrieveOriginals");                   // 1043
  self._savedOriginals = new LocalCollection._IdMap();                                                                 // 1045
};                                                                                                                     // 1046
                                                                                                                       //
LocalCollection.prototype.retrieveOriginals = function () {                                                            // 1047
  var self = this;                                                                                                     // 1048
  if (!self._savedOriginals) throw new Error("Called retrieveOriginals without saveOriginals");                        // 1049
  var originals = self._savedOriginals;                                                                                // 1052
  self._savedOriginals = null;                                                                                         // 1053
  return originals;                                                                                                    // 1054
};                                                                                                                     // 1055
                                                                                                                       //
LocalCollection.prototype._saveOriginal = function (id, doc) {                                                         // 1057
  var self = this; // Are we even trying to save originals?                                                            // 1058
                                                                                                                       //
  if (!self._savedOriginals) return; // Have we previously mutated the original (and so 'doc' is not actually          // 1060
  // original)?  (Note the 'has' check rather than truth: we store undefined                                           // 1063
  // here for inserted docs!)                                                                                          // 1064
                                                                                                                       //
  if (self._savedOriginals.has(id)) return;                                                                            // 1065
                                                                                                                       //
  self._savedOriginals.set(id, EJSON.clone(doc));                                                                      // 1067
}; // Pause the observers. No callbacks from observers will fire until                                                 // 1068
// 'resumeObservers' is called.                                                                                        // 1071
                                                                                                                       //
                                                                                                                       //
LocalCollection.prototype.pauseObservers = function () {                                                               // 1072
  // No-op if already paused.                                                                                          // 1073
  if (this.paused) return; // Set the 'paused' flag such that new observer messages don't fire.                        // 1074
                                                                                                                       //
  this.paused = true; // Take a snapshot of the query results for each query.                                          // 1078
                                                                                                                       //
  for (var qid in meteorBabelHelpers.sanitizeForInObject(this.queries)) {                                              // 1081
    var query = this.queries[qid];                                                                                     // 1082
    query.resultsSnapshot = EJSON.clone(query.results);                                                                // 1084
  }                                                                                                                    // 1085
}; // Resume the observers. Observers immediately receive change                                                       // 1086
// notifications to bring them to the current state of the                                                             // 1089
// database. Note that this is not just replaying all the changes that                                                 // 1090
// happened during the pause, it is a smarter 'coalesced' diff.                                                        // 1091
                                                                                                                       //
                                                                                                                       //
LocalCollection.prototype.resumeObservers = function () {                                                              // 1092
  var self = this; // No-op if not paused.                                                                             // 1093
                                                                                                                       //
  if (!this.paused) return; // Unset the 'paused' flag. Make sure to do this first, otherwise                          // 1095
  // observer methods won't actually fire when we trigger them.                                                        // 1099
                                                                                                                       //
  this.paused = false;                                                                                                 // 1100
                                                                                                                       //
  for (var qid in meteorBabelHelpers.sanitizeForInObject(this.queries)) {                                              // 1102
    var query = self.queries[qid];                                                                                     // 1103
                                                                                                                       //
    if (query.dirty) {                                                                                                 // 1104
      query.dirty = false; // re-compute results will perform `LocalCollection._diffQueryChanges` automatically.       // 1105
                                                                                                                       //
      self._recomputeResults(query, query.resultsSnapshot);                                                            // 1107
    } else {                                                                                                           // 1108
      // Diff the current results against the snapshot and send to observers.                                          // 1109
      // pass the query object for its observer callbacks.                                                             // 1110
      LocalCollection._diffQueryChanges(query.ordered, query.resultsSnapshot, query.results, query, {                  // 1111
        projectionFn: query.projectionFn                                                                               // 1113
      });                                                                                                              // 1113
    }                                                                                                                  // 1114
                                                                                                                       //
    query.resultsSnapshot = null;                                                                                      // 1115
  }                                                                                                                    // 1116
                                                                                                                       //
  self._observeQueue.drain();                                                                                          // 1117
};                                                                                                                     // 1118
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"wrap_transform.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/minimongo/wrap_transform.js                                                                                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// Wrap a transform function to return objects that have the _id field                                                 // 1
// of the untransformed document. This ensures that subsystems such as                                                 // 2
// the observe-sequence package that call `observe` can keep track of                                                  // 3
// the documents identities.                                                                                           // 4
//                                                                                                                     // 5
// - Require that it returns objects                                                                                   // 6
// - If the return value has an _id field, verify that it matches the                                                  // 7
//   original _id field                                                                                                // 8
// - If the return value doesn't have an _id field, add it back.                                                       // 9
LocalCollection.wrapTransform = function (transform) {                                                                 // 10
  if (!transform) return null; // No need to doubly-wrap transforms.                                                   // 11
                                                                                                                       //
  if (transform.__wrappedTransform__) return transform;                                                                // 15
                                                                                                                       //
  var wrapped = function (doc) {                                                                                       // 18
    if (!_.has(doc, '_id')) {                                                                                          // 19
      // XXX do we ever have a transform on the oplog's collection? because that                                       // 20
      // collection has no _id.                                                                                        // 21
      throw new Error("can only transform documents with _id");                                                        // 22
    }                                                                                                                  // 23
                                                                                                                       //
    var id = doc._id; // XXX consider making tracker a weak dependency and checking Package.tracker here               // 25
                                                                                                                       //
    var transformed = Tracker.nonreactive(function () {                                                                // 27
      return transform(doc);                                                                                           // 28
    });                                                                                                                // 29
                                                                                                                       //
    if (!isPlainObject(transformed)) {                                                                                 // 31
      throw new Error("transform must return object");                                                                 // 32
    }                                                                                                                  // 33
                                                                                                                       //
    if (_.has(transformed, '_id')) {                                                                                   // 35
      if (!EJSON.equals(transformed._id, id)) {                                                                        // 36
        throw new Error("transformed document can't have different _id");                                              // 37
      }                                                                                                                // 38
    } else {                                                                                                           // 39
      transformed._id = id;                                                                                            // 40
    }                                                                                                                  // 41
                                                                                                                       //
    return transformed;                                                                                                // 42
  };                                                                                                                   // 43
                                                                                                                       //
  wrapped.__wrappedTransform__ = true;                                                                                 // 44
  return wrapped;                                                                                                      // 45
};                                                                                                                     // 46
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"helpers.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/minimongo/helpers.js                                                                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// Like _.isArray, but doesn't regard polyfilled Uint8Arrays on old browsers as                                        // 1
// arrays.                                                                                                             // 2
// XXX maybe this should be EJSON.isArray                                                                              // 3
isArray = function (x) {                                                                                               // 4
  return _.isArray(x) && !EJSON.isBinary(x);                                                                           // 5
}; // XXX maybe this should be EJSON.isObject, though EJSON doesn't know about                                         // 6
// RegExp                                                                                                              // 9
// XXX note that _type(undefined) === 3!!!!                                                                            // 10
                                                                                                                       //
                                                                                                                       //
isPlainObject = LocalCollection._isPlainObject = function (x) {                                                        // 11
  return x && LocalCollection._f._type(x) === 3;                                                                       // 12
};                                                                                                                     // 13
                                                                                                                       //
isIndexable = function (x) {                                                                                           // 15
  return isArray(x) || isPlainObject(x);                                                                               // 16
}; // Returns true if this is an object with at least one key and all keys begin                                       // 17
// with $.  Unless inconsistentOK is set, throws if some keys begin with $ and                                         // 20
// others don't.                                                                                                       // 21
                                                                                                                       //
                                                                                                                       //
isOperatorObject = function (valueSelector, inconsistentOK) {                                                          // 22
  if (!isPlainObject(valueSelector)) return false;                                                                     // 23
  var theseAreOperators = undefined;                                                                                   // 26
                                                                                                                       //
  _.each(valueSelector, function (value, selKey) {                                                                     // 27
    var thisIsOperator = selKey.substr(0, 1) === '$';                                                                  // 28
                                                                                                                       //
    if (theseAreOperators === undefined) {                                                                             // 29
      theseAreOperators = thisIsOperator;                                                                              // 30
    } else if (theseAreOperators !== thisIsOperator) {                                                                 // 31
      if (!inconsistentOK) throw new Error("Inconsistent operator: " + JSON.stringify(valueSelector));                 // 32
      theseAreOperators = false;                                                                                       // 35
    }                                                                                                                  // 36
  });                                                                                                                  // 37
                                                                                                                       //
  return !!theseAreOperators; // {} has no operators                                                                   // 38
}; // string can be converted to integer                                                                               // 39
                                                                                                                       //
                                                                                                                       //
isNumericKey = function (s) {                                                                                          // 43
  return (/^[0-9]+$/.test(s)                                                                                           // 44
  );                                                                                                                   // 44
};                                                                                                                     // 45
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"selector.js":["babel-runtime/helpers/typeof",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/minimongo/selector.js                                                                                      //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _typeof2 = require("babel-runtime/helpers/typeof");                                                                //
                                                                                                                       //
var _typeof3 = _interopRequireDefault(_typeof2);                                                                       //
                                                                                                                       //
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }                      //
                                                                                                                       //
// The minimongo selector compiler!                                                                                    // 1
// Terminology:                                                                                                        // 3
//  - a "selector" is the EJSON object representing a selector                                                         // 4
//  - a "matcher" is its compiled form (whether a full Minimongo.Matcher                                               // 5
//    object or one of the component lambdas that matches parts of it)                                                 // 6
//  - a "result object" is an object with a "result" field and maybe                                                   // 7
//    distance and arrayIndices.                                                                                       // 8
//  - a "branched value" is an object with a "value" field and maybe                                                   // 9
//    "dontIterate" and "arrayIndices".                                                                                // 10
//  - a "document" is a top-level object that can be stored in a collection.                                           // 11
//  - a "lookup function" is a function that takes in a document and returns                                           // 12
//    an array of "branched values".                                                                                   // 13
//  - a "branched matcher" maps from an array of branched values to a result                                           // 14
//    object.                                                                                                          // 15
//  - an "element matcher" maps from a single value to a bool.                                                         // 16
// Main entry point.                                                                                                   // 18
//   var matcher = new Minimongo.Matcher({a: {$gt: 5}});                                                               // 19
//   if (matcher.documentMatches({a: 7})) ...                                                                          // 20
Minimongo.Matcher = function (selector) {                                                                              // 21
  var self = this; // A set (object mapping string -> *) of all of the document paths looked                           // 22
  // at by the selector. Also includes the empty string if it may look at any                                          // 24
  // path (eg, $where).                                                                                                // 25
                                                                                                                       //
  self._paths = {}; // Set to true if compilation finds a $near.                                                       // 26
                                                                                                                       //
  self._hasGeoQuery = false; // Set to true if compilation finds a $where.                                             // 28
                                                                                                                       //
  self._hasWhere = false; // Set to false if compilation finds anything other than a simple equality or                // 30
  // one or more of '$gt', '$gte', '$lt', '$lte', '$ne', '$in', '$nin' used with                                       // 32
  // scalars as operands.                                                                                              // 33
                                                                                                                       //
  self._isSimple = true; // Set to a dummy document which always matches this Matcher. Or set to null                  // 34
  // if such document is too hard to find.                                                                             // 36
                                                                                                                       //
  self._matchingDocument = undefined; // A clone of the original selector. It may just be a function if the user       // 37
  // passed in a function; otherwise is definitely an object (eg, IDs are                                              // 39
  // translated into {_id: ID} first. Used by canBecomeTrueByModifier and                                              // 40
  // Sorter._useWithMatcher.                                                                                           // 41
                                                                                                                       //
  self._selector = null;                                                                                               // 42
  self._docMatcher = self._compileSelector(selector);                                                                  // 43
};                                                                                                                     // 44
                                                                                                                       //
_.extend(Minimongo.Matcher.prototype, {                                                                                // 46
  documentMatches: function (doc) {                                                                                    // 47
    if (!doc || (typeof doc === "undefined" ? "undefined" : (0, _typeof3.default)(doc)) !== "object") {                // 48
      throw Error("documentMatches needs a document");                                                                 // 49
    }                                                                                                                  // 50
                                                                                                                       //
    return this._docMatcher(doc);                                                                                      // 51
  },                                                                                                                   // 52
  hasGeoQuery: function () {                                                                                           // 53
    return this._hasGeoQuery;                                                                                          // 54
  },                                                                                                                   // 55
  hasWhere: function () {                                                                                              // 56
    return this._hasWhere;                                                                                             // 57
  },                                                                                                                   // 58
  isSimple: function () {                                                                                              // 59
    return this._isSimple;                                                                                             // 60
  },                                                                                                                   // 61
  // Given a selector, return a function that takes one argument, a                                                    // 63
  // document. It returns a result object.                                                                             // 64
  _compileSelector: function (selector) {                                                                              // 65
    var self = this; // you can pass a literal function instead of a selector                                          // 66
                                                                                                                       //
    if (selector instanceof Function) {                                                                                // 68
      self._isSimple = false;                                                                                          // 69
      self._selector = selector;                                                                                       // 70
                                                                                                                       //
      self._recordPathUsed('');                                                                                        // 71
                                                                                                                       //
      return function (doc) {                                                                                          // 72
        return {                                                                                                       // 73
          result: !!selector.call(doc)                                                                                 // 73
        };                                                                                                             // 73
      };                                                                                                               // 74
    } // shorthand -- scalars match _id                                                                                // 75
                                                                                                                       //
                                                                                                                       //
    if (LocalCollection._selectorIsId(selector)) {                                                                     // 78
      self._selector = {                                                                                               // 79
        _id: selector                                                                                                  // 79
      };                                                                                                               // 79
                                                                                                                       //
      self._recordPathUsed('_id');                                                                                     // 80
                                                                                                                       //
      return function (doc) {                                                                                          // 81
        return {                                                                                                       // 82
          result: EJSON.equals(doc._id, selector)                                                                      // 82
        };                                                                                                             // 82
      };                                                                                                               // 83
    } // protect against dangerous selectors.  falsey and {_id: falsey} are both                                       // 84
    // likely programmer error, and not what you want, particularly for                                                // 87
    // destructive operations.                                                                                         // 88
                                                                                                                       //
                                                                                                                       //
    if (!selector || '_id' in selector && !selector._id) {                                                             // 89
      self._isSimple = false;                                                                                          // 90
      return nothingMatcher;                                                                                           // 91
    } // Top level can't be an array or true or binary.                                                                // 92
                                                                                                                       //
                                                                                                                       //
    if (typeof selector === 'boolean' || isArray(selector) || EJSON.isBinary(selector)) throw new Error("Invalid selector: " + selector);
    self._selector = EJSON.clone(selector);                                                                            // 99
    return compileDocumentSelector(selector, self, {                                                                   // 100
      isRoot: true                                                                                                     // 100
    });                                                                                                                // 100
  },                                                                                                                   // 101
  _recordPathUsed: function (path) {                                                                                   // 102
    this._paths[path] = true;                                                                                          // 103
  },                                                                                                                   // 104
  // Returns a list of key paths the given selector is looking for. It includes                                        // 105
  // the empty string if there is a $where.                                                                            // 106
  _getPaths: function () {                                                                                             // 107
    return _.keys(this._paths);                                                                                        // 108
  }                                                                                                                    // 109
}); // Takes in a selector that could match a full document (eg, the original                                          // 46
// selector). Returns a function mapping document->result object.                                                      // 114
//                                                                                                                     // 115
// matcher is the Matcher object we are compiling.                                                                     // 116
//                                                                                                                     // 117
// If this is the root document selector (ie, not wrapped in $and or the like),                                        // 118
// then isRoot is true. (This is used by $near.)                                                                       // 119
                                                                                                                       //
                                                                                                                       //
var compileDocumentSelector = function (docSelector, matcher, options) {                                               // 120
  options = options || {};                                                                                             // 121
  var docMatchers = [];                                                                                                // 122
                                                                                                                       //
  _.each(docSelector, function (subSelector, key) {                                                                    // 123
    if (key.substr(0, 1) === '$') {                                                                                    // 124
      // Outer operators are either logical operators (they recurse back into                                          // 125
      // this function), or $where.                                                                                    // 126
      if (!_.has(LOGICAL_OPERATORS, key)) throw new Error("Unrecognized logical operator: " + key);                    // 127
      matcher._isSimple = false;                                                                                       // 129
      docMatchers.push(LOGICAL_OPERATORS[key](subSelector, matcher, options.inElemMatch));                             // 130
    } else {                                                                                                           // 132
      // Record this path, but only if we aren't in an elemMatcher, since in an                                        // 133
      // elemMatch this is a path inside an object in an array, not in the doc                                         // 134
      // root.                                                                                                         // 135
      if (!options.inElemMatch) matcher._recordPathUsed(key);                                                          // 136
      var lookUpByIndex = makeLookupFunction(key);                                                                     // 138
      var valueMatcher = compileValueSelector(subSelector, matcher, options.isRoot);                                   // 139
      docMatchers.push(function (doc) {                                                                                // 141
        var branchValues = lookUpByIndex(doc);                                                                         // 142
        return valueMatcher(branchValues);                                                                             // 143
      });                                                                                                              // 144
    }                                                                                                                  // 145
  });                                                                                                                  // 146
                                                                                                                       //
  return andDocumentMatchers(docMatchers);                                                                             // 148
}; // Takes in a selector that could match a key-indexed value in a document; eg,                                      // 149
// {$gt: 5, $lt: 9}, or a regular expression, or any non-expression object (to                                         // 152
// indicate equality).  Returns a branched matcher: a function mapping                                                 // 153
// [branched value]->result object.                                                                                    // 154
                                                                                                                       //
                                                                                                                       //
var compileValueSelector = function (valueSelector, matcher, isRoot) {                                                 // 155
  if (valueSelector instanceof RegExp) {                                                                               // 156
    matcher._isSimple = false;                                                                                         // 157
    return convertElementMatcherToBranchedMatcher(regexpElementMatcher(valueSelector));                                // 158
  } else if (isOperatorObject(valueSelector)) {                                                                        // 160
    return operatorBranchedMatcher(valueSelector, matcher, isRoot);                                                    // 161
  } else {                                                                                                             // 162
    return convertElementMatcherToBranchedMatcher(equalityElementMatcher(valueSelector));                              // 163
  }                                                                                                                    // 165
}; // Given an element matcher (which evaluates a single value), returns a branched                                    // 166
// value (which evaluates the element matcher on all the branches and returns a                                        // 169
// more structured return value possibly including arrayIndices).                                                      // 170
                                                                                                                       //
                                                                                                                       //
var convertElementMatcherToBranchedMatcher = function (elementMatcher, options) {                                      // 171
  options = options || {};                                                                                             // 173
  return function (branches) {                                                                                         // 174
    var expanded = branches;                                                                                           // 175
                                                                                                                       //
    if (!options.dontExpandLeafArrays) {                                                                               // 176
      expanded = expandArraysInBranches(branches, options.dontIncludeLeafArrays);                                      // 177
    }                                                                                                                  // 179
                                                                                                                       //
    var ret = {};                                                                                                      // 180
    ret.result = _.any(expanded, function (element) {                                                                  // 181
      var matched = elementMatcher(element.value); // Special case for $elemMatch: it means "true, and use this as an array
      // index if I didn't already have one".                                                                          // 185
                                                                                                                       //
      if (typeof matched === 'number') {                                                                               // 186
        // XXX This code dates from when we only stored a single array index                                           // 187
        // (for the outermost array). Should we be also including deeper array                                         // 188
        // indices from the $elemMatch match?                                                                          // 189
        if (!element.arrayIndices) element.arrayIndices = [matched];                                                   // 190
        matched = true;                                                                                                // 192
      } // If some element matched, and it's tagged with array indices, include                                        // 193
      // those indices in our result object.                                                                           // 196
                                                                                                                       //
                                                                                                                       //
      if (matched && element.arrayIndices) ret.arrayIndices = element.arrayIndices;                                    // 197
      return matched;                                                                                                  // 200
    });                                                                                                                // 201
    return ret;                                                                                                        // 202
  };                                                                                                                   // 203
}; // Takes a RegExp object and returns an element matcher.                                                            // 204
                                                                                                                       //
                                                                                                                       //
regexpElementMatcher = function (regexp) {                                                                             // 207
  return function (value) {                                                                                            // 208
    if (value instanceof RegExp) {                                                                                     // 209
      // Comparing two regexps means seeing if the regexps are identical                                               // 210
      // (really!). Underscore knows how.                                                                              // 211
      return _.isEqual(value, regexp);                                                                                 // 212
    } // Regexps only work against strings.                                                                            // 213
                                                                                                                       //
                                                                                                                       //
    if (typeof value !== 'string') return false; // Reset regexp's state to avoid inconsistent matching for objects with the
    // same value on consecutive calls of regexp.test. This happens only if the                                        // 219
    // regexp has the 'g' flag. Also note that ES6 introduces a new flag 'y' for                                       // 220
    // which we should *not* change the lastIndex but MongoDB doesn't support                                          // 221
    // either of these flags.                                                                                          // 222
                                                                                                                       //
    regexp.lastIndex = 0;                                                                                              // 223
    return regexp.test(value);                                                                                         // 225
  };                                                                                                                   // 226
}; // Takes something that is not an operator object and returns an element matcher                                    // 227
// for equality with that thing.                                                                                       // 230
                                                                                                                       //
                                                                                                                       //
equalityElementMatcher = function (elementSelector) {                                                                  // 231
  if (isOperatorObject(elementSelector)) throw Error("Can't create equalityValueSelector for operator object"); // Special-case: null and undefined are equal (if you got undefined in there
  // somewhere, or if you got it due to some branch being non-existent in the                                          // 236
  // weird special case), even though they aren't with EJSON.equals.                                                   // 237
                                                                                                                       //
  if (elementSelector == null) {                                                                                       // 238
    // undefined or null                                                                                               // 238
    return function (value) {                                                                                          // 239
      return value == null; // undefined or null                                                                       // 240
    };                                                                                                                 // 241
  }                                                                                                                    // 242
                                                                                                                       //
  return function (value) {                                                                                            // 244
    return LocalCollection._f._equal(elementSelector, value);                                                          // 245
  };                                                                                                                   // 246
}; // Takes an operator object (an object with $ keys) and returns a branched                                          // 247
// matcher for it.                                                                                                     // 250
                                                                                                                       //
                                                                                                                       //
var operatorBranchedMatcher = function (valueSelector, matcher, isRoot) {                                              // 251
  // Each valueSelector works separately on the various branches.  So one                                              // 252
  // operator can match one branch and another can match another branch.  This                                         // 253
  // is OK.                                                                                                            // 254
  var operatorMatchers = [];                                                                                           // 256
                                                                                                                       //
  _.each(valueSelector, function (operand, operator) {                                                                 // 257
    var simpleRange = _.contains(['$lt', '$lte', '$gt', '$gte'], operator) && _.isNumber(operand);                     // 258
                                                                                                                       //
    var simpleEquality = _.contains(['$ne', '$eq'], operator) && !_.isObject(operand);                                 // 260
    var simpleInclusion = _.contains(['$in', '$nin'], operator) && _.isArray(operand) && !_.any(operand, _.isObject);  // 261
                                                                                                                       //
    if (!(simpleRange || simpleInclusion || simpleEquality)) {                                                         // 264
      matcher._isSimple = false;                                                                                       // 265
    }                                                                                                                  // 266
                                                                                                                       //
    if (_.has(VALUE_OPERATORS, operator)) {                                                                            // 268
      operatorMatchers.push(VALUE_OPERATORS[operator](operand, valueSelector, matcher, isRoot));                       // 269
    } else if (_.has(ELEMENT_OPERATORS, operator)) {                                                                   // 271
      var options = ELEMENT_OPERATORS[operator];                                                                       // 272
      operatorMatchers.push(convertElementMatcherToBranchedMatcher(options.compileElementSelector(operand, valueSelector, matcher), options));
    } else {                                                                                                           // 278
      throw new Error("Unrecognized operator: " + operator);                                                           // 279
    }                                                                                                                  // 280
  });                                                                                                                  // 281
                                                                                                                       //
  return andBranchedMatchers(operatorMatchers);                                                                        // 283
};                                                                                                                     // 284
                                                                                                                       //
var compileArrayOfDocumentSelectors = function (selectors, matcher, inElemMatch) {                                     // 286
  if (!isArray(selectors) || _.isEmpty(selectors)) throw Error("$and/$or/$nor must be nonempty array");                // 288
  return _.map(selectors, function (subSelector) {                                                                     // 290
    if (!isPlainObject(subSelector)) throw Error("$or/$and/$nor entries need to be full objects");                     // 291
    return compileDocumentSelector(subSelector, matcher, {                                                             // 293
      inElemMatch: inElemMatch                                                                                         // 294
    });                                                                                                                // 294
  });                                                                                                                  // 295
}; // Operators that appear at the top level of a document selector.                                                   // 296
                                                                                                                       //
                                                                                                                       //
var LOGICAL_OPERATORS = {                                                                                              // 299
  $and: function (subSelector, matcher, inElemMatch) {                                                                 // 300
    var matchers = compileArrayOfDocumentSelectors(subSelector, matcher, inElemMatch);                                 // 301
    return andDocumentMatchers(matchers);                                                                              // 303
  },                                                                                                                   // 304
  $or: function (subSelector, matcher, inElemMatch) {                                                                  // 306
    var matchers = compileArrayOfDocumentSelectors(subSelector, matcher, inElemMatch); // Special case: if there is only one matcher, use it directly, *preserving*
    // any arrayIndices it returns.                                                                                    // 311
                                                                                                                       //
    if (matchers.length === 1) return matchers[0];                                                                     // 312
    return function (doc) {                                                                                            // 315
      var result = _.any(matchers, function (f) {                                                                      // 316
        return f(doc).result;                                                                                          // 317
      }); // $or does NOT set arrayIndices when it has multiple                                                        // 318
      // sub-expressions. (Tested against MongoDB.)                                                                    // 320
                                                                                                                       //
                                                                                                                       //
      return {                                                                                                         // 321
        result: result                                                                                                 // 321
      };                                                                                                               // 321
    };                                                                                                                 // 322
  },                                                                                                                   // 323
  $nor: function (subSelector, matcher, inElemMatch) {                                                                 // 325
    var matchers = compileArrayOfDocumentSelectors(subSelector, matcher, inElemMatch);                                 // 326
    return function (doc) {                                                                                            // 328
      var result = _.all(matchers, function (f) {                                                                      // 329
        return !f(doc).result;                                                                                         // 330
      }); // Never set arrayIndices, because we only match if nothing in particular                                    // 331
      // "matched" (and because this is consistent with MongoDB).                                                      // 333
                                                                                                                       //
                                                                                                                       //
      return {                                                                                                         // 334
        result: result                                                                                                 // 334
      };                                                                                                               // 334
    };                                                                                                                 // 335
  },                                                                                                                   // 336
  $where: function (selectorValue, matcher) {                                                                          // 338
    // Record that *any* path may be used.                                                                             // 339
    matcher._recordPathUsed('');                                                                                       // 340
                                                                                                                       //
    matcher._hasWhere = true;                                                                                          // 341
                                                                                                                       //
    if (!(selectorValue instanceof Function)) {                                                                        // 342
      // XXX MongoDB seems to have more complex logic to decide where or or not                                        // 343
      // to add "return"; not sure exactly what it is.                                                                 // 344
      selectorValue = Function("obj", "return " + selectorValue);                                                      // 345
    }                                                                                                                  // 346
                                                                                                                       //
    return function (doc) {                                                                                            // 347
      // We make the document available as both `this` and `obj`.                                                      // 348
      // XXX not sure what we should do if this throws                                                                 // 349
      return {                                                                                                         // 350
        result: selectorValue.call(doc, doc)                                                                           // 350
      };                                                                                                               // 350
    };                                                                                                                 // 351
  },                                                                                                                   // 352
  // This is just used as a comment in the query (in MongoDB, it also ends up in                                       // 354
  // query logs); it has no effect on the actual selection.                                                            // 355
  $comment: function () {                                                                                              // 356
    return function () {                                                                                               // 357
      return {                                                                                                         // 358
        result: true                                                                                                   // 358
      };                                                                                                               // 358
    };                                                                                                                 // 359
  }                                                                                                                    // 360
}; // Returns a branched matcher that matches iff the given matcher does not.                                          // 299
// Note that this implicitly "deMorganizes" the wrapped function.  ie, it                                              // 364
// means that ALL branch values need to fail to match innerBranchedMatcher.                                            // 365
                                                                                                                       //
var invertBranchedMatcher = function (branchedMatcher) {                                                               // 366
  return function (branchValues) {                                                                                     // 367
    var invertMe = branchedMatcher(branchValues); // We explicitly choose to strip arrayIndices here: it doesn't make sense to
    // say "update the array element that does not match something", at least                                          // 370
    // in mongo-land.                                                                                                  // 371
                                                                                                                       //
    return {                                                                                                           // 372
      result: !invertMe.result                                                                                         // 372
    };                                                                                                                 // 372
  };                                                                                                                   // 373
}; // Operators that (unlike LOGICAL_OPERATORS) pertain to individual paths in a                                       // 374
// document, but (unlike ELEMENT_OPERATORS) do not have a simple definition as                                         // 377
// "match each branched value independently and combine with                                                           // 378
// convertElementMatcherToBranchedMatcher".                                                                            // 379
                                                                                                                       //
                                                                                                                       //
var VALUE_OPERATORS = {                                                                                                // 380
  $eq: function (operand) {                                                                                            // 381
    return convertElementMatcherToBranchedMatcher(equalityElementMatcher(operand));                                    // 382
  },                                                                                                                   // 384
  $not: function (operand, valueSelector, matcher) {                                                                   // 385
    return invertBranchedMatcher(compileValueSelector(operand, matcher));                                              // 386
  },                                                                                                                   // 387
  $ne: function (operand) {                                                                                            // 388
    return invertBranchedMatcher(convertElementMatcherToBranchedMatcher(equalityElementMatcher(operand)));             // 389
  },                                                                                                                   // 391
  $nin: function (operand) {                                                                                           // 392
    return invertBranchedMatcher(convertElementMatcherToBranchedMatcher(ELEMENT_OPERATORS.$in.compileElementSelector(operand)));
  },                                                                                                                   // 395
  $exists: function (operand) {                                                                                        // 396
    var exists = convertElementMatcherToBranchedMatcher(function (value) {                                             // 397
      return value !== undefined;                                                                                      // 398
    });                                                                                                                // 399
    return operand ? exists : invertBranchedMatcher(exists);                                                           // 400
  },                                                                                                                   // 401
  // $options just provides options for $regex; its logic is inside $regex                                             // 402
  $options: function (operand, valueSelector) {                                                                        // 403
    if (!_.has(valueSelector, '$regex')) throw Error("$options needs a $regex");                                       // 404
    return everythingMatcher;                                                                                          // 406
  },                                                                                                                   // 407
  // $maxDistance is basically an argument to $near                                                                    // 408
  $maxDistance: function (operand, valueSelector) {                                                                    // 409
    if (!valueSelector.$near) throw Error("$maxDistance needs a $near");                                               // 410
    return everythingMatcher;                                                                                          // 412
  },                                                                                                                   // 413
  $all: function (operand, valueSelector, matcher) {                                                                   // 414
    if (!isArray(operand)) throw Error("$all requires array"); // Not sure why, but this seems to be what MongoDB does.
                                                                                                                       //
    if (_.isEmpty(operand)) return nothingMatcher;                                                                     // 418
    var branchedMatchers = [];                                                                                         // 421
                                                                                                                       //
    _.each(operand, function (criterion) {                                                                             // 422
      // XXX handle $all/$elemMatch combination                                                                        // 423
      if (isOperatorObject(criterion)) throw Error("no $ expressions in $all"); // This is always a regexp or equality selector.
                                                                                                                       //
      branchedMatchers.push(compileValueSelector(criterion, matcher));                                                 // 427
    }); // andBranchedMatchers does NOT require all selectors to return true on the                                    // 428
    // SAME branch.                                                                                                    // 430
                                                                                                                       //
                                                                                                                       //
    return andBranchedMatchers(branchedMatchers);                                                                      // 431
  },                                                                                                                   // 432
  $near: function (operand, valueSelector, matcher, isRoot) {                                                          // 433
    if (!isRoot) throw Error("$near can't be inside another $ operator");                                              // 434
    matcher._hasGeoQuery = true; // There are two kinds of geodata in MongoDB: legacy coordinate pairs and             // 436
    // GeoJSON. They use different distance metrics, too. GeoJSON queries are                                          // 439
    // marked with a $geometry property, though legacy coordinates can be                                              // 440
    // matched using $geometry.                                                                                        // 441
                                                                                                                       //
    var maxDistance, point, distance;                                                                                  // 443
                                                                                                                       //
    if (isPlainObject(operand) && _.has(operand, '$geometry')) {                                                       // 444
      // GeoJSON "2dsphere" mode.                                                                                      // 445
      maxDistance = operand.$maxDistance;                                                                              // 446
      point = operand.$geometry;                                                                                       // 447
                                                                                                                       //
      distance = function (value) {                                                                                    // 448
        // XXX: for now, we don't calculate the actual distance between, say,                                          // 449
        // polygon and circle. If people care about this use-case it will get                                          // 450
        // a priority.                                                                                                 // 451
        if (!value) return null;                                                                                       // 452
        if (!value.type) return GeoJSON.pointDistance(point, {                                                         // 454
          type: "Point",                                                                                               // 456
          coordinates: pointToArray(value)                                                                             // 456
        });                                                                                                            // 456
                                                                                                                       //
        if (value.type === "Point") {                                                                                  // 457
          return GeoJSON.pointDistance(point, value);                                                                  // 458
        } else {                                                                                                       // 459
          return GeoJSON.geometryWithinRadius(value, point, maxDistance) ? 0 : maxDistance + 1;                        // 460
        }                                                                                                              // 462
      };                                                                                                               // 463
    } else {                                                                                                           // 464
      maxDistance = valueSelector.$maxDistance;                                                                        // 465
      if (!isArray(operand) && !isPlainObject(operand)) throw Error("$near argument must be coordinate pair or GeoJSON");
      point = pointToArray(operand);                                                                                   // 468
                                                                                                                       //
      distance = function (value) {                                                                                    // 469
        if (!isArray(value) && !isPlainObject(value)) return null;                                                     // 470
        return distanceCoordinatePairs(point, value);                                                                  // 472
      };                                                                                                               // 473
    }                                                                                                                  // 474
                                                                                                                       //
    return function (branchedValues) {                                                                                 // 476
      // There might be multiple points in the document that match the given                                           // 477
      // field. Only one of them needs to be within $maxDistance, but we need to                                       // 478
      // evaluate all of them and use the nearest one for the implicit sort                                            // 479
      // specifier. (That's why we can't just use ELEMENT_OPERATORS here.)                                             // 480
      //                                                                                                               // 481
      // Note: This differs from MongoDB's implementation, where a document will                                       // 482
      // actually show up *multiple times* in the result set, with one entry for                                       // 483
      // each within-$maxDistance branching point.                                                                     // 484
      branchedValues = expandArraysInBranches(branchedValues);                                                         // 485
      var result = {                                                                                                   // 486
        result: false                                                                                                  // 486
      };                                                                                                               // 486
                                                                                                                       //
      _.each(branchedValues, function (branch) {                                                                       // 487
        if (!((0, _typeof3.default)(branch.value) === "object")) {                                                     // 488
          return;                                                                                                      // 489
        }                                                                                                              // 490
                                                                                                                       //
        var curDistance = distance(branch.value); // Skip branches that aren't real points or are too far away.        // 491
                                                                                                                       //
        if (curDistance === null || curDistance > maxDistance) return; // Skip anything that's a tie.                  // 493
                                                                                                                       //
        if (result.distance !== undefined && result.distance <= curDistance) return;                                   // 496
        result.result = true;                                                                                          // 498
        result.distance = curDistance;                                                                                 // 499
        if (!branch.arrayIndices) delete result.arrayIndices;else result.arrayIndices = branch.arrayIndices;           // 500
      });                                                                                                              // 504
                                                                                                                       //
      return result;                                                                                                   // 505
    };                                                                                                                 // 506
  }                                                                                                                    // 507
}; // Helpers for $near.                                                                                               // 380
                                                                                                                       //
var distanceCoordinatePairs = function (a, b) {                                                                        // 511
  a = pointToArray(a);                                                                                                 // 512
  b = pointToArray(b);                                                                                                 // 513
  var x = a[0] - b[0];                                                                                                 // 514
  var y = a[1] - b[1];                                                                                                 // 515
  if (_.isNaN(x) || _.isNaN(y)) return null;                                                                           // 516
  return Math.sqrt(x * x + y * y);                                                                                     // 518
}; // Makes sure we get 2 elements array and assume the first one to be x and                                          // 519
// the second one to y no matter what user passes.                                                                     // 521
// In case user passes { lon: x, lat: y } returns [x, y]                                                               // 522
                                                                                                                       //
                                                                                                                       //
var pointToArray = function (point) {                                                                                  // 523
  return _.map(point, _.identity);                                                                                     // 524
}; // Helper for $lt/$gt/$lte/$gte.                                                                                    // 525
                                                                                                                       //
                                                                                                                       //
var makeInequality = function (cmpValueComparator) {                                                                   // 528
  return {                                                                                                             // 529
    compileElementSelector: function (operand) {                                                                       // 530
      // Arrays never compare false with non-arrays for any inequality.                                                // 531
      // XXX This was behavior we observed in pre-release MongoDB 2.5, but                                             // 532
      //     it seems to have been reverted.                                                                           // 533
      //     See https://jira.mongodb.org/browse/SERVER-11444                                                          // 534
      if (isArray(operand)) {                                                                                          // 535
        return function () {                                                                                           // 536
          return false;                                                                                                // 537
        };                                                                                                             // 538
      } // Special case: consider undefined and null the same (so true with                                            // 539
      // $gte/$lte).                                                                                                   // 542
                                                                                                                       //
                                                                                                                       //
      if (operand === undefined) operand = null;                                                                       // 543
                                                                                                                       //
      var operandType = LocalCollection._f._type(operand);                                                             // 546
                                                                                                                       //
      return function (value) {                                                                                        // 548
        if (value === undefined) value = null; // Comparisons are never true among things of different type (except    // 549
        // null vs undefined).                                                                                         // 552
                                                                                                                       //
        if (LocalCollection._f._type(value) !== operandType) return false;                                             // 553
        return cmpValueComparator(LocalCollection._f._cmp(value, operand));                                            // 555
      };                                                                                                               // 556
    }                                                                                                                  // 557
  };                                                                                                                   // 529
};                                                                                                                     // 559
                                                                                                                       //
var isBitSet = function (value, bit) {                                                                                 // 561
  if (value === 0) return false;                                                                                       // 562
  return (value & 1 << bit) !== 0;                                                                                     // 564
};                                                                                                                     // 565
                                                                                                                       //
var eightBits = [0, 1, 2, 3, 4, 5, 6, 7];                                                                              // 567
                                                                                                                       //
var get8BitsSet = function (value) {                                                                                   // 568
  if (value === 0) return [];                                                                                          // 569
  return _.filter(eightBits, function (bit) {                                                                          // 571
    return isBitSet(value, bit);                                                                                       // 572
  });                                                                                                                  // 573
};                                                                                                                     // 574
                                                                                                                       //
var convertNumberToUint8Array = function (number) {                                                                    // 576
  var numOfBits = number.toString(2).length;                                                                           // 577
  var num8BitGroups = Math.ceil(numOfBits / 8);                                                                        // 578
  var byteArray = new Uint8Array(num8BitGroups);                                                                       // 579
                                                                                                                       //
  for (var i = 0; i < byteArray.length; i++) {                                                                         // 581
    var byte = number & 0xff;                                                                                          // 582
    byteArray[i] = byte;                                                                                               // 583
    number = (number - byte) / 256;                                                                                    // 584
  }                                                                                                                    // 585
                                                                                                                       //
  return byteArray;                                                                                                    // 587
};                                                                                                                     // 588
                                                                                                                       //
var ensureUint8Array = function (number) {                                                                             // 590
  return number instanceof Uint8Array ? number : convertNumberToUint8Array(number);                                    // 591
};                                                                                                                     // 593
                                                                                                                       //
var ensureOperandUint8Array = function (operand) {                                                                     // 595
  if (!(operand instanceof Uint8Array)) {                                                                              // 596
    operand = _.reduce(operand, function (num, n) {                                                                    // 597
      return num | 1 << n;                                                                                             // 598
    }, 0);                                                                                                             // 599
    operand = convertNumberToUint8Array(operand);                                                                      // 601
  }                                                                                                                    // 602
                                                                                                                       //
  return operand;                                                                                                      // 604
};                                                                                                                     // 605
                                                                                                                       //
var bitsClear = function (bitsSetOp, bitsSetVal) {                                                                     // 607
  return _.isUndefined(_.find(bitsSetOp, function (bit) {                                                              // 608
    return bitsSetVal.indexOf(bit) === -1;                                                                             // 610
  }));                                                                                                                 // 611
};                                                                                                                     // 613
                                                                                                                       //
var bitsSet = function (bitsSetOp, bitsSetVal) {                                                                       // 615
  return _.isUndefined(_.find(bitsSetOp, function (bit) {                                                              // 616
    return bitsSetVal.indexOf(bit) !== -1;                                                                             // 618
  }));                                                                                                                 // 619
};                                                                                                                     // 621
                                                                                                                       //
var anyBitCompare = function (operand, value, setOrClear) {                                                            // 623
  return _.isUndefined(_.find(operand, function (op, i) {                                                              // 624
    var bitsSetOp = get8BitsSet(op);                                                                                   // 626
    var bitsSetVal = get8BitsSet(value[i]);                                                                            // 627
    return setOrClear(bitsSetOp, bitsSetVal);                                                                          // 629
  }));                                                                                                                 // 630
};                                                                                                                     // 632
                                                                                                                       //
var allBitCompare = function (operand, value, setOrClear) {                                                            // 634
  return _.filter(operand, function (op, i) {                                                                          // 635
    var bitsSetOp = get8BitsSet(op);                                                                                   // 636
    var bitsSetVal = get8BitsSet(value[i]);                                                                            // 637
    return !setOrClear(bitsSetOp, bitsSetVal);                                                                         // 639
  }).length === 0;                                                                                                     // 640
}; // Each element selector contains:                                                                                  // 641
//  - compileElementSelector, a function with args:                                                                    // 644
//    - operand - the "right hand side" of the operator                                                                // 645
//    - valueSelector - the "context" for the operator (so that $regex can find                                        // 646
//      $options)                                                                                                      // 647
//    - matcher - the Matcher this is going into (so that $elemMatch can compile                                       // 648
//      more things)                                                                                                   // 649
//    returning a function mapping a single value to bool.                                                             // 650
//  - dontExpandLeafArrays, a bool which prevents expandArraysInBranches from                                          // 651
//    being called                                                                                                     // 652
//  - dontIncludeLeafArrays, a bool which causes an argument to be passed to                                           // 653
//    expandArraysInBranches if it is called                                                                           // 654
                                                                                                                       //
                                                                                                                       //
ELEMENT_OPERATORS = {                                                                                                  // 655
  $lt: makeInequality(function (cmpValue) {                                                                            // 656
    return cmpValue < 0;                                                                                               // 657
  }),                                                                                                                  // 658
  $gt: makeInequality(function (cmpValue) {                                                                            // 659
    return cmpValue > 0;                                                                                               // 660
  }),                                                                                                                  // 661
  $lte: makeInequality(function (cmpValue) {                                                                           // 662
    return cmpValue <= 0;                                                                                              // 663
  }),                                                                                                                  // 664
  $gte: makeInequality(function (cmpValue) {                                                                           // 665
    return cmpValue >= 0;                                                                                              // 666
  }),                                                                                                                  // 667
  $mod: {                                                                                                              // 668
    compileElementSelector: function (operand) {                                                                       // 669
      if (!(isArray(operand) && operand.length === 2 && typeof operand[0] === 'number' && typeof operand[1] === 'number')) {
        throw Error("argument to $mod must be an array of two numbers");                                               // 673
      } // XXX could require to be ints or round or something                                                          // 674
                                                                                                                       //
                                                                                                                       //
      var divisor = operand[0];                                                                                        // 676
      var remainder = operand[1];                                                                                      // 677
      return function (value) {                                                                                        // 678
        return typeof value === 'number' && value % divisor === remainder;                                             // 679
      };                                                                                                               // 680
    }                                                                                                                  // 681
  },                                                                                                                   // 668
  $in: {                                                                                                               // 683
    compileElementSelector: function (operand) {                                                                       // 684
      if (!isArray(operand)) throw Error("$in needs an array");                                                        // 685
      var elementMatchers = [];                                                                                        // 688
                                                                                                                       //
      _.each(operand, function (option) {                                                                              // 689
        if (option instanceof RegExp) elementMatchers.push(regexpElementMatcher(option));else if (isOperatorObject(option)) throw Error("cannot nest $ under $in");else elementMatchers.push(equalityElementMatcher(option));
      });                                                                                                              // 696
                                                                                                                       //
      return function (value) {                                                                                        // 698
        // Allow {a: {$in: [null]}} to match when 'a' does not exist.                                                  // 699
        if (value === undefined) value = null;                                                                         // 700
        return _.any(elementMatchers, function (e) {                                                                   // 702
          return e(value);                                                                                             // 703
        });                                                                                                            // 704
      };                                                                                                               // 705
    }                                                                                                                  // 706
  },                                                                                                                   // 683
  $size: {                                                                                                             // 708
    // {a: [[5, 5]]} must match {a: {$size: 1}} but not {a: {$size: 2}}, so we                                         // 709
    // don't want to consider the element [5,5] in the leaf array [[5,5]] as a                                         // 710
    // possible value.                                                                                                 // 711
    dontExpandLeafArrays: true,                                                                                        // 712
    compileElementSelector: function (operand) {                                                                       // 713
      if (typeof operand === 'string') {                                                                               // 714
        // Don't ask me why, but by experimentation, this seems to be what Mongo                                       // 715
        // does.                                                                                                       // 716
        operand = 0;                                                                                                   // 717
      } else if (typeof operand !== 'number') {                                                                        // 718
        throw Error("$size needs a number");                                                                           // 719
      }                                                                                                                // 720
                                                                                                                       //
      return function (value) {                                                                                        // 721
        return isArray(value) && value.length === operand;                                                             // 722
      };                                                                                                               // 723
    }                                                                                                                  // 724
  },                                                                                                                   // 708
  $type: {                                                                                                             // 726
    // {a: [5]} must not match {a: {$type: 4}} (4 means array), but it should                                          // 727
    // match {a: {$type: 1}} (1 means number), and {a: [[5]]} must match {$a:                                          // 728
    // {$type: 4}}. Thus, when we see a leaf array, we *should* expand it but                                          // 729
    // should *not* include it itself.                                                                                 // 730
    dontIncludeLeafArrays: true,                                                                                       // 731
    compileElementSelector: function (operand) {                                                                       // 732
      if (typeof operand !== 'number') throw Error("$type needs a number");                                            // 733
      return function (value) {                                                                                        // 735
        return value !== undefined && LocalCollection._f._type(value) === operand;                                     // 736
      };                                                                                                               // 738
    }                                                                                                                  // 739
  },                                                                                                                   // 726
  $bitsAnyClear: {                                                                                                     // 741
    compileElementSelector: function (operand, valueSelector, matcher) {                                               // 742
      if (!isArray(operand) && !(operand instanceof Uint8Array)) throw Error("$bitsAnyClear has to be an Array");      // 743
      return function (value) {                                                                                        // 745
        if (typeof value !== 'number' && !(value instanceof Uint8Array)) return false;                                 // 746
        if (value === 0) return true;                                                                                  // 749
        operand = ensureOperandUint8Array(operand);                                                                    // 752
        value = ensureUint8Array(value);                                                                               // 753
        return anyBitCompare(operand, value, bitsClear);                                                               // 755
      };                                                                                                               // 756
    }                                                                                                                  // 757
  },                                                                                                                   // 741
  $bitsAllClear: {                                                                                                     // 759
    compileElementSelector: function (operand, valueSelector, matcher) {                                               // 760
      if (!isArray(operand) && !(operand instanceof Uint8Array)) throw Error("$bitsAllClear has to be an Array");      // 761
      return function (value) {                                                                                        // 763
        if (typeof value !== 'number' && !(value instanceof Uint8Array)) return false;                                 // 764
        if (value === 0) return true;                                                                                  // 767
        operand = ensureOperandUint8Array(operand);                                                                    // 770
        value = ensureUint8Array(value);                                                                               // 771
        return allBitCompare(operand, value, bitsSet);                                                                 // 773
      };                                                                                                               // 774
    }                                                                                                                  // 775
  },                                                                                                                   // 759
  $bitsAllSet: {                                                                                                       // 777
    compileElementSelector: function (operand, valueSelector, matcher) {                                               // 778
      if (!isArray(operand) && !(operand instanceof Uint8Array)) throw Error("$bitsAllSet has to be an Array");        // 779
      return function (value) {                                                                                        // 781
        if (typeof value !== 'number' && !(value instanceof Uint8Array)) return false;                                 // 782
        operand = ensureOperandUint8Array(operand);                                                                    // 785
        value = ensureUint8Array(value);                                                                               // 786
        return allBitCompare(operand, value, bitsClear);                                                               // 788
      };                                                                                                               // 789
    }                                                                                                                  // 790
  },                                                                                                                   // 777
  $bitsAnySet: {                                                                                                       // 792
    compileElementSelector: function (operand, valueSelector, matcher) {                                               // 793
      if (!isArray(operand) && !(operand instanceof Uint8Array)) throw Error("$bitsAnySet has to be an Array");        // 794
      return function (value) {                                                                                        // 796
        if (typeof value !== 'number' && !(value instanceof Uint8Array)) return false;                                 // 797
        operand = ensureOperandUint8Array(operand);                                                                    // 800
        value = ensureUint8Array(value);                                                                               // 801
        return _.isUndefined(_.find(operand, function (op, i) {                                                        // 803
          var bitsSetOp = get8BitsSet(op);                                                                             // 805
          var bitsSetVal = get8BitsSet(value[i]);                                                                      // 806
          return bitsSet(bitsSetOp, bitsSetVal);                                                                       // 808
        }));                                                                                                           // 809
      };                                                                                                               // 811
    }                                                                                                                  // 812
  },                                                                                                                   // 792
  $regex: {                                                                                                            // 814
    compileElementSelector: function (operand, valueSelector) {                                                        // 815
      if (!(typeof operand === 'string' || operand instanceof RegExp)) throw Error("$regex has to be a string or RegExp");
      var regexp;                                                                                                      // 819
                                                                                                                       //
      if (valueSelector.$options !== undefined) {                                                                      // 820
        // Options passed in $options (even the empty string) always overrides                                         // 821
        // options in the RegExp object itself. (See also                                                              // 822
        // Mongo.Collection._rewriteSelector.)                                                                         // 823
        // Be clear that we only support the JS-supported options, not extended                                        // 825
        // ones (eg, Mongo supports x and s). Ideally we would implement x and s                                       // 826
        // by transforming the regexp, but not today...                                                                // 827
        if (/[^gim]/.test(valueSelector.$options)) throw new Error("Only the i, m, and g regexp options are supported");
        var regexSource = operand instanceof RegExp ? operand.source : operand;                                        // 831
        regexp = new RegExp(regexSource, valueSelector.$options);                                                      // 832
      } else if (operand instanceof RegExp) {                                                                          // 833
        regexp = operand;                                                                                              // 834
      } else {                                                                                                         // 835
        regexp = new RegExp(operand);                                                                                  // 836
      }                                                                                                                // 837
                                                                                                                       //
      return regexpElementMatcher(regexp);                                                                             // 838
    }                                                                                                                  // 839
  },                                                                                                                   // 814
  $elemMatch: {                                                                                                        // 841
    dontExpandLeafArrays: true,                                                                                        // 842
    compileElementSelector: function (operand, valueSelector, matcher) {                                               // 843
      if (!isPlainObject(operand)) throw Error("$elemMatch need an object");                                           // 844
      var subMatcher, isDocMatcher;                                                                                    // 847
                                                                                                                       //
      if (isOperatorObject(_.omit(operand, _.keys(LOGICAL_OPERATORS)), true)) {                                        // 848
        subMatcher = compileValueSelector(operand, matcher);                                                           // 849
        isDocMatcher = false;                                                                                          // 850
      } else {                                                                                                         // 851
        // This is NOT the same as compileValueSelector(operand), and not just                                         // 852
        // because of the slightly different calling convention.                                                       // 853
        // {$elemMatch: {x: 3}} means "an element has a field x:3", not                                                // 854
        // "consists only of a field x:3". Also, regexps and sub-$ are allowed.                                        // 855
        subMatcher = compileDocumentSelector(operand, matcher, {                                                       // 856
          inElemMatch: true                                                                                            // 857
        });                                                                                                            // 857
        isDocMatcher = true;                                                                                           // 858
      }                                                                                                                // 859
                                                                                                                       //
      return function (value) {                                                                                        // 861
        if (!isArray(value)) return false;                                                                             // 862
                                                                                                                       //
        for (var i = 0; i < value.length; ++i) {                                                                       // 864
          var arrayElement = value[i];                                                                                 // 865
          var arg;                                                                                                     // 866
                                                                                                                       //
          if (isDocMatcher) {                                                                                          // 867
            // We can only match {$elemMatch: {b: 3}} against objects.                                                 // 868
            // (We can also match against arrays, if there's numeric indices,                                          // 869
            // eg {$elemMatch: {'0.b': 3}} or {$elemMatch: {0: 3}}.)                                                   // 870
            if (!isPlainObject(arrayElement) && !isArray(arrayElement)) return false;                                  // 871
            arg = arrayElement;                                                                                        // 873
          } else {                                                                                                     // 874
            // dontIterate ensures that {a: {$elemMatch: {$gt: 5}}} matches                                            // 875
            // {a: [8]} but not {a: [[8]]}                                                                             // 876
            arg = [{                                                                                                   // 877
              value: arrayElement,                                                                                     // 877
              dontIterate: true                                                                                        // 877
            }];                                                                                                        // 877
          } // XXX support $near in $elemMatch by propagating $distance?                                               // 878
                                                                                                                       //
                                                                                                                       //
          if (subMatcher(arg).result) return i; // specially understood to mean "use as arrayIndices"                  // 880
        }                                                                                                              // 882
                                                                                                                       //
        return false;                                                                                                  // 883
      };                                                                                                               // 884
    }                                                                                                                  // 885
  }                                                                                                                    // 841
}; // makeLookupFunction(key) returns a lookup function.                                                               // 655
//                                                                                                                     // 890
// A lookup function takes in a document and returns an array of matching                                              // 891
// branches.  If no arrays are found while looking up the key, this array will                                         // 892
// have exactly one branches (possibly 'undefined', if some segment of the key                                         // 893
// was not found).                                                                                                     // 894
//                                                                                                                     // 895
// If arrays are found in the middle, this can have more than one element, since                                       // 896
// we "branch". When we "branch", if there are more key segments to look up,                                           // 897
// then we only pursue branches that are plain objects (not arrays or scalars).                                        // 898
// This means we can actually end up with no branches!                                                                 // 899
//                                                                                                                     // 900
// We do *NOT* branch on arrays that are found at the end (ie, at the last                                             // 901
// dotted member of the key). We just return that array; if you want to                                                // 902
// effectively "branch" over the array's values, post-process the lookup                                               // 903
// function with expandArraysInBranches.                                                                               // 904
//                                                                                                                     // 905
// Each branch is an object with keys:                                                                                 // 906
//  - value: the value at the branch                                                                                   // 907
//  - dontIterate: an optional bool; if true, it means that 'value' is an array                                        // 908
//    that expandArraysInBranches should NOT expand. This specifically happens                                         // 909
//    when there is a numeric index in the key, and ensures the                                                        // 910
//    perhaps-surprising MongoDB behavior where {'a.0': 5} does NOT                                                    // 911
//    match {a: [[5]]}.                                                                                                // 912
//  - arrayIndices: if any array indexing was done during lookup (either due to                                        // 913
//    explicit numeric indices or implicit branching), this will be an array of                                        // 914
//    the array indices used, from outermost to innermost; it is falsey or                                             // 915
//    absent if no array index is used. If an explicit numeric index is used,                                          // 916
//    the index will be followed in arrayIndices by the string 'x'.                                                    // 917
//                                                                                                                     // 918
//    Note: arrayIndices is used for two purposes. First, it is used to                                                // 919
//    implement the '$' modifier feature, which only ever looks at its first                                           // 920
//    element.                                                                                                         // 921
//                                                                                                                     // 922
//    Second, it is used for sort key generation, which needs to be able to tell                                       // 923
//    the difference between different paths. Moreover, it needs to                                                    // 924
//    differentiate between explicit and implicit branching, which is why                                              // 925
//    there's the somewhat hacky 'x' entry: this means that explicit and                                               // 926
//    implicit array lookups will have different full arrayIndices paths. (That                                        // 927
//    code only requires that different paths have different arrayIndices; it                                          // 928
//    doesn't actually "parse" arrayIndices. As an alternative, arrayIndices                                           // 929
//    could contain objects with flags like "implicit", but I think that only                                          // 930
//    makes the code surrounding them more complex.)                                                                   // 931
//                                                                                                                     // 932
//    (By the way, this field ends up getting passed around a lot without                                              // 933
//    cloning, so never mutate any arrayIndices field/var in this package!)                                            // 934
//                                                                                                                     // 935
//                                                                                                                     // 936
// At the top level, you may only pass in a plain object or array.                                                     // 937
//                                                                                                                     // 938
// See the test 'minimongo - lookup' for some examples of what lookup functions                                        // 939
// return.                                                                                                             // 940
                                                                                                                       //
makeLookupFunction = function (key, options) {                                                                         // 941
  options = options || {};                                                                                             // 942
  var parts = key.split('.');                                                                                          // 943
  var firstPart = parts.length ? parts[0] : '';                                                                        // 944
  var firstPartIsNumeric = isNumericKey(firstPart);                                                                    // 945
  var nextPartIsNumeric = parts.length >= 2 && isNumericKey(parts[1]);                                                 // 946
  var lookupRest;                                                                                                      // 947
                                                                                                                       //
  if (parts.length > 1) {                                                                                              // 948
    lookupRest = makeLookupFunction(parts.slice(1).join('.'));                                                         // 949
  }                                                                                                                    // 950
                                                                                                                       //
  var omitUnnecessaryFields = function (retVal) {                                                                      // 952
    if (!retVal.dontIterate) delete retVal.dontIterate;                                                                // 953
    if (retVal.arrayIndices && !retVal.arrayIndices.length) delete retVal.arrayIndices;                                // 955
    return retVal;                                                                                                     // 957
  }; // Doc will always be a plain object or an array.                                                                 // 958
  // apply an explicit numeric index, an array.                                                                        // 961
                                                                                                                       //
                                                                                                                       //
  return function (doc, arrayIndices) {                                                                                // 962
    if (!arrayIndices) arrayIndices = [];                                                                              // 963
                                                                                                                       //
    if (isArray(doc)) {                                                                                                // 966
      // If we're being asked to do an invalid lookup into an array (non-integer                                       // 967
      // or out-of-bounds), return no results (which is different from returning                                       // 968
      // a single undefined result, in that `null` equality checks won't match).                                       // 969
      if (!(firstPartIsNumeric && firstPart < doc.length)) return []; // Remember that we used this array index. Include an 'x' to indicate that
      // the previous index came from being considered as an explicit array                                            // 974
      // index (not branching).                                                                                        // 975
                                                                                                                       //
      arrayIndices = arrayIndices.concat(+firstPart, 'x');                                                             // 976
    } // Do our first lookup.                                                                                          // 977
                                                                                                                       //
                                                                                                                       //
    var firstLevel = doc[firstPart]; // If there is no deeper to dig, return what we found.                            // 980
    //                                                                                                                 // 983
    // If what we found is an array, most value selectors will choose to treat                                         // 984
    // the elements of the array as matchable values in their own right, but                                           // 985
    // that's done outside of the lookup function. (Exceptions to this are $size                                       // 986
    // and stuff relating to $elemMatch.  eg, {a: {$size: 2}} does not match {a:                                       // 987
    // [[1, 2]]}.)                                                                                                     // 988
    //                                                                                                                 // 989
    // That said, if we just did an *explicit* array lookup (on doc) to find                                           // 990
    // firstLevel, and firstLevel is an array too, we do NOT want value                                                // 991
    // selectors to iterate over it.  eg, {'a.0': 5} does not match {a: [[5]]}.                                        // 992
    // So in that case, we mark the return value as "don't iterate".                                                   // 993
                                                                                                                       //
    if (!lookupRest) {                                                                                                 // 994
      return [omitUnnecessaryFields({                                                                                  // 995
        value: firstLevel,                                                                                             // 996
        dontIterate: isArray(doc) && isArray(firstLevel),                                                              // 997
        arrayIndices: arrayIndices                                                                                     // 998
      })];                                                                                                             // 995
    } // We need to dig deeper.  But if we can't, because what we've found is not                                      // 999
    // an array or plain object, we're done. If we just did a numeric index into                                       // 1002
    // an array, we return nothing here (this is a change in Mongo 2.5 from                                            // 1003
    // Mongo 2.4, where {'a.0.b': null} stopped matching {a: [5]}). Otherwise,                                         // 1004
    // return a single `undefined` (which can, for example, match via equality                                         // 1005
    // with `null`).                                                                                                   // 1006
                                                                                                                       //
                                                                                                                       //
    if (!isIndexable(firstLevel)) {                                                                                    // 1007
      if (isArray(doc)) return [];                                                                                     // 1008
      return [omitUnnecessaryFields({                                                                                  // 1010
        value: undefined,                                                                                              // 1010
        arrayIndices: arrayIndices                                                                                     // 1011
      })];                                                                                                             // 1010
    }                                                                                                                  // 1012
                                                                                                                       //
    var result = [];                                                                                                   // 1014
                                                                                                                       //
    var appendToResult = function (more) {                                                                             // 1015
      Array.prototype.push.apply(result, more);                                                                        // 1016
    }; // Dig deeper: look up the rest of the parts on whatever we've found.                                           // 1017
    // (lookupRest is smart enough to not try to do invalid lookups into                                               // 1020
    // firstLevel if it's an array.)                                                                                   // 1021
                                                                                                                       //
                                                                                                                       //
    appendToResult(lookupRest(firstLevel, arrayIndices)); // If we found an array, then in *addition* to potentially treating the next
    // part as a literal integer lookup, we should also "branch": try to look up                                       // 1025
    // the rest of the parts on each array element in parallel.                                                        // 1026
    //                                                                                                                 // 1027
    // In this case, we *only* dig deeper into array elements that are plain                                           // 1028
    // objects. (Recall that we only got this far if we have further to dig.)                                          // 1029
    // This makes sense: we certainly don't dig deeper into non-indexable                                              // 1030
    // objects. And it would be weird to dig into an array: it's simpler to have                                       // 1031
    // a rule that explicit integer indexes only apply to an outer array, not to                                       // 1032
    // an array you find after a branching search.                                                                     // 1033
    //                                                                                                                 // 1034
    // In the special case of a numeric part in a *sort selector* (not a query                                         // 1035
    // selector), we skip the branching: we ONLY allow the numeric part to mean                                        // 1036
    // "look up this index" in that case, not "also look up this index in all                                          // 1037
    // the elements of the array".                                                                                     // 1038
                                                                                                                       //
    if (isArray(firstLevel) && !(nextPartIsNumeric && options.forSort)) {                                              // 1039
      _.each(firstLevel, function (branch, arrayIndex) {                                                               // 1040
        if (isPlainObject(branch)) {                                                                                   // 1041
          appendToResult(lookupRest(branch, arrayIndices.concat(arrayIndex)));                                         // 1042
        }                                                                                                              // 1045
      });                                                                                                              // 1046
    }                                                                                                                  // 1047
                                                                                                                       //
    return result;                                                                                                     // 1049
  };                                                                                                                   // 1050
};                                                                                                                     // 1051
                                                                                                                       //
MinimongoTest.makeLookupFunction = makeLookupFunction;                                                                 // 1052
                                                                                                                       //
expandArraysInBranches = function (branches, skipTheArrays) {                                                          // 1054
  var branchesOut = [];                                                                                                // 1055
                                                                                                                       //
  _.each(branches, function (branch) {                                                                                 // 1056
    var thisIsArray = isArray(branch.value); // We include the branch itself, *UNLESS* we it's an array that we're going
    // to iterate and we're told to skip arrays.  (That's right, we include some                                       // 1059
    // arrays even skipTheArrays is true: these are arrays that were found via                                         // 1060
    // explicit numerical indices.)                                                                                    // 1061
                                                                                                                       //
    if (!(skipTheArrays && thisIsArray && !branch.dontIterate)) {                                                      // 1062
      branchesOut.push({                                                                                               // 1063
        value: branch.value,                                                                                           // 1064
        arrayIndices: branch.arrayIndices                                                                              // 1065
      });                                                                                                              // 1063
    }                                                                                                                  // 1067
                                                                                                                       //
    if (thisIsArray && !branch.dontIterate) {                                                                          // 1068
      _.each(branch.value, function (leaf, i) {                                                                        // 1069
        branchesOut.push({                                                                                             // 1070
          value: leaf,                                                                                                 // 1071
          arrayIndices: (branch.arrayIndices || []).concat(i)                                                          // 1072
        });                                                                                                            // 1070
      });                                                                                                              // 1074
    }                                                                                                                  // 1075
  });                                                                                                                  // 1076
                                                                                                                       //
  return branchesOut;                                                                                                  // 1077
};                                                                                                                     // 1078
                                                                                                                       //
var nothingMatcher = function (docOrBranchedValues) {                                                                  // 1080
  return {                                                                                                             // 1081
    result: false                                                                                                      // 1081
  };                                                                                                                   // 1081
};                                                                                                                     // 1082
                                                                                                                       //
var everythingMatcher = function (docOrBranchedValues) {                                                               // 1084
  return {                                                                                                             // 1085
    result: true                                                                                                       // 1085
  };                                                                                                                   // 1085
}; // NB: We are cheating and using this function to implement "AND" for both                                          // 1086
// "document matchers" and "branched matchers". They both return result objects                                        // 1090
// but the argument is different: for the former it's a whole doc, whereas for                                         // 1091
// the latter it's an array of "branched values".                                                                      // 1092
                                                                                                                       //
                                                                                                                       //
var andSomeMatchers = function (subMatchers) {                                                                         // 1093
  if (subMatchers.length === 0) return everythingMatcher;                                                              // 1094
  if (subMatchers.length === 1) return subMatchers[0];                                                                 // 1096
  return function (docOrBranches) {                                                                                    // 1099
    var ret = {};                                                                                                      // 1100
    ret.result = _.all(subMatchers, function (f) {                                                                     // 1101
      var subResult = f(docOrBranches); // Copy a 'distance' number out of the first sub-matcher that has              // 1102
      // one. Yes, this means that if there are multiple $near fields in a                                             // 1104
      // query, something arbitrary happens; this appears to be consistent with                                        // 1105
      // Mongo.                                                                                                        // 1106
                                                                                                                       //
      if (subResult.result && subResult.distance !== undefined && ret.distance === undefined) {                        // 1107
        ret.distance = subResult.distance;                                                                             // 1109
      } // Similarly, propagate arrayIndices from sub-matchers... but to match                                         // 1110
      // MongoDB behavior, this time the *last* sub-matcher with arrayIndices                                          // 1112
      // wins.                                                                                                         // 1113
                                                                                                                       //
                                                                                                                       //
      if (subResult.result && subResult.arrayIndices) {                                                                // 1114
        ret.arrayIndices = subResult.arrayIndices;                                                                     // 1115
      }                                                                                                                // 1116
                                                                                                                       //
      return subResult.result;                                                                                         // 1117
    }); // If we didn't actually match, forget any extra metadata we came up with.                                     // 1118
                                                                                                                       //
    if (!ret.result) {                                                                                                 // 1121
      delete ret.distance;                                                                                             // 1122
      delete ret.arrayIndices;                                                                                         // 1123
    }                                                                                                                  // 1124
                                                                                                                       //
    return ret;                                                                                                        // 1125
  };                                                                                                                   // 1126
};                                                                                                                     // 1127
                                                                                                                       //
var andDocumentMatchers = andSomeMatchers;                                                                             // 1129
var andBranchedMatchers = andSomeMatchers; // helpers used by compiled selector code                                   // 1130
                                                                                                                       //
LocalCollection._f = {                                                                                                 // 1134
  // XXX for _all and _in, consider building 'inquery' at compile time..                                               // 1135
  _type: function (v) {                                                                                                // 1137
    if (typeof v === "number") return 1;                                                                               // 1138
    if (typeof v === "string") return 2;                                                                               // 1140
    if (typeof v === "boolean") return 8;                                                                              // 1142
    if (isArray(v)) return 4;                                                                                          // 1144
    if (v === null) return 10;                                                                                         // 1146
    if (v instanceof RegExp) // note that typeof(/x/) === "object"                                                     // 1148
      return 11;                                                                                                       // 1150
    if (typeof v === "function") return 13;                                                                            // 1151
    if (v instanceof Date) return 9;                                                                                   // 1153
    if (EJSON.isBinary(v)) return 5;                                                                                   // 1155
    if (v instanceof MongoID.ObjectID) return 7;                                                                       // 1157
    return 3; // object                                                                                                // 1159
    // XXX support some/all of these:                                                                                  // 1161
    // 14, symbol                                                                                                      // 1162
    // 15, javascript code with scope                                                                                  // 1163
    // 16, 18: 32-bit/64-bit integer                                                                                   // 1164
    // 17, timestamp                                                                                                   // 1165
    // 255, minkey                                                                                                     // 1166
    // 127, maxkey                                                                                                     // 1167
  },                                                                                                                   // 1168
  // deep equality test: use for literal document and array matches                                                    // 1170
  _equal: function (a, b) {                                                                                            // 1171
    return EJSON.equals(a, b, {                                                                                        // 1172
      keyOrderSensitive: true                                                                                          // 1172
    });                                                                                                                // 1172
  },                                                                                                                   // 1173
  // maps a type code to a value that can be used to sort values of                                                    // 1175
  // different types                                                                                                   // 1176
  _typeorder: function (t) {                                                                                           // 1177
    // http://www.mongodb.org/display/DOCS/What+is+the+Compare+Order+for+BSON+Types                                    // 1178
    // XXX what is the correct sort position for Javascript code?                                                      // 1179
    // ('100' in the matrix below)                                                                                     // 1180
    // XXX minkey/maxkey                                                                                               // 1181
    return [-1, // (not a type)                                                                                        // 1182
    1, // number                                                                                                       // 1183
    2, // string                                                                                                       // 1184
    3, // object                                                                                                       // 1185
    4, // array                                                                                                        // 1186
    5, // binary                                                                                                       // 1187
    -1, // deprecated                                                                                                  // 1188
    6, // ObjectID                                                                                                     // 1189
    7, // bool                                                                                                         // 1190
    8, // Date                                                                                                         // 1191
    0, // null                                                                                                         // 1192
    9, // RegExp                                                                                                       // 1193
    -1, // deprecated                                                                                                  // 1194
    100, // JS code                                                                                                    // 1195
    2, // deprecated (symbol)                                                                                          // 1196
    100, // JS code                                                                                                    // 1197
    1, // 32-bit int                                                                                                   // 1198
    8, // Mongo timestamp                                                                                              // 1199
    1 // 64-bit int                                                                                                    // 1200
    ][t];                                                                                                              // 1182
  },                                                                                                                   // 1202
  // compare two values of unknown type according to BSON ordering                                                     // 1204
  // semantics. (as an extension, consider 'undefined' to be less than                                                 // 1205
  // any other value.) return negative if a is less, positive if b is                                                  // 1206
  // less, or 0 if equal                                                                                               // 1207
  _cmp: function (a, b) {                                                                                              // 1208
    if (a === undefined) return b === undefined ? 0 : -1;                                                              // 1209
    if (b === undefined) return 1;                                                                                     // 1211
                                                                                                                       //
    var ta = LocalCollection._f._type(a);                                                                              // 1213
                                                                                                                       //
    var tb = LocalCollection._f._type(b);                                                                              // 1214
                                                                                                                       //
    var oa = LocalCollection._f._typeorder(ta);                                                                        // 1215
                                                                                                                       //
    var ob = LocalCollection._f._typeorder(tb);                                                                        // 1216
                                                                                                                       //
    if (oa !== ob) return oa < ob ? -1 : 1;                                                                            // 1217
    if (ta !== tb) // XXX need to implement this if we implement Symbol or integers, or                                // 1219
      // Timestamp                                                                                                     // 1221
      throw Error("Missing type coercion logic in _cmp");                                                              // 1222
                                                                                                                       //
    if (ta === 7) {                                                                                                    // 1223
      // ObjectID                                                                                                      // 1223
      // Convert to string.                                                                                            // 1224
      ta = tb = 2;                                                                                                     // 1225
      a = a.toHexString();                                                                                             // 1226
      b = b.toHexString();                                                                                             // 1227
    }                                                                                                                  // 1228
                                                                                                                       //
    if (ta === 9) {                                                                                                    // 1229
      // Date                                                                                                          // 1229
      // Convert to millis.                                                                                            // 1230
      ta = tb = 1;                                                                                                     // 1231
      a = a.getTime();                                                                                                 // 1232
      b = b.getTime();                                                                                                 // 1233
    }                                                                                                                  // 1234
                                                                                                                       //
    if (ta === 1) // double                                                                                            // 1236
      return a - b;                                                                                                    // 1237
    if (tb === 2) // string                                                                                            // 1238
      return a < b ? -1 : a === b ? 0 : 1;                                                                             // 1239
                                                                                                                       //
    if (ta === 3) {                                                                                                    // 1240
      // Object                                                                                                        // 1240
      // this could be much more efficient in the expected case ...                                                    // 1241
      var to_array = function (obj) {                                                                                  // 1242
        var ret = [];                                                                                                  // 1243
                                                                                                                       //
        for (var key in meteorBabelHelpers.sanitizeForInObject(obj)) {                                                 // 1244
          ret.push(key);                                                                                               // 1245
          ret.push(obj[key]);                                                                                          // 1246
        }                                                                                                              // 1247
                                                                                                                       //
        return ret;                                                                                                    // 1248
      };                                                                                                               // 1249
                                                                                                                       //
      return LocalCollection._f._cmp(to_array(a), to_array(b));                                                        // 1250
    }                                                                                                                  // 1251
                                                                                                                       //
    if (ta === 4) {                                                                                                    // 1252
      // Array                                                                                                         // 1252
      for (var i = 0;; i++) {                                                                                          // 1253
        if (i === a.length) return i === b.length ? 0 : -1;                                                            // 1254
        if (i === b.length) return 1;                                                                                  // 1256
                                                                                                                       //
        var s = LocalCollection._f._cmp(a[i], b[i]);                                                                   // 1258
                                                                                                                       //
        if (s !== 0) return s;                                                                                         // 1259
      }                                                                                                                // 1261
    }                                                                                                                  // 1262
                                                                                                                       //
    if (ta === 5) {                                                                                                    // 1263
      // binary                                                                                                        // 1263
      // Surprisingly, a small binary blob is always less than a large one in                                          // 1264
      // Mongo.                                                                                                        // 1265
      if (a.length !== b.length) return a.length - b.length;                                                           // 1266
                                                                                                                       //
      for (i = 0; i < a.length; i++) {                                                                                 // 1268
        if (a[i] < b[i]) return -1;                                                                                    // 1269
        if (a[i] > b[i]) return 1;                                                                                     // 1271
      }                                                                                                                // 1273
                                                                                                                       //
      return 0;                                                                                                        // 1274
    }                                                                                                                  // 1275
                                                                                                                       //
    if (ta === 8) {                                                                                                    // 1276
      // boolean                                                                                                       // 1276
      if (a) return b ? 0 : 1;                                                                                         // 1277
      return b ? -1 : 0;                                                                                               // 1278
    }                                                                                                                  // 1279
                                                                                                                       //
    if (ta === 10) // null                                                                                             // 1280
      return 0;                                                                                                        // 1281
    if (ta === 11) // regexp                                                                                           // 1282
      throw Error("Sorting not supported on regular expression"); // XXX                                               // 1283
    // 13: javascript code                                                                                             // 1284
    // 14: symbol                                                                                                      // 1285
    // 15: javascript code with scope                                                                                  // 1286
    // 16: 32-bit integer                                                                                              // 1287
    // 17: timestamp                                                                                                   // 1288
    // 18: 64-bit integer                                                                                              // 1289
    // 255: minkey                                                                                                     // 1290
    // 127: maxkey                                                                                                     // 1291
                                                                                                                       //
    if (ta === 13) // javascript code                                                                                  // 1292
      throw Error("Sorting not supported on Javascript code"); // XXX                                                  // 1293
                                                                                                                       //
    throw Error("Unknown type to sort");                                                                               // 1294
  }                                                                                                                    // 1295
}; // Oddball function used by upsert.                                                                                 // 1134
                                                                                                                       //
LocalCollection._removeDollarOperators = function (selector) {                                                         // 1299
  var selectorDoc = {};                                                                                                // 1300
                                                                                                                       //
  for (var k in meteorBabelHelpers.sanitizeForInObject(selector)) {                                                    // 1301
    if (k.substr(0, 1) !== '$') selectorDoc[k] = selector[k];                                                          // 1302
  }                                                                                                                    // 1301
                                                                                                                       //
  return selectorDoc;                                                                                                  // 1304
};                                                                                                                     // 1305
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"sort.js":["babel-runtime/helpers/typeof",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/minimongo/sort.js                                                                                          //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _typeof2 = require("babel-runtime/helpers/typeof");                                                                //
                                                                                                                       //
var _typeof3 = _interopRequireDefault(_typeof2);                                                                       //
                                                                                                                       //
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }                      //
                                                                                                                       //
// Give a sort spec, which can be in any of these forms:                                                               // 1
//   {"key1": 1, "key2": -1}                                                                                           // 2
//   [["key1", "asc"], ["key2", "desc"]]                                                                               // 3
//   ["key1", ["key2", "desc"]]                                                                                        // 4
//                                                                                                                     // 5
// (.. with the first form being dependent on the key enumeration                                                      // 6
// behavior of your javascript VM, which usually does what you mean in                                                 // 7
// this case if the key names don't look like integers ..)                                                             // 8
//                                                                                                                     // 9
// return a function that takes two objects, and returns -1 if the                                                     // 10
// first object comes first in order, 1 if the second object comes                                                     // 11
// first, or 0 if neither object comes before the other.                                                               // 12
Minimongo.Sorter = function (spec, options) {                                                                          // 14
  var self = this;                                                                                                     // 15
  options = options || {};                                                                                             // 16
  self._sortSpecParts = [];                                                                                            // 18
  self._sortFunction = null;                                                                                           // 19
                                                                                                                       //
  var addSpecPart = function (path, ascending) {                                                                       // 21
    if (!path) throw Error("sort keys must be non-empty");                                                             // 22
    if (path.charAt(0) === '$') throw Error("unsupported sort key: " + path);                                          // 24
                                                                                                                       //
    self._sortSpecParts.push({                                                                                         // 26
      path: path,                                                                                                      // 27
      lookup: makeLookupFunction(path, {                                                                               // 28
        forSort: true                                                                                                  // 28
      }),                                                                                                              // 28
      ascending: ascending                                                                                             // 29
    });                                                                                                                // 26
  };                                                                                                                   // 31
                                                                                                                       //
  if (spec instanceof Array) {                                                                                         // 33
    for (var i = 0; i < spec.length; i++) {                                                                            // 34
      if (typeof spec[i] === "string") {                                                                               // 35
        addSpecPart(spec[i], true);                                                                                    // 36
      } else {                                                                                                         // 37
        addSpecPart(spec[i][0], spec[i][1] !== "desc");                                                                // 38
      }                                                                                                                // 39
    }                                                                                                                  // 40
  } else if ((typeof spec === "undefined" ? "undefined" : (0, _typeof3.default)(spec)) === "object") {                 // 41
    _.each(spec, function (value, key) {                                                                               // 42
      addSpecPart(key, value >= 0);                                                                                    // 43
    });                                                                                                                // 44
  } else if (typeof spec === "function") {                                                                             // 45
    self._sortFunction = spec;                                                                                         // 46
  } else {                                                                                                             // 47
    throw Error("Bad sort specification: " + JSON.stringify(spec));                                                    // 48
  } // If a function is specified for sorting, we skip the rest.                                                       // 49
                                                                                                                       //
                                                                                                                       //
  if (self._sortFunction) return; // To implement affectedByModifier, we piggy-back on top of Matcher's                // 52
  // affectedByModifier code; we create a selector that is affected by the same                                        // 56
  // modifiers as this sort order. This is only implemented on the server.                                             // 57
                                                                                                                       //
  if (self.affectedByModifier) {                                                                                       // 58
    var selector = {};                                                                                                 // 59
                                                                                                                       //
    _.each(self._sortSpecParts, function (spec) {                                                                      // 60
      selector[spec.path] = 1;                                                                                         // 61
    });                                                                                                                // 62
                                                                                                                       //
    self._selectorForAffectedByModifier = new Minimongo.Matcher(selector);                                             // 63
  }                                                                                                                    // 64
                                                                                                                       //
  self._keyComparator = composeComparators(_.map(self._sortSpecParts, function (spec, i) {                             // 66
    return self._keyFieldComparator(i);                                                                                // 68
  })); // If you specify a matcher for this Sorter, _keyFilter may be set to a                                         // 69
  // function which selects whether or not a given "sort key" (tuple of values                                         // 72
  // for the different sort spec fields) is compatible with the selector.                                              // 73
                                                                                                                       //
  self._keyFilter = null;                                                                                              // 74
  options.matcher && self._useWithMatcher(options.matcher);                                                            // 75
}; // In addition to these methods, sorter_project.js defines combineIntoProjection                                    // 76
// on the server only.                                                                                                 // 79
                                                                                                                       //
                                                                                                                       //
_.extend(Minimongo.Sorter.prototype, {                                                                                 // 80
  getComparator: function (options) {                                                                                  // 81
    var self = this; // If we have no distances, just use the comparator from the source                               // 82
    // specification (which defaults to "everything is equal".                                                         // 85
                                                                                                                       //
    if (!options || !options.distances) {                                                                              // 86
      return self._getBaseComparator();                                                                                // 87
    }                                                                                                                  // 88
                                                                                                                       //
    var distances = options.distances; // Return a comparator which first tries the sort specification, and if that    // 90
    // says "it's equal", breaks ties using $near distances.                                                           // 93
                                                                                                                       //
    return composeComparators([self._getBaseComparator(), function (a, b) {                                            // 94
      if (!distances.has(a._id)) throw Error("Missing distance for " + a._id);                                         // 95
      if (!distances.has(b._id)) throw Error("Missing distance for " + b._id);                                         // 97
      return distances.get(a._id) - distances.get(b._id);                                                              // 99
    }]);                                                                                                               // 100
  },                                                                                                                   // 101
  _getPaths: function () {                                                                                             // 103
    var self = this;                                                                                                   // 104
    return _.pluck(self._sortSpecParts, 'path');                                                                       // 105
  },                                                                                                                   // 106
  // Finds the minimum key from the doc, according to the sort specs.  (We say                                         // 108
  // "minimum" here but this is with respect to the sort spec, so "descending"                                         // 109
  // sort fields mean we're finding the max for that field.)                                                           // 110
  //                                                                                                                   // 111
  // Note that this is NOT "find the minimum value of the first field, the                                             // 112
  // minimum value of the second field, etc"... it's "choose the                                                       // 113
  // lexicographically minimum value of the key vector, allowing only keys which                                       // 114
  // you can find along the same paths".  ie, for a doc {a: [{x: 0, y: 5}, {x:                                         // 115
  // 1, y: 3}]} with sort spec {'a.x': 1, 'a.y': 1}, the only keys are [0,5] and                                       // 116
  // [1,3], and the minimum key is [0,5]; notably, [0,3] is NOT a key.                                                 // 117
  _getMinKeyFromDoc: function (doc) {                                                                                  // 118
    var self = this;                                                                                                   // 119
    var minKey = null;                                                                                                 // 120
                                                                                                                       //
    self._generateKeysFromDoc(doc, function (key) {                                                                    // 122
      if (!self._keyCompatibleWithSelector(key)) return;                                                               // 123
                                                                                                                       //
      if (minKey === null) {                                                                                           // 126
        minKey = key;                                                                                                  // 127
        return;                                                                                                        // 128
      }                                                                                                                // 129
                                                                                                                       //
      if (self._compareKeys(key, minKey) < 0) {                                                                        // 130
        minKey = key;                                                                                                  // 131
      }                                                                                                                // 132
    }); // This could happen if our key filter somehow filters out all the keys even                                   // 133
    // though somehow the selector matches.                                                                            // 136
                                                                                                                       //
                                                                                                                       //
    if (minKey === null) throw Error("sort selector found no keys in doc?");                                           // 137
    return minKey;                                                                                                     // 139
  },                                                                                                                   // 140
  _keyCompatibleWithSelector: function (key) {                                                                         // 142
    var self = this;                                                                                                   // 143
    return !self._keyFilter || self._keyFilter(key);                                                                   // 144
  },                                                                                                                   // 145
  // Iterates over each possible "key" from doc (ie, over each branch), calling                                        // 147
  // 'cb' with the key.                                                                                                // 148
  _generateKeysFromDoc: function (doc, cb) {                                                                           // 149
    var self = this;                                                                                                   // 150
    if (self._sortSpecParts.length === 0) throw new Error("can't generate keys without a spec"); // maps index -> ({'' -> value} or {path -> value})
                                                                                                                       //
    var valuesByIndexAndPath = [];                                                                                     // 156
                                                                                                                       //
    var pathFromIndices = function (indices) {                                                                         // 158
      return indices.join(',') + ',';                                                                                  // 159
    };                                                                                                                 // 160
                                                                                                                       //
    var knownPaths = null;                                                                                             // 162
                                                                                                                       //
    _.each(self._sortSpecParts, function (spec, whichField) {                                                          // 164
      // Expand any leaf arrays that we find, and ignore those arrays                                                  // 165
      // themselves.  (We never sort based on an array itself.)                                                        // 166
      var branches = expandArraysInBranches(spec.lookup(doc), true); // If there are no values for a key (eg, key goes to an empty array),
      // pretend we found one null value.                                                                              // 170
                                                                                                                       //
      if (!branches.length) branches = [{                                                                              // 171
        value: null                                                                                                    // 172
      }];                                                                                                              // 172
      var usedPaths = false;                                                                                           // 174
      valuesByIndexAndPath[whichField] = {};                                                                           // 175
                                                                                                                       //
      _.each(branches, function (branch) {                                                                             // 176
        if (!branch.arrayIndices) {                                                                                    // 177
          // If there are no array indices for a branch, then it must be the                                           // 178
          // only branch, because the only thing that produces multiple branches                                       // 179
          // is the use of arrays.                                                                                     // 180
          if (branches.length > 1) throw Error("multiple branches but no array used?");                                // 181
          valuesByIndexAndPath[whichField][''] = branch.value;                                                         // 183
          return;                                                                                                      // 184
        }                                                                                                              // 185
                                                                                                                       //
        usedPaths = true;                                                                                              // 187
        var path = pathFromIndices(branch.arrayIndices);                                                               // 188
        if (_.has(valuesByIndexAndPath[whichField], path)) throw Error("duplicate path: " + path);                     // 189
        valuesByIndexAndPath[whichField][path] = branch.value; // If two sort fields both go into arrays, they have to go into the
        // exact same arrays and we have to find the same paths.  This is                                              // 194
        // roughly the same condition that makes MongoDB throw this strange                                            // 195
        // error message.  eg, the main thing is that if sort spec is {a: 1,                                           // 196
        // b:1} then a and b cannot both be arrays.                                                                    // 197
        //                                                                                                             // 198
        // (In MongoDB it seems to be OK to have {a: 1, 'a.x.y': 1} where 'a'                                          // 199
        // and 'a.x.y' are both arrays, but we don't allow this for now.                                               // 200
        // #NestedArraySort                                                                                            // 201
        // XXX achieve full compatibility here                                                                         // 202
                                                                                                                       //
        if (knownPaths && !_.has(knownPaths, path)) {                                                                  // 203
          throw Error("cannot index parallel arrays");                                                                 // 204
        }                                                                                                              // 205
      });                                                                                                              // 206
                                                                                                                       //
      if (knownPaths) {                                                                                                // 208
        // Similarly to above, paths must match everywhere, unless this is a                                           // 209
        // non-array field.                                                                                            // 210
        if (!_.has(valuesByIndexAndPath[whichField], '') && _.size(knownPaths) !== _.size(valuesByIndexAndPath[whichField])) {
          throw Error("cannot index parallel arrays!");                                                                // 213
        }                                                                                                              // 214
      } else if (usedPaths) {                                                                                          // 215
        knownPaths = {};                                                                                               // 216
                                                                                                                       //
        _.each(valuesByIndexAndPath[whichField], function (x, path) {                                                  // 217
          knownPaths[path] = true;                                                                                     // 218
        });                                                                                                            // 219
      }                                                                                                                // 220
    });                                                                                                                // 221
                                                                                                                       //
    if (!knownPaths) {                                                                                                 // 223
      // Easy case: no use of arrays.                                                                                  // 224
      var soleKey = _.map(valuesByIndexAndPath, function (values) {                                                    // 225
        if (!_.has(values, '')) throw Error("no value in sole key case?");                                             // 226
        return values[''];                                                                                             // 228
      });                                                                                                              // 229
                                                                                                                       //
      cb(soleKey);                                                                                                     // 230
      return;                                                                                                          // 231
    }                                                                                                                  // 232
                                                                                                                       //
    _.each(knownPaths, function (x, path) {                                                                            // 234
      var key = _.map(valuesByIndexAndPath, function (values) {                                                        // 235
        if (_.has(values, '')) return values[''];                                                                      // 236
        if (!_.has(values, path)) throw Error("missing path?");                                                        // 238
        return values[path];                                                                                           // 240
      });                                                                                                              // 241
                                                                                                                       //
      cb(key);                                                                                                         // 242
    });                                                                                                                // 243
  },                                                                                                                   // 244
  // Takes in two keys: arrays whose lengths match the number of spec                                                  // 246
  // parts. Returns negative, 0, or positive based on using the sort spec to                                           // 247
  // compare fields.                                                                                                   // 248
  _compareKeys: function (key1, key2) {                                                                                // 249
    var self = this;                                                                                                   // 250
                                                                                                                       //
    if (key1.length !== self._sortSpecParts.length || key2.length !== self._sortSpecParts.length) {                    // 251
      throw Error("Key has wrong length");                                                                             // 253
    }                                                                                                                  // 254
                                                                                                                       //
    return self._keyComparator(key1, key2);                                                                            // 256
  },                                                                                                                   // 257
  // Given an index 'i', returns a comparator that compares two key arrays based                                       // 259
  // on field 'i'.                                                                                                     // 260
  _keyFieldComparator: function (i) {                                                                                  // 261
    var self = this;                                                                                                   // 262
    var invert = !self._sortSpecParts[i].ascending;                                                                    // 263
    return function (key1, key2) {                                                                                     // 264
      var compare = LocalCollection._f._cmp(key1[i], key2[i]);                                                         // 265
                                                                                                                       //
      if (invert) compare = -compare;                                                                                  // 266
      return compare;                                                                                                  // 268
    };                                                                                                                 // 269
  },                                                                                                                   // 270
  // Returns a comparator that represents the sort specification (but not                                              // 272
  // including a possible geoquery distance tie-breaker).                                                              // 273
  _getBaseComparator: function () {                                                                                    // 274
    var self = this;                                                                                                   // 275
    if (self._sortFunction) return self._sortFunction; // If we're only sorting on geoquery distance and no specs, just say
    // everything is equal.                                                                                            // 281
                                                                                                                       //
    if (!self._sortSpecParts.length) {                                                                                 // 282
      return function (doc1, doc2) {                                                                                   // 283
        return 0;                                                                                                      // 284
      };                                                                                                               // 285
    }                                                                                                                  // 286
                                                                                                                       //
    return function (doc1, doc2) {                                                                                     // 288
      var key1 = self._getMinKeyFromDoc(doc1);                                                                         // 289
                                                                                                                       //
      var key2 = self._getMinKeyFromDoc(doc2);                                                                         // 290
                                                                                                                       //
      return self._compareKeys(key1, key2);                                                                            // 291
    };                                                                                                                 // 292
  },                                                                                                                   // 293
  // In MongoDB, if you have documents                                                                                 // 295
  //    {_id: 'x', a: [1, 10]} and                                                                                     // 296
  //    {_id: 'y', a: [5, 15]},                                                                                        // 297
  // then C.find({}, {sort: {a: 1}}) puts x before y (1 comes before 5).                                               // 298
  // But  C.find({a: {$gt: 3}}, {sort: {a: 1}}) puts y before x (1 does not                                            // 299
  // match the selector, and 5 comes before 10).                                                                       // 300
  //                                                                                                                   // 301
  // The way this works is pretty subtle!  For example, if the documents                                               // 302
  // are instead {_id: 'x', a: [{x: 1}, {x: 10}]}) and                                                                 // 303
  //             {_id: 'y', a: [{x: 5}, {x: 15}]}),                                                                    // 304
  // then C.find({'a.x': {$gt: 3}}, {sort: {'a.x': 1}}) and                                                            // 305
  //      C.find({a: {$elemMatch: {x: {$gt: 3}}}}, {sort: {'a.x': 1}})                                                 // 306
  // both follow this rule (y before x).  (ie, you do have to apply this                                               // 307
  // through $elemMatch.)                                                                                              // 308
  //                                                                                                                   // 309
  // So if you pass a matcher to this sorter's constructor, we will attempt to                                         // 310
  // skip sort keys that don't match the selector. The logic here is pretty                                            // 311
  // subtle and undocumented; we've gotten as close as we can figure out based                                         // 312
  // on our understanding of Mongo's behavior.                                                                         // 313
  _useWithMatcher: function (matcher) {                                                                                // 314
    var self = this;                                                                                                   // 315
    if (self._keyFilter) throw Error("called _useWithMatcher twice?"); // If we are only sorting by distance, then we're not going to bother to
    // build a key filter.                                                                                             // 321
    // XXX figure out how geoqueries interact with this stuff                                                          // 322
                                                                                                                       //
    if (_.isEmpty(self._sortSpecParts)) return;                                                                        // 323
    var selector = matcher._selector; // If the user just passed a literal function to find(), then we can't get a     // 326
    // key filter from it.                                                                                             // 329
                                                                                                                       //
    if (selector instanceof Function) return;                                                                          // 330
    var constraintsByPath = {};                                                                                        // 333
                                                                                                                       //
    _.each(self._sortSpecParts, function (spec, i) {                                                                   // 334
      constraintsByPath[spec.path] = [];                                                                               // 335
    });                                                                                                                // 336
                                                                                                                       //
    _.each(selector, function (subSelector, key) {                                                                     // 338
      // XXX support $and and $or                                                                                      // 339
      var constraints = constraintsByPath[key];                                                                        // 341
      if (!constraints) return; // XXX it looks like the real MongoDB implementation isn't "does the                   // 342
      // regexp match" but "does the value fall into a range named by the                                              // 346
      // literal prefix of the regexp", ie "foo" in /^foo(bar|baz)+/  But                                              // 347
      // "does the regexp match" is a good approximation.                                                              // 348
                                                                                                                       //
      if (subSelector instanceof RegExp) {                                                                             // 349
        // As far as we can tell, using either of the options that both we and                                         // 350
        // MongoDB support ('i' and 'm') disables use of the key filter. This                                          // 351
        // makes sense: MongoDB mostly appears to be calculating ranges of an                                          // 352
        // index to use, which means it only cares about regexps that match                                            // 353
        // one range (with a literal prefix), and both 'i' and 'm' prevent the                                         // 354
        // literal prefix of the regexp from actually meaning one range.                                               // 355
        if (subSelector.ignoreCase || subSelector.multiline) return;                                                   // 356
        constraints.push(regexpElementMatcher(subSelector));                                                           // 358
        return;                                                                                                        // 359
      }                                                                                                                // 360
                                                                                                                       //
      if (isOperatorObject(subSelector)) {                                                                             // 362
        _.each(subSelector, function (operand, operator) {                                                             // 363
          if (_.contains(['$lt', '$lte', '$gt', '$gte'], operator)) {                                                  // 364
            // XXX this depends on us knowing that these operators don't use any                                       // 365
            // of the arguments to compileElementSelector other than operand.                                          // 366
            constraints.push(ELEMENT_OPERATORS[operator].compileElementSelector(operand));                             // 367
          } // See comments in the RegExp block above.                                                                 // 369
                                                                                                                       //
                                                                                                                       //
          if (operator === '$regex' && !subSelector.$options) {                                                        // 372
            constraints.push(ELEMENT_OPERATORS.$regex.compileElementSelector(operand, subSelector));                   // 373
          } // XXX support {$exists: true}, $mod, $type, $in, $elemMatch                                               // 376
                                                                                                                       //
        });                                                                                                            // 379
                                                                                                                       //
        return;                                                                                                        // 380
      } // OK, it's an equality thing.                                                                                 // 381
                                                                                                                       //
                                                                                                                       //
      constraints.push(equalityElementMatcher(subSelector));                                                           // 384
    }); // It appears that the first sort field is treated differently from the                                        // 385
    // others; we shouldn't create a key filter unless the first sort field is                                         // 388
    // restricted, though after that point we can restrict the other sort fields                                       // 389
    // or not as we wish.                                                                                              // 390
                                                                                                                       //
                                                                                                                       //
    if (_.isEmpty(constraintsByPath[self._sortSpecParts[0].path])) return;                                             // 391
                                                                                                                       //
    self._keyFilter = function (key) {                                                                                 // 394
      return _.all(self._sortSpecParts, function (specPart, index) {                                                   // 395
        return _.all(constraintsByPath[specPart.path], function (f) {                                                  // 396
          return f(key[index]);                                                                                        // 397
        });                                                                                                            // 398
      });                                                                                                              // 399
    };                                                                                                                 // 400
  }                                                                                                                    // 401
}); // Given an array of comparators                                                                                   // 80
// (functions (a,b)->(negative or positive or zero)), returns a single                                                 // 405
// comparator which uses each comparator in order and returns the first                                                // 406
// non-zero value.                                                                                                     // 407
                                                                                                                       //
                                                                                                                       //
var composeComparators = function (comparatorArray) {                                                                  // 408
  return function (a, b) {                                                                                             // 409
    for (var i = 0; i < comparatorArray.length; ++i) {                                                                 // 410
      var compare = comparatorArray[i](a, b);                                                                          // 411
      if (compare !== 0) return compare;                                                                               // 412
    }                                                                                                                  // 414
                                                                                                                       //
    return 0;                                                                                                          // 415
  };                                                                                                                   // 416
};                                                                                                                     // 417
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"projection.js":["babel-runtime/helpers/typeof",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/minimongo/projection.js                                                                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _typeof2 = require("babel-runtime/helpers/typeof");                                                                //
                                                                                                                       //
var _typeof3 = _interopRequireDefault(_typeof2);                                                                       //
                                                                                                                       //
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }                      //
                                                                                                                       //
// Knows how to compile a fields projection to a predicate function.                                                   // 1
// @returns - Function: a closure that filters out an object according to the                                          // 2
//            fields projection rules:                                                                                 // 3
//            @param obj - Object: MongoDB-styled document                                                             // 4
//            @returns - Object: a document with the fields filtered out                                               // 5
//                       according to projection rules. Doesn't retain subfields                                       // 6
//                       of passed argument.                                                                           // 7
LocalCollection._compileProjection = function (fields) {                                                               // 8
  LocalCollection._checkSupportedProjection(fields);                                                                   // 9
                                                                                                                       //
  var _idProjection = _.isUndefined(fields._id) ? true : fields._id;                                                   // 11
                                                                                                                       //
  var details = projectionDetails(fields); // returns transformed doc according to ruleTree                            // 12
                                                                                                                       //
  var transform = function (doc, ruleTree) {                                                                           // 15
    // Special case for "sets"                                                                                         // 16
    if (_.isArray(doc)) return _.map(doc, function (subdoc) {                                                          // 17
      return transform(subdoc, ruleTree);                                                                              // 18
    });                                                                                                                // 18
    var res = details.including ? {} : EJSON.clone(doc);                                                               // 20
                                                                                                                       //
    _.each(ruleTree, function (rule, key) {                                                                            // 21
      if (!_.has(doc, key)) return;                                                                                    // 22
                                                                                                                       //
      if (_.isObject(rule)) {                                                                                          // 24
        // For sub-objects/subsets we branch                                                                           // 25
        if (_.isObject(doc[key])) res[key] = transform(doc[key], rule); // Otherwise we don't even touch this subfield
      } else if (details.including) res[key] = EJSON.clone(doc[key]);else delete res[key];                             // 29
    });                                                                                                                // 33
                                                                                                                       //
    return res;                                                                                                        // 35
  };                                                                                                                   // 36
                                                                                                                       //
  return function (obj) {                                                                                              // 38
    var res = transform(obj, details.tree);                                                                            // 39
    if (_idProjection && _.has(obj, '_id')) res._id = obj._id;                                                         // 41
    if (!_idProjection && _.has(res, '_id')) delete res._id;                                                           // 43
    return res;                                                                                                        // 45
  };                                                                                                                   // 46
}; // Traverses the keys of passed projection and constructs a tree where all                                          // 47
// leaves are either all True or all False                                                                             // 50
// @returns Object:                                                                                                    // 51
//  - tree - Object - tree representation of keys involved in projection                                               // 52
//  (exception for '_id' as it is a special case handled separately)                                                   // 53
//  - including - Boolean - "take only certain fields" type of projection                                              // 54
                                                                                                                       //
                                                                                                                       //
projectionDetails = function (fields) {                                                                                // 55
  // Find the non-_id keys (_id is handled specially because it is included unless                                     // 56
  // explicitly excluded). Sort the keys, so that our code to detect overlaps                                          // 57
  // like 'foo' and 'foo.bar' can assume that 'foo' comes first.                                                       // 58
  var fieldsKeys = _.keys(fields).sort(); // If _id is the only field in the projection, do not remove it, since it is
  // required to determine if this is an exclusion or exclusion. Also keep an                                          // 62
  // inclusive _id, since inclusive _id follows the normal rules about mixing                                          // 63
  // inclusive and exclusive fields. If _id is not the only field in the                                               // 64
  // projection and is exclusive, remove it so it can be handled later by a                                            // 65
  // special case, since exclusive _id is always allowed.                                                              // 66
                                                                                                                       //
                                                                                                                       //
  if (fieldsKeys.length > 0 && !(fieldsKeys.length === 1 && fieldsKeys[0] === '_id') && !(_.contains(fieldsKeys, '_id') && fields['_id'])) fieldsKeys = _.reject(fieldsKeys, function (key) {
    return key === '_id';                                                                                              // 70
  });                                                                                                                  // 70
  var including = null; // Unknown                                                                                     // 72
                                                                                                                       //
  _.each(fieldsKeys, function (keyPath) {                                                                              // 74
    var rule = !!fields[keyPath];                                                                                      // 75
    if (including === null) including = rule;                                                                          // 76
    if (including !== rule) // This error message is copied from MongoDB shell                                         // 78
      throw MinimongoError("You cannot currently mix including and excluding fields.");                                // 80
  });                                                                                                                  // 81
                                                                                                                       //
  var projectionRulesTree = pathsToTree(fieldsKeys, function (path) {                                                  // 84
    return including;                                                                                                  // 86
  }, function (node, path, fullPath) {                                                                                 // 86
    // Check passed projection fields' keys: If you have two rules such as                                             // 88
    // 'foo.bar' and 'foo.bar.baz', then the result becomes ambiguous. If                                              // 89
    // that happens, there is a probability you are doing something wrong,                                             // 90
    // framework should notify you about such mistake earlier on cursor                                                // 91
    // compilation step than later during runtime.  Note, that real mongo                                              // 92
    // doesn't do anything about it and the later rule appears in projection                                           // 93
    // project, more priority it takes.                                                                                // 94
    //                                                                                                                 // 95
    // Example, assume following in mongo shell:                                                                       // 96
    // > db.coll.insert({ a: { b: 23, c: 44 } })                                                                       // 97
    // > db.coll.find({}, { 'a': 1, 'a.b': 1 })                                                                        // 98
    // { "_id" : ObjectId("520bfe456024608e8ef24af3"), "a" : { "b" : 23 } }                                            // 99
    // > db.coll.find({}, { 'a.b': 1, 'a': 1 })                                                                        // 100
    // { "_id" : ObjectId("520bfe456024608e8ef24af3"), "a" : { "b" : 23, "c" : 44 } }                                  // 101
    //                                                                                                                 // 102
    // Note, how second time the return set of keys is different.                                                      // 103
    var currentPath = fullPath;                                                                                        // 105
    var anotherPath = path;                                                                                            // 106
    throw MinimongoError("both " + currentPath + " and " + anotherPath + " found in fields option, using both of them may trigger " + "unexpected behavior. Did you mean to use only one of them?");
  });                                                                                                                  // 110
  return {                                                                                                             // 112
    tree: projectionRulesTree,                                                                                         // 113
    including: including                                                                                               // 114
  };                                                                                                                   // 112
}; // paths - Array: list of mongo style paths                                                                         // 116
// newLeafFn - Function: of form function(path) should return a scalar value to                                        // 119
//                       put into list created for that path                                                           // 120
// conflictFn - Function: of form function(node, path, fullPath) is called                                             // 121
//                        when building a tree path for 'fullPath' node on                                             // 122
//                        'path' was already a leaf with a value. Must return a                                        // 123
//                        conflict resolution.                                                                         // 124
// initial tree - Optional Object: starting tree.                                                                      // 125
// @returns - Object: tree represented as a set of nested objects                                                      // 126
                                                                                                                       //
                                                                                                                       //
pathsToTree = function (paths, newLeafFn, conflictFn, tree) {                                                          // 127
  tree = tree || {};                                                                                                   // 128
                                                                                                                       //
  _.each(paths, function (keyPath) {                                                                                   // 129
    var treePos = tree;                                                                                                // 130
    var pathArr = keyPath.split('.'); // use _.all just for iteration with break                                       // 131
                                                                                                                       //
    var success = _.all(pathArr.slice(0, -1), function (key, idx) {                                                    // 134
      if (!_.has(treePos, key)) treePos[key] = {};else if (!_.isObject(treePos[key])) {                                // 135
        treePos[key] = conflictFn(treePos[key], pathArr.slice(0, idx + 1).join('.'), keyPath); // break out of loop if we are failing for this path
                                                                                                                       //
        if (!_.isObject(treePos[key])) return false;                                                                   // 142
      }                                                                                                                // 144
      treePos = treePos[key];                                                                                          // 146
      return true;                                                                                                     // 147
    });                                                                                                                // 148
                                                                                                                       //
    if (success) {                                                                                                     // 150
      var lastKey = _.last(pathArr);                                                                                   // 151
                                                                                                                       //
      if (!_.has(treePos, lastKey)) treePos[lastKey] = newLeafFn(keyPath);else treePos[lastKey] = conflictFn(treePos[lastKey], keyPath, keyPath);
    }                                                                                                                  // 156
  });                                                                                                                  // 157
                                                                                                                       //
  return tree;                                                                                                         // 159
};                                                                                                                     // 160
                                                                                                                       //
LocalCollection._checkSupportedProjection = function (fields) {                                                        // 162
  if (!_.isObject(fields) || _.isArray(fields)) throw MinimongoError("fields option must be an object");               // 163
                                                                                                                       //
  _.each(fields, function (val, keyPath) {                                                                             // 166
    if (_.contains(keyPath.split('.'), '$')) throw MinimongoError("Minimongo doesn't support $ operator in projections yet.");
    if ((typeof val === "undefined" ? "undefined" : (0, _typeof3.default)(val)) === 'object' && _.intersection(['$elemMatch', '$meta', '$slice'], _.keys(val)).length > 0) throw MinimongoError("Minimongo doesn't support operators in projections yet.");
    if (_.indexOf([1, 0, true, false], val) === -1) throw MinimongoError("Projection values should be one of 1, 0, true, or false");
  });                                                                                                                  // 173
};                                                                                                                     // 174
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"modify.js":["babel-runtime/helpers/typeof","./validation.js",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/minimongo/modify.js                                                                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _typeof2 = require("babel-runtime/helpers/typeof");                                                                //
                                                                                                                       //
var _typeof3 = _interopRequireDefault(_typeof2);                                                                       //
                                                                                                                       //
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }                      //
                                                                                                                       //
var assertHasValidFieldNames = void 0,                                                                                 // 1
    assertIsValidFieldName = void 0;                                                                                   // 1
module.importSync("./validation.js", {                                                                                 // 1
  assertHasValidFieldNames: function (v) {                                                                             // 1
    assertHasValidFieldNames = v;                                                                                      // 1
  },                                                                                                                   // 1
  assertIsValidFieldName: function (v) {                                                                               // 1
    assertIsValidFieldName = v;                                                                                        // 1
  }                                                                                                                    // 1
}, 0);                                                                                                                 // 1
                                                                                                                       //
// XXX need a strategy for passing the binding of $ into this                                                          // 3
// function, from the compiled selector                                                                                // 4
//                                                                                                                     // 5
// maybe just {key.up.to.just.before.dollarsign: array_index}                                                          // 6
//                                                                                                                     // 7
// XXX atomicity: if one modification fails, do we roll back the whole                                                 // 8
// change?                                                                                                             // 9
//                                                                                                                     // 10
// options:                                                                                                            // 11
//   - isInsert is set when _modify is being called to compute the document to                                         // 12
//     insert as part of an upsert operation. We use this primarily to figure                                          // 13
//     out when to set the fields in $setOnInsert, if present.                                                         // 14
LocalCollection._modify = function (doc, mod, options) {                                                               // 15
  options = options || {};                                                                                             // 16
  if (!isPlainObject(mod)) throw MinimongoError("Modifier must be an object"); // Make sure the caller can't mutate our data structures.
                                                                                                                       //
  mod = EJSON.clone(mod);                                                                                              // 21
  var isModifier = isOperatorObject(mod);                                                                              // 23
  var newDoc;                                                                                                          // 25
                                                                                                                       //
  if (!isModifier) {                                                                                                   // 27
    if (mod._id && !EJSON.equals(doc._id, mod._id)) throw MinimongoError("Cannot change the _id of a document"); // replace the whole document
                                                                                                                       //
    assertHasValidFieldNames(mod);                                                                                     // 32
    newDoc = mod;                                                                                                      // 33
  } else {                                                                                                             // 34
    // apply modifiers to the doc.                                                                                     // 35
    newDoc = EJSON.clone(doc);                                                                                         // 36
                                                                                                                       //
    _.each(mod, function (operand, op) {                                                                               // 38
      var modFunc = MODIFIERS[op]; // Treat $setOnInsert as $set if this is an insert.                                 // 39
                                                                                                                       //
      if (options.isInsert && op === '$setOnInsert') modFunc = MODIFIERS['$set'];                                      // 41
      if (!modFunc) throw MinimongoError("Invalid modifier specified " + op);                                          // 43
                                                                                                                       //
      _.each(operand, function (arg, keypath) {                                                                        // 45
        if (keypath === '') {                                                                                          // 46
          throw MinimongoError("An empty update path is not valid.");                                                  // 47
        }                                                                                                              // 48
                                                                                                                       //
        if (keypath === '_id' && op !== '$setOnInsert') {                                                              // 50
          throw MinimongoError("Mod on _id not allowed");                                                              // 51
        }                                                                                                              // 52
                                                                                                                       //
        var keyparts = keypath.split('.');                                                                             // 54
                                                                                                                       //
        if (!_.all(keyparts, _.identity)) {                                                                            // 56
          throw MinimongoError("The update path '" + keypath + "' contains an empty field name, which is not allowed.");
        }                                                                                                              // 60
                                                                                                                       //
        var noCreate = _.has(NO_CREATE_MODIFIERS, op);                                                                 // 62
                                                                                                                       //
        var forbidArray = op === "$rename";                                                                            // 63
        var target = findModTarget(newDoc, keyparts, {                                                                 // 64
          noCreate: NO_CREATE_MODIFIERS[op],                                                                           // 65
          forbidArray: op === "$rename",                                                                               // 66
          arrayIndices: options.arrayIndices                                                                           // 67
        });                                                                                                            // 64
        var field = keyparts.pop();                                                                                    // 69
        modFunc(target, field, arg, keypath, newDoc);                                                                  // 70
      });                                                                                                              // 71
    });                                                                                                                // 72
  } // move new document into place.                                                                                   // 73
                                                                                                                       //
                                                                                                                       //
  _.each(_.keys(doc), function (k) {                                                                                   // 76
    // Note: this used to be for (var k in doc) however, this does not                                                 // 77
    // work right in Opera. Deleting from a doc while iterating over it                                                // 78
    // would sometimes cause opera to skip some keys.                                                                  // 79
    if (k !== '_id') delete doc[k];                                                                                    // 80
  });                                                                                                                  // 82
                                                                                                                       //
  _.each(newDoc, function (v, k) {                                                                                     // 83
    doc[k] = v;                                                                                                        // 84
  });                                                                                                                  // 85
}; // for a.b.c.2.d.e, keyparts should be ['a', 'b', 'c', '2', 'd', 'e'],                                              // 86
// and then you would operate on the 'e' property of the returned                                                      // 89
// object.                                                                                                             // 90
//                                                                                                                     // 91
// if options.noCreate is falsey, creates intermediate levels of                                                       // 92
// structure as necessary, like mkdir -p (and raises an exception if                                                   // 93
// that would mean giving a non-numeric property to an array.) if                                                      // 94
// options.noCreate is true, return undefined instead.                                                                 // 95
//                                                                                                                     // 96
// may modify the last element of keyparts to signal to the caller that it needs                                       // 97
// to use a different value to index into the returned object (for example,                                            // 98
// ['a', '01'] -> ['a', 1]).                                                                                           // 99
//                                                                                                                     // 100
// if forbidArray is true, return null if the keypath goes through an array.                                           // 101
//                                                                                                                     // 102
// if options.arrayIndices is set, use its first element for the (first) '$' in                                        // 103
// the path.                                                                                                           // 104
                                                                                                                       //
                                                                                                                       //
var findModTarget = function (doc, keyparts, options) {                                                                // 105
  options = options || {};                                                                                             // 106
  var usedArrayIndex = false;                                                                                          // 107
                                                                                                                       //
  for (var i = 0; i < keyparts.length; i++) {                                                                          // 108
    var last = i === keyparts.length - 1;                                                                              // 109
    var keypart = keyparts[i];                                                                                         // 110
    var indexable = isIndexable(doc);                                                                                  // 111
                                                                                                                       //
    if (!indexable) {                                                                                                  // 112
      if (options.noCreate) return undefined;                                                                          // 113
      var e = MinimongoError("cannot use the part '" + keypart + "' to traverse " + doc);                              // 115
      e.setPropertyError = true;                                                                                       // 117
      throw e;                                                                                                         // 118
    }                                                                                                                  // 119
                                                                                                                       //
    if (doc instanceof Array) {                                                                                        // 120
      if (options.forbidArray) return null;                                                                            // 121
                                                                                                                       //
      if (keypart === '$') {                                                                                           // 123
        if (usedArrayIndex) throw MinimongoError("Too many positional (i.e. '$') elements");                           // 124
                                                                                                                       //
        if (!options.arrayIndices || !options.arrayIndices.length) {                                                   // 126
          throw MinimongoError("The positional operator did not find the " + "match needed from the query");           // 127
        }                                                                                                              // 129
                                                                                                                       //
        keypart = options.arrayIndices[0];                                                                             // 130
        usedArrayIndex = true;                                                                                         // 131
      } else if (isNumericKey(keypart)) {                                                                              // 132
        keypart = parseInt(keypart);                                                                                   // 133
      } else {                                                                                                         // 134
        if (options.noCreate) return undefined;                                                                        // 135
        throw MinimongoError("can't append to array using string field name [" + keypart + "]");                       // 137
      }                                                                                                                // 140
                                                                                                                       //
      if (last) // handle 'a.01'                                                                                       // 141
        keyparts[i] = keypart;                                                                                         // 143
      if (options.noCreate && keypart >= doc.length) return undefined;                                                 // 144
                                                                                                                       //
      while (doc.length < keypart) {                                                                                   // 146
        doc.push(null);                                                                                                // 147
      }                                                                                                                // 146
                                                                                                                       //
      if (!last) {                                                                                                     // 148
        if (doc.length === keypart) doc.push({});else if ((0, _typeof3.default)(doc[keypart]) !== "object") throw MinimongoError("can't modify field '" + keyparts[i + 1] + "' of list value " + JSON.stringify(doc[keypart]));
      }                                                                                                                // 154
    } else {                                                                                                           // 155
      assertIsValidFieldName(keypart);                                                                                 // 156
                                                                                                                       //
      if (!(keypart in doc)) {                                                                                         // 157
        if (options.noCreate) return undefined;                                                                        // 158
        if (!last) doc[keypart] = {};                                                                                  // 160
      }                                                                                                                // 162
    }                                                                                                                  // 163
                                                                                                                       //
    if (last) return doc;                                                                                              // 165
    doc = doc[keypart];                                                                                                // 167
  } // notreached                                                                                                      // 168
                                                                                                                       //
};                                                                                                                     // 171
                                                                                                                       //
var NO_CREATE_MODIFIERS = {                                                                                            // 173
  $unset: true,                                                                                                        // 174
  $pop: true,                                                                                                          // 175
  $rename: true,                                                                                                       // 176
  $pull: true,                                                                                                         // 177
  $pullAll: true                                                                                                       // 178
};                                                                                                                     // 173
var MODIFIERS = {                                                                                                      // 181
  $currentDate: function (target, field, arg) {                                                                        // 182
    if ((typeof arg === "undefined" ? "undefined" : (0, _typeof3.default)(arg)) === "object" && arg.hasOwnProperty("$type")) {
      if (arg.$type !== "date") {                                                                                      // 184
        throw MinimongoError("Minimongo does currently only support the date type " + "in $currentDate modifiers", {   // 185
          field: field                                                                                                 // 188
        });                                                                                                            // 188
      }                                                                                                                // 189
    } else if (arg !== true) {                                                                                         // 190
      throw MinimongoError("Invalid $currentDate modifier", {                                                          // 191
        field: field                                                                                                   // 191
      });                                                                                                              // 191
    }                                                                                                                  // 192
                                                                                                                       //
    target[field] = new Date();                                                                                        // 193
  },                                                                                                                   // 194
  $min: function (target, field, arg) {                                                                                // 195
    if (typeof arg !== "number") {                                                                                     // 196
      throw MinimongoError("Modifier $min allowed for numbers only", {                                                 // 197
        field: field                                                                                                   // 197
      });                                                                                                              // 197
    }                                                                                                                  // 198
                                                                                                                       //
    if (field in target) {                                                                                             // 199
      if (typeof target[field] !== "number") {                                                                         // 200
        throw MinimongoError("Cannot apply $min modifier to non-number", {                                             // 201
          field: field                                                                                                 // 202
        });                                                                                                            // 202
      }                                                                                                                // 203
                                                                                                                       //
      if (target[field] > arg) {                                                                                       // 204
        target[field] = arg;                                                                                           // 205
      }                                                                                                                // 206
    } else {                                                                                                           // 207
      target[field] = arg;                                                                                             // 208
    }                                                                                                                  // 209
  },                                                                                                                   // 210
  $max: function (target, field, arg) {                                                                                // 211
    if (typeof arg !== "number") {                                                                                     // 212
      throw MinimongoError("Modifier $max allowed for numbers only", {                                                 // 213
        field: field                                                                                                   // 213
      });                                                                                                              // 213
    }                                                                                                                  // 214
                                                                                                                       //
    if (field in target) {                                                                                             // 215
      if (typeof target[field] !== "number") {                                                                         // 216
        throw MinimongoError("Cannot apply $max modifier to non-number", {                                             // 217
          field: field                                                                                                 // 218
        });                                                                                                            // 218
      }                                                                                                                // 219
                                                                                                                       //
      if (target[field] < arg) {                                                                                       // 220
        target[field] = arg;                                                                                           // 221
      }                                                                                                                // 222
    } else {                                                                                                           // 223
      target[field] = arg;                                                                                             // 224
    }                                                                                                                  // 225
  },                                                                                                                   // 226
  $inc: function (target, field, arg) {                                                                                // 227
    if (typeof arg !== "number") throw MinimongoError("Modifier $inc allowed for numbers only", {                      // 228
      field: field                                                                                                     // 229
    });                                                                                                                // 229
                                                                                                                       //
    if (field in target) {                                                                                             // 230
      if (typeof target[field] !== "number") throw MinimongoError("Cannot apply $inc modifier to non-number", {        // 231
        field: field                                                                                                   // 233
      });                                                                                                              // 233
      target[field] += arg;                                                                                            // 234
    } else {                                                                                                           // 235
      target[field] = arg;                                                                                             // 236
    }                                                                                                                  // 237
  },                                                                                                                   // 238
  $set: function (target, field, arg) {                                                                                // 239
    if (!_.isObject(target)) {                                                                                         // 240
      // not an array or an object                                                                                     // 240
      var e = MinimongoError("Cannot set property on non-object field", {                                              // 241
        field: field                                                                                                   // 242
      });                                                                                                              // 242
      e.setPropertyError = true;                                                                                       // 243
      throw e;                                                                                                         // 244
    }                                                                                                                  // 245
                                                                                                                       //
    if (target === null) {                                                                                             // 246
      var e = MinimongoError("Cannot set property on null", {                                                          // 247
        field: field                                                                                                   // 247
      });                                                                                                              // 247
      e.setPropertyError = true;                                                                                       // 248
      throw e;                                                                                                         // 249
    }                                                                                                                  // 250
                                                                                                                       //
    assertHasValidFieldNames(arg);                                                                                     // 251
    target[field] = arg;                                                                                               // 252
  },                                                                                                                   // 253
  $setOnInsert: function (target, field, arg) {// converted to `$set` in `_modify`                                     // 254
  },                                                                                                                   // 256
  $unset: function (target, field, arg) {                                                                              // 257
    if (target !== undefined) {                                                                                        // 258
      if (target instanceof Array) {                                                                                   // 259
        if (field in target) target[field] = null;                                                                     // 260
      } else delete target[field];                                                                                     // 262
    }                                                                                                                  // 264
  },                                                                                                                   // 265
  $push: function (target, field, arg) {                                                                               // 266
    if (target[field] === undefined) target[field] = [];                                                               // 267
    if (!(target[field] instanceof Array)) throw MinimongoError("Cannot apply $push modifier to non-array", {          // 269
      field: field                                                                                                     // 271
    });                                                                                                                // 271
                                                                                                                       //
    if (!(arg && arg.$each)) {                                                                                         // 273
      // Simple mode: not $each                                                                                        // 274
      assertHasValidFieldNames(arg);                                                                                   // 275
      target[field].push(arg);                                                                                         // 276
      return;                                                                                                          // 277
    } // Fancy mode: $each (and maybe $slice and $sort and $position)                                                  // 278
                                                                                                                       //
                                                                                                                       //
    var toPush = arg.$each;                                                                                            // 281
    if (!(toPush instanceof Array)) throw MinimongoError("$each must be an array", {                                   // 282
      field: field                                                                                                     // 283
    });                                                                                                                // 283
    assertHasValidFieldNames(toPush); // Parse $position                                                               // 284
                                                                                                                       //
    var position = undefined;                                                                                          // 287
                                                                                                                       //
    if ('$position' in arg) {                                                                                          // 288
      if (typeof arg.$position !== "number") throw MinimongoError("$position must be a numeric value", {               // 289
        field: field                                                                                                   // 290
      }); // XXX should check to make sure integer                                                                     // 290
                                                                                                                       //
      if (arg.$position < 0) throw MinimongoError("$position in $push must be zero or positive", {                     // 292
        field: field                                                                                                   // 294
      });                                                                                                              // 294
      position = arg.$position;                                                                                        // 295
    } // Parse $slice.                                                                                                 // 296
                                                                                                                       //
                                                                                                                       //
    var slice = undefined;                                                                                             // 299
                                                                                                                       //
    if ('$slice' in arg) {                                                                                             // 300
      if (typeof arg.$slice !== "number") throw MinimongoError("$slice must be a numeric value", {                     // 301
        field: field                                                                                                   // 302
      }); // XXX should check to make sure integer                                                                     // 302
                                                                                                                       //
      if (arg.$slice > 0) throw MinimongoError("$slice in $push must be zero or negative", {                           // 304
        field: field                                                                                                   // 306
      });                                                                                                              // 306
      slice = arg.$slice;                                                                                              // 307
    } // Parse $sort.                                                                                                  // 308
                                                                                                                       //
                                                                                                                       //
    var sortFunction = undefined;                                                                                      // 311
                                                                                                                       //
    if (arg.$sort) {                                                                                                   // 312
      if (slice === undefined) throw MinimongoError("$sort requires $slice to be present", {                           // 313
        field: field                                                                                                   // 314
      }); // XXX this allows us to use a $sort whose value is an array, but that's                                     // 314
      // actually an extension of the Node driver, so it won't work                                                    // 316
      // server-side. Could be confusing!                                                                              // 317
      // XXX is it correct that we don't do geo-stuff here?                                                            // 318
                                                                                                                       //
      sortFunction = new Minimongo.Sorter(arg.$sort).getComparator();                                                  // 319
                                                                                                                       //
      for (var i = 0; i < toPush.length; i++) {                                                                        // 320
        if (LocalCollection._f._type(toPush[i]) !== 3) {                                                               // 321
          throw MinimongoError("$push like modifiers using $sort " + "require all elements to be objects", {           // 322
            field: field                                                                                               // 323
          });                                                                                                          // 323
        }                                                                                                              // 324
      }                                                                                                                // 325
    } // Actually push.                                                                                                // 326
                                                                                                                       //
                                                                                                                       //
    if (position === undefined) {                                                                                      // 329
      for (var j = 0; j < toPush.length; j++) {                                                                        // 330
        target[field].push(toPush[j]);                                                                                 // 331
      }                                                                                                                // 330
    } else {                                                                                                           // 332
      var spliceArguments = [position, 0];                                                                             // 333
                                                                                                                       //
      for (var j = 0; j < toPush.length; j++) {                                                                        // 334
        spliceArguments.push(toPush[j]);                                                                               // 335
      }                                                                                                                // 334
                                                                                                                       //
      Array.prototype.splice.apply(target[field], spliceArguments);                                                    // 336
    } // Actually sort.                                                                                                // 337
                                                                                                                       //
                                                                                                                       //
    if (sortFunction) target[field].sort(sortFunction); // Actually slice.                                             // 340
                                                                                                                       //
    if (slice !== undefined) {                                                                                         // 344
      if (slice === 0) target[field] = []; // differs from Array.slice!                                                // 345
      else target[field] = target[field].slice(slice);                                                                 // 345
    }                                                                                                                  // 349
  },                                                                                                                   // 350
  $pushAll: function (target, field, arg) {                                                                            // 351
    if (!((typeof arg === "undefined" ? "undefined" : (0, _typeof3.default)(arg)) === "object" && arg instanceof Array)) throw MinimongoError("Modifier $pushAll/pullAll allowed for arrays only");
    assertHasValidFieldNames(arg);                                                                                     // 354
    var x = target[field];                                                                                             // 355
    if (x === undefined) target[field] = arg;else if (!(x instanceof Array)) throw MinimongoError("Cannot apply $pushAll modifier to non-array", {
      field: field                                                                                                     // 360
    });else {                                                                                                          // 360
      for (var i = 0; i < arg.length; i++) {                                                                           // 362
        x.push(arg[i]);                                                                                                // 363
      }                                                                                                                // 362
    }                                                                                                                  // 364
  },                                                                                                                   // 365
  $addToSet: function (target, field, arg) {                                                                           // 366
    var isEach = false;                                                                                                // 367
                                                                                                                       //
    if ((typeof arg === "undefined" ? "undefined" : (0, _typeof3.default)(arg)) === "object") {                        // 368
      //check if first key is '$each'                                                                                  // 369
      var keys = Object.keys(arg);                                                                                     // 370
                                                                                                                       //
      if (keys[0] === "$each") {                                                                                       // 371
        isEach = true;                                                                                                 // 372
      }                                                                                                                // 373
    }                                                                                                                  // 374
                                                                                                                       //
    var values = isEach ? arg["$each"] : [arg];                                                                        // 375
    assertHasValidFieldNames(values);                                                                                  // 376
    var x = target[field];                                                                                             // 377
    if (x === undefined) target[field] = values;else if (!(x instanceof Array)) throw MinimongoError("Cannot apply $addToSet modifier to non-array", {
      field: field                                                                                                     // 382
    });else {                                                                                                          // 382
      _.each(values, function (value) {                                                                                // 384
        for (var i = 0; i < x.length; i++) {                                                                           // 385
          if (LocalCollection._f._equal(value, x[i])) return;                                                          // 386
        }                                                                                                              // 385
                                                                                                                       //
        x.push(value);                                                                                                 // 388
      });                                                                                                              // 389
    }                                                                                                                  // 390
  },                                                                                                                   // 391
  $pop: function (target, field, arg) {                                                                                // 392
    if (target === undefined) return;                                                                                  // 393
    var x = target[field];                                                                                             // 395
    if (x === undefined) return;else if (!(x instanceof Array)) throw MinimongoError("Cannot apply $pop modifier to non-array", {
      field: field                                                                                                     // 400
    });else {                                                                                                          // 400
      if (typeof arg === 'number' && arg < 0) x.splice(0, 1);else x.pop();                                             // 402
    }                                                                                                                  // 406
  },                                                                                                                   // 407
  $pull: function (target, field, arg) {                                                                               // 408
    if (target === undefined) return;                                                                                  // 409
    var x = target[field];                                                                                             // 411
    if (x === undefined) return;else if (!(x instanceof Array)) throw MinimongoError("Cannot apply $pull/pullAll modifier to non-array", {
      field: field                                                                                                     // 416
    });else {                                                                                                          // 416
      var out = [];                                                                                                    // 418
                                                                                                                       //
      if (arg != null && (typeof arg === "undefined" ? "undefined" : (0, _typeof3.default)(arg)) === "object" && !(arg instanceof Array)) {
        // XXX would be much nicer to compile this once, rather than                                                   // 420
        // for each document we modify.. but usually we're not                                                         // 421
        // modifying that many documents, so we'll let it slide for                                                    // 422
        // now                                                                                                         // 423
        // XXX Minimongo.Matcher isn't up for the job, because we need                                                 // 425
        // to permit stuff like {$pull: {a: {$gt: 4}}}.. something                                                     // 426
        // like {$gt: 4} is not normally a complete selector.                                                          // 427
        // same issue as $elemMatch possibly?                                                                          // 428
        var matcher = new Minimongo.Matcher(arg);                                                                      // 429
                                                                                                                       //
        for (var i = 0; i < x.length; i++) {                                                                           // 430
          if (!matcher.documentMatches(x[i]).result) out.push(x[i]);                                                   // 431
        }                                                                                                              // 430
      } else {                                                                                                         // 433
        for (var i = 0; i < x.length; i++) {                                                                           // 434
          if (!LocalCollection._f._equal(x[i], arg)) out.push(x[i]);                                                   // 435
        }                                                                                                              // 434
      }                                                                                                                // 437
                                                                                                                       //
      target[field] = out;                                                                                             // 438
    }                                                                                                                  // 439
  },                                                                                                                   // 440
  $pullAll: function (target, field, arg) {                                                                            // 441
    if (!((typeof arg === "undefined" ? "undefined" : (0, _typeof3.default)(arg)) === "object" && arg instanceof Array)) throw MinimongoError("Modifier $pushAll/pullAll allowed for arrays only", {
      field: field                                                                                                     // 444
    });                                                                                                                // 444
    if (target === undefined) return;                                                                                  // 445
    var x = target[field];                                                                                             // 447
    if (x === undefined) return;else if (!(x instanceof Array)) throw MinimongoError("Cannot apply $pull/pullAll modifier to non-array", {
      field: field                                                                                                     // 452
    });else {                                                                                                          // 452
      var out = [];                                                                                                    // 454
                                                                                                                       //
      for (var i = 0; i < x.length; i++) {                                                                             // 455
        var exclude = false;                                                                                           // 456
                                                                                                                       //
        for (var j = 0; j < arg.length; j++) {                                                                         // 457
          if (LocalCollection._f._equal(x[i], arg[j])) {                                                               // 458
            exclude = true;                                                                                            // 459
            break;                                                                                                     // 460
          }                                                                                                            // 461
        }                                                                                                              // 462
                                                                                                                       //
        if (!exclude) out.push(x[i]);                                                                                  // 463
      }                                                                                                                // 465
                                                                                                                       //
      target[field] = out;                                                                                             // 466
    }                                                                                                                  // 467
  },                                                                                                                   // 468
  $rename: function (target, field, arg, keypath, doc) {                                                               // 469
    if (keypath === arg) // no idea why mongo has this restriction..                                                   // 470
      throw MinimongoError("$rename source must differ from target", {                                                 // 472
        field: field                                                                                                   // 472
      });                                                                                                              // 472
    if (target === null) throw MinimongoError("$rename source field invalid", {                                        // 473
      field: field                                                                                                     // 474
    });                                                                                                                // 474
    if (typeof arg !== "string") throw MinimongoError("$rename target must be a string", {                             // 475
      field: field                                                                                                     // 476
    });                                                                                                                // 476
                                                                                                                       //
    if (arg.indexOf('\0') > -1) {                                                                                      // 477
      // Null bytes are not allowed in Mongo field names                                                               // 478
      // https://docs.mongodb.com/manual/reference/limits/#Restrictions-on-Field-Names                                 // 479
      throw MinimongoError("The 'to' field for $rename cannot contain an embedded null byte", {                        // 480
        field: field                                                                                                   // 482
      });                                                                                                              // 482
    }                                                                                                                  // 483
                                                                                                                       //
    if (target === undefined) return;                                                                                  // 484
    var v = target[field];                                                                                             // 486
    delete target[field];                                                                                              // 487
    var keyparts = arg.split('.');                                                                                     // 489
    var target2 = findModTarget(doc, keyparts, {                                                                       // 490
      forbidArray: true                                                                                                // 490
    });                                                                                                                // 490
    if (target2 === null) throw MinimongoError("$rename target field invalid", {                                       // 491
      field: field                                                                                                     // 492
    });                                                                                                                // 492
    var field2 = keyparts.pop();                                                                                       // 493
    target2[field2] = v;                                                                                               // 494
  },                                                                                                                   // 495
  $bit: function (target, field, arg) {                                                                                // 496
    // XXX mongo only supports $bit on integers, and we only support                                                   // 497
    // native javascript numbers (doubles) so far, so we can't support $bit                                            // 498
    throw MinimongoError("$bit is not supported", {                                                                    // 499
      field: field                                                                                                     // 499
    });                                                                                                                // 499
  }                                                                                                                    // 500
};                                                                                                                     // 181
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"diff.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/minimongo/diff.js                                                                                          //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// ordered: bool.                                                                                                      // 1
// old_results and new_results: collections of documents.                                                              // 2
//    if ordered, they are arrays.                                                                                     // 3
//    if unordered, they are IdMaps                                                                                    // 4
LocalCollection._diffQueryChanges = function (ordered, oldResults, newResults, observer, options) {                    // 5
  return DiffSequence.diffQueryChanges(ordered, oldResults, newResults, observer, options);                            // 6
};                                                                                                                     // 7
                                                                                                                       //
LocalCollection._diffQueryUnorderedChanges = function (oldResults, newResults, observer, options) {                    // 9
  return DiffSequence.diffQueryUnorderedChanges(oldResults, newResults, observer, options);                            // 10
};                                                                                                                     // 11
                                                                                                                       //
LocalCollection._diffQueryOrderedChanges = function (oldResults, newResults, observer, options) {                      // 14
  return DiffSequence.diffQueryOrderedChanges(oldResults, newResults, observer, options);                              // 16
};                                                                                                                     // 17
                                                                                                                       //
LocalCollection._diffObjects = function (left, right, callbacks) {                                                     // 19
  return DiffSequence.diffObjects(left, right, callbacks);                                                             // 20
};                                                                                                                     // 21
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"id_map.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/minimongo/id_map.js                                                                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
LocalCollection._IdMap = function () {                                                                                 // 1
  var self = this;                                                                                                     // 2
  IdMap.call(self, MongoID.idStringify, MongoID.idParse);                                                              // 3
};                                                                                                                     // 4
                                                                                                                       //
Meteor._inherits(LocalCollection._IdMap, IdMap);                                                                       // 6
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"observe.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/minimongo/observe.js                                                                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// XXX maybe move these into another ObserveHelpers package or something                                               // 1
// _CachingChangeObserver is an object which receives observeChanges callbacks                                         // 3
// and keeps a cache of the current cursor state up to date in self.docs. Users                                        // 4
// of this class should read the docs field but not modify it. You should pass                                         // 5
// the "applyChange" field as the callbacks to the underlying observeChanges                                           // 6
// call. Optionally, you can specify your own observeChanges callbacks which are                                       // 7
// invoked immediately before the docs field is updated; this object is made                                           // 8
// available as `this` to those callbacks.                                                                             // 9
LocalCollection._CachingChangeObserver = function (options) {                                                          // 10
  var self = this;                                                                                                     // 11
  options = options || {};                                                                                             // 12
                                                                                                                       //
  var orderedFromCallbacks = options.callbacks && LocalCollection._observeChangesCallbacksAreOrdered(options.callbacks);
                                                                                                                       //
  if (_.has(options, 'ordered')) {                                                                                     // 16
    self.ordered = options.ordered;                                                                                    // 17
    if (options.callbacks && options.ordered !== orderedFromCallbacks) throw Error("ordered option doesn't match callbacks");
  } else if (options.callbacks) {                                                                                      // 20
    self.ordered = orderedFromCallbacks;                                                                               // 21
  } else {                                                                                                             // 22
    throw Error("must provide ordered or callbacks");                                                                  // 23
  }                                                                                                                    // 24
                                                                                                                       //
  var callbacks = options.callbacks || {};                                                                             // 25
                                                                                                                       //
  if (self.ordered) {                                                                                                  // 27
    self.docs = new OrderedDict(MongoID.idStringify);                                                                  // 28
    self.applyChange = {                                                                                               // 29
      addedBefore: function (id, fields, before) {                                                                     // 30
        var doc = EJSON.clone(fields);                                                                                 // 31
        doc._id = id;                                                                                                  // 32
        callbacks.addedBefore && callbacks.addedBefore.call(self, id, fields, before); // This line triggers if we provide added with movedBefore.
                                                                                                                       //
        callbacks.added && callbacks.added.call(self, id, fields); // XXX could `before` be a falsy ID?  Technically   // 36
        // idStringify seems to allow for them -- though                                                               // 38
        // OrderedDict won't call stringify on a falsy arg.                                                            // 39
                                                                                                                       //
        self.docs.putBefore(id, doc, before || null);                                                                  // 40
      },                                                                                                               // 41
      movedBefore: function (id, before) {                                                                             // 42
        var doc = self.docs.get(id);                                                                                   // 43
        callbacks.movedBefore && callbacks.movedBefore.call(self, id, before);                                         // 44
        self.docs.moveBefore(id, before || null);                                                                      // 45
      }                                                                                                                // 46
    };                                                                                                                 // 29
  } else {                                                                                                             // 48
    self.docs = new LocalCollection._IdMap();                                                                          // 49
    self.applyChange = {                                                                                               // 50
      added: function (id, fields) {                                                                                   // 51
        var doc = EJSON.clone(fields);                                                                                 // 52
        callbacks.added && callbacks.added.call(self, id, fields);                                                     // 53
        doc._id = id;                                                                                                  // 54
        self.docs.set(id, doc);                                                                                        // 55
      }                                                                                                                // 56
    };                                                                                                                 // 50
  } // The methods in _IdMap and OrderedDict used by these callbacks are                                               // 58
  // identical.                                                                                                        // 61
                                                                                                                       //
                                                                                                                       //
  self.applyChange.changed = function (id, fields) {                                                                   // 62
    var doc = self.docs.get(id);                                                                                       // 63
    if (!doc) throw new Error("Unknown id for changed: " + id);                                                        // 64
    callbacks.changed && callbacks.changed.call(self, id, EJSON.clone(fields));                                        // 66
    DiffSequence.applyChanges(doc, fields);                                                                            // 68
  };                                                                                                                   // 69
                                                                                                                       //
  self.applyChange.removed = function (id) {                                                                           // 70
    callbacks.removed && callbacks.removed.call(self, id);                                                             // 71
    self.docs.remove(id);                                                                                              // 72
  };                                                                                                                   // 73
};                                                                                                                     // 74
                                                                                                                       //
LocalCollection._observeFromObserveChanges = function (cursor, observeCallbacks) {                                     // 76
  var transform = cursor.getTransform() || function (doc) {                                                            // 77
    return doc;                                                                                                        // 77
  };                                                                                                                   // 77
                                                                                                                       //
  var suppressed = !!observeCallbacks._suppress_initial;                                                               // 78
  var observeChangesCallbacks;                                                                                         // 80
                                                                                                                       //
  if (LocalCollection._observeCallbacksAreOrdered(observeCallbacks)) {                                                 // 81
    // The "_no_indices" option sets all index arguments to -1 and skips the                                           // 82
    // linear scans required to generate them.  This lets observers that don't                                         // 83
    // need absolute indices benefit from the other features of this API --                                            // 84
    // relative order, transforms, and applyChanges -- without the speed hit.                                          // 85
    var indices = !observeCallbacks._no_indices;                                                                       // 86
    observeChangesCallbacks = {                                                                                        // 87
      addedBefore: function (id, fields, before) {                                                                     // 88
        var self = this;                                                                                               // 89
        if (suppressed || !(observeCallbacks.addedAt || observeCallbacks.added)) return;                               // 90
        var doc = transform(_.extend(fields, {                                                                         // 92
          _id: id                                                                                                      // 92
        }));                                                                                                           // 92
                                                                                                                       //
        if (observeCallbacks.addedAt) {                                                                                // 93
          var index = indices ? before ? self.docs.indexOf(before) : self.docs.size() : -1;                            // 94
          observeCallbacks.addedAt(doc, index, before);                                                                // 96
        } else {                                                                                                       // 97
          observeCallbacks.added(doc);                                                                                 // 98
        }                                                                                                              // 99
      },                                                                                                               // 100
      changed: function (id, fields) {                                                                                 // 101
        var self = this;                                                                                               // 102
        if (!(observeCallbacks.changedAt || observeCallbacks.changed)) return;                                         // 103
        var doc = EJSON.clone(self.docs.get(id));                                                                      // 105
        if (!doc) throw new Error("Unknown id for changed: " + id);                                                    // 106
        var oldDoc = transform(EJSON.clone(doc));                                                                      // 108
        DiffSequence.applyChanges(doc, fields);                                                                        // 109
        doc = transform(doc);                                                                                          // 110
                                                                                                                       //
        if (observeCallbacks.changedAt) {                                                                              // 111
          var index = indices ? self.docs.indexOf(id) : -1;                                                            // 112
          observeCallbacks.changedAt(doc, oldDoc, index);                                                              // 113
        } else {                                                                                                       // 114
          observeCallbacks.changed(doc, oldDoc);                                                                       // 115
        }                                                                                                              // 116
      },                                                                                                               // 117
      movedBefore: function (id, before) {                                                                             // 118
        var self = this;                                                                                               // 119
        if (!observeCallbacks.movedTo) return;                                                                         // 120
        var from = indices ? self.docs.indexOf(id) : -1;                                                               // 122
        var to = indices ? before ? self.docs.indexOf(before) : self.docs.size() : -1; // When not moving backwards, adjust for the fact that removing the
        // document slides everything back one slot.                                                                   // 127
                                                                                                                       //
        if (to > from) --to;                                                                                           // 128
        observeCallbacks.movedTo(transform(EJSON.clone(self.docs.get(id))), from, to, before || null);                 // 130
      },                                                                                                               // 132
      removed: function (id) {                                                                                         // 133
        var self = this;                                                                                               // 134
        if (!(observeCallbacks.removedAt || observeCallbacks.removed)) return; // technically maybe there should be an EJSON.clone here, but it's about
        // to be removed from self.docs!                                                                               // 138
                                                                                                                       //
        var doc = transform(self.docs.get(id));                                                                        // 139
                                                                                                                       //
        if (observeCallbacks.removedAt) {                                                                              // 140
          var index = indices ? self.docs.indexOf(id) : -1;                                                            // 141
          observeCallbacks.removedAt(doc, index);                                                                      // 142
        } else {                                                                                                       // 143
          observeCallbacks.removed(doc);                                                                               // 144
        }                                                                                                              // 145
      }                                                                                                                // 146
    };                                                                                                                 // 87
  } else {                                                                                                             // 148
    observeChangesCallbacks = {                                                                                        // 149
      added: function (id, fields) {                                                                                   // 150
        if (!suppressed && observeCallbacks.added) {                                                                   // 151
          var doc = _.extend(fields, {                                                                                 // 152
            _id: id                                                                                                    // 152
          });                                                                                                          // 152
                                                                                                                       //
          observeCallbacks.added(transform(doc));                                                                      // 153
        }                                                                                                              // 154
      },                                                                                                               // 155
      changed: function (id, fields) {                                                                                 // 156
        var self = this;                                                                                               // 157
                                                                                                                       //
        if (observeCallbacks.changed) {                                                                                // 158
          var oldDoc = self.docs.get(id);                                                                              // 159
          var doc = EJSON.clone(oldDoc);                                                                               // 160
          DiffSequence.applyChanges(doc, fields);                                                                      // 161
          observeCallbacks.changed(transform(doc), transform(EJSON.clone(oldDoc)));                                    // 162
        }                                                                                                              // 164
      },                                                                                                               // 165
      removed: function (id) {                                                                                         // 166
        var self = this;                                                                                               // 167
                                                                                                                       //
        if (observeCallbacks.removed) {                                                                                // 168
          observeCallbacks.removed(transform(self.docs.get(id)));                                                      // 169
        }                                                                                                              // 170
      }                                                                                                                // 171
    };                                                                                                                 // 149
  }                                                                                                                    // 173
                                                                                                                       //
  var changeObserver = new LocalCollection._CachingChangeObserver({                                                    // 175
    callbacks: observeChangesCallbacks                                                                                 // 176
  });                                                                                                                  // 176
  var handle = cursor.observeChanges(changeObserver.applyChange);                                                      // 177
  suppressed = false;                                                                                                  // 178
  return handle;                                                                                                       // 180
};                                                                                                                     // 181
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"objectid.js":["babel-runtime/helpers/typeof",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/minimongo/objectid.js                                                                                      //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _typeof2 = require("babel-runtime/helpers/typeof");                                                                //
                                                                                                                       //
var _typeof3 = _interopRequireDefault(_typeof2);                                                                       //
                                                                                                                       //
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }                      //
                                                                                                                       //
// Is this selector just shorthand for lookup by _id?                                                                  // 1
LocalCollection._selectorIsId = function (selector) {                                                                  // 2
  return typeof selector === "string" || typeof selector === "number" || selector instanceof MongoID.ObjectID;         // 3
}; // Is the selector just lookup by _id (shorthand or not)?                                                           // 6
                                                                                                                       //
                                                                                                                       //
LocalCollection._selectorIsIdPerhapsAsObject = function (selector) {                                                   // 9
  return LocalCollection._selectorIsId(selector) || selector && (typeof selector === "undefined" ? "undefined" : (0, _typeof3.default)(selector)) === "object" && selector._id && LocalCollection._selectorIsId(selector._id) && _.size(selector) === 1;
}; // If this is a selector which explicitly constrains the match by ID to a finite                                    // 14
// number of documents, returns a list of their IDs.  Otherwise returns                                                // 17
// null. Note that the selector may have other restrictions so it may not even                                         // 18
// match those document!  We care about $in and $and since those are generated                                         // 19
// access-controlled update and remove.                                                                                // 20
                                                                                                                       //
                                                                                                                       //
LocalCollection._idsMatchedBySelector = function (selector) {                                                          // 21
  // Is the selector just an ID?                                                                                       // 22
  if (LocalCollection._selectorIsId(selector)) return [selector];                                                      // 23
  if (!selector) return null; // Do we have an _id clause?                                                             // 25
                                                                                                                       //
  if (_.has(selector, '_id')) {                                                                                        // 29
    // Is the _id clause just an ID?                                                                                   // 30
    if (LocalCollection._selectorIsId(selector._id)) return [selector._id]; // Is the _id clause {_id: {$in: ["x", "y", "z"]}}?
                                                                                                                       //
    if (selector._id && selector._id.$in && _.isArray(selector._id.$in) && !_.isEmpty(selector._id.$in) && _.all(selector._id.$in, LocalCollection._selectorIsId)) {
      return selector._id.$in;                                                                                         // 38
    }                                                                                                                  // 39
                                                                                                                       //
    return null;                                                                                                       // 40
  } // If this is a top-level $and, and any of the clauses constrain their                                             // 41
  // documents, then the whole selector is constrained by any one clause's                                             // 44
  // constraint. (Well, by their intersection, but that seems unlikely.)                                               // 45
                                                                                                                       //
                                                                                                                       //
  if (selector.$and && _.isArray(selector.$and)) {                                                                     // 46
    for (var i = 0; i < selector.$and.length; ++i) {                                                                   // 47
      var subIds = LocalCollection._idsMatchedBySelector(selector.$and[i]);                                            // 48
                                                                                                                       //
      if (subIds) return subIds;                                                                                       // 49
    }                                                                                                                  // 51
  }                                                                                                                    // 52
                                                                                                                       //
  return null;                                                                                                         // 54
};                                                                                                                     // 55
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"validation.js":["babel-runtime/helpers/typeof",function(require,exports,module){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/minimongo/validation.js                                                                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _typeof2 = require("babel-runtime/helpers/typeof");                                                                //
                                                                                                                       //
var _typeof3 = _interopRequireDefault(_typeof2);                                                                       //
                                                                                                                       //
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }                      //
                                                                                                                       //
module.export({                                                                                                        // 1
  assertIsValidFieldName: function () {                                                                                // 1
    return assertIsValidFieldName;                                                                                     // 1
  },                                                                                                                   // 1
  assertHasValidFieldNames: function () {                                                                              // 1
    return assertHasValidFieldNames;                                                                                   // 1
  }                                                                                                                    // 1
});                                                                                                                    // 1
// Make sure field names do not contain Mongo restricted                                                               // 1
// characters ('.', '$', '\0').                                                                                        // 2
// https://docs.mongodb.com/manual/reference/limits/#Restrictions-on-Field-Names                                       // 3
var invalidCharMsg = {                                                                                                 // 4
  '.': "contain '.'",                                                                                                  // 5
  '$': "start with '$'",                                                                                               // 6
  '\0': "contain null bytes"                                                                                           // 7
};                                                                                                                     // 4
                                                                                                                       //
function assertIsValidFieldName(key) {                                                                                 // 9
  var match = void 0;                                                                                                  // 10
                                                                                                                       //
  if (_.isString(key) && (match = key.match(/^\$|\.|\0/))) {                                                           // 11
    throw MinimongoError("Key " + key + " must not " + invalidCharMsg[match[0]]);                                      // 12
  }                                                                                                                    // 13
}                                                                                                                      // 14
                                                                                                                       //
; // checks if all field names in an object are valid                                                                  // 14
                                                                                                                       //
function assertHasValidFieldNames(doc) {                                                                               // 17
  if (doc && (typeof doc === "undefined" ? "undefined" : (0, _typeof3.default)(doc)) === "object") {                   // 18
    JSON.stringify(doc, function (key, value) {                                                                        // 19
      assertIsValidFieldName(key);                                                                                     // 20
      return value;                                                                                                    // 21
    });                                                                                                                // 22
  }                                                                                                                    // 23
}                                                                                                                      // 24
                                                                                                                       //
;                                                                                                                      // 24
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]}}}},{"extensions":[".js",".json"]});
require("./node_modules/meteor/minimongo/minimongo.js");
require("./node_modules/meteor/minimongo/wrap_transform.js");
require("./node_modules/meteor/minimongo/helpers.js");
require("./node_modules/meteor/minimongo/selector.js");
require("./node_modules/meteor/minimongo/sort.js");
require("./node_modules/meteor/minimongo/projection.js");
require("./node_modules/meteor/minimongo/modify.js");
require("./node_modules/meteor/minimongo/diff.js");
require("./node_modules/meteor/minimongo/id_map.js");
require("./node_modules/meteor/minimongo/observe.js");
require("./node_modules/meteor/minimongo/objectid.js");

/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package.minimongo = {}, {
  LocalCollection: LocalCollection,
  Minimongo: Minimongo,
  MinimongoTest: MinimongoTest,
  MinimongoError: MinimongoError
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var _ = Package.underscore._;
var LocalCollection = Package.minimongo.LocalCollection;
var Minimongo = Package.minimongo.Minimongo;
var check = Package.check.check;
var Match = Package.check.Match;
var EJSON = Package.ejson.EJSON;
var DDP = Package['ddp-client'].DDP;
var meteorInstall = Package.modules.meteorInstall;
var Buffer = Package.modules.Buffer;
var process = Package.modules.process;
var Symbol = Package['ecmascript-runtime'].Symbol;
var Map = Package['ecmascript-runtime'].Map;
var Set = Package['ecmascript-runtime'].Set;
var meteorBabelHelpers = Package['babel-runtime'].meteorBabelHelpers;
var Promise = Package.promise.Promise;

/* Package-scope variables */
var AllowDeny;

var require = meteorInstall({"node_modules":{"meteor":{"allow-deny":{"allow-deny.js":function(){

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                               //
// packages/allow-deny/allow-deny.js                                                                             //
//                                                                                                               //
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                 //
///                                                                                                              // 1
/// Remote methods and access control.                                                                           // 2
///                                                                                                              // 3
// Restrict default mutators on collection. allow() and deny() take the                                          // 5
// same options:                                                                                                 // 6
//                                                                                                               // 7
// options.insert {Function(userId, doc)}                                                                        // 8
//   return true to allow/deny adding this document                                                              // 9
//                                                                                                               // 10
// options.update {Function(userId, docs, fields, modifier)}                                                     // 11
//   return true to allow/deny updating these documents.                                                         // 12
//   `fields` is passed as an array of fields that are to be modified                                            // 13
//                                                                                                               // 14
// options.remove {Function(userId, docs)}                                                                       // 15
//   return true to allow/deny removing these documents                                                          // 16
//                                                                                                               // 17
// options.fetch {Array}                                                                                         // 18
//   Fields to fetch for these validators. If any call to allow or deny                                          // 19
//   does not have this option then all fields are loaded.                                                       // 20
//                                                                                                               // 21
// allow and deny can be called multiple times. The validators are                                               // 22
// evaluated as follows:                                                                                         // 23
// - If neither deny() nor allow() has been called on the collection,                                            // 24
//   then the request is allowed if and only if the "insecure" smart                                             // 25
//   package is in use.                                                                                          // 26
// - Otherwise, if any deny() function returns true, the request is denied.                                      // 27
// - Otherwise, if any allow() function returns true, the request is allowed.                                    // 28
// - Otherwise, the request is denied.                                                                           // 29
//                                                                                                               // 30
// Meteor may call your deny() and allow() functions in any order, and may not                                   // 31
// call all of them if it is able to make a decision without calling them all                                    // 32
// (so don't include side effects).                                                                              // 33
AllowDeny = {                                                                                                    // 35
  CollectionPrototype: {}                                                                                        // 36
}; // In the `mongo` package, we will extend Mongo.Collection.prototype with these                               // 35
// methods                                                                                                       // 40
                                                                                                                 //
var CollectionPrototype = AllowDeny.CollectionPrototype; /**                                                     // 41
                                                          * @summary Allow users to write directly to this collection from client code, subject to limitations you define.
                                                          * @locus Server                                        //
                                                          * @method allow                                        //
                                                          * @memberOf Mongo.Collection                           //
                                                          * @instance                                            //
                                                          * @param {Object} options                              //
                                                          * @param {Function} options.insert,update,remove Functions that look at a proposed modification to the database and return true if it should be allowed.
                                                          * @param {String[]} options.fetch Optional performance enhancement. Limits the fields that will be fetched from the database for inspection by your `update` and `remove` functions.
                                                          * @param {Function} options.transform Overrides `transform` on the  [`Collection`](#collections).  Pass `null` to disable transformation.
                                                          */                                                     //
                                                                                                                 //
CollectionPrototype.allow = function (options) {                                                                 // 54
  addValidator(this, 'allow', options);                                                                          // 55
}; /**                                                                                                           // 56
    * @summary Override `allow` rules.                                                                           //
    * @locus Server                                                                                              //
    * @method deny                                                                                               //
    * @memberOf Mongo.Collection                                                                                 //
    * @instance                                                                                                  //
    * @param {Object} options                                                                                    //
    * @param {Function} options.insert,update,remove Functions that look at a proposed modification to the database and return true if it should be denied, even if an [allow](#allow) rule says otherwise.
    * @param {String[]} options.fetch Optional performance enhancement. Limits the fields that will be fetched from the database for inspection by your `update` and `remove` functions.
    * @param {Function} options.transform Overrides `transform` on the  [`Collection`](#collections).  Pass `null` to disable transformation.
    */                                                                                                           //
                                                                                                                 //
CollectionPrototype.deny = function (options) {                                                                  // 69
  addValidator(this, 'deny', options);                                                                           // 70
};                                                                                                               // 71
                                                                                                                 //
CollectionPrototype._defineMutationMethods = function (options) {                                                // 73
  var self = this;                                                                                               // 74
  options = options || {}; // set to true once we call any allow or deny methods. If true, use                   // 75
  // allow/deny semantics. If false, use insecure mode semantics.                                                // 78
                                                                                                                 //
  self._restricted = false; // Insecure mode (default to allowing writes). Defaults to 'undefined' which         // 79
  // means insecure iff the insecure package is loaded. This property can be                                     // 82
  // overriden by tests or packages wishing to change insecure mode behavior of                                  // 83
  // their collections.                                                                                          // 84
                                                                                                                 //
  self._insecure = undefined;                                                                                    // 85
  self._validators = {                                                                                           // 87
    insert: {                                                                                                    // 88
      allow: [],                                                                                                 // 88
      deny: []                                                                                                   // 88
    },                                                                                                           // 88
    update: {                                                                                                    // 89
      allow: [],                                                                                                 // 89
      deny: []                                                                                                   // 89
    },                                                                                                           // 89
    remove: {                                                                                                    // 90
      allow: [],                                                                                                 // 90
      deny: []                                                                                                   // 90
    },                                                                                                           // 90
    upsert: {                                                                                                    // 91
      allow: [],                                                                                                 // 91
      deny: []                                                                                                   // 91
    },                                                                                                           // 91
    // dummy arrays; can't set these!                                                                            // 91
    fetch: [],                                                                                                   // 92
    fetchAllFields: false                                                                                        // 93
  };                                                                                                             // 87
  if (!self._name) return; // anonymous collection                                                               // 96
  // XXX Think about method namespacing. Maybe methods should be                                                 // 99
  // "Meteor:Mongo:insert/NAME"?                                                                                 // 100
                                                                                                                 //
  self._prefix = '/' + self._name + '/'; // Mutation Methods                                                     // 101
  // Minimongo on the server gets no stubs; instead, by default                                                  // 104
  // it wait()s until its result is ready, yielding.                                                             // 105
  // This matches the behavior of macromongo on the server better.                                               // 106
  // XXX see #MeteorServerNull                                                                                   // 107
                                                                                                                 //
  if (self._connection && (self._connection === Meteor.server || Meteor.isClient)) {                             // 108
    var m = {};                                                                                                  // 109
                                                                                                                 //
    _.each(['insert', 'update', 'remove'], function (method) {                                                   // 111
      var methodName = self._prefix + method;                                                                    // 112
                                                                                                                 //
      if (options.useExisting) {                                                                                 // 114
        var handlerPropName = Meteor.isClient ? '_methodHandlers' : 'method_handlers'; // Do not try to create additional methods if this has already been called.
        // (Otherwise the .methods() call below will throw an error.)                                            // 117
                                                                                                                 //
        if (self._connection[handlerPropName] && typeof self._connection[handlerPropName][methodName] === 'function') return;
      }                                                                                                          // 120
                                                                                                                 //
      m[methodName] = function () /* ... */{                                                                     // 122
        // All the methods do their own validation, instead of using check().                                    // 123
        check(arguments, [Match.Any]);                                                                           // 124
                                                                                                                 //
        var args = _.toArray(arguments);                                                                         // 125
                                                                                                                 //
        try {                                                                                                    // 126
          // For an insert, if the client didn't specify an _id, generate one                                    // 127
          // now; because this uses DDP.randomStream, it will be consistent with                                 // 128
          // what the client generated. We generate it now rather than later so                                  // 129
          // that if (eg) an allow/deny rule does an insert to the same                                          // 130
          // collection (not that it really should), the generated _id will                                      // 131
          // still be the first use of the stream and will be consistent.                                        // 132
          //                                                                                                     // 133
          // However, we don't actually stick the _id onto the document yet,                                     // 134
          // because we want allow/deny rules to be able to differentiate                                        // 135
          // between arbitrary client-specified _id fields and merely                                            // 136
          // client-controlled-via-randomSeed fields.                                                            // 137
          var generatedId = null;                                                                                // 138
                                                                                                                 //
          if (method === "insert" && !_.has(args[0], '_id')) {                                                   // 139
            generatedId = self._makeNewID();                                                                     // 140
          }                                                                                                      // 141
                                                                                                                 //
          if (this.isSimulation) {                                                                               // 143
            // In a client simulation, you can do any mutation (even with a                                      // 144
            // complex selector).                                                                                // 145
            if (generatedId !== null) args[0]._id = generatedId;                                                 // 146
            return self._collection[method].apply(self._collection, args);                                       // 148
          } // This is the server receiving a method call from the client.                                       // 150
          // We don't allow arbitrary selectors in mutations from the client: only                               // 154
          // single-ID selectors.                                                                                // 155
                                                                                                                 //
                                                                                                                 //
          if (method !== 'insert') throwIfSelectorIsNotId(args[0], method);                                      // 156
                                                                                                                 //
          if (self._restricted) {                                                                                // 159
            // short circuit if there is no way it will pass.                                                    // 160
            if (self._validators[method].allow.length === 0) {                                                   // 161
              throw new Meteor.Error(403, "Access denied. No allow validators set on restricted " + "collection for method '" + method + "'.");
            }                                                                                                    // 165
                                                                                                                 //
            var validatedMethodName = '_validated' + method.charAt(0).toUpperCase() + method.slice(1);           // 167
            args.unshift(this.userId);                                                                           // 169
            method === 'insert' && args.push(generatedId);                                                       // 170
            return self[validatedMethodName].apply(self, args);                                                  // 171
          } else if (self._isInsecure()) {                                                                       // 172
            if (generatedId !== null) args[0]._id = generatedId; // In insecure mode, allow any mutation (with a simple selector).
            // XXX This is kind of bogus.  Instead of blindly passing whatever                                   // 176
            //     we get from the network to this function, we should actually                                  // 177
            //     know the correct arguments for the function and pass just                                     // 178
            //     them.  For example, if you have an extraneous extra null                                      // 179
            //     argument and this is Mongo on the server, the .wrapAsync'd                                    // 180
            //     functions like update will get confused and pass the                                          // 181
            //     "fut.resolver()" in the wrong slot, where _update will never                                  // 182
            //     invoke it. Bam, broken DDP connection.  Probably should just                                  // 183
            //     take this whole method and write it three times, invoking                                     // 184
            //     helpers for the common code.                                                                  // 185
                                                                                                                 //
            return self._collection[method].apply(self._collection, args);                                       // 186
          } else {                                                                                               // 187
            // In secure mode, if we haven't called allow or deny, then nothing                                  // 188
            // is permitted.                                                                                     // 189
            throw new Meteor.Error(403, "Access denied");                                                        // 190
          }                                                                                                      // 191
        } catch (e) {                                                                                            // 192
          if (e.name === 'MongoError' || e.name === 'MinimongoError') {                                          // 193
            throw new Meteor.Error(409, e.toString());                                                           // 194
          } else {                                                                                               // 195
            throw e;                                                                                             // 196
          }                                                                                                      // 197
        }                                                                                                        // 198
      };                                                                                                         // 199
    });                                                                                                          // 200
                                                                                                                 //
    self._connection.methods(m);                                                                                 // 202
  }                                                                                                              // 203
};                                                                                                               // 204
                                                                                                                 //
CollectionPrototype._updateFetch = function (fields) {                                                           // 206
  var self = this;                                                                                               // 207
                                                                                                                 //
  if (!self._validators.fetchAllFields) {                                                                        // 209
    if (fields) {                                                                                                // 210
      self._validators.fetch = _.union(self._validators.fetch, fields);                                          // 211
    } else {                                                                                                     // 212
      self._validators.fetchAllFields = true; // clear fetch just to make sure we don't accidentally read it     // 213
                                                                                                                 //
      self._validators.fetch = null;                                                                             // 215
    }                                                                                                            // 216
  }                                                                                                              // 217
};                                                                                                               // 218
                                                                                                                 //
CollectionPrototype._isInsecure = function () {                                                                  // 220
  var self = this;                                                                                               // 221
  if (self._insecure === undefined) return !!Package.insecure;                                                   // 222
  return self._insecure;                                                                                         // 224
};                                                                                                               // 225
                                                                                                                 //
CollectionPrototype._validatedInsert = function (userId, doc, generatedId) {                                     // 227
  var self = this; // call user validators.                                                                      // 229
  // Any deny returns true means denied.                                                                         // 232
                                                                                                                 //
  if (_.any(self._validators.insert.deny, function (validator) {                                                 // 233
    return validator(userId, docToValidate(validator, doc, generatedId));                                        // 234
  })) {                                                                                                          // 235
    throw new Meteor.Error(403, "Access denied");                                                                // 236
  } // Any allow returns true means proceed. Throw error if they all fail.                                       // 237
                                                                                                                 //
                                                                                                                 //
  if (_.all(self._validators.insert.allow, function (validator) {                                                // 239
    return !validator(userId, docToValidate(validator, doc, generatedId));                                       // 240
  })) {                                                                                                          // 241
    throw new Meteor.Error(403, "Access denied");                                                                // 242
  } // If we generated an ID above, insert it now: after the validation, but                                     // 243
  // before actually inserting.                                                                                  // 246
                                                                                                                 //
                                                                                                                 //
  if (generatedId !== null) doc._id = generatedId;                                                               // 247
                                                                                                                 //
  self._collection.insert.call(self._collection, doc);                                                           // 250
}; // Simulate a mongo `update` operation while validating that the access                                       // 251
// control rules set by calls to `allow/deny` are satisfied. If all                                              // 254
// pass, rewrite the mongo operation to use $in to set the list of                                               // 255
// document ids to change ##ValidatedChange                                                                      // 256
                                                                                                                 //
                                                                                                                 //
CollectionPrototype._validatedUpdate = function (userId, selector, mutator, options) {                           // 257
  var self = this;                                                                                               // 259
  check(mutator, Object);                                                                                        // 261
  options = _.clone(options) || {};                                                                              // 263
  if (!LocalCollection._selectorIsIdPerhapsAsObject(selector)) throw new Error("validated update should be of a single ID"); // We don't support upserts because they don't fit nicely into allow/deny
  // rules.                                                                                                      // 269
                                                                                                                 //
  if (options.upsert) throw new Meteor.Error(403, "Access denied. Upserts not " + "allowed in a restricted collection.");
  var noReplaceError = "Access denied. In a restricted collection you can only" + " update documents, not replace them. Use a Mongo update operator, such " + "as '$set'."; // compute modified fields
                                                                                                                 //
  var fields = [];                                                                                               // 279
                                                                                                                 //
  if (_.isEmpty(mutator)) {                                                                                      // 280
    throw new Meteor.Error(403, noReplaceError);                                                                 // 281
  }                                                                                                              // 282
                                                                                                                 //
  _.each(mutator, function (params, op) {                                                                        // 283
    if (op.charAt(0) !== '$') {                                                                                  // 284
      throw new Meteor.Error(403, noReplaceError);                                                               // 285
    } else if (!_.has(ALLOWED_UPDATE_OPERATIONS, op)) {                                                          // 286
      throw new Meteor.Error(403, "Access denied. Operator " + op + " not allowed in a restricted collection.");
    } else {                                                                                                     // 289
      _.each(_.keys(params), function (field) {                                                                  // 290
        // treat dotted fields as if they are replacing their                                                    // 291
        // top-level part                                                                                        // 292
        if (field.indexOf('.') !== -1) field = field.substring(0, field.indexOf('.')); // record the field we are trying to change
                                                                                                                 //
        if (!_.contains(fields, field)) fields.push(field);                                                      // 297
      });                                                                                                        // 299
    }                                                                                                            // 300
  });                                                                                                            // 301
                                                                                                                 //
  var findOptions = {                                                                                            // 303
    transform: null                                                                                              // 303
  };                                                                                                             // 303
                                                                                                                 //
  if (!self._validators.fetchAllFields) {                                                                        // 304
    findOptions.fields = {};                                                                                     // 305
                                                                                                                 //
    _.each(self._validators.fetch, function (fieldName) {                                                        // 306
      findOptions.fields[fieldName] = 1;                                                                         // 307
    });                                                                                                          // 308
  }                                                                                                              // 309
                                                                                                                 //
  var doc = self._collection.findOne(selector, findOptions);                                                     // 311
                                                                                                                 //
  if (!doc) // none satisfied!                                                                                   // 312
    return 0; // call user validators.                                                                           // 313
  // Any deny returns true means denied.                                                                         // 316
                                                                                                                 //
  if (_.any(self._validators.update.deny, function (validator) {                                                 // 317
    var factoriedDoc = transformDoc(validator, doc);                                                             // 318
    return validator(userId, factoriedDoc, fields, mutator);                                                     // 319
  })) {                                                                                                          // 323
    throw new Meteor.Error(403, "Access denied");                                                                // 324
  } // Any allow returns true means proceed. Throw error if they all fail.                                       // 325
                                                                                                                 //
                                                                                                                 //
  if (_.all(self._validators.update.allow, function (validator) {                                                // 327
    var factoriedDoc = transformDoc(validator, doc);                                                             // 328
    return !validator(userId, factoriedDoc, fields, mutator);                                                    // 329
  })) {                                                                                                          // 333
    throw new Meteor.Error(403, "Access denied");                                                                // 334
  }                                                                                                              // 335
                                                                                                                 //
  options._forbidReplace = true; // Back when we supported arbitrary client-provided selectors, we actually      // 337
  // rewrote the selector to include an _id clause before passing to Mongo to                                    // 340
  // avoid races, but since selector is guaranteed to already just be an ID, we                                  // 341
  // don't have to any more.                                                                                     // 342
                                                                                                                 //
  return self._collection.update.call(self._collection, selector, mutator, options);                             // 344
}; // Only allow these operations in validated updates. Specifically                                             // 346
// whitelist operations, rather than blacklist, so new complex                                                   // 349
// operations that are added aren't automatically allowed. A complex                                             // 350
// operation is one that does more than just modify its target                                                   // 351
// field. For now this contains all update operations except '$rename'.                                          // 352
// http://docs.mongodb.org/manual/reference/operators/#update                                                    // 353
                                                                                                                 //
                                                                                                                 //
var ALLOWED_UPDATE_OPERATIONS = {                                                                                // 354
  $inc: 1,                                                                                                       // 355
  $set: 1,                                                                                                       // 355
  $unset: 1,                                                                                                     // 355
  $addToSet: 1,                                                                                                  // 355
  $pop: 1,                                                                                                       // 355
  $pullAll: 1,                                                                                                   // 355
  $pull: 1,                                                                                                      // 355
  $pushAll: 1,                                                                                                   // 356
  $push: 1,                                                                                                      // 356
  $bit: 1                                                                                                        // 356
}; // Simulate a mongo `remove` operation while validating access control                                        // 354
// rules. See #ValidatedChange                                                                                   // 360
                                                                                                                 //
CollectionPrototype._validatedRemove = function (userId, selector) {                                             // 361
  var self = this;                                                                                               // 362
  var findOptions = {                                                                                            // 364
    transform: null                                                                                              // 364
  };                                                                                                             // 364
                                                                                                                 //
  if (!self._validators.fetchAllFields) {                                                                        // 365
    findOptions.fields = {};                                                                                     // 366
                                                                                                                 //
    _.each(self._validators.fetch, function (fieldName) {                                                        // 367
      findOptions.fields[fieldName] = 1;                                                                         // 368
    });                                                                                                          // 369
  }                                                                                                              // 370
                                                                                                                 //
  var doc = self._collection.findOne(selector, findOptions);                                                     // 372
                                                                                                                 //
  if (!doc) return 0; // call user validators.                                                                   // 373
  // Any deny returns true means denied.                                                                         // 377
                                                                                                                 //
  if (_.any(self._validators.remove.deny, function (validator) {                                                 // 378
    return validator(userId, transformDoc(validator, doc));                                                      // 379
  })) {                                                                                                          // 380
    throw new Meteor.Error(403, "Access denied");                                                                // 381
  } // Any allow returns true means proceed. Throw error if they all fail.                                       // 382
                                                                                                                 //
                                                                                                                 //
  if (_.all(self._validators.remove.allow, function (validator) {                                                // 384
    return !validator(userId, transformDoc(validator, doc));                                                     // 385
  })) {                                                                                                          // 386
    throw new Meteor.Error(403, "Access denied");                                                                // 387
  } // Back when we supported arbitrary client-provided selectors, we actually                                   // 388
  // rewrote the selector to {_id: {$in: [ids that we found]}} before passing to                                 // 391
  // Mongo to avoid races, but since selector is guaranteed to already just be                                   // 392
  // an ID, we don't have to any more.                                                                           // 393
                                                                                                                 //
                                                                                                                 //
  return self._collection.remove.call(self._collection, selector);                                               // 395
};                                                                                                               // 396
                                                                                                                 //
CollectionPrototype._callMutatorMethod = function () {                                                           // 398
  function _callMutatorMethod(name, args, callback) {                                                            // 398
    if (Meteor.isClient && !callback && !alreadyInSimulation()) {                                                // 399
      // Client can't block, so it can't report errors by exception,                                             // 400
      // only by callback. If they forget the callback, give them a                                              // 401
      // default one that logs the error, so they aren't totally                                                 // 402
      // baffled if their writes don't work because their database is                                            // 403
      // down.                                                                                                   // 404
      // Don't give a default callback in simulation, because inside stubs we                                    // 405
      // want to return the results from the local collection immediately and                                    // 406
      // not force a callback.                                                                                   // 407
      callback = function (err) {                                                                                // 408
        if (err) Meteor._debug(name + " failed: " + (err.reason || err.stack));                                  // 409
      };                                                                                                         // 411
    } // For two out of three mutator methods, the first argument is a selector                                  // 412
                                                                                                                 //
                                                                                                                 //
    var firstArgIsSelector = name === "update" || name === "remove";                                             // 415
                                                                                                                 //
    if (firstArgIsSelector && !alreadyInSimulation()) {                                                          // 416
      // If we're about to actually send an RPC, we should throw an error if                                     // 417
      // this is a non-ID selector, because the mutation methods only allow                                      // 418
      // single-ID selectors. (If we don't throw here, we'll see flicker.)                                       // 419
      throwIfSelectorIsNotId(args[0], name);                                                                     // 420
    }                                                                                                            // 421
                                                                                                                 //
    var mutatorMethodName = this._prefix + name;                                                                 // 423
    return this._connection.apply(mutatorMethodName, args, {                                                     // 424
      returnStubValue: true                                                                                      // 425
    }, callback);                                                                                                // 425
  }                                                                                                              // 426
                                                                                                                 //
  return _callMutatorMethod;                                                                                     // 398
}();                                                                                                             // 398
                                                                                                                 //
function transformDoc(validator, doc) {                                                                          // 428
  if (validator.transform) return validator.transform(doc);                                                      // 429
  return doc;                                                                                                    // 431
}                                                                                                                // 432
                                                                                                                 //
function docToValidate(validator, doc, generatedId) {                                                            // 434
  var ret = doc;                                                                                                 // 435
                                                                                                                 //
  if (validator.transform) {                                                                                     // 436
    ret = EJSON.clone(doc); // If you set a server-side transform on your collection, then you don't get         // 437
    // to tell the difference between "client specified the ID" and "server                                      // 439
    // generated the ID", because transforms expect to get _id.  If you want to                                  // 440
    // do that check, you can do it with a specific                                                              // 441
    // `C.allow({insert: f, transform: null})` validator.                                                        // 442
                                                                                                                 //
    if (generatedId !== null) {                                                                                  // 443
      ret._id = generatedId;                                                                                     // 444
    }                                                                                                            // 445
                                                                                                                 //
    ret = validator.transform(ret);                                                                              // 446
  }                                                                                                              // 447
                                                                                                                 //
  return ret;                                                                                                    // 448
}                                                                                                                // 449
                                                                                                                 //
function addValidator(collection, allowOrDeny, options) {                                                        // 451
  // validate keys                                                                                               // 452
  var VALID_KEYS = ['insert', 'update', 'remove', 'fetch', 'transform'];                                         // 453
                                                                                                                 //
  _.each(_.keys(options), function (key) {                                                                       // 454
    if (!_.contains(VALID_KEYS, key)) throw new Error(allowOrDeny + ": Invalid key: " + key);                    // 455
  });                                                                                                            // 457
                                                                                                                 //
  collection._restricted = true;                                                                                 // 459
                                                                                                                 //
  _.each(['insert', 'update', 'remove'], function (name) {                                                       // 461
    if (options.hasOwnProperty(name)) {                                                                          // 462
      if (!(options[name] instanceof Function)) {                                                                // 463
        throw new Error(allowOrDeny + ": Value for `" + name + "` must be a function");                          // 464
      } // If the transform is specified at all (including as 'null') in this                                    // 465
      // call, then take that; otherwise, take the transform from the                                            // 468
      // collection.                                                                                             // 469
                                                                                                                 //
                                                                                                                 //
      if (options.transform === undefined) {                                                                     // 470
        options[name].transform = collection._transform; // already wrapped                                      // 471
      } else {                                                                                                   // 472
        options[name].transform = LocalCollection.wrapTransform(options.transform);                              // 473
      }                                                                                                          // 475
                                                                                                                 //
      collection._validators[name][allowOrDeny].push(options[name]);                                             // 477
    }                                                                                                            // 478
  }); // Only update the fetch fields if we're passed things that affect                                         // 479
  // fetching. This way allow({}) and allow({insert: f}) don't result in                                         // 482
  // setting fetchAllFields                                                                                      // 483
                                                                                                                 //
                                                                                                                 //
  if (options.update || options.remove || options.fetch) {                                                       // 484
    if (options.fetch && !(options.fetch instanceof Array)) {                                                    // 485
      throw new Error(allowOrDeny + ": Value for `fetch` must be an array");                                     // 486
    }                                                                                                            // 487
                                                                                                                 //
    collection._updateFetch(options.fetch);                                                                      // 488
  }                                                                                                              // 489
}                                                                                                                // 490
                                                                                                                 //
function throwIfSelectorIsNotId(selector, methodName) {                                                          // 492
  if (!LocalCollection._selectorIsIdPerhapsAsObject(selector)) {                                                 // 493
    throw new Meteor.Error(403, "Not permitted. Untrusted code may only " + methodName + " documents by ID.");   // 494
  }                                                                                                              // 497
}                                                                                                                // 498
                                                                                                                 //
; // Determine if we are in a DDP method simulation                                                              // 498
                                                                                                                 //
function alreadyInSimulation() {                                                                                 // 501
  var enclosing = DDP._CurrentInvocation.get();                                                                  // 502
                                                                                                                 //
  return enclosing && enclosing.isSimulation;                                                                    // 503
}                                                                                                                // 504
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}}}}},{"extensions":[".js",".json"]});
require("./node_modules/meteor/allow-deny/allow-deny.js");

/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package['allow-deny'] = {}, {
  AllowDeny: AllowDeny
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var AllowDeny = Package['allow-deny'].AllowDeny;
var Random = Package.random.Random;
var EJSON = Package.ejson.EJSON;
var _ = Package.underscore._;
var LocalCollection = Package.minimongo.LocalCollection;
var Minimongo = Package.minimongo.Minimongo;
var DDP = Package['ddp-client'].DDP;
var Tracker = Package.tracker.Tracker;
var Deps = Package.tracker.Deps;
var DiffSequence = Package['diff-sequence'].DiffSequence;
var MongoID = Package['mongo-id'].MongoID;
var check = Package.check.check;
var Match = Package.check.Match;
var meteorInstall = Package.modules.meteorInstall;
var Buffer = Package.modules.Buffer;
var process = Package.modules.process;
var Symbol = Package['ecmascript-runtime'].Symbol;
var Map = Package['ecmascript-runtime'].Map;
var Set = Package['ecmascript-runtime'].Set;
var meteorBabelHelpers = Package['babel-runtime'].meteorBabelHelpers;
var Promise = Package.promise.Promise;

/* Package-scope variables */
var LocalCollectionDriver, Mongo;

var require = meteorInstall({"node_modules":{"meteor":{"mongo":{"local_collection_driver.js":function(){

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                              //
// packages/mongo/local_collection_driver.js                                                                    //
//                                                                                                              //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                //
LocalCollectionDriver = function () {                                                                           // 1
  var self = this;                                                                                              // 2
  self.noConnCollections = {};                                                                                  // 3
};                                                                                                              // 4
                                                                                                                //
var ensureCollection = function (name, collections) {                                                           // 6
  if (!(name in collections)) collections[name] = new LocalCollection(name);                                    // 7
  return collections[name];                                                                                     // 9
};                                                                                                              // 10
                                                                                                                //
_.extend(LocalCollectionDriver.prototype, {                                                                     // 12
  open: function (name, conn) {                                                                                 // 13
    var self = this;                                                                                            // 14
    if (!name) return new LocalCollection();                                                                    // 15
                                                                                                                //
    if (!conn) {                                                                                                // 17
      return ensureCollection(name, self.noConnCollections);                                                    // 18
    }                                                                                                           // 19
                                                                                                                //
    if (!conn._mongo_livedata_collections) conn._mongo_livedata_collections = {}; // XXX is there a way to keep track of a connection's collections without
    // dangling it off the connection object?                                                                   // 23
                                                                                                                //
    return ensureCollection(name, conn._mongo_livedata_collections);                                            // 24
  }                                                                                                             // 25
}); // singleton                                                                                                // 12
                                                                                                                //
                                                                                                                //
LocalCollectionDriver = new LocalCollectionDriver();                                                            // 29
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"collection.js":function(require,exports,module){

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                              //
// packages/mongo/collection.js                                                                                 //
//                                                                                                              //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                //
// options.connection, if given, is a LivedataClient or LivedataServer                                          // 1
// XXX presently there is no way to destroy/clean up a Collection                                               // 2
/**                                                                                                             // 4
 * @summary Namespace for MongoDB-related items                                                                 //
 * @namespace                                                                                                   //
 */Mongo = {}; /**                                                                                              //
                * @summary Constructor for a Collection                                                         //
                * @locus Anywhere                                                                               //
                * @instancename collection                                                                      //
                * @class                                                                                        //
                * @param {String} name The name of the collection.  If null, creates an unmanaged (unsynchronized) local collection.
                * @param {Object} [options]                                                                     //
                * @param {Object} options.connection The server connection that will manage this collection. Uses the default connection if not specified.  Pass the return value of calling [`DDP.connect`](#ddp_connect) to specify a different server. Pass `null` to specify no connection. Unmanaged (`name` is null) collections cannot specify a connection.
                * @param {String} options.idGeneration The method of generating the `_id` fields of new documents in this collection.  Possible values:
                                                                                                                //
                - **`'STRING'`**: random strings                                                                //
                - **`'MONGO'`**:  random [`Mongo.ObjectID`](#mongo_object_id) values                            //
                                                                                                                //
               The default id generation technique is `'STRING'`.                                               //
                * @param {Function} options.transform An optional transformation function. Documents will be passed through this function before being returned from `fetch` or `findOne`, and before being passed to callbacks of `observe`, `map`, `forEach`, `allow`, and `deny`. Transforms are *not* applied for the callbacks of `observeChanges` or to cursors returned from publish functions.
                * @param {Boolean} options.defineMutationMethods Set to `false` to skip setting up the mutation methods that enable insert/update/remove from client code. Default `true`.
                */                                                                                              //
                                                                                                                //
Mongo.Collection = function (name, options) {                                                                   // 27
  var self = this;                                                                                              // 28
  if (!(self instanceof Mongo.Collection)) throw new Error('use "new" to construct a Mongo.Collection');        // 29
                                                                                                                //
  if (!name && name !== null) {                                                                                 // 32
    Meteor._debug("Warning: creating anonymous collection. It will not be " + "saved or synchronized over the network. (Pass null for " + "the collection name to turn off this warning.)");
                                                                                                                //
    name = null;                                                                                                // 36
  }                                                                                                             // 37
                                                                                                                //
  if (name !== null && typeof name !== "string") {                                                              // 39
    throw new Error("First argument to new Mongo.Collection must be a string or null");                         // 40
  }                                                                                                             // 42
                                                                                                                //
  if (options && options.methods) {                                                                             // 44
    // Backwards compatibility hack with original signature (which passed                                       // 45
    // "connection" directly instead of in options. (Connections must have a "methods"                          // 46
    // method.)                                                                                                 // 47
    // XXX remove before 1.0                                                                                    // 48
    options = {                                                                                                 // 49
      connection: options                                                                                       // 49
    };                                                                                                          // 49
  } // Backwards compatibility: "connection" used to be called "manager".                                       // 50
                                                                                                                //
                                                                                                                //
  if (options && options.manager && !options.connection) {                                                      // 52
    options.connection = options.manager;                                                                       // 53
  }                                                                                                             // 54
                                                                                                                //
  options = _.extend({                                                                                          // 55
    connection: undefined,                                                                                      // 56
    idGeneration: 'STRING',                                                                                     // 57
    transform: null,                                                                                            // 58
    _driver: undefined,                                                                                         // 59
    _preventAutopublish: false                                                                                  // 60
  }, options);                                                                                                  // 55
                                                                                                                //
  switch (options.idGeneration) {                                                                               // 63
    case 'MONGO':                                                                                               // 64
      self._makeNewID = function () {                                                                           // 65
        var src = name ? DDP.randomStream('/collection/' + name) : Random.insecure;                             // 66
        return new Mongo.ObjectID(src.hexString(24));                                                           // 67
      };                                                                                                        // 68
                                                                                                                //
      break;                                                                                                    // 69
                                                                                                                //
    case 'STRING':                                                                                              // 70
    default:                                                                                                    // 71
      self._makeNewID = function () {                                                                           // 72
        var src = name ? DDP.randomStream('/collection/' + name) : Random.insecure;                             // 73
        return src.id();                                                                                        // 74
      };                                                                                                        // 75
                                                                                                                //
      break;                                                                                                    // 76
  }                                                                                                             // 63
                                                                                                                //
  self._transform = LocalCollection.wrapTransform(options.transform);                                           // 79
  if (!name || options.connection === null) // note: nameless collections never have a connection               // 81
    self._connection = null;else if (options.connection) self._connection = options.connection;else if (Meteor.isClient) self._connection = Meteor.connection;else self._connection = Meteor.server;
                                                                                                                //
  if (!options._driver) {                                                                                       // 91
    // XXX This check assumes that webapp is loaded so that Meteor.server !==                                   // 92
    // null. We should fully support the case of "want to use a Mongo-backed                                    // 93
    // collection from Node code without webapp", but we don't yet.                                             // 94
    // #MeteorServerNull                                                                                        // 95
    if (name && self._connection === Meteor.server && typeof MongoInternals !== "undefined" && MongoInternals.defaultRemoteCollectionDriver) {
      options._driver = MongoInternals.defaultRemoteCollectionDriver();                                         // 99
    } else {                                                                                                    // 100
      options._driver = LocalCollectionDriver;                                                                  // 101
    }                                                                                                           // 102
  }                                                                                                             // 103
                                                                                                                //
  self._collection = options._driver.open(name, self._connection);                                              // 105
  self._name = name;                                                                                            // 106
  self._driver = options._driver;                                                                               // 107
                                                                                                                //
  if (self._connection && self._connection.registerStore) {                                                     // 109
    // OK, we're going to be a slave, replicating some remote                                                   // 110
    // database, except possibly with some temporary divergence while                                           // 111
    // we have unacknowledged RPC's.                                                                            // 112
    var ok = self._connection.registerStore(name, {                                                             // 113
      // Called at the beginning of a batch of updates. batchSize is the number                                 // 114
      // of update calls to expect.                                                                             // 115
      //                                                                                                        // 116
      // XXX This interface is pretty janky. reset probably ought to go back to                                 // 117
      // being its own function, and callers shouldn't have to calculate                                        // 118
      // batchSize. The optimization of not calling pause/remove should be                                      // 119
      // delayed until later: the first call to update() should buffer its                                      // 120
      // message, and then we can either directly apply it at endUpdate time if                                 // 121
      // it was the only update, or do pauseObservers/apply/apply at the next                                   // 122
      // update() if there's another one.                                                                       // 123
      beginUpdate: function (batchSize, reset) {                                                                // 124
        // pause observers so users don't see flicker when updating several                                     // 125
        // objects at once (including the post-reconnect reset-and-reapply                                      // 126
        // stage), and so that a re-sorting of a query can take advantage of the                                // 127
        // full _diffQuery moved calculation instead of applying change one at a                                // 128
        // time.                                                                                                // 129
        if (batchSize > 1 || reset) self._collection.pauseObservers();                                          // 130
        if (reset) self._collection.remove({});                                                                 // 133
      },                                                                                                        // 135
      // Apply an update.                                                                                       // 137
      // XXX better specify this interface (not in terms of a wire message)?                                    // 138
      update: function (msg) {                                                                                  // 139
        var mongoId = MongoID.idParse(msg.id);                                                                  // 140
                                                                                                                //
        var doc = self._collection.findOne(mongoId); // Is this a "replace the whole doc" message coming from the quiescence
        // of method writes to an object? (Note that 'undefined' is a valid                                     // 144
        // value meaning "remove it".)                                                                          // 145
                                                                                                                //
                                                                                                                //
        if (msg.msg === 'replace') {                                                                            // 146
          var replace = msg.replace;                                                                            // 147
                                                                                                                //
          if (!replace) {                                                                                       // 148
            if (doc) self._collection.remove(mongoId);                                                          // 149
          } else if (!doc) {                                                                                    // 151
            self._collection.insert(replace);                                                                   // 152
          } else {                                                                                              // 153
            // XXX check that replace has no $ ops                                                              // 154
            self._collection.update(mongoId, replace);                                                          // 155
          }                                                                                                     // 156
                                                                                                                //
          return;                                                                                               // 157
        } else if (msg.msg === 'added') {                                                                       // 158
          if (doc) {                                                                                            // 159
            throw new Error("Expected not to find a document already present for an add");                      // 160
          }                                                                                                     // 161
                                                                                                                //
          self._collection.insert(_.extend({                                                                    // 162
            _id: mongoId                                                                                        // 162
          }, msg.fields));                                                                                      // 162
        } else if (msg.msg === 'removed') {                                                                     // 163
          if (!doc) throw new Error("Expected to find a document already present for removed");                 // 164
                                                                                                                //
          self._collection.remove(mongoId);                                                                     // 166
        } else if (msg.msg === 'changed') {                                                                     // 167
          if (!doc) throw new Error("Expected to find a document to change");                                   // 168
                                                                                                                //
          if (!_.isEmpty(msg.fields)) {                                                                         // 170
            var modifier = {};                                                                                  // 171
                                                                                                                //
            _.each(msg.fields, function (value, key) {                                                          // 172
              if (value === undefined) {                                                                        // 173
                if (!modifier.$unset) modifier.$unset = {};                                                     // 174
                modifier.$unset[key] = 1;                                                                       // 176
              } else {                                                                                          // 177
                if (!modifier.$set) modifier.$set = {};                                                         // 178
                modifier.$set[key] = value;                                                                     // 180
              }                                                                                                 // 181
            });                                                                                                 // 182
                                                                                                                //
            self._collection.update(mongoId, modifier);                                                         // 183
          }                                                                                                     // 184
        } else {                                                                                                // 185
          throw new Error("I don't know how to deal with this message");                                        // 186
        }                                                                                                       // 187
      },                                                                                                        // 189
      // Called at the end of a batch of updates.                                                               // 191
      endUpdate: function () {                                                                                  // 192
        self._collection.resumeObservers();                                                                     // 193
      },                                                                                                        // 194
      // Called around method stub invocations to capture the original versions                                 // 196
      // of modified documents.                                                                                 // 197
      saveOriginals: function () {                                                                              // 198
        self._collection.saveOriginals();                                                                       // 199
      },                                                                                                        // 200
      retrieveOriginals: function () {                                                                          // 201
        return self._collection.retrieveOriginals();                                                            // 202
      },                                                                                                        // 203
      // Used to preserve current versions of documents across a store reset.                                   // 205
      getDoc: function (id) {                                                                                   // 206
        return self.findOne(id);                                                                                // 207
      },                                                                                                        // 208
      // To be able to get back to the collection from the store.                                               // 210
      _getCollection: function () {                                                                             // 211
        return self;                                                                                            // 212
      }                                                                                                         // 213
    });                                                                                                         // 113
                                                                                                                //
    if (!ok) {                                                                                                  // 216
      var message = "There is already a collection named \"" + name + "\"";                                     // 217
                                                                                                                //
      if (options._suppressSameNameError === true) {                                                            // 218
        // XXX In theory we do not have to throw when `ok` is falsy. The store is already defined               // 219
        // for this collection name, but this will simply be another reference to it and everything             // 220
        // should work. However, we have historically thrown an error here, so for now we will                  // 221
        // skip the error only when `_suppressSameNameError` is `true`, allowing people to opt in               // 222
        // and give this some real world testing.                                                               // 223
        console.warn ? console.warn(message) : console.log(message);                                            // 224
      } else {                                                                                                  // 225
        throw new Error(message);                                                                               // 226
      }                                                                                                         // 227
    }                                                                                                           // 228
  } // XXX don't define these until allow or deny is actually used for this                                     // 229
  // collection. Could be hard if the security rules are only defined on the                                    // 232
  // server.                                                                                                    // 233
                                                                                                                //
                                                                                                                //
  if (options.defineMutationMethods !== false) {                                                                // 234
    try {                                                                                                       // 235
      self._defineMutationMethods({                                                                             // 236
        useExisting: options._suppressSameNameError === true                                                    // 236
      });                                                                                                       // 236
    } catch (error) {                                                                                           // 237
      // Throw a more understandable error on the server for same collection name                               // 238
      if (error.message === "A method named '/" + name + "/insert' is already defined") throw new Error("There is already a collection named \"" + name + "\"");
      throw error;                                                                                              // 241
    }                                                                                                           // 242
  } // autopublish                                                                                              // 243
                                                                                                                //
                                                                                                                //
  if (Package.autopublish && !options._preventAutopublish && self._connection && self._connection.publish) {    // 246
    self._connection.publish(null, function () {                                                                // 247
      return self.find();                                                                                       // 248
    }, {                                                                                                        // 249
      is_auto: true                                                                                             // 249
    });                                                                                                         // 249
  }                                                                                                             // 250
}; ///                                                                                                          // 251
/// Main collection API                                                                                         // 254
///                                                                                                             // 255
                                                                                                                //
                                                                                                                //
_.extend(Mongo.Collection.prototype, {                                                                          // 258
  _getFindSelector: function (args) {                                                                           // 260
    if (args.length == 0) return {};else return args[0];                                                        // 261
  },                                                                                                            // 265
  _getFindOptions: function (args) {                                                                            // 267
    var self = this;                                                                                            // 268
                                                                                                                //
    if (args.length < 2) {                                                                                      // 269
      return {                                                                                                  // 270
        transform: self._transform                                                                              // 270
      };                                                                                                        // 270
    } else {                                                                                                    // 271
      check(args[1], Match.Optional(Match.ObjectIncluding({                                                     // 272
        fields: Match.Optional(Match.OneOf(Object, undefined)),                                                 // 273
        sort: Match.Optional(Match.OneOf(Object, Array, Function, undefined)),                                  // 274
        limit: Match.Optional(Match.OneOf(Number, undefined)),                                                  // 275
        skip: Match.Optional(Match.OneOf(Number, undefined))                                                    // 276
      })));                                                                                                     // 272
      return _.extend({                                                                                         // 279
        transform: self._transform                                                                              // 280
      }, args[1]);                                                                                              // 279
    }                                                                                                           // 282
  },                                                                                                            // 283
  /**                                                                                                           // 285
   * @summary Find the documents in a collection that match the selector.                                       //
   * @locus Anywhere                                                                                            //
   * @method find                                                                                               //
   * @memberOf Mongo.Collection                                                                                 //
   * @instance                                                                                                  //
   * @param {MongoSelector} [selector] A query describing the documents to find                                 //
   * @param {Object} [options]                                                                                  //
   * @param {MongoSortSpecifier} options.sort Sort order (default: natural order)                               //
   * @param {Number} options.skip Number of results to skip at the beginning                                    //
   * @param {Number} options.limit Maximum number of results to return                                          //
   * @param {MongoFieldSpecifier} options.fields Dictionary of fields to return or exclude.                     //
   * @param {Boolean} options.reactive (Client only) Default `true`; pass `false` to disable reactivity         //
   * @param {Function} options.transform Overrides `transform` on the  [`Collection`](#collections) for this cursor.  Pass `null` to disable transformation.
   * @param {Boolean} options.disableOplog (Server only) Pass true to disable oplog-tailing on this query. This affects the way server processes calls to `observe` on this query. Disabling the oplog can be useful when working with data that updates in large batches.
   * @param {Number} options.pollingIntervalMs (Server only) When oplog is disabled (through the use of `disableOplog` or when otherwise not available), the frequency (in milliseconds) of how often to poll this query when observing on the server. Defaults to 10000ms (10 seconds).
   * @param {Number} options.pollingThrottleMs (Server only) When oplog is disabled (through the use of `disableOplog` or when otherwise not available), the minimum time (in milliseconds) to allow between re-polling when observing on the server. Increasing this will save CPU and mongo load at the expense of slower updates to users. Decreasing this is not recommended. Defaults to 50ms.
   * @returns {Mongo.Cursor}                                                                                    //
   */find: function () /* selector, options */{                                                                 //
    // Collection.find() (return all docs) behaves differently                                                  // 305
    // from Collection.find(undefined) (return 0 docs).  so be                                                  // 306
    // careful about the length of arguments.                                                                   // 307
    var self = this;                                                                                            // 308
                                                                                                                //
    var argArray = _.toArray(arguments);                                                                        // 309
                                                                                                                //
    return self._collection.find(self._getFindSelector(argArray), self._getFindOptions(argArray));              // 310
  },                                                                                                            // 312
  /**                                                                                                           // 314
   * @summary Finds the first document that matches the selector, as ordered by sort and skip options. Returns `undefined` if no matching document is found.
   * @locus Anywhere                                                                                            //
   * @method findOne                                                                                            //
   * @memberOf Mongo.Collection                                                                                 //
   * @instance                                                                                                  //
   * @param {MongoSelector} [selector] A query describing the documents to find                                 //
   * @param {Object} [options]                                                                                  //
   * @param {MongoSortSpecifier} options.sort Sort order (default: natural order)                               //
   * @param {Number} options.skip Number of results to skip at the beginning                                    //
   * @param {MongoFieldSpecifier} options.fields Dictionary of fields to return or exclude.                     //
   * @param {Boolean} options.reactive (Client only) Default true; pass false to disable reactivity             //
   * @param {Function} options.transform Overrides `transform` on the [`Collection`](#collections) for this cursor.  Pass `null` to disable transformation.
   * @returns {Object}                                                                                          //
   */findOne: function () /* selector, options */{                                                              //
    var self = this;                                                                                            // 330
                                                                                                                //
    var argArray = _.toArray(arguments);                                                                        // 331
                                                                                                                //
    return self._collection.findOne(self._getFindSelector(argArray), self._getFindOptions(argArray));           // 332
  }                                                                                                             // 334
});                                                                                                             // 258
                                                                                                                //
Mongo.Collection._publishCursor = function (cursor, sub, collection) {                                          // 338
  var observeHandle = cursor.observeChanges({                                                                   // 339
    added: function (id, fields) {                                                                              // 340
      sub.added(collection, id, fields);                                                                        // 341
    },                                                                                                          // 342
    changed: function (id, fields) {                                                                            // 343
      sub.changed(collection, id, fields);                                                                      // 344
    },                                                                                                          // 345
    removed: function (id) {                                                                                    // 346
      sub.removed(collection, id);                                                                              // 347
    }                                                                                                           // 348
  }); // We don't call sub.ready() here: it gets called in livedata_server, after                               // 339
  // possibly calling _publishCursor on multiple returned cursors.                                              // 352
  // register stop callback (expects lambda w/ no args).                                                        // 354
                                                                                                                //
  sub.onStop(function () {                                                                                      // 355
    observeHandle.stop();                                                                                       // 355
  }); // return the observeHandle in case it needs to be stopped early                                          // 355
                                                                                                                //
  return observeHandle;                                                                                         // 358
}; // protect against dangerous selectors.  falsey and {_id: falsey} are both                                   // 359
// likely programmer error, and not what you want, particularly for destructive                                 // 362
// operations.  JS regexps don't serialize over DDP but can be trivially                                        // 363
// replaced by $regex. If a falsey _id is sent in, a new string _id will be                                     // 364
// generated and returned; if a fallbackId is provided, it will be returned                                     // 365
// instead.                                                                                                     // 366
                                                                                                                //
                                                                                                                //
Mongo.Collection._rewriteSelector = function (selector) {                                                       // 367
  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},                            // 367
      fallbackId = _ref.fallbackId;                                                                             // 367
                                                                                                                //
  // shorthand -- scalars match _id                                                                             // 368
  if (LocalCollection._selectorIsId(selector)) selector = {                                                     // 369
    _id: selector                                                                                               // 370
  };                                                                                                            // 370
                                                                                                                //
  if (_.isArray(selector)) {                                                                                    // 372
    // This is consistent with the Mongo console itself; if we don't do this                                    // 373
    // check passing an empty array ends up selecting all items                                                 // 374
    throw new Error("Mongo selector can't be an array.");                                                       // 375
  }                                                                                                             // 376
                                                                                                                //
  if (!selector || '_id' in selector && !selector._id) {                                                        // 378
    // can't match anything                                                                                     // 379
    return {                                                                                                    // 380
      _id: fallbackId || Random.id()                                                                            // 380
    };                                                                                                          // 380
  }                                                                                                             // 381
                                                                                                                //
  var ret = {};                                                                                                 // 383
  Object.keys(selector).forEach(function (key) {                                                                // 384
    var value = selector[key]; // Mongo supports both {field: /foo/} and {field: {$regex: /foo/}}               // 385
                                                                                                                //
    if (value instanceof RegExp) {                                                                              // 387
      ret[key] = convertRegexpToMongoSelector(value);                                                           // 388
    } else if (value && value.$regex instanceof RegExp) {                                                       // 389
      ret[key] = convertRegexpToMongoSelector(value.$regex); // if value is {$regex: /foo/, $options: ...} then $options
      // override the ones set on $regex.                                                                       // 392
                                                                                                                //
      if (value.$options !== undefined) ret[key].$options = value.$options;                                     // 393
    } else if (_.contains(['$or', '$and', '$nor'], key)) {                                                      // 395
      // Translate lower levels of $and/$or/$nor                                                                // 396
      ret[key] = _.map(value, function (v) {                                                                    // 397
        return Mongo.Collection._rewriteSelector(v);                                                            // 398
      });                                                                                                       // 399
    } else {                                                                                                    // 400
      ret[key] = value;                                                                                         // 401
    }                                                                                                           // 402
  });                                                                                                           // 403
  return ret;                                                                                                   // 404
}; // convert a JS RegExp object to a Mongo {$regex: ..., $options: ...}                                        // 405
// selector                                                                                                     // 408
                                                                                                                //
                                                                                                                //
function convertRegexpToMongoSelector(regexp) {                                                                 // 409
  check(regexp, RegExp); // safety belt                                                                         // 410
                                                                                                                //
  var selector = {                                                                                              // 412
    $regex: regexp.source                                                                                       // 412
  };                                                                                                            // 412
  var regexOptions = ''; // JS RegExp objects support 'i', 'm', and 'g'. Mongo regex $options                   // 413
  // support 'i', 'm', 'x', and 's'. So we support 'i' and 'm' here.                                            // 415
                                                                                                                //
  if (regexp.ignoreCase) regexOptions += 'i';                                                                   // 416
  if (regexp.multiline) regexOptions += 'm';                                                                    // 418
  if (regexOptions) selector.$options = regexOptions;                                                           // 420
  return selector;                                                                                              // 423
} // 'insert' immediately returns the inserted document's new _id.                                              // 424
// The others return values immediately if you are in a stub, an in-memory                                      // 427
// unmanaged collection, or a mongo-backed collection and you don't pass a                                      // 428
// callback. 'update' and 'remove' return the number of affected                                                // 429
// documents. 'upsert' returns an object with keys 'numberAffected' and, if an                                  // 430
// insert happened, 'insertedId'.                                                                               // 431
//                                                                                                              // 432
// Otherwise, the semantics are exactly like other methods: they take                                           // 433
// a callback as an optional last argument; if no callback is                                                   // 434
// provided, they block until the operation is complete, and throw an                                           // 435
// exception if it fails; if a callback is provided, then they don't                                            // 436
// necessarily block, and they call the callback when they finish with error and                                // 437
// result arguments.  (The insert method provides the document ID as its result;                                // 438
// update and remove provide the number of affected docs as the result; upsert                                  // 439
// provides an object with numberAffected and maybe insertedId.)                                                // 440
//                                                                                                              // 441
// On the client, blocking is impossible, so if a callback                                                      // 442
// isn't provided, they just return immediately and any error                                                   // 443
// information is lost.                                                                                         // 444
//                                                                                                              // 445
// There's one more tweak. On the client, if you don't provide a                                                // 446
// callback, then if there is an error, a message will be logged with                                           // 447
// Meteor._debug.                                                                                               // 448
//                                                                                                              // 449
// The intent (though this is actually determined by the underlying                                             // 450
// drivers) is that the operations should be done synchronously, not                                            // 451
// generating their result until the database has acknowledged                                                  // 452
// them. In the future maybe we should provide a flag to turn this                                              // 453
// off.                                                                                                         // 454
/**                                                                                                             // 456
 * @summary Insert a document in the collection.  Returns its unique _id.                                       //
 * @locus Anywhere                                                                                              //
 * @method  insert                                                                                              //
 * @memberOf Mongo.Collection                                                                                   //
 * @instance                                                                                                    //
 * @param {Object} doc The document to insert. May not yet have an _id attribute, in which case Meteor will generate one for you.
 * @param {Function} [callback] Optional.  If present, called with an error object as the first argument and, if no error, the _id as the second.
 */                                                                                                             //
                                                                                                                //
Mongo.Collection.prototype.insert = function () {                                                               // 465
  function insert(doc, callback) {                                                                              // 465
    // Make sure we were passed a document to insert                                                            // 466
    if (!doc) {                                                                                                 // 467
      throw new Error("insert requires an argument");                                                           // 468
    } // Shallow-copy the document and possibly generate an ID                                                  // 469
                                                                                                                //
                                                                                                                //
    doc = _.extend({}, doc);                                                                                    // 472
                                                                                                                //
    if ('_id' in doc) {                                                                                         // 474
      if (!doc._id || !(typeof doc._id === 'string' || doc._id instanceof Mongo.ObjectID)) {                    // 475
        throw new Error("Meteor requires document _id fields to be non-empty strings or ObjectIDs");            // 476
      }                                                                                                         // 477
    } else {                                                                                                    // 478
      var generateId = true; // Don't generate the id if we're the client and the 'outermost' call              // 479
      // This optimization saves us passing both the randomSeed and the id                                      // 482
      // Passing both is redundant.                                                                             // 483
                                                                                                                //
      if (this._isRemoteCollection()) {                                                                         // 484
        var enclosing = DDP._CurrentInvocation.get();                                                           // 485
                                                                                                                //
        if (!enclosing) {                                                                                       // 486
          generateId = false;                                                                                   // 487
        }                                                                                                       // 488
      }                                                                                                         // 489
                                                                                                                //
      if (generateId) {                                                                                         // 491
        doc._id = this._makeNewID();                                                                            // 492
      }                                                                                                         // 493
    } // On inserts, always return the id that we generated; on all other                                       // 494
    // operations, just return the result from the collection.                                                  // 497
                                                                                                                //
                                                                                                                //
    var chooseReturnValueFromCollectionResult = function (result) {                                             // 498
      if (doc._id) {                                                                                            // 499
        return doc._id;                                                                                         // 500
      } // XXX what is this for??                                                                               // 501
      // It's some iteraction between the callback to _callMutatorMethod and                                    // 504
      // the return value conversion                                                                            // 505
                                                                                                                //
                                                                                                                //
      doc._id = result;                                                                                         // 506
      return result;                                                                                            // 508
    };                                                                                                          // 509
                                                                                                                //
    var wrappedCallback = wrapCallback(callback, chooseReturnValueFromCollectionResult);                        // 511
                                                                                                                //
    if (this._isRemoteCollection()) {                                                                           // 513
      var result = this._callMutatorMethod("insert", [doc], wrappedCallback);                                   // 514
                                                                                                                //
      return chooseReturnValueFromCollectionResult(result);                                                     // 515
    } // it's my collection.  descend into the collection object                                                // 516
    // and propagate any exception.                                                                             // 519
                                                                                                                //
                                                                                                                //
    try {                                                                                                       // 520
      // If the user provided a callback and the collection implements this                                     // 521
      // operation asynchronously, then queryRet will be undefined, and the                                     // 522
      // result will be returned through the callback instead.                                                  // 523
      var _result = this._collection.insert(doc, wrappedCallback);                                              // 524
                                                                                                                //
      return chooseReturnValueFromCollectionResult(_result);                                                    // 525
    } catch (e) {                                                                                               // 526
      if (callback) {                                                                                           // 527
        callback(e);                                                                                            // 528
        return null;                                                                                            // 529
      }                                                                                                         // 530
                                                                                                                //
      throw e;                                                                                                  // 531
    }                                                                                                           // 532
  }                                                                                                             // 533
                                                                                                                //
  return insert;                                                                                                // 465
}(); /**                                                                                                        // 465
      * @summary Modify one or more documents in the collection. Returns the number of matched documents.       //
      * @locus Anywhere                                                                                         //
      * @method update                                                                                          //
      * @memberOf Mongo.Collection                                                                              //
      * @instance                                                                                               //
      * @param {MongoSelector} selector Specifies which documents to modify                                     //
      * @param {MongoModifier} modifier Specifies how to modify the documents                                   //
      * @param {Object} [options]                                                                               //
      * @param {Boolean} options.multi True to modify all matching documents; false to only modify one of the matching documents (the default).
      * @param {Boolean} options.upsert True to insert a document if no matching documents are found.           //
      * @param {Function} [callback] Optional.  If present, called with an error object as the first argument and, if no error, the number of affected documents as the second.
      */                                                                                                        //
                                                                                                                //
Mongo.Collection.prototype.update = function () {                                                               // 548
  function update(selector, modifier) {                                                                         // 548
    for (var _len = arguments.length, optionsAndCallback = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {
      optionsAndCallback[_key - 2] = arguments[_key];                                                           // 548
    }                                                                                                           // 548
                                                                                                                //
    var callback = popCallbackFromArgs(optionsAndCallback); // We've already popped off the callback, so we are left with an array
    // of one or zero items                                                                                     // 552
                                                                                                                //
    var options = _.clone(optionsAndCallback[0]) || {};                                                         // 553
    var insertedId = void 0;                                                                                    // 554
                                                                                                                //
    if (options && options.upsert) {                                                                            // 555
      // set `insertedId` if absent.  `insertedId` is a Meteor extension.                                       // 556
      if (options.insertedId) {                                                                                 // 557
        if (!(typeof options.insertedId === 'string' || options.insertedId instanceof Mongo.ObjectID)) throw new Error("insertedId must be string or ObjectID");
        insertedId = options.insertedId;                                                                        // 560
      } else if (!selector._id) {                                                                               // 561
        insertedId = this._makeNewID();                                                                         // 562
        options.insertedId = insertedId;                                                                        // 563
      }                                                                                                         // 564
    }                                                                                                           // 565
                                                                                                                //
    selector = Mongo.Collection._rewriteSelector(selector, {                                                    // 567
      fallbackId: insertedId                                                                                    // 568
    });                                                                                                         // 568
    var wrappedCallback = wrapCallback(callback);                                                               // 570
                                                                                                                //
    if (this._isRemoteCollection()) {                                                                           // 572
      var args = [selector, modifier, options];                                                                 // 573
      return this._callMutatorMethod("update", args, wrappedCallback);                                          // 579
    } // it's my collection.  descend into the collection object                                                // 580
    // and propagate any exception.                                                                             // 583
                                                                                                                //
                                                                                                                //
    try {                                                                                                       // 584
      // If the user provided a callback and the collection implements this                                     // 585
      // operation asynchronously, then queryRet will be undefined, and the                                     // 586
      // result will be returned through the callback instead.                                                  // 587
      return this._collection.update(selector, modifier, options, wrappedCallback);                             // 588
    } catch (e) {                                                                                               // 590
      if (callback) {                                                                                           // 591
        callback(e);                                                                                            // 592
        return null;                                                                                            // 593
      }                                                                                                         // 594
                                                                                                                //
      throw e;                                                                                                  // 595
    }                                                                                                           // 596
  }                                                                                                             // 597
                                                                                                                //
  return update;                                                                                                // 548
}(); /**                                                                                                        // 548
      * @summary Remove documents from the collection                                                           //
      * @locus Anywhere                                                                                         //
      * @method remove                                                                                          //
      * @memberOf Mongo.Collection                                                                              //
      * @instance                                                                                               //
      * @param {MongoSelector} selector Specifies which documents to remove                                     //
      * @param {Function} [callback] Optional.  If present, called with an error object as its argument.        //
      */                                                                                                        //
                                                                                                                //
Mongo.Collection.prototype.remove = function () {                                                               // 608
  function remove(selector, callback) {                                                                         // 608
    selector = Mongo.Collection._rewriteSelector(selector);                                                     // 609
    var wrappedCallback = wrapCallback(callback);                                                               // 611
                                                                                                                //
    if (this._isRemoteCollection()) {                                                                           // 613
      return this._callMutatorMethod("remove", [selector], wrappedCallback);                                    // 614
    } // it's my collection.  descend into the collection object                                                // 615
    // and propagate any exception.                                                                             // 618
                                                                                                                //
                                                                                                                //
    try {                                                                                                       // 619
      // If the user provided a callback and the collection implements this                                     // 620
      // operation asynchronously, then queryRet will be undefined, and the                                     // 621
      // result will be returned through the callback instead.                                                  // 622
      return this._collection.remove(selector, wrappedCallback);                                                // 623
    } catch (e) {                                                                                               // 624
      if (callback) {                                                                                           // 625
        callback(e);                                                                                            // 626
        return null;                                                                                            // 627
      }                                                                                                         // 628
                                                                                                                //
      throw e;                                                                                                  // 629
    }                                                                                                           // 630
  }                                                                                                             // 631
                                                                                                                //
  return remove;                                                                                                // 608
}(); // Determine if this collection is simply a minimongo representation of a real                             // 608
// database on another server                                                                                   // 634
                                                                                                                //
                                                                                                                //
Mongo.Collection.prototype._isRemoteCollection = function () {                                                  // 635
  function _isRemoteCollection() {                                                                              // 635
    // XXX see #MeteorServerNull                                                                                // 636
    return this._connection && this._connection !== Meteor.server;                                              // 637
  }                                                                                                             // 638
                                                                                                                //
  return _isRemoteCollection;                                                                                   // 635
}(); // Convert the callback to not return a result if there is an error                                        // 635
                                                                                                                //
                                                                                                                //
function wrapCallback(callback, convertResult) {                                                                // 641
  if (!callback) {                                                                                              // 642
    return;                                                                                                     // 643
  } // If no convert function was passed in, just use a "blank function"                                        // 644
                                                                                                                //
                                                                                                                //
  convertResult = convertResult || _.identity;                                                                  // 647
  return function (error, result) {                                                                             // 649
    callback(error, !error && convertResult(result));                                                           // 650
  };                                                                                                            // 651
} /**                                                                                                           // 652
   * @summary Modify one or more documents in the collection, or insert one if no matching documents were found. Returns an object with keys `numberAffected` (the number of documents modified)  and `insertedId` (the unique _id of the document that was inserted, if any).
   * @locus Anywhere                                                                                            //
   * @param {MongoSelector} selector Specifies which documents to modify                                        //
   * @param {MongoModifier} modifier Specifies how to modify the documents                                      //
   * @param {Object} [options]                                                                                  //
   * @param {Boolean} options.multi True to modify all matching documents; false to only modify one of the matching documents (the default).
   * @param {Function} [callback] Optional.  If present, called with an error object as the first argument and, if no error, the number of affected documents as the second.
   */                                                                                                           //
                                                                                                                //
Mongo.Collection.prototype.upsert = function () {                                                               // 663
  function upsert(selector, modifier, options, callback) {                                                      // 663
    if (!callback && typeof options === "function") {                                                           // 665
      callback = options;                                                                                       // 666
      options = {};                                                                                             // 667
    }                                                                                                           // 668
                                                                                                                //
    var updateOptions = _.extend({}, options, {                                                                 // 670
      _returnObject: true,                                                                                      // 671
      upsert: true                                                                                              // 672
    });                                                                                                         // 670
                                                                                                                //
    return this.update(selector, modifier, updateOptions, callback);                                            // 675
  }                                                                                                             // 676
                                                                                                                //
  return upsert;                                                                                                // 663
}(); // We'll actually design an index API later. For now, we just pass through to                              // 663
// Mongo's, but make it synchronous.                                                                            // 679
                                                                                                                //
                                                                                                                //
Mongo.Collection.prototype._ensureIndex = function (index, options) {                                           // 680
  var self = this;                                                                                              // 681
  if (!self._collection._ensureIndex) throw new Error("Can only call _ensureIndex on server collections");      // 682
                                                                                                                //
  self._collection._ensureIndex(index, options);                                                                // 684
};                                                                                                              // 685
                                                                                                                //
Mongo.Collection.prototype._dropIndex = function (index) {                                                      // 686
  var self = this;                                                                                              // 687
  if (!self._collection._dropIndex) throw new Error("Can only call _dropIndex on server collections");          // 688
                                                                                                                //
  self._collection._dropIndex(index);                                                                           // 690
};                                                                                                              // 691
                                                                                                                //
Mongo.Collection.prototype._dropCollection = function () {                                                      // 692
  var self = this;                                                                                              // 693
  if (!self._collection.dropCollection) throw new Error("Can only call _dropCollection on server collections");
                                                                                                                //
  self._collection.dropCollection();                                                                            // 696
};                                                                                                              // 697
                                                                                                                //
Mongo.Collection.prototype._createCappedCollection = function (byteSize, maxDocuments) {                        // 698
  var self = this;                                                                                              // 699
  if (!self._collection._createCappedCollection) throw new Error("Can only call _createCappedCollection on server collections");
                                                                                                                //
  self._collection._createCappedCollection(byteSize, maxDocuments);                                             // 702
}; /**                                                                                                          // 703
    * @summary Returns the [`Collection`](http://mongodb.github.io/node-mongodb-native/2.2/api/Collection.html) object corresponding to this collection from the [npm `mongodb` driver module](https://www.npmjs.com/package/mongodb) which is wrapped by `Mongo.Collection`.
    * @locus Server                                                                                             //
    */                                                                                                          //
                                                                                                                //
Mongo.Collection.prototype.rawCollection = function () {                                                        // 709
  var self = this;                                                                                              // 710
                                                                                                                //
  if (!self._collection.rawCollection) {                                                                        // 711
    throw new Error("Can only call rawCollection on server collections");                                       // 712
  }                                                                                                             // 713
                                                                                                                //
  return self._collection.rawCollection();                                                                      // 714
}; /**                                                                                                          // 715
    * @summary Returns the [`Db`](http://mongodb.github.io/node-mongodb-native/2.2/api/Db.html) object corresponding to this collection's database connection from the [npm `mongodb` driver module](https://www.npmjs.com/package/mongodb) which is wrapped by `Mongo.Collection`.
    * @locus Server                                                                                             //
    */                                                                                                          //
                                                                                                                //
Mongo.Collection.prototype.rawDatabase = function () {                                                          // 721
  var self = this;                                                                                              // 722
                                                                                                                //
  if (!(self._driver.mongo && self._driver.mongo.db)) {                                                         // 723
    throw new Error("Can only call rawDatabase on server collections");                                         // 724
  }                                                                                                             // 725
                                                                                                                //
  return self._driver.mongo.db;                                                                                 // 726
}; /**                                                                                                          // 727
    * @summary Create a Mongo-style `ObjectID`.  If you don't specify a `hexString`, the `ObjectID` will generated randomly (not using MongoDB's ID construction rules).
    * @locus Anywhere                                                                                           //
    * @class                                                                                                    //
    * @param {String} [hexString] Optional.  The 24-character hexadecimal contents of the ObjectID to create    //
    */                                                                                                          //
                                                                                                                //
Mongo.ObjectID = MongoID.ObjectID; /**                                                                          // 736
                                    * @summary To create a cursor, use find. To access the documents in a cursor, use forEach, map, or fetch.
                                    * @class                                                                    //
                                    * @instanceName cursor                                                      //
                                    */                                                                          //
Mongo.Cursor = LocalCollection.Cursor; /**                                                                      // 743
                                        * @deprecated in 0.9.1                                                  //
                                        */                                                                      //
Mongo.Collection.Cursor = Mongo.Cursor; /**                                                                     // 748
                                         * @deprecated in 0.9.1                                                 //
                                         */                                                                     //
Mongo.Collection.ObjectID = Mongo.ObjectID; /**                                                                 // 753
                                             * @deprecated in 0.9.1                                             //
                                             */                                                                 //
Meteor.Collection = Mongo.Collection; // Allow deny stuff is now in the allow-deny package                      // 758
                                                                                                                //
_.extend(Meteor.Collection.prototype, AllowDeny.CollectionPrototype);                                           // 761
                                                                                                                //
function popCallbackFromArgs(args) {                                                                            // 763
  // Pull off any callback (or perhaps a 'callback' variable that was passed                                    // 764
  // in undefined, like how 'upsert' does it).                                                                  // 765
  if (args.length && (args[args.length - 1] === undefined || args[args.length - 1] instanceof Function)) {      // 766
    return args.pop();                                                                                          // 769
  }                                                                                                             // 770
}                                                                                                               // 771
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}}}}},{"extensions":[".js",".json"]});
require("./node_modules/meteor/mongo/local_collection_driver.js");
require("./node_modules/meteor/mongo/collection.js");

/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package.mongo = {}, {
  Mongo: Mongo
});

})();


//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var Tracker = Package.tracker.Tracker;
var Deps = Package.tracker.Deps;
var Retry = Package.retry.Retry;
var DDP = Package['ddp-client'].DDP;
var Mongo = Package.mongo.Mongo;
var _ = Package.underscore._;

/* Package-scope variables */
var ClientVersions, Autoupdate;

(function(){

/////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                         //
// packages/autoupdate/autoupdate_client.js                                                //
//                                                                                         //
/////////////////////////////////////////////////////////////////////////////////////////////
                                                                                           //
// Subscribe to the `meteor_autoupdate_clientVersions` collection,                         // 1
// which contains the set of acceptable client versions.                                   // 2
//                                                                                         // 3
// A "hard code push" occurs when the running client version is not in                     // 4
// the set of acceptable client versions (or the server updates the                        // 5
// collection, there is a published client version marked `current` and                    // 6
// the running client version is no longer in the set).                                    // 7
//                                                                                         // 8
// When the `reload` package is loaded, a hard code push causes                            // 9
// the browser to reload, so that it will load the latest client                           // 10
// version from the server.                                                                // 11
//                                                                                         // 12
// A "soft code push" represents the situation when the running client                     // 13
// version is in the set of acceptable versions, but there is a newer                      // 14
// version available on the server.                                                        // 15
//                                                                                         // 16
// `Autoupdate.newClientAvailable` is a reactive data source which                         // 17
// becomes `true` if there is a new version of the client is available on                  // 18
// the server.                                                                             // 19
//                                                                                         // 20
// This package doesn't implement a soft code reload process itself,                       // 21
// but `newClientAvailable` could be used for example to display a                         // 22
// "click to reload" link to the user.                                                     // 23
                                                                                           // 24
// The client version of the client code currently running in the                          // 25
// browser.                                                                                // 26
var autoupdateVersion = __meteor_runtime_config__.autoupdateVersion || "unknown";          // 27
var autoupdateVersionRefreshable =                                                         // 28
  __meteor_runtime_config__.autoupdateVersionRefreshable || "unknown";                     // 29
                                                                                           // 30
// The collection of acceptable client versions.                                           // 31
ClientVersions = new Mongo.Collection("meteor_autoupdate_clientVersions");                 // 32
                                                                                           // 33
Autoupdate = {};                                                                           // 34
                                                                                           // 35
Autoupdate.newClientAvailable = function () {                                              // 36
  return !! ClientVersions.findOne({                                                       // 37
               _id: "version",                                                             // 38
               version: {$ne: autoupdateVersion} }) ||                                     // 39
         !! ClientVersions.findOne({                                                       // 40
               _id: "version-refreshable",                                                 // 41
               version: {$ne: autoupdateVersionRefreshable} });                            // 42
};                                                                                         // 43
Autoupdate._ClientVersions = ClientVersions;  // Used by a self-test                       // 44
                                                                                           // 45
var knownToSupportCssOnLoad = false;                                                       // 46
                                                                                           // 47
var retry = new Retry({                                                                    // 48
  // Unlike the stream reconnect use of Retry, which we want to be instant                 // 49
  // in normal operation, this is a wacky failure. We don't want to retry                  // 50
  // right away, we can start slowly.                                                      // 51
  //                                                                                       // 52
  // A better way than timeconstants here might be to use the knowledge                    // 53
  // of when we reconnect to help trigger these retries. Typically, the                    // 54
  // server fixing code will result in a restart and reconnect, but                        // 55
  // potentially the subscription could have a transient error.                            // 56
  minCount: 0, // don't do any immediate retries                                           // 57
  baseTimeout: 30*1000 // start with 30s                                                   // 58
});                                                                                        // 59
var failures = 0;                                                                          // 60
                                                                                           // 61
Autoupdate._retrySubscription = function () {                                              // 62
  Meteor.subscribe("meteor_autoupdate_clientVersions", {                                   // 63
    onError: function (error) {                                                            // 64
      Meteor._debug("autoupdate subscription failed:", error);                             // 65
      failures++;                                                                          // 66
      retry.retryLater(failures, function () {                                             // 67
        // Just retry making the subscription, don't reload the whole                      // 68
        // page. While reloading would catch more cases (for example,                      // 69
        // the server went back a version and is now doing old-style hot                   // 70
        // code push), it would also be more prone to reload loops,                        // 71
        // which look really bad to the user. Just retrying the                            // 72
        // subscription over DDP means it is at least possible to fix by                   // 73
        // updating the server.                                                            // 74
        Autoupdate._retrySubscription();                                                   // 75
      });                                                                                  // 76
    },                                                                                     // 77
    onReady: function () {                                                                 // 78
      if (Package.reload) {                                                                // 79
        var checkNewVersionDocument = function (doc) {                                     // 80
          var self = this;                                                                 // 81
          if (doc._id === 'version-refreshable' &&                                         // 82
              doc.version !== autoupdateVersionRefreshable) {                              // 83
            autoupdateVersionRefreshable = doc.version;                                    // 84
            // Switch out old css links for the new css links. Inspired by:                // 85
            // https://github.com/guard/guard-livereload/blob/master/js/livereload.js#L710
            var newCss = (doc.assets && doc.assets.allCss) || [];                          // 87
            var oldLinks = [];                                                             // 88
            _.each(document.getElementsByTagName('link'), function (link) {                // 89
              if (link.className === '__meteor-css__') {                                   // 90
                oldLinks.push(link);                                                       // 91
              }                                                                            // 92
            });                                                                            // 93
                                                                                           // 94
            var waitUntilCssLoads = function  (link, callback) {                           // 95
              var executeCallback = _.once(callback);                                      // 96
              link.onload = function () {                                                  // 97
                knownToSupportCssOnLoad = true;                                            // 98
                executeCallback();                                                         // 99
              };                                                                           // 100
              if (! knownToSupportCssOnLoad) {                                             // 101
                var id = Meteor.setInterval(function () {                                  // 102
                  if (link.sheet) {                                                        // 103
                    executeCallback();                                                     // 104
                    Meteor.clearInterval(id);                                              // 105
                  }                                                                        // 106
                }, 50);                                                                    // 107
              }                                                                            // 108
            };                                                                             // 109
                                                                                           // 110
            var removeOldLinks = _.after(newCss.length, function () {                      // 111
              _.each(oldLinks, function (oldLink) {                                        // 112
                oldLink.parentNode.removeChild(oldLink);                                   // 113
              });                                                                          // 114
            });                                                                            // 115
                                                                                           // 116
            var attachStylesheetLink = function (newLink) {                                // 117
              document.getElementsByTagName("head").item(0).appendChild(newLink);          // 118
                                                                                           // 119
              waitUntilCssLoads(newLink, function () {                                     // 120
                Meteor.setTimeout(removeOldLinks, 200);                                    // 121
              });                                                                          // 122
            };                                                                             // 123
                                                                                           // 124
            if (newCss.length !== 0) {                                                     // 125
              _.each(newCss, function (css) {                                              // 126
                var newLink = document.createElement("link");                              // 127
                newLink.setAttribute("rel", "stylesheet");                                 // 128
                newLink.setAttribute("type", "text/css");                                  // 129
                newLink.setAttribute("class", "__meteor-css__");                           // 130
                newLink.setAttribute("href", css.url);                                     // 131
                attachStylesheetLink(newLink);                                             // 132
              });                                                                          // 133
            } else {                                                                       // 134
              removeOldLinks();                                                            // 135
            }                                                                              // 136
                                                                                           // 137
          }                                                                                // 138
          else if (doc._id === 'version' && doc.version !== autoupdateVersion) {           // 139
            handle && handle.stop();                                                       // 140
                                                                                           // 141
            if (Package.reload) {                                                          // 142
              Package.reload.Reload._reload();                                             // 143
            }                                                                              // 144
          }                                                                                // 145
        };                                                                                 // 146
                                                                                           // 147
        var handle = ClientVersions.find().observe({                                       // 148
          added: checkNewVersionDocument,                                                  // 149
          changed: checkNewVersionDocument                                                 // 150
        });                                                                                // 151
      }                                                                                    // 152
    }                                                                                      // 153
  });                                                                                      // 154
};                                                                                         // 155
Autoupdate._retrySubscription();                                                           // 156
                                                                                           // 157
/////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package.autoupdate = {}, {
  Autoupdate: Autoupdate
});

})();


/* Imports for global scope */

Meteor = Package.meteor.Meteor;
global = Package.meteor.global;
meteorEnv = Package.meteor.meteorEnv;
WebApp = Package.webapp.WebApp;
_ = Package.underscore._;
DDP = Package['ddp-client'].DDP;
Autoupdate = Package.autoupdate.Autoupdate;
Reload = Package.reload.Reload;



// Disable hot-code-push
Meteor._reload.onMigrate(function () {
  return [false];
});
